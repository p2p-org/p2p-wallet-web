{"version":3,"file":"e9460a4b965522580452.js","mappings":"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","sources":["webpack://@p2p-wallet-web/web/../core/src/constants/publicKeys.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/seed/constants.ts","webpack://@p2p-wallet-web/web/../core/src/hooks/useStorage/utils/persistence/storage_expiring.ts","webpack://@p2p-wallet-web/web/../core/src/hooks/useStorage/utils/persistence/persistence.ts","webpack://@p2p-wallet-web/web/../core/src/hooks/useStorage/useStorage.ts","webpack://@p2p-wallet-web/web/../core/src/internal/constants/storageKeys.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/seed/utils/encryption.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/seed/utils/unencryptedSeedAndMnemonic.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/seed/hooks/useEncryptedSeedAndMnemonic.ts","webpack://@p2p-wallet-web/web/../core/src/internal/utils/noop.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/seed/provider.tsx","webpack://@p2p-wallet-web/web/../core/src/contexts/seed/hooks/useTryUnlockSeedAndMnemonic.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/seed/hooks/useUnencryptedSeedAndMnemonic.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/seed/utils/hd_wallet.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/solana/constants.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/tokens/utils/makeTokenMap.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/tokens/provider.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/tokens/hooks/useTokens.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/tokens/hooks/useToken.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/tokenAccounts/hooks/useTokenAccount.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/tokenAccounts/hooks/useProgramAddresses.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/tokenAccounts/hooks/useTokenAccounts.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/tokenAccounts/hooks/useTokenAccountAmount.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/tokenAccounts/utils/precacheUserTokenAccounts.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/tokenAccounts/provider.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/models/transaction/parser/parsers/swap/types.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/models/transaction/parser/parsers/swap/OrcaSwapParser.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/models/transaction/parser/utils/instructionsData.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/models/transaction/parser/parsers/swap/SerumSwapParser.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/models/transaction/parser/parsers/system/CreateAccountParser.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/models/transaction/parser/utils/getFirstProgram.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/models/transaction/parser/parsers/system/TransferParser.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/hooks/useParsedTransactionsData/useParsedTransactionsData.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/models/transaction/parser/parser.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/hooks/useParsedTransactionData.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/hooks/useTransaction/useTransaction.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/hooks/useTransactionSignatures.ts","webpack://@p2p-wallet-web/web/../core/src/contexts/transactionsHistory/utils/common.ts","webpack://@p2p-wallet-web/web/../core/src/polyfills.js","webpack://@p2p-wallet-web/web/../sail/src/errors/categorizeTransactionError.ts","webpack://@p2p-wallet-web/web/../sail/src/errors/errors.ts","webpack://@p2p-wallet-web/web/../sail/src/hooks/common/useKeypair.ts","webpack://@p2p-wallet-web/web/../sail/src/hooks/common/usePubkey.ts","webpack://@p2p-wallet-web/web/../sail/src/hooks/useAccountsData.ts","webpack://@p2p-wallet-web/web/../sail/src/hooks/useAccountData.ts","webpack://@p2p-wallet-web/web/../sail/src/hooks/useParsedAccountsData.ts","webpack://@p2p-wallet-web/web/../sail/src/hooks/useTransactionsData.ts","webpack://@p2p-wallet-web/web/../sail/src/hooks/useTransactionData.ts","webpack://@p2p-wallet-web/web/../sail/src/internal/accounts/emitter.ts","webpack://@p2p-wallet-web/web/../sail/src/internal/accounts/fetchKeysUsingLoader.ts","webpack://@p2p-wallet-web/web/../sail/src/internal/accounts/utils/getMultipleAccounts.ts","webpack://@p2p-wallet-web/web/../sail/src/internal/accounts/useAccountsInternal.ts","webpack://@p2p-wallet-web/web/../sail/src/internal/transactions/emitter.ts","webpack://@p2p-wallet-web/web/../sail/src/internal/transactions/fetchKeysUsingLoader.ts","webpack://@p2p-wallet-web/web/../sail/src/internal/transactions/utils/getMultipleTransactions.ts","webpack://@p2p-wallet-web/web/../sail/src/internal/transactions/useTransactionsInternal.ts","webpack://@p2p-wallet-web/web/../sail/src/internal/tx/useHandleTXsInternal.ts","webpack://@p2p-wallet-web/web/../sail/src/parsers.ts","webpack://@p2p-wallet-web/web/../sail/src/provider.ts","webpack://@p2p-wallet-web/web/../sail/src/utils/index.ts","webpack://@p2p-wallet-web/web/../token-utils/src/tokenAmount.ts","webpack://@p2p-wallet-web/web/../ui/src/styles/breakpoints/breakpoints.ts","webpack://@p2p-wallet-web/web/../ui/src/styles/breakpoints/hooks.ts","webpack://@p2p-wallet-web/web/../ui/src/styles/themes/utils/rgb.ts","webpack://@p2p-wallet-web/web/../ui/src/styles/themes/utils/generate.ts","webpack://@p2p-wallet-web/web/../ui/src/styles/themes/light.ts","webpack://@p2p-wallet-web/web/../ui/src/styles/themes/dark.ts","webpack://@p2p-wallet-web/web/../ui/src/styles/themes/index.ts","webpack://@p2p-wallet-web/web/../ui/src/styles/helpers/zIndex.ts","webpack://@p2p-wallet-web/web/../ui/src/styles/helpers/borders.ts","webpack://@p2p-wallet-web/web/../ui/src/styles/helpers/shadows.ts","webpack://@p2p-wallet-web/web/./src/components/common/Intercom/Intercom.tsx","webpack://@p2p-wallet-web/web/src/components/common/ToastManager/Toast.tsx","webpack://@p2p-wallet-web/web/src/components/common/ToastManager/ToastManager.tsx","webpack://@p2p-wallet-web/web/src/components/common/NotifyToast/NotifyToast.tsx","webpack://@p2p-wallet-web/web/./src/new/services/BuyService/MoonpayProvider/MoonpayProvider.ts","webpack://@p2p-wallet-web/web/./src/new/services/BuyService/BuyService.ts","webpack://@p2p-wallet-web/web/./src/new/services/LocationService/LocationService.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Buy/Buy.ViewModel.ts","webpack://@p2p-wallet-web/web/src/components/common/Card/Card.tsx","webpack://@p2p-wallet-web/web/src/components/common/Widget/Widget.tsx","webpack://@p2p-wallet-web/web/src/components/common/WidgetPage/WidgetPage.tsx","webpack://@p2p-wallet-web/web/src/components/common/WidgetPageWithBottom/WidgetPageWithBottom.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Buy/Subviews/Moonpay/WidgetPageBuy/WidgetPageBuy.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Buy/Subviews/Moonpay/MoonpayIframeWidget.tsx","webpack://@p2p-wallet-web/web/./src/app/hooks/metrics/useTrackEventOpen.ts","webpack://@p2p-wallet-web/web/./src/new/services/BuyService/MoonpayProvider/utils.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Buy/Subviews/Moonpay/Button/MoonpayButton.tsx","webpack://@p2p-wallet-web/web/./src/new/services/ModalService/ModalService.ts","webpack://@p2p-wallet-web/web/./src/new/services/ModalService/types.ts","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/Select/ListMobile/ListMobile.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/Select/ListMobile/ListMobile.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Select/Select.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Select/SelectItem/SelectItem.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Buy/Subviews/Moonpay/CurrencySelector/CurrencySelector.tsx","webpack://@p2p-wallet-web/web/./src/components/ui/AccordionDetails/AccordionDetails.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Buy/Subviews/Moonpay/Details/Details.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/AmountTypeButton/AmountTypeButton.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/ui/InputAmount/InputAmount.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Buy/Subviews/Moonpay/Inputs/Inputs.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Buy/Subviews/Moonpay/MoonpayWidget.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Layout/DesktopLayout/ColumnLeft/LeftNavMenu/LeftNavMenu.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/ui/Card/Card.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Widget/Widget.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/ui/Avatar/Avatar.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Layout/DesktopLayout/ColumnLeft/ProfileWidget/ProfileWidget.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Layout/DesktopLayout/ColumnLeft/ColumnLeft.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/Layout/constants.ts","webpack://@p2p-wallet-web/web/./src/new/utils/hooks/useWidthWithoutScrollbar.ts","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/ScollFix/ScrollFix.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Layout/DesktopLayout/DesktopLayout.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/Layout/DesktopLayout/Header/constants.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Layout/DesktopLayout/Header/Header.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/Layout/Layout.ViewModel.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Layout/MobileLayout/MobileFooterTabs/MobileFooterTabs.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Layout/MobileLayout/MobileHeader/MobileHeader.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Layout/MobileLayout/MobileLayout.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/Layout/Layout.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Buy/Buy.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Home/Home.ViewModel.ts","webpack://@p2p-wallet-web/web/src/components/common/NavButtons/NavButton.ts","webpack://@p2p-wallet-web/web/src/components/common/NavButtons/NavButtonIcon/NavButtonIcon.tsx","webpack://@p2p-wallet-web/web/src/components/common/NavButtons/NavButtons.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/EmptyWalletView/EmptyWalletView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/Header/common/BalanceView/BalanceView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/Header/Desktop/Desktop.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/Header/Mobile/Mobile.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Home/Subviews/Header/Header.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/NavButtonsMenu/NavButtonsMenu.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/WalletsCollectionView/common/styled.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/SwipeToRevealActions/SwipeActionButton/SwipeActionButton.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/SwipeToRevealActions/SwipeToRevealActions.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/SwipeToRevealActions/SwipeActionButton/constants.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/WalletsCollectionView/common/BaseWalletCell/TokenMenu/TokenMenu.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/WalletsCollectionView/common/BaseWalletCell/BaseWalletCell.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Home/Subviews/WalletsCollectionView/HiddenWalletsSection/HidedWalletCell/HidedWalletCell.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/WalletsCollectionView/HiddenWalletsSection/HiddenWalletsSection.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Home/Subviews/WalletsCollectionView/WalletsSection/VisibleWalletCell/VisibleWalletCell.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/WalletsCollectionView/WalletsSection/WalletsSection.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Subviews/WalletsCollectionView/WalletsCollectionView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Home/Home.tsx","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/models/RenVMError.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/models/MintTransactionInput.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/models/Network.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/models/ResponseQueryBlockState.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/models/ResponseQueryConfig.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/models/ResponseQueryTxMint.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/models/ResponseSubmitTxMint.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/models/Selector.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/actions/BurnAndRelease.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/actions/LockAndMint/LockAndMint.Session.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/actions/LockAndMint/LockAndMint.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/actions/LockAndMint/LockAndMint.IncomingTransaction.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/actions/LockAndMint/LockAndMint.ProcessingTx.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/chains/RenVMChainType.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/utils/Hash.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/chains/Solana/SolanaChainRenProgram.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/chains/Solana/SolanaChain.ts","webpack://@p2p-wallet-web/web/./src/new/utils/ErrorExtensions.ts","webpack://@p2p-wallet-web/web/./src/new/utils/promise/PromiseExtensions.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/RPCClient/RPCClient.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/services/BurnAndReleaseService/BurnAndReleasePersistentStore.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/services/BurnAndReleaseService/BurnAndReleaseService.ts","webpack://@p2p-wallet-web/web/./src/new/utils/promise/cancellablePromiseRetry.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/services/LockAndMintService/LockAndMintServiceImpl/LockAndMintServiceImpl.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/services/LockAndMintService/LockAndMintServiceImpl/Models.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/RenVM/services/LockAndMintService/LockAndMintServicePersistentStore.ts","webpack://@p2p-wallet-web/web/./src/new/services/RenVM/BurnAndReleaseServicePersistentStore.ts","webpack://@p2p-wallet-web/web/./src/new/services/RenVM/RpcClient.ts","webpack://@p2p-wallet-web/web/./src/new/services/RenVM/RenVMSolanaChainProvider.ts","webpack://@p2p-wallet-web/web/./src/new/services/RenVM/BurnAndReleaseService.ts","webpack://@p2p-wallet-web/web/./src/config/constants.ts","webpack://@p2p-wallet-web/web/./src/new/ui/notifications/mintNotificationRenderer.tsx","webpack://@p2p-wallet-web/web/./src/new/services/RenVM/LockAndMintServicePersistentStore.ts","webpack://@p2p-wallet-web/web/./src/new/services/RenVM/LockAndMintService.ts","webpack://@p2p-wallet-web/web/./src/new/services/RenVM/utils/notifyTransactionIsWaitingForMint.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Main.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Main.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/WidgetPage/WidgetPage.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/utils.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/ReceiveBitcoin.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/Receive.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/LoaderBlock/LoaderBlock.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/UsernameAddressWidget/UserNamedAddressWidget.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/UsernameAddressWidget/UsernameAddressWidget.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/ReceiveToken/common/styled.ts","webpack://@p2p-wallet-web/web/src/components/common/Loader/Loader.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/Hint/Hint.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/ui/Accordion/Accordion.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/ui/AccordionDetails/AccordionTitle.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/ui/AccordionDetails/common.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/ui/AccordionDetails/AccordionDetails.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/RenBTCReceivingStatuses/CollectionView/Cell/common/styled.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/RenBTCReceivingStatuses/CollectionView/Cell/Record.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/RenBTCReceivingStatuses/CollectionView/Cell/utils/prepareAccordionList.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/RenBTCReceivingStatuses/CollectionView/Cell/Cell.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/RenBTCReceivingStatuses/CollectionView/Cell/utils/prepareRecords.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/RenBTCReceivingStatuses/CollectionView/CollectionView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/RenBTCReceivingStatuses/RenBTCReceivingStatuses.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/RenBTCReceivingStatuses/RenBTCReceivingStatuses.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/ReceiveToken/Bitcoin/ReceiveBitcoin.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/ReceiveToken/NetworkSelect/NetworkSelect.tsx","webpack://@p2p-wallet-web/web/./src/new/utils/common.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/ReceiveToken/Solana/ReceiveSolana.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/ReceiveToken/Solana/ReceiveSolana.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/ReceiveToken/ReceiveToken.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/StaticSectionsCollectionVitualizedView/StaticSectionsCollectionVirtualizedView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/SupportedTokens/common/EmptyError/EmptyError.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/SupportedTokens/common/Hint/Hint.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/SupportedTokens/CollectionView/Cell.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/SupportedTokens/CollectionView/CollectionView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/SupportedTokens/SupportedTokens.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Receive/SupportedTokens/SupportedTokens.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Receive/Receive.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/NetworkSelect/NetworkView/NetworkView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/NetworkSelect/NetworkSelect.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/ActionButton/ActionButton.tsx","webpack://@p2p-wallet-web/web/src/components/ui/InputAmount/InputAmount.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/ChooseTokenAndAmount/WalletSelectorContent/WalletSelectorContent.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Send/ChooseTokenAndAmount/ChooseTokenAndAmount.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/ChooseTokenAndAmount/ChooseTokenAndAmount.tsx","webpack://@p2p-wallet-web/web/./src/new/services/SendService/SendServiceError.ts","webpack://@p2p-wallet-web/web/./src/new/services/SendService/SendServiceRelayMethod.ts","webpack://@p2p-wallet-web/web/./src/new/services/SendService/SendService.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/FeesView/FeeTransactionTooltip/FeeTransactionTooltip.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/FeesView/FeeView/WalletSelectorContent/WalletSelectorContent.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/FeesView/FeeView/FeeView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Send/FeesView/FeesView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/SelectAddress/AttentionView/AttentionView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/SelectAddress/ErrorView/ErrorView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Send/Send.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/utils/RegularExpression.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/SelectAddress/RecipientView/RecipientView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Send/SelectAddress/Subviews/RecipientsCollectionView/RecipientCell.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/SelectAddress/Subviews/RecipientsCollectionView/RecipientsCollectionView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Send/SelectAddress/Subviews/RecipientsCollectionView/RecipientsList.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Send/SelectAddress/SelectAddress.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/SelectAddress/AddressInputView/AddressInputView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/SelectAddress/SelectAddress.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Send/Send.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Settings/Settings.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Settings/Settings.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/SettingsNetwork/SettingsNetwork.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/ui/RadioButton/RadioButton.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/SettingsNetwork/SettingsNetwork.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Swap/Swap/types.ts","webpack://@p2p-wallet-web/web/./src/new/services/SwapRelayService/SwapRelayService.ts","webpack://@p2p-wallet-web/web/./src/new/services/Swap/Swap.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Swap/SwapSettings/model/SwapSettings.SlippageType.ts","webpack://@p2p-wallet-web/web/./src/new/services/Swap/SwapHelper.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Swap/SwapSettings/SwapSettings.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Swap/Swap/Swap.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Swap/Swap/ActionButton/ActionButton.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Swap/SettingsButton/SettingsButton.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Subviews/FeesView/FeesView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Swap/Subviews/DetailsView/SlippageView/SlippageView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Swap/Swap/Subviews/DetailsView/DetailsView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Swap/Subviews/MainSwapView/ReceiveAtLeastView/ReceiveAtLeastView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Swap/Subviews/MainSwapView/SwitchButton/SwitchButton.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/AccountCreationFeeTooltip/AccountCreationFeeTooltip.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Swap/Subviews/MainSwapView/WalletView/BalanceView/BalanceView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Swap/Subviews/MainSwapView/WalletView/WalletView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Swap/Subviews/MainSwapView/MainSwapView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Swap/Swap.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Swap/GoBackButton/GoBackButton.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/SwapSettings/Subviews/DescriptionView/DescriptionView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/SwapSettings/Subviews/common/styled.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/SwapSettings/Subviews/SegmentedControl/CustomSlippageButton/SlippageInput/SlippageInput.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/SwapSettings/Subviews/SegmentedControl/CustomSlippageButton/CustomSlippageButton.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/SwapSettings/Subviews/SegmentedControl/SegmentedControl.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/SwapSettings/SwapSettings.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Swap/SwapPage.tsx","webpack://@p2p-wallet-web/web/./src/utils/clipboard.ts","webpack://@p2p-wallet-web/web/src/components/common/QRAddressWidget/QRAddressWidget.tsx","webpack://@p2p-wallet-web/web/src/components/common/Empty/Empty.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/WalletDetail/History/Empty/EmptyTransactionsView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/SortByDataStrategy.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/NSDNewDynamicSectionsCollectionView/NSDNewDynamicSectionsCollectionView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/WalletDetail/History/History.ErrorView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/History.Repository.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/History.TransactionParser.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/Output/History.PriceUpdatingOutput.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/Output/History.ProcessingTransactionsOutput.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/RefreshTrigger/History.PriceRefreshTrigger.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/RefreshTrigger/History.ProcessingTransactionRefreshTrigger.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/SourceStream/History.StreamSource.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/SourceStream/History.AccountStreamSource.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/SourceStream/History.EmptyStreamSource.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/SourceStream/History.MultipleStreamSource.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/History/History.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/WalletDetail/History/TransactionCollectionView/TransactionCell.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/WalletDetail/History/History.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/WalletDetail/BalanceView/BalanceView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/WalletDetail/TopWidget/TopWidget.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/WalletDetail.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/WalletDetail/WalletDetail.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Root/Root.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Root/Root.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/managers/DebugFeatureFlagsManager/DebugFeatureFlagsManager.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/ui/managers/DebugFeatureFlagsManager/DebugFeatureFlagsManager.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/managers/LocationManager/LocationManager.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/ui/managers/LocationManager/LocationManager.ts","webpack://@p2p-wallet-web/web/./src/new/ui/managers/ModalManager/ModalManager.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/ui/managers/ModalManager/ModalManager.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/managers/NotificationManager/NotificationManager.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/ui/managers/NotificationManager/NotificationManager.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Auth/Subviews/Wallets.ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Auth/typings.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Auth/Auth.ViewModel.ts","webpack://@p2p-wallet-web/web/src/components/common/LoaderWide/LoaderWide.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Auth/Subviews/components/Back.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Auth/Subviews/components/CommonLayout.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Auth/Subviews/components/Button.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Auth/Subviews/components/Modal.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Auth/Subviews/components/Final.tsx","webpack://@p2p-wallet-web/web/src/components/common/ErrorHint/ErrorHint.tsx","webpack://@p2p-wallet-web/web/src/components/common/PasswordInput/PasswordInput.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Auth/Subviews/components/Password.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Auth/Subviews/Create/ConfirmMnemonic.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Auth/Subviews/components/Checkbox.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Auth/Subviews/Create/MnemonicInput.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Auth/Subviews/Restore/RestoreOptions.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Auth/Subviews/Wizard.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Auth/Auth.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/styles/breakpoints.ts","webpack://@p2p-wallet-web/web/src/components/pages/landing/common/Drawer/Drawer.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/common/Button/Button.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/Features/Features.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/Footer/Footer.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/Functions/Functions.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/Header/Header.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/Top/Top.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/Under/CarouselMobile/CarouselMobile.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/Under/CarouselDesktop/Item.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/Under/CarouselDesktop/CarouselDesktop.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/Under/Under.tsx","webpack://@p2p-wallet-web/web/src/components/pages/landing/YouCan/YouCan.tsx","webpack://@p2p-wallet-web/web/src/pages/Landing.tsx","webpack://@p2p-wallet-web/web/./src/utils/routes/UserRequiredRoute.tsx","webpack://@p2p-wallet-web/web/./src/Providers.tsx","webpack://@p2p-wallet-web/web/./src/App.tsx","webpack://@p2p-wallet-web/web/src/components/common/TokenAvatar/Jazzicon/Jazzicon.tsx","webpack://@p2p-wallet-web/web/src/components/common/TokenAvatar/TokenAvatar.tsx","webpack://@p2p-wallet-web/web/src/components/ui/Accordion/Accordion.tsx","webpack://@p2p-wallet-web/web/src/components/ui/AccordionDetails/AccordionTitle.tsx","webpack://@p2p-wallet-web/web/src/components/ui/AccordionDetails/common.tsx","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/arrow-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/arrow-triangle-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/attention-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/branch-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/bucket-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/card-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/chain-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/change-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/checkmark-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/chevron-1-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/chevron-rounded-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/clock-send-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/close-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/currency-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/db-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/error-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/error-send-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/free-tx-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/lock-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/logout-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/more-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/app-store-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/arrow-down-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/arrow-left-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/arrow-swap-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/bottom-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/caret-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/check-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/chevron-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/clock-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/copy-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/cross-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/external-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/eye-hide-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/eye-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/gear-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/google-play-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/info-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/kebab-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/pen-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/plus-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/qr-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/question-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/rocket-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/round-stop-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/search-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/send-message-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/store-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/swap-bordered-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/swap-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/top-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/wallet-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/new/warning-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/opposite-arrows-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/plug-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/question-circle-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/reload-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/search-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/settings-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/success-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/success-send-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/sun-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/timer-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/assets/wallet-icon.svg","webpack://@p2p-wallet-web/web/./src/components/ui/Icon/Icon.tsx","webpack://@p2p-wallet-web/web/src/components/ui/Button/Button.tsx","webpack://@p2p-wallet-web/web/src/components/ui/Avatar/Avatar.tsx","webpack://@p2p-wallet-web/web/src/components/ui/Switch/Switch.tsx","webpack://@p2p-wallet-web/web/src/components/ui/Menu/Menu.tsx","webpack://@p2p-wallet-web/web/src/components/ui/Menu/MenuItem/MenuItem.tsx","webpack://@p2p-wallet-web/web/src/components/ui/LaagTooltip/LaagTooltip.tsx","webpack://@p2p-wallet-web/web/src/index.tsx","webpack://@p2p-wallet-web/web/./src/new/app/models/Fiat.ts","webpack://@p2p-wallet-web/web/./src/new/app/models/LoadableRelay.ts","webpack://@p2p-wallet-web/web/./src/new/app/models/PayingFee.ts","webpack://@p2p-wallet-web/web/./src/new/app/models/PendingTransaction.ts","webpack://@p2p-wallet-web/web/./src/new/constants/constants.ts","webpack://@p2p-wallet-web/web/./src/new/core/ObservableReactionContainer.ts","webpack://@p2p-wallet-web/web/./src/new/core/LifeCycleObject.ts","webpack://@p2p-wallet-web/web/./src/new/core/models/Model.ts","webpack://@p2p-wallet-web/web/./src/new/core/viewmodels/SDListViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/core/viewmodels/SDViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/core/viewmodels/ViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/core/viewmodels/SDStreamViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/core/viewmodels/SDStreamListViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/services/injection/GlobalContextService.ts","webpack://@p2p-wallet-web/web/./src/new/services/injection/DependencyService.ts","webpack://@p2p-wallet-web/web/./src/new/core/viewmodels/useViewModel.ts","webpack://@p2p-wallet-web/web/./src/new/models/SolanaModel/SolanaModel.ts","webpack://@p2p-wallet-web/web/./src/new/services/WalletAdaptorService/WalletAdaptorService.ts","webpack://@p2p-wallet-web/web/./src/new/models/WalletModel/WalletModel.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Auth/MnemonicAdapter.tsx","webpack://@p2p-wallet-web/web/./src/new/utils/decorators.ts","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Auth/utils.ts","webpack://@p2p-wallet-web/web/src/new/scenes/Main/Swap/Swap/Subviews/DetailsView/DetailFeesView/FeeTransactionTooltip/FeeTransactionTooltip.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Swap/Swap/Subviews/DetailsView/DetailFeesView/DetailFeesView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Swap/Swap/Subviews/DetailsView/RatesStackView/DetailRatesView/DetailRatesView.tsx","webpack://@p2p-wallet-web/web/./src/new/scenes/Main/Swap/Swap/Subviews/DetailsView/RatesStackView/RatesStackView.tsx","webpack://@p2p-wallet-web/web/src/new/scenes/Main/WalletDetail/History/TransactionCollectionView/TransactionImageView.tsx","webpack://@p2p-wallet-web/web/./src/new/sdk/Cache/Cache.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/helpers/ArraySignature.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/apiClient/FeeRelayerAPIClient.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/models/TokenAccount.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/models/FeeRelayer.StatsInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/models/FeeRelayerError.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/models/FeeRelayerRequestType.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/models/UsageStatus.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/relay/FeeRelayerContext.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/relay/FeeRelayerContextManager.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/relay/helpers/FeeRelayerRelayModels.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/relay/helpers/FeeRelayerRelaySolanaClient.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/relay/FeeRelayerCalculator.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/relay/FeeRelayerConstants.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/relay/FeeRelayer.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/relayProgram/RelayProgram.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/helper/DestinationAnalysator.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/helper/TransitTokenAccountAnalysator.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/calculator/DefaultSwapFeeRelayerCalculator.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/SwapFeeRelayer.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/transactionBuilder/SwapTransactionBuilder.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/transactionBuilder/checking/checkClosingAccount.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/transactionBuilder/checking/checkDestination.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/transactionBuilder/checking/checkSigners.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/transactionBuilder/checking/checkSource.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/transactionBuilder/checking/checkSwapData.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/transactionBuilder/checking/checkTransitTokenAccount.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/FeeRelayer/swap/transactionBuilder/checking/SwapDataBuilder.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/apiClient/APIClient.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/apiClient/ConfigsProvider.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/apiClient/OrcaSwapSolanaClient.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/models/OrcaSwapError.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/models/Pool.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/models/OrcaInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/models/OrcaInfoResponse.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/models/InterTokenInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/models/Pools.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/models/BalancesCache.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/models/PreparedSwapTransaction.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/models/SwapInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/OrcaSwap/OrcaSwap.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/extensions/NumberExtensions.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/extensions/PublicKey/PublicKeyExtensions.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/actions/SolanaSDKSend.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/actions/swap/SolanaSDKSwap.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/extensions/PublicKey/PublicKeyAssociatedTokenProgram.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/extensions/TokenExtensions.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/extensions/TryExtensions.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/FeeCalculator.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/helpers/Logger.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/Account.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/APIEndpoint.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/bufferLayout/AccountInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/bufferLayout/EmptyInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/bufferLayout/MintInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/FeeAmount.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/Models.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/ParsedInstructionData.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/PreparedTransaction.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/SolanaSDKError.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/SolanaToken/TokenList.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/Models/Wallet.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/SolanaSDK.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/TokensRepository/TokensListParser.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/TokensRepository/TokensRepositoryCache.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/TokensRepository/TokensRepository.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/model/info/CloseAccountInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/model/info/CreateAccountInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/model/info/SwapInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/model/info/TransferInfo.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/model/ParsedTransaction.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/FeeParseStrategy/DefaultFeeParseStrategy.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/SolanaSDK/extensions/DecimalsExtensions.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/TransactionParseStrategy/CloseAccountParseStrategy.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/TransactionParseStrategy/CreationAccountParseStrategy.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/TransactionParseStrategy/OrcaSwapParseStrategy.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/TransactionParseStrategy/P2POrcaSwapWrapperParseStrategy.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/TransactionParseStrategy/SerumSwapParseStrategy.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/TransactionParseStrategy/TransferParseStrategy.ts","webpack://@p2p-wallet-web/web/./src/new/sdk/TransactionParser/TransactionParserServiceImpl.ts","webpack://@p2p-wallet-web/web/./src/new/services/BuyService/constants.ts","webpack://@p2p-wallet-web/web/./src/new/services/BuyService/structures.ts","webpack://@p2p-wallet-web/web/./src/new/services/Defaults.ts","webpack://@p2p-wallet-web/web/./src/new/services/FeatureFlags/defaultFlags.ts","webpack://@p2p-wallet-web/web/./src/new/services/FeatureFlags/features.ts","webpack://@p2p-wallet-web/web/./src/new/services/FeatureFlags/providers/RemoteFeatureFlagsProvider.ts","webpack://@p2p-wallet-web/web/./src/new/services/FeatureFlags/FeatureFlags.ts","webpack://@p2p-wallet-web/web/./src/new/services/FeatureFlags/providers/DebugFeatureFlagsProvider.ts","webpack://@p2p-wallet-web/web/./src/new/services/NameService/NameService.ts","webpack://@p2p-wallet-web/web/./src/new/services/NotificationService/NotificationService.ts","webpack://@p2p-wallet-web/web/./src/new/services/OrcaSwapService/OrcaSwapService.ts","webpack://@p2p-wallet-web/web/./src/new/services/PriceAPIs/PricesService/PricesFetcher.ts","webpack://@p2p-wallet-web/web/./src/new/services/PriceAPIs/Coingecko/CoingeckoPricesFetcher.ts","webpack://@p2p-wallet-web/web/./src/new/services/PriceAPIs/PricesService/PricesStorage.ts","webpack://@p2p-wallet-web/web/./src/new/services/PriceAPIs/PricesService/PricesService.ts","webpack://@p2p-wallet-web/web/./src/new/services/RelayService/RelayService.ts","webpack://@p2p-wallet-web/web/./src/new/services/RemoteConfig/defaultConfig.ts","webpack://@p2p-wallet-web/web/./src/new/services/RemoteConfig/firebaseConfig.ts","webpack://@p2p-wallet-web/web/./src/new/services/RemoteConfig/constants.ts","webpack://@p2p-wallet-web/web/./src/new/services/RemoteConfig/RemoteConfig.ts","webpack://@p2p-wallet-web/web/./src/new/services/Repositories/TokensRepository.ts","webpack://@p2p-wallet-web/web/./src/new/ui/notifications/transferNotificationRenderer.tsx","webpack://@p2p-wallet-web/web/./src/new/services/Repositories/WalletsRepository.ts","webpack://@p2p-wallet-web/web/./src/new/services/Socket.ts","webpack://@p2p-wallet-web/web/./src/new/services/SolanaService/SolanaService.ts","webpack://@p2p-wallet-web/web/./src/new/services/TransactionHandler/TransactionHandler.ts","webpack://@p2p-wallet-web/web/./src/new/utils/libs/nanoEvent.js","webpack://@p2p-wallet-web/web/./src/new/services/common/makeLocalStorage.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/AddressText/AddressText.tsx","webpack://@p2p-wallet-web/web/./src/utils/common.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/BaseWalletCellContent/styled.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/BaseWalletCellContent/BaseTokenCellContent.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/BaseWalletCellContent/BaseWalletCellContent.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/ChooseWallet/ChooseWallet.ViewModel.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/ChooseWallet/CollectionView/Cell.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/ChooseWallet/CollectionView/CollectionView.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/ChooseWallet/ChooseWallet.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/InfinityScrollHelper/InfinityScrollHelper.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/Loader/Loader.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/NotifyToast/NotifyToast.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/StaticSectionsCollectionView/StaticSectionsCollectionView.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/components/common/StaticSectionsCollectionView/models/SDCollectionViewItem.ts","webpack://@p2p-wallet-web/web/src/new/ui/components/common/TokenAvatar/Jazzicon/Jazzicon.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/common/TokenAvatar/TokenAvatar.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/ui/Button/Button.tsx","webpack://@p2p-wallet-web/web/src/new/ui/components/ui/SearchInput/SearchInput.tsx","webpack://@p2p-wallet-web/web/./src/new/ui/modals/ProcessTransactionModal/ProcessTransaction.Models.ts","webpack://@p2p-wallet-web/web/./src/new/utils/UserAgent.ts","webpack://@p2p-wallet-web/web/./src/new/utils/Clipboard.ts","webpack://@p2p-wallet-web/web/./src/new/utils/NumberExtensions.ts","webpack://@p2p-wallet-web/web/./src/new/utils/SolanaSDK.ParsedTransactionExtensions.ts","webpack://@p2p-wallet-web/web/./src/new/utils/StringExtensions.ts","webpack://@p2p-wallet-web/web/./src/utils/analytics/amplitude.ts","webpack://@p2p-wallet-web/web/./src/utils/connection.ts","webpack://@p2p-wallet-web/web/./src/utils/tokens.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\n\nexport const FEE_PAYER_PUBKEYS = new Set(['FG4Y3yX4AAchp1HvNZ7LfzFTewF2f6nDoMDCohTFrdpT']);\n\nexport const SYSTEM_PROGRAM_ID = new PublicKey('11111111111111111111111111111111');\n\nexport const USDC_MINT = new PublicKey('EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v');\nexport const USDT_MINT = new PublicKey('Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB');\n","import type { SeedAndMnemonic } from './types';\n\nexport const DEFAULT_SEED_AND_MNEMONIC: SeedAndMnemonic = {\n  seed: '',\n  mnemonic: '',\n};\n","export type ExpiryDataType<T> = {\n  value: T;\n  expiry: number;\n};\n\nexport const createExpiringValue = <T>(value: T, ms?: number) => {\n  if (ms) {\n    return {\n      value,\n      expiry: Date.now() + ms,\n    };\n  }\n\n  return {\n    value,\n    expiry: Number.MAX_SAFE_INTEGER,\n  };\n};\n\nexport const getExpiringValue = <T>(data: ExpiryDataType<T>) => {\n  if (!data) {\n    return null;\n  }\n\n  if (data.expiry < Date.now()) {\n    return null;\n  }\n\n  return data.value;\n};\n","import type { ExpiryDataType } from './storage_expiring';\nimport { createExpiringValue, getExpiringValue } from './storage_expiring';\n\nexport const setStorageValue = <T>(key: string, data: T, { msTTL }: { msTTL?: number } = {}) => {\n  const expiringData = createExpiringValue(data, msTTL);\n  return localStorage.setItem(key, JSON.stringify(expiringData));\n};\n\nexport const getStorageValue = <T>(key: string) => {\n  const strData = localStorage.getItem(key);\n  if (!strData) {\n    return null;\n  }\n\n  const value = getExpiringValue(JSON.parse(strData) as ExpiryDataType<T>);\n\n  if (!value) {\n    localStorage.removeItem(key);\n    return null;\n  }\n\n  return value;\n};\n","import { useCallback, useEffect, useState } from 'react';\n\nimport type { SetStorageValue } from './types';\nimport { getStorageValue, setStorageValue } from './utils/persistence';\n\nexport const useStorage = <T>(\n  key: string,\n  defaultValue: T,\n  ms?: number,\n): [T, SetStorageValue<T>] => {\n  const [value, _setValue] = useState<T | null>(defaultValue);\n  // TODO: can be async in future\n\n  useEffect(() => {\n    try {\n      const _value = getStorageValue<T>(key);\n      _setValue(_value);\n    } catch (err) {\n      console.error(err);\n    }\n  }, [key]);\n\n  const setValue = useCallback<SetStorageValue<T>>(\n    (nextValue: T, customMS?: number) => {\n      try {\n        setStorageValue(key, nextValue, {\n          msTTL: ms || customMS,\n        });\n        _setValue(nextValue);\n      } catch (n) {\n        console.error(n);\n      }\n    },\n    [key, ms],\n  );\n\n  return [value || defaultValue, setValue];\n};\n","export const STORAGE_KEYS = {\n  EncryptedSeedAndMnemonic: 'encryptedSeedAndMnemonic',\n};\n","import bs58 from 'bs58';\nimport { pbkdf2 } from 'crypto';\nimport nacl from 'tweetnacl';\n\nimport type { Encrypt, SeedAndMnemonic } from '../types';\n\nasync function deriveEncryptionKey(\n  password: string,\n  salt: Uint8Array,\n  iterations: number,\n  digest: string,\n) {\n  return new Promise<Buffer>((resolve, reject) =>\n    pbkdf2(password, salt, iterations, nacl.secretbox.keyLength, digest, (err, key) =>\n      err ? reject(err) : resolve(key),\n    ),\n  );\n}\n\nexport const decryptEncryptedTextAsync = async (t: Encrypt, password: string) => {\n  const encrypted = bs58.decode(t.encrypted);\n  const nonce = bs58.decode(t.nonce);\n  const salt = bs58.decode(t.salt);\n  const key = await deriveEncryptionKey(password, salt, t.iterations, t.digest);\n\n  const plaintext = nacl.secretbox.open(encrypted, nonce, key);\n  if (!plaintext) {\n    throw new Error('Incorrect password');\n  }\n\n  return Buffer.from(plaintext).toString();\n};\n\nexport const decryptSeedAndMnemonic = async (\n  password: string,\n  encryptedText: string,\n): Promise<SeedAndMnemonic> => {\n  const encrypted: Encrypt = JSON.parse(encryptedText);\n  const decrypted = await decryptEncryptedTextAsync(encrypted, password);\n\n  return JSON.parse(Buffer.from(decrypted).toString());\n};\n\nexport const generateEncryptedTextAsync = async (plaintext: string, password: string) => {\n  const salt = nacl.randomBytes(16);\n  const kdf = 'pbkdf2';\n  const iterations = 100000;\n  const digest = 'sha256';\n\n  const nonce = nacl.randomBytes(nacl.secretbox.nonceLength);\n  const key = await deriveEncryptionKey(password, salt, iterations, digest);\n  const encrypted = nacl.secretbox(Buffer.from(plaintext), nonce, key);\n\n  return {\n    encrypted: bs58.encode(encrypted),\n    nonce: bs58.encode(nonce),\n    kdf,\n    salt: bs58.encode(salt),\n    iterations,\n    digest,\n  };\n};\n","import type { SeedAndMnemonic } from '../types';\n\nlet unencryptedSeedAndMnemonic: SeedAndMnemonic;\n\nexport const setUnencryptedSeedAndMnemonic = (_unencryptedSeedAndMnemonic: SeedAndMnemonic) => {\n  unencryptedSeedAndMnemonic = _unencryptedSeedAndMnemonic;\n};\n\nexport const getUnencryptedSeedAndMnemonic = (): SeedAndMnemonic | undefined => {\n  return unencryptedSeedAndMnemonic;\n};\n","import { useCallback } from 'react';\n\nimport { useStorage } from '../../../hooks';\nimport { STORAGE_KEYS } from '../../../internal/constants/storageKeys';\nimport type { SeedAndMnemonic } from '../types';\nimport { generateEncryptedTextAsync } from '../utils/encryption';\nimport { setUnencryptedSeedAndMnemonic } from '../utils/unencryptedSeedAndMnemonic';\n\nexport const useEncryptedSeedAndMnemonic = (): [\n  string,\n  (nextSeedAndMnemonic: SeedAndMnemonic, password: string, isSaveUnencrypted: boolean) => void,\n] => {\n  const [encryptedSeedAndMnemonic, _setEncryptedSeedAndMnemonic] = useStorage(\n    STORAGE_KEYS.EncryptedSeedAndMnemonic,\n    '',\n  );\n\n  const setEncryptedSeedAndMnemonic = useCallback(\n    async (nextSeedAndMnemonic: SeedAndMnemonic, password: string, isSaveUnencrypted: boolean) => {\n      const plaintext = JSON.stringify(nextSeedAndMnemonic);\n      const locked = await generateEncryptedTextAsync(plaintext, password);\n      _setEncryptedSeedAndMnemonic(JSON.stringify(locked));\n\n      if (isSaveUnencrypted) {\n        setUnencryptedSeedAndMnemonic(nextSeedAndMnemonic);\n      }\n    },\n    [],\n  );\n\n  return [encryptedSeedAndMnemonic, setEncryptedSeedAndMnemonic];\n};\n","export const NOOP = () => {};\nexport const NOOP_ASYNC = async () => {};\n","import type { FC } from 'react';\nimport { createContext, useCallback, useEffect } from 'react';\nimport * as React from 'react';\n\nimport { NOOP, NOOP_ASYNC } from '../../internal/utils/noop';\nimport { DEFAULT_SEED_AND_MNEMONIC } from './constants';\nimport { useEncryptedSeedAndMnemonic, useUnencryptedSeedAndMnemonic } from './hooks';\nimport type { SeedAndMnemonic } from './types';\nimport { decryptSeedAndMnemonic } from './utils/encryption';\n\ntype SetSeedAndMnemonicContext = {\n  setUnencryptedSeedAndMnemonic: (nextSeedAndMnemonic: SeedAndMnemonic) => void;\n  setEncryptedSeedAndMnemonic: (\n    nextSeedAndMnemonic: SeedAndMnemonic,\n    password: string,\n    isSaveUnencrypted: boolean,\n  ) => void;\n  unlockSeedAndMnemonic: (password: string) => Promise<void>;\n};\n\ntype GetSeedAndMnemonicContext = {\n  unencryptedSeedAndMnemonic: SeedAndMnemonic;\n  encryptedSeedAndMnemonic: string;\n};\n\nexport const SetSeedAndMnemonicContext = createContext<SetSeedAndMnemonicContext>({\n  setUnencryptedSeedAndMnemonic: NOOP,\n  setEncryptedSeedAndMnemonic: NOOP_ASYNC,\n  unlockSeedAndMnemonic: NOOP_ASYNC,\n});\n\nexport const GetSeedAndMnemonicContext = createContext<GetSeedAndMnemonicContext>({\n  unencryptedSeedAndMnemonic: DEFAULT_SEED_AND_MNEMONIC,\n  encryptedSeedAndMnemonic: '',\n});\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nexport const SeedProvider: FC<Props> = ({ children }) => {\n  const [encryptedSeedAndMnemonic, setEncryptedSeedAndMnemonic] = useEncryptedSeedAndMnemonic();\n  const [unencryptedSeedAndMnemonic, setUnencryptedSeedAndMnemonic] =\n    useUnencryptedSeedAndMnemonic();\n\n  useEffect(() => {\n    if (unencryptedSeedAndMnemonic.mnemonic && unencryptedSeedAndMnemonic.seed) {\n      setUnencryptedSeedAndMnemonic(unencryptedSeedAndMnemonic);\n    }\n  }, [unencryptedSeedAndMnemonic]);\n\n  const unlockSeedAndMnemonic = useCallback(\n    async (password: string) => {\n      setUnencryptedSeedAndMnemonic(\n        await decryptSeedAndMnemonic(password, encryptedSeedAndMnemonic),\n      );\n    },\n    [encryptedSeedAndMnemonic, setUnencryptedSeedAndMnemonic],\n  );\n\n  return (\n    <SetSeedAndMnemonicContext.Provider\n      value={{\n        setUnencryptedSeedAndMnemonic,\n        setEncryptedSeedAndMnemonic,\n        unlockSeedAndMnemonic,\n      }}\n    >\n      <GetSeedAndMnemonicContext.Provider\n        value={{\n          unencryptedSeedAndMnemonic,\n          encryptedSeedAndMnemonic,\n        }}\n      >\n        {children}\n      </GetSeedAndMnemonicContext.Provider>\n    </SetSeedAndMnemonicContext.Provider>\n  );\n};\n","import { useCallback, useContext } from 'react';\n\nimport { GetSeedAndMnemonicContext } from '../provider';\nimport { decryptSeedAndMnemonic } from '../utils/encryption';\n\nexport const useTryUnlockSeedAndMnemonic = () => {\n  const ctx = useContext(GetSeedAndMnemonicContext);\n\n  if (ctx === null) {\n    throw new Error('Context not available');\n  }\n\n  const { encryptedSeedAndMnemonic } = ctx;\n\n  return useCallback(\n    async (password: string) => {\n      await decryptSeedAndMnemonic(password, encryptedSeedAndMnemonic);\n    },\n    [encryptedSeedAndMnemonic],\n  );\n};\n","import { useCallback, useEffect, useState } from 'react';\n\nimport { DEFAULT_SEED_AND_MNEMONIC } from '../constants';\nimport type { SeedAndMnemonic } from '../types';\nimport {\n  getUnencryptedSeedAndMnemonic,\n  setUnencryptedSeedAndMnemonic,\n} from '../utils/unencryptedSeedAndMnemonic';\n\nexport const useUnencryptedSeedAndMnemonic = (): [\n  SeedAndMnemonic,\n  (nextSeedAndMnemonic: SeedAndMnemonic) => void,\n] => {\n  const [seedAndMnemonic, _setSeedAndMnemonic] =\n    useState<SeedAndMnemonic>(DEFAULT_SEED_AND_MNEMONIC);\n\n  useEffect(() => {\n    try {\n      const unencryptedSeedAndMnemonic = getUnencryptedSeedAndMnemonic();\n      _setSeedAndMnemonic(unencryptedSeedAndMnemonic || DEFAULT_SEED_AND_MNEMONIC);\n    } catch (r) {\n      console.error(r);\n    }\n  }, []);\n\n  const _setUnencryptedSeedAndMnemonic = useCallback(\n    (nextSeedAndMnemonic: SeedAndMnemonic) => {\n      _setSeedAndMnemonic(nextSeedAndMnemonic);\n      setUnencryptedSeedAndMnemonic(nextSeedAndMnemonic);\n    },\n    [_setSeedAndMnemonic],\n  );\n\n  return [seedAndMnemonic, _setUnencryptedSeedAndMnemonic];\n};\n","import * as bip32 from 'bip32';\nimport * as ed25519 from 'ed25519-hd-key';\nimport nacl from 'tweetnacl';\n\nimport { DERIVATION_PATH } from '../../../constants/common';\nimport type { ValueOf } from '../../../types/utility-types';\n\nconst deriveSeed = (\n  seed: string,\n  walletIndex: number,\n  derivationPath: ValueOf<typeof DERIVATION_PATH>,\n): Buffer | undefined => {\n  switch (derivationPath) {\n    case DERIVATION_PATH.Deprecated: {\n      const path = `m/501'/${walletIndex}'/0/0`;\n      return bip32.fromSeed(Buffer.from(seed, 'hex')).derivePath(path).privateKey;\n    }\n    case DERIVATION_PATH.Bip44: {\n      const path = `m/44'/501'/${walletIndex}'`;\n      return ed25519.derivePath(path, seed).key;\n    }\n    case DERIVATION_PATH.Bip44Change: {\n      const path = `m/44'/501'/${walletIndex}'/0'`;\n      return ed25519.derivePath(path, seed).key;\n    }\n  }\n};\n\nfunction getKeyPairFromSeed(\n  seed: string,\n  walletIndex: number,\n  derivationPath: ValueOf<typeof DERIVATION_PATH>,\n) {\n  const derivedPrivateKey = deriveSeed(seed, walletIndex, derivationPath);\n  if (!derivedPrivateKey) throw new Error('Could not derive secretKey');\n  return nacl.sign.keyPair.fromSeed(derivedPrivateKey);\n}\n\nexport const derivePublicKeyFromSeed = (\n  seed: string,\n  walletIndex: number,\n  derivationPath: ValueOf<typeof DERIVATION_PATH>,\n) => {\n  return getKeyPairFromSeed(seed, walletIndex, derivationPath).publicKey;\n};\n\nexport const deriveSecretKeyFromSeed = (\n  seed: string,\n  walletIndex: number,\n  derivationPath: ValueOf<typeof DERIVATION_PATH>,\n) => {\n  return getKeyPairFromSeed(seed, walletIndex, derivationPath).secretKey;\n};\n\nexport const mnemonicToSeed = async (mnemonic: string) => {\n  const bip39 = await import('bip39');\n  if (!bip39.validateMnemonic(mnemonic)) {\n    throw new Error('Invalid seed words');\n  }\n  const seed = await bip39.mnemonicToSeed(mnemonic);\n  return Buffer.from(seed).toString('hex');\n};\n","export const NETWORK_CONFIGS = {\n  'mainnet-beta': {\n    endpoint: `https://p2p.rpcpool.com/${process.env.REACT_APP_RPCPOOL_API_KEY}`,\n  },\n};\n","import { ChainId, chainIdToNetwork, RAW_SOL, RAW_SOL_MINT, Token } from '@saberhq/token-utils';\nimport { StaticTokenListResolutionStrategy } from '@solana/spl-token-registry';\n\nexport const STATIC_TOKEN_LIST = new StaticTokenListResolutionStrategy().resolve();\n\nexport const makeTokenMap = (chainId: ChainId): Record<string, Token> => {\n  const tokenMap: Record<string, Token> = {};\n  STATIC_TOKEN_LIST.filter((token) => token.chainId === chainId).forEach((item) => {\n    tokenMap[item.address] = new Token(item);\n  });\n\n  // Native SOL\n  tokenMap[RAW_SOL_MINT.toBase58()] = RAW_SOL[chainIdToNetwork(chainId)];\n\n  if (chainId === ChainId.Devnet) {\n    tokenMap['FsaLodPu4VmSwXGr3gWfwANe4vKf8XSZcCh1CEeJ3jpD'] = new Token({\n      chainId: 101,\n      address: 'FsaLodPu4VmSwXGr3gWfwANe4vKf8XSZcCh1CEeJ3jpD',\n      name: 'renBTC',\n      decimals: 8,\n      symbol: 'RENBTC',\n    });\n  }\n\n  return tokenMap;\n};\n","import { createContainer } from 'unstated-next';\nimport { useConnectionContext } from '../solana';\nimport { networkToChainId, Token } from '@saberhq/token-utils';\nimport { useMemo } from 'react';\nimport { makeTokenMap } from './utils/makeTokenMap';\n\nconst PRIMARY_SYMBOLS = ['SOL', 'USDC', 'BTC', 'USDT', 'ETH'];\n\nexport type TokenMap = Record<string, Token>;\n\nexport interface UseTokens {\n  tokens: readonly Token[];\n  tokenMap: TokenMap;\n  tokenNameMap: TokenMap;\n}\n\nconst useTokensInternal = (): UseTokens => {\n  const { network } = useConnectionContext();\n  const chainId = networkToChainId(network);\n\n  const standardTokenMap = useMemo(() => makeTokenMap(chainId), [chainId]);\n\n  const tokenMap = useMemo(() => {\n    if (!chainId) {\n      return {};\n    }\n\n    return standardTokenMap;\n  }, [chainId, standardTokenMap]);\n\n  const tokenNameMap = useMemo(() => {\n    return Object.values(tokenMap).reduce((acc, token) => {\n      // hardcode exclusion of excess Luna and Atlas tokens of 101 chain\n      if (\n        (token.info.symbol === 'Luna' && token.info.name === 'Lunaria') ||\n        (token.info.symbol === 'ATLAS' && token.info.name === 'Atlascoin')\n      )\n        return acc;\n\n      acc[token.symbol.toUpperCase()] = token;\n      return acc;\n    }, {} as TokenMap);\n  }, [tokenMap]);\n\n  const tokens = useMemo(() => {\n    const newTokenMap = { ...tokenMap };\n\n    // Get Token Mints\n    const newTokens = Object.values(newTokenMap);\n    const primaryMints = PRIMARY_SYMBOLS.map((symbol) => {\n      const token = newTokens.find((itemToken) => itemToken.symbol === symbol);\n      return token?.address;\n    }).filter(Boolean) as string[];\n\n    // Get Primary Tokens and remove it from Token Map\n    const primaryTokens = primaryMints\n      .map((mint) => {\n        const token = newTokenMap[mint];\n        delete newTokenMap[mint];\n\n        return token;\n      })\n      .filter(Boolean) as Token[];\n\n    // Make tokens list with primary and other tokens\n    return [...primaryTokens, ...Object.values(newTokenMap)];\n  }, [tokenMap]);\n\n  return {\n    tokens,\n    tokenMap,\n    tokenNameMap,\n  };\n};\n\nexport const { Provider: TokensProvider, useContainer: useTokensContext } =\n  createContainer(useTokensInternal);\n","import { useMemo } from 'react';\n\nimport { MINT_PARSER, useParsedAccountsData } from '@p2p-wallet-web/sail';\nimport { networkToChainId, Token } from '@saberhq/token-utils';\nimport { useSolana } from '@saberhq/use-solana';\nimport { PublicKey } from '@solana/web3.js';\nimport { zip } from 'ramda';\nimport { useTokensContext } from \"../provider\";\n\nconst normalizeMint = (mint: PublicKey | null | undefined): PublicKey | null | undefined => {\n  if (!mint) {\n    return mint;\n  }\n\n  // default pubkey is null\n  if (mint.equals(PublicKey.default)) {\n    return null;\n  }\n  return mint;\n};\n\n/**\n * Uses and loads a series of mints as {@link Token}s.\n * @param mints\n * @returns\n */\nexport const useTokens = (\n  mints?: (PublicKey | null | undefined)[],\n): (Token | null | undefined)[] => {\n  const { network } = useSolana();\n  const { tokenMap } = useTokensContext();\n\n  const { normalizedMints, mintsToLoad } = useMemo(() => {\n    const normalizedMints = mints?.map(normalizeMint) ?? [];\n    const mintsToLoad = normalizedMints.map((mint) => {\n      if (mint && tokenMap[mint.toString()]) {\n        return null;\n      }\n      return mint;\n    });\n\n    return { normalizedMints, mintsToLoad };\n  }, [mints, tokenMap]);\n\n  // load all mints that are not in the token list\n  const mintAccounts = useParsedAccountsData(mintsToLoad, MINT_PARSER);\n\n  return useMemo(() => {\n    const tokensFromMap = normalizedMints.map((mintKey) => {\n      if (!mintKey) {\n        return mintKey;\n      }\n\n      return tokenMap[mintKey.toString()];\n    });\n\n    return zip(tokensFromMap, mintAccounts).map(([tokenFromMap, mintAccount]) => {\n      if (tokenFromMap) {\n        return tokenFromMap;\n      }\n\n      if (!mintAccount) {\n        return mintAccount;\n      }\n\n      const decimals = mintAccount.accountInfo.data.decimals;\n\n      return Token.fromMint(mintAccount.accountId, decimals, {\n        chainId: networkToChainId(network),\n      });\n    });\n  }, [normalizedMints, mintAccounts, tokenMap, network]);\n};\n","import { useMemo } from 'react';\n\nimport type { Token } from '@saberhq/token-utils';\nimport type { PublicKey } from '@solana/web3.js';\n\nimport { useTokens } from './useTokens';\n\n/**\n * Uses and loads one token.\n * @param mint\n * @returns\n */\nexport const useToken = (mint?: PublicKey | null): Token | null | undefined => {\n  const tokenMints = useMemo(() => [mint], [mint]);\n  const [token] = useTokens(tokenMints);\n  return token;\n};\n","import { useMemo } from 'react';\n\nimport type { PublicKey } from '@solana/web3.js';\n\nimport type { TokenAccount } from '../models';\nimport { useTokenAccounts } from './useTokenAccounts';\n\nexport const useTokenAccount = (\n  key: PublicKey | null | undefined,\n): TokenAccount | null | undefined => {\n  const theKey = useMemo(() => [key], [key]);\n  const [tokenAccount] = useTokenAccounts(theKey);\n  return tokenAccount;\n};\n","import { useEffect, useState } from 'react';\n\nimport { getATAAddress } from '@saberhq/token-utils';\nimport type { PublicKey } from '@solana/web3.js';\n\nexport enum PDA {\n  ATA = 'ATA',\n}\n\nexport type PDAInputPaths = {\n  [PDA.ATA]: readonly [token: PublicKey, owner: PublicKey];\n};\n\nexport type PDAInput<K extends PDA = PDA> = {\n  type: K;\n  path: PDAInputPaths[K];\n};\n\nconst associationCache: Record<string, PublicKey> = {};\n\nconst strategies: {\n  [T in PDA]: (path: PDAInputPaths[T]) => Promise<PublicKey>;\n} = {\n  [PDA.ATA]: async ([mint, owner]) => {\n    return await getATAAddress({\n      mint,\n      owner,\n    });\n  },\n};\n\nconst makeCacheKey = ({ type, path }: PDAInput): string =>\n  `${type}/${path.map((p) => p.toString()).join(',')}`;\n\n/**\n * Loads and caches program addresses.\n * @param addresses\n * @returns\n */\nexport const useProgramAddresses = (addresses: (PDAInput | null)[]): (PublicKey | null)[] => {\n  const [keys, setKeys] = useState<(PublicKey | null)[]>(\n    addresses.map((addr) => {\n      if (!addr) {\n        return null;\n      }\n      const cacheKey = makeCacheKey(addr);\n      if (associationCache[cacheKey]) {\n        return associationCache[cacheKey] ?? null;\n      }\n      return null;\n    }),\n  );\n\n  useEffect(() => {\n    void (async () => {\n      setKeys(\n        await Promise.all(\n          addresses.map(\n            async <K extends PDA>(addr: PDAInput<K> | null): Promise<PublicKey | null> => {\n              if (!addr) {\n                return null;\n              }\n              const cacheKey = makeCacheKey(addr);\n              if (associationCache[cacheKey]) {\n                return associationCache[cacheKey] ?? null;\n              }\n              const strategy = strategies[addr.type] as (\n                path: PDAInputPaths[K],\n              ) => Promise<PublicKey>;\n              const nextKey = await strategy(addr.path);\n              associationCache[cacheKey] = nextKey;\n              return nextKey;\n            },\n          ),\n        ),\n      );\n    })();\n  }, [addresses]);\n\n  return keys;\n};\n","import { useMemo } from 'react';\n\nimport { TOKEN_ACCOUNT_PARSER, useAccountsData } from '@p2p-wallet-web/sail';\nimport { RAW_SOL_MINT } from '@saberhq/token-utils';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport type { PublicKey } from '@solana/web3.js';\nimport { zip } from 'ramda';\n\nimport { SYSTEM_PROGRAM_ID } from '../../../constants/publicKeys';\nimport type { TokenAccount } from '../models';\nimport { useWallet } from '@saberhq/use-solana';\nimport { useTokens } from '../../tokens';\nimport { TokenAmount } from '@p2p-wallet-web/token-utils';\n\nexport const useTokenAccounts = (\n  publicKeys: (PublicKey | null | undefined)[] = [],\n): (TokenAccount | undefined)[] => {\n  const { publicKey } = useWallet();\n  const tokenAccountsData = useAccountsData(publicKeys);\n\n  const mints = useMemo(() => {\n    return tokenAccountsData.map((datum, i) => {\n      if (!datum) {\n        // Use wallet Native SOL if its zero\n        if (publicKey && publicKeys[i] && publicKey.equals(publicKeys[i]!)) {\n          return RAW_SOL_MINT;\n        }\n\n        return datum;\n      }\n\n      // Native SOL\n      if (datum.accountInfo.owner.equals(SYSTEM_PROGRAM_ID)) {\n        return RAW_SOL_MINT;\n      }\n\n      if (datum.accountInfo.owner.equals(TOKEN_PROGRAM_ID)) {\n        return TOKEN_ACCOUNT_PARSER(datum).mint;\n      }\n\n      return null;\n    });\n  }, [tokenAccountsData]);\n\n  const tokens = useTokens(mints);\n\n  return useMemo(() => {\n    return zip(tokenAccountsData, tokens).map(([datum], i) => {\n      const tokenAccountKey = publicKeys[i];\n      if (!tokenAccountKey) {\n        return {\n          key: undefined,\n          loading: false,\n          balance: undefined,\n          isInitialized: !!datum,\n        };\n      }\n\n      const token = tokens[i];\n      if (!token) {\n        return {\n          key: tokenAccountKey,\n          loading: token === undefined,\n          balance: undefined,\n          isInitialized: !!datum,\n        };\n      }\n\n      // Native SOL\n      if (datum?.accountInfo.owner.equals(SYSTEM_PROGRAM_ID)) {\n        return {\n          key: tokenAccountKey,\n          loading: false,\n          balance: new TokenAmount(token, datum.accountInfo.lamports),\n          isInitialized: true,\n        };\n      }\n\n      const parsed = datum ? TOKEN_ACCOUNT_PARSER(datum) : datum;\n      try {\n        return {\n          key: tokenAccountKey,\n          loading: datum === undefined,\n          balance: parsed ? new TokenAmount(token, parsed.amount) : new TokenAmount(token, 0),\n          isInitialized: !!datum,\n        };\n      } catch (e) {\n        console.warn(`Error parsing ATA ${datum?.accountId.toString() ?? '(unknown)'}`, e);\n        return undefined;\n      }\n    });\n  }, [publicKeys, tokenAccountsData, tokens]);\n};\n","import { useMemo } from 'react';\n\nimport type { PublicKey } from '@solana/web3.js';\n\nimport { useTokenAccount } from './index';\nimport { TokenAmount } from '@p2p-wallet-web/token-utils';\n\nexport const useTokenAccountAmount = (\n  publicKey: PublicKey | null | undefined,\n  value: string | undefined,\n): { loading: boolean; balance: TokenAmount | undefined } | undefined => {\n  const tokenAccount = useTokenAccount(publicKey);\n\n  return useMemo(() => {\n    if (!value) {\n      return {\n        loading: false,\n        balance: undefined,\n      };\n    }\n\n    if (!tokenAccount?.balance?.token) {\n      return {\n        loading: !!tokenAccount?.loading,\n        balance: undefined,\n      };\n    }\n\n    try {\n      return {\n        loading: !!tokenAccount?.loading,\n        balance: new TokenAmount(tokenAccount.balance.token, value),\n      };\n    } catch (e) {\n      console.warn('Error parsing token amount', e);\n      return undefined;\n    }\n  }, [tokenAccount, value]);\n};\n","import { unstable_batchedUpdates } from 'react-dom';\n\nimport type { AccountLoader, AccountsCache } from '@p2p-wallet-web/sail';\nimport { getCacheKeyOfPublicKey } from '@p2p-wallet-web/sail';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport type { Connection, PublicKey } from '@solana/web3.js';\n\nexport const precacheUserTokenAccounts = async (\n  connection: Connection,\n  loader: AccountLoader,\n  accountsCache: AccountsCache,\n  owner: PublicKey,\n): Promise<{ keys: PublicKey[]; ownerPublicKey: PublicKey }> => {\n  const filters = {\n    programId: TOKEN_PROGRAM_ID,\n  };\n\n  const accounts = await connection.getTokenAccountsByOwner(owner, filters);\n\n  unstable_batchedUpdates(() => {\n    accounts.value.forEach((info) => {\n      // Cache in loader\n      loader.prime(info.pubkey, info.account);\n      // Cache in sail\n      accountsCache.set(getCacheKeyOfPublicKey(info.pubkey), info.account);\n      return info.pubkey;\n    });\n  });\n\n  return {\n    keys: accounts.value.map((info) => info.pubkey),\n    ownerPublicKey: owner,\n  };\n};\n","import { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { useSail } from '@p2p-wallet-web/sail';\nimport { useWallet } from '@saberhq/use-solana';\nimport type { PublicKey } from '@solana/web3.js';\nimport { uniqBy } from 'ramda';\nimport { createContainer } from 'unstated-next';\n\nimport { useConnectionContext } from '../solana';\nimport { precacheUserTokenAccounts } from './utils/precacheUserTokenAccounts';\n\nexport interface UseTokenAccounts {\n  userTokenAccountKeys: PublicKey[];\n  updateUserTokenAccountKeys: () => void;\n}\n\nconst useTokenAccountsInternal = (): UseTokenAccounts => {\n  const { connection } = useConnectionContext();\n  const {\n    accounts: { loader, accountsCache },\n  } = useSail();\n  const { publicKey } = useWallet();\n\n  // Initial userTokenAccountKeys\n  const theKey = useMemo(() => (publicKey ? [publicKey] : []), [publicKey?.toBase58()]);\n  const [userTokenAccountKeys, setUserTokenAccountKeys] = useState<PublicKey[]>(theKey);\n\n  const updateUserTokenAccountKeys = useCallback(() => {\n    if (!connection || !publicKey) {\n      setUserTokenAccountKeys([]);\n      return;\n    }\n\n    void precacheUserTokenAccounts(connection, loader, accountsCache, publicKey).then(\n      ({ keys, ownerPublicKey }) => {\n        // if user wallet publicKey already changed - ignore\n        if (!ownerPublicKey.equals(publicKey)) {\n          return;\n        }\n\n        if (keys) {\n          setUserTokenAccountKeys((prevKeys) =>\n            uniqBy((a) => a.toBase58(), [publicKey, ...prevKeys, ...keys]),\n          );\n        }\n      },\n    );\n  }, [accountsCache, connection, loader, publicKey]);\n\n  useEffect(() => {\n    if (!connection || !publicKey) {\n      setUserTokenAccountKeys([]);\n      return;\n    }\n\n    // First query of useAccountsData or useParsedAccountsData set data which will update only after new fetch\n    // so we need to give userTokenAccountKeys to useUserTokenAccounts already with publicKey of user to instant show\n    // this key in list\n    setUserTokenAccountKeys((keys) => uniqBy((a) => a.toBase58(), [publicKey, ...keys]));\n\n    updateUserTokenAccountKeys();\n  }, [\n    accountsCache,\n    connection,\n    loader,\n    publicKey,\n    setUserTokenAccountKeys,\n    updateUserTokenAccountKeys,\n  ]);\n\n  return {\n    userTokenAccountKeys,\n    updateUserTokenAccountKeys,\n  };\n};\n\nexport const { Provider: TokenAccountsProvider, useContainer: useTokenAccountsContext } =\n  createContainer(useTokenAccountsInternal);\n","import type { AbstractTransaction, TransactionDetails } from '../types';\n\nexport class SwapTransaction implements AbstractTransaction {\n  constructor(\n    public source?: string,\n    public sourceAmount?: string,\n    public destination?: string,\n    public destinationAmount?: string,\n  ) {}\n\n  details(sources?: string[]): TransactionDetails {\n    const isReceiver = this.destination ? sources?.includes(this.destination) : false;\n    return {\n      type: 'swap',\n      icon: 'swap',\n      isReceiver,\n\n      amount: isReceiver ? this.destinationAmount : this.sourceAmount,\n      tokenAccount: isReceiver ? this.destination : this.source,\n    };\n  }\n}\n","import { NATIVE_MINT } from '@saberhq/token-utils';\nimport type { ParsedInnerInstruction } from '@solana/web3.js';\n\nimport type { ParsedConfirmedTransaction, ParsedInstruction } from '../../../../../';\nimport { instructionsData } from '../../utils/instructionsData';\nimport type { Parser } from '../';\nimport { SwapTransaction } from './types';\n\n// Example transaction for parsing:\n// https://explorer.solana.com/tx/3toxoqvPizPTAQopZGwrKoSZZpb6jwnETP71rrRsSdbYrpa7xwgWduXxzHCY5nVYXXMMRKNfki1PPHttETU2eEGW\n\nexport class OrcaSwapParser implements Parser {\n  private static _supportedProgramId = [\n    'DjVE6JNiYqPL2QXyCUUh8rNjHrbz9hXHNYt99MQ59qw1' /*swap ocra*/,\n    '9W959DqEETiGZocYWCQPaJ6sBmUzgfxXfqGeTEdp3aQP' /*swap ocra v2*/,\n    '9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL' /*main deprecated*/,\n    'SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8' /*main deprecated*/,\n  ];\n\n  /**\n   Check instruction can be parsed\n   */\n  static can(instructions: ParsedInstruction[]) {\n    return instructions.some((inst) =>\n      this._supportedProgramId.includes(inst.programId.toBase58()),\n    );\n  }\n\n  /**\n   Check liquidity to pool\n   - Parameter instructions: inner instructions\n   */\n  private static _isLiquidityToPool(innerInstructions?: ParsedInnerInstruction[] | null) {\n    const instructions = innerInstructions?.[0]?.instructions as ParsedInstruction[] | null;\n    switch (instructions?.length) {\n      case 3:\n        return (\n          instructions[0]?.parsed?.type === 'transfer' &&\n          instructions[1]?.parsed?.type === 'transfer' &&\n          instructions[2]?.parsed?.type === 'mintTo'\n        );\n      default:\n        return false;\n    }\n  }\n\n  /**\n   Check liquidity to pool\n   - Parameter instructions: inner instructions\n   */\n  private static _isBurn(innerInstructions?: ParsedInnerInstruction[] | null) {\n    const instructions = innerInstructions?.[0]?.instructions as ParsedInstruction[] | null;\n    switch (instructions?.length) {\n      case 3:\n        return (\n          instructions?.length === 3 &&\n          instructions[0]?.parsed?.type === 'burn' &&\n          instructions[1]?.parsed?.type === 'transfer' &&\n          instructions[2]?.parsed?.type === 'transfer'\n        );\n      default:\n        return false;\n    }\n  }\n\n  private static _parseFailedTransaction(\n    transactionInfo: ParsedConfirmedTransaction,\n  ): SwapTransaction | null {\n    const postTokenBalances = transactionInfo.meta?.postTokenBalances;\n    const approveInstruction = transactionInfo.transaction.message.instructions.find(\n      (inst: ParsedInstruction) => inst?.parsed?.type === 'approve',\n    );\n    const sourceAmountString = approveInstruction?.parsed?.info.amount;\n    const destinationMint = postTokenBalances?.at(-1)?.mint;\n\n    if (!postTokenBalances || !approveInstruction || !sourceAmountString || !destinationMint) {\n      return null;\n    }\n\n    let destination: string | undefined;\n    if (destinationMint === NATIVE_MINT.toBase58()) {\n      destination = approveInstruction?.parsed?.info.owner;\n    }\n\n    const source = approveInstruction?.parsed?.info.source;\n    const sourceAmount =\n      sourceAmountString || (postTokenBalances?.at(0)?.uiTokenAmount.amount ?? '0');\n    const destinationAmount = postTokenBalances?.at(-1)?.uiTokenAmount.amount ?? '0';\n\n    // get decimals\n    return new SwapTransaction(source, sourceAmount, destination, destinationAmount);\n  }\n\n  private static _parse(transactionInfo: ParsedConfirmedTransaction): SwapTransaction | null {\n    const swapInstructions = instructionsData(transactionInfo).filter((data) =>\n      this._supportedProgramId.includes(data.instruction.programId.toBase58()),\n    );\n\n    // A swap should have at lease one orca instruction.\n    if (swapInstructions.length === 0) {\n      return this._parseFailedTransaction(transactionInfo);\n    }\n\n    // Get source and target (It can be user's public key, amount of transfer, ...)\n    const sourceInstruction = swapInstructions.at(0)?.innerInstruction?.instructions.at(0);\n    const destinationInstruction = swapInstructions.at(-1)?.innerInstruction?.instructions.at(-1);\n    if (!sourceInstruction || !destinationInstruction) {\n      return this._parseFailedTransaction(transactionInfo);\n    }\n\n    const sourceInfo = sourceInstruction.parsed?.info;\n    const destinationInfo = destinationInstruction.parsed?.info;\n\n    let source = sourceInfo?.source || sourceInfo?.destination;\n    const sourceAmount = sourceInfo?.amount ?? '0';\n    let destination = destinationInfo?.destination || destinationInfo?.source;\n    const destinationAmount = destinationInfo?.amount ?? '0';\n\n    // For swap with WSOL. So WSOL account closed after tx and we try to find true account\n    // 1. SOL/X\n    // 2. X/SOL\n    const closeInstruction = transactionInfo.transaction.message.instructions.find(\n      (inst: ParsedInstruction) => inst.parsed?.type === 'closeAccount',\n    );\n    if (closeInstruction?.parsed) {\n      if (closeInstruction.parsed.info.account === source) {\n        source = closeInstruction.parsed.info.destination;\n      }\n      if (closeInstruction.parsed.info.account === destination) {\n        destination = closeInstruction.parsed.info.destination;\n      }\n    }\n\n    return new SwapTransaction(source, sourceAmount, destination, destinationAmount);\n  }\n\n  static parse(transactionInfo: ParsedConfirmedTransaction): SwapTransaction | null {\n    const innerInstructions = transactionInfo.meta?.innerInstructions;\n\n    switch (true) {\n      case this._isLiquidityToPool(innerInstructions):\n        return null;\n      case this._isBurn(innerInstructions):\n        return null;\n      default:\n        return this._parse(transactionInfo);\n    }\n  }\n}\n","import type {\n  ParsedConfirmedTransaction,\n  ParsedInnerInstruction,\n  ParsedInstruction,\n} from '../../../../types';\n\nexport type ParsedInstructionData = {\n  instruction: ParsedInstruction;\n  innerInstruction?: ParsedInnerInstruction;\n};\n\nexport const instructionsData = (\n  transactionInfo: ParsedConfirmedTransaction,\n): ParsedInstructionData[] => {\n  const instructions = transactionInfo.transaction.message.instructions;\n  const innerInstructions = transactionInfo.meta?.innerInstructions ?? [];\n\n  return instructions.map(\n    (instruction, index) =>\n      <ParsedInstructionData>{\n        instruction,\n        innerInstruction: innerInstructions.find(\n          (innerInstruction) => innerInstruction.index === index,\n        ),\n      },\n  );\n};\n","import { uniq } from 'ramda';\n\nimport { USDC_MINT, USDT_MINT } from '../../../../../../../constants/publicKeys';\nimport type {\n  ParsedConfirmedTransaction,\n  ParsedInnerInstruction,\n  ParsedInstruction,\n} from '../../../../../types';\nimport type { Parser } from '../';\nimport { SwapTransaction } from './types';\n\nexport class SerumSwapParser implements Parser {\n  private static _supportedProgramId = ['22Y43yTVxuUkoRKdm9thyRhQ3SdgQS7c7kB6UNCiaczD'];\n\n  private static _getSerumSwapInstructionIndex(instructions: ParsedInstruction[]): number {\n    return instructions\n      .reverse()\n      .findIndex((inst) => this._supportedProgramId.includes(inst.programId.toBase58()));\n  }\n\n  /**\n   Check if transaction is a serum swap transaction\n   - Parameter instructions: instructions in transaction\n   */\n  static can(instructions: ParsedInstruction[]) {\n    return this._getSerumSwapInstructionIndex(instructions) !== -1;\n  }\n\n  private static _isUSDxMint(mint: string | undefined): boolean {\n    return USDC_MINT.toBase58() === mint || USDT_MINT.toBase58() === mint;\n  }\n\n  static parse(transactionInfo: ParsedConfirmedTransaction): SwapTransaction | null {\n    const instructions = transactionInfo.transaction.message.instructions;\n    const preTokenBalances = transactionInfo.meta?.preTokenBalances;\n\n    const swapInstructionIndex = this._getSerumSwapInstructionIndex(\n      transactionInfo.transaction.message.instructions,\n    );\n    const innerInstruction = (\n      transactionInfo.meta?.innerInstructions as ParsedInnerInstruction[] | undefined\n    )?.find((innerInst) =>\n      innerInst.instructions.some((inst) =>\n        this._supportedProgramId.includes(inst.programId.toBase58()),\n      ),\n    );\n\n    // get swapInstruction\n    const swapInstruction = instructions[swapInstructionIndex];\n    if (!swapInstruction) {\n      return null;\n    }\n\n    // get all mints\n    let mints = preTokenBalances ? uniq(preTokenBalances?.map((balance) => balance.mint)) : [];\n    // max: 3\n    if (mints.length < 2) {\n      return null;\n    }\n\n    // transitive swap: remove usdc or usdt if exists\n    if (mints.length === 3) {\n      mints = mints.filter((mint) => this._isUSDxMint(mint));\n    }\n\n    // define swap type\n    const isTransitiveSwap = !mints.some((mint) => this._isUSDxMint(mint));\n\n    // assert\n    const accounts = swapInstruction.accounts;\n    if (!accounts) {\n      return null;\n    }\n\n    if (isTransitiveSwap && accounts.length != 27) {\n      return null;\n    }\n\n    if (!isTransitiveSwap && accounts.length != 16) {\n      return null;\n    }\n\n    // get from and to address\n    let source: string | undefined;\n    let destination: string | undefined;\n\n    if (isTransitiveSwap) {\n      // transitive\n      source = accounts[6]?.toBase58();\n      destination = accounts[21]?.toBase58();\n    } else {\n      // direct\n      source = accounts[10]?.toBase58();\n      destination = accounts[12]?.toBase58();\n\n      if (this._isUSDxMint(mints.at(0)) && !this._isUSDxMint(mints.at(-1))) {\n        [source, destination] = [destination, source];\n      }\n    }\n\n    // amounts\n    let sourceAmount;\n    let destinationAmount;\n\n    // from amount\n    const fromInstruction = innerInstruction?.instructions.find(\n      (inst) => inst.parsed?.type === 'transfer' && inst.parsed?.info.source === source,\n    );\n    const fromAmountString = fromInstruction?.parsed?.info.amount;\n    if (fromAmountString) {\n      sourceAmount = fromAmountString;\n    }\n\n    // to amount\n    const toInstruction = innerInstruction?.instructions.find(\n      (inst) => inst.parsed?.type === 'transfer' && inst.parsed?.info.destination === destination,\n    );\n    const toAmountString = toInstruction?.parsed?.info.amount;\n    if (toAmountString) {\n      destinationAmount = toAmountString;\n    }\n\n    // if swap from native sol, detect if from or to address is a new account\n    const createAccountInstruction = (instructions as ParsedInstruction[]).find((inst) => {\n      inst.parsed?.type === 'createAccount' && inst.parsed?.info.newAccount === source;\n    });\n    const realSource = createAccountInstruction?.parsed?.info.source;\n    if (realSource) {\n      source = realSource;\n    }\n\n    return new SwapTransaction(source, sourceAmount, destination, destinationAmount);\n  }\n}\n","import type { TokenAmount } from '@p2p-wallet-web/token-utils';\n\nimport type { ParsedConfirmedTransaction, ParsedInstruction } from '../../../../../types';\nimport { getFirstProgram } from '../../utils/getFirstProgram';\nimport type { AbstractTransaction, Parser, TransactionDetails } from '../types';\n\nexport class CreateAccountTransaction implements AbstractTransaction {\n  constructor(public fee: TokenAmount | null, public newAccount?: string) {}\n\n  details(_sources?: string[]): TransactionDetails {\n    return {\n      type: 'createAccount',\n      icon: 'wallet',\n      isReceiver: false,\n    };\n  }\n}\n\nexport class CreateAccountParser implements Parser {\n  /**\n   Check if transaction is create account transaction\n   */\n  static can(instructions: ParsedInstruction[]) {\n    switch (instructions.length) {\n      case 1:\n        return instructions[0]?.program === 'spl-associated-token-account';\n      case 2:\n        return (\n          instructions[0]?.parsed?.type === 'createAccount' &&\n          instructions.at(-1)?.parsed?.type === 'initializeAccount'\n        );\n      default:\n        return false;\n    }\n  }\n\n  static parse(transactionInfo: ParsedConfirmedTransaction): CreateAccountTransaction {\n    const instructions = transactionInfo.transaction.message.instructions;\n\n    const program = getFirstProgram(instructions, 'spl-associated-token-account');\n    if (program) {\n      return new CreateAccountTransaction(null, program.parsed?.info.account);\n    }\n\n    const info = instructions[0]?.parsed?.info;\n    // let initializeAccountInfo = instructions.at(-1)?.parsed?.info\n\n    return new CreateAccountTransaction(info?.lamports, info?.newAccount);\n  }\n}\n","import type { ParsedInstruction } from '../../../../types';\n\nexport const getFirstProgram = (\n  instructions: ParsedInstruction[],\n  name: string,\n): ParsedInstruction | undefined => {\n  return instructions.find((inst) => inst.program === name);\n};\n","import { FEE_PAYER_PUBKEYS } from '../../../../../../../constants/publicKeys';\nimport type { ParsedConfirmedTransaction, ParsedInstruction } from '../../../../../types';\nimport type { AbstractTransaction, Parser, TransactionDetails } from '../types';\n\nexport class TransferTransaction implements AbstractTransaction {\n  constructor(\n    public source: string,\n    public destination: string,\n    public amount: string,\n    public wasPaidByP2POrg?: boolean,\n  ) {}\n\n  details(sources?: string[]): TransactionDetails {\n    const isReceiver = this.destination ? sources?.includes(this.destination) : false;\n\n    return {\n      type: isReceiver ? 'receive' : 'transfer',\n      icon: isReceiver ? 'bottom' : 'top',\n      isReceiver,\n\n      amount: this.amount,\n      tokenAccount: isReceiver ? this.destination : this.source,\n    };\n  }\n}\n\nexport class TransferParser implements Parser {\n  /**\n   Check if transaction is transfer transaction\n   */\n  static can(instructions: ParsedInstruction[]) {\n    return (\n      (instructions.length === 1 || instructions.length === 4 || instructions.length === 2) &&\n      (instructions.at(-1)?.parsed?.type === 'transfer' ||\n        instructions.at(-1)?.parsed?.type === 'transferChecked')\n    );\n  }\n\n  static parse(transactionInfo: ParsedConfirmedTransaction): TransferTransaction {\n    const instructions = transactionInfo.transaction.message.instructions;\n    const accountKeys = transactionInfo.transaction.message.accountKeys;\n\n    // get pubkeys\n    const transferInstruction = instructions.at(-1) as ParsedInstruction | undefined;\n    const source = transferInstruction?.parsed?.info.source;\n    const destination = transferInstruction?.parsed?.info.destination;\n\n    // get lamports\n    const amount =\n      transferInstruction?.parsed?.info.lamports ??\n      transferInstruction?.parsed?.info.amount ??\n      transferInstruction?.parsed?.info.tokenAmount?.amount ??\n      '0';\n\n    // SOL to SOL\n    // SPL to SPL token\n    const result = new TransferTransaction(source, destination, amount);\n\n    // define if transaction was paid by p2p.org\n    const payer = accountKeys[0]?.pubkey?.toBase58();\n    if (payer && FEE_PAYER_PUBKEYS.has(payer)) {\n      result.wasPaidByP2POrg = true;\n    }\n\n    return result;\n  }\n}\n","import { useEffect, useMemo, useState } from 'react';\n\nimport { SailTransactionParseError, useSail, useTransactionsData } from '@p2p-wallet-web/sail';\nimport { zip } from 'ramda';\n\nimport type { ParsedTransactionDatum } from '../../models';\nimport { parser } from '../../models';\n\n/**\n * Parses accounts with the given parser.\n * @param keys\n * @param parser\n * @returns\n */\nexport const useParsedTransactionsData = (\n  keys: (string | null | undefined)[],\n): ParsedTransactionDatum[] => {\n  const { onError } = useSail();\n  const data = useTransactionsData(keys);\n  const [parsed, setParsed] = useState<Record<string, ParsedTransactionDatum>>(\n    keys.reduce<Record<string, ParsedTransactionDatum>>((acc, k) => {\n      if (k) {\n        acc[k] = undefined;\n      }\n\n      return acc;\n    }, {}),\n  );\n\n  useEffect(() => {\n    setParsed((prevParsed) => {\n      const nextParsed = { ...prevParsed };\n      zip(keys, data).forEach(([key, datum]) => {\n        if (datum) {\n          const key = datum.transactionId;\n          // const prevValue = prevParsed[key];\n          // if (\n          //   prevValue &&\n          //   prevValue.raw.length === datum.transactionInfo.data.length &&\n          //   prevValue.raw.equals(datum.transactionInfo.data)\n          // ) {\n          //   // preserve referential equality if buffers are equal\n          //   return;\n          // }\n          try {\n            const parsed = parser(datum);\n            nextParsed[key] = {\n              ...datum,\n              transactionInfo: {\n                ...datum.transactionInfo,\n                data: parsed,\n              },\n              raw: datum.transactionInfo,\n            };\n          } catch (e) {\n            onError(new SailTransactionParseError(e, datum));\n            nextParsed[key] = null;\n            return;\n          }\n        }\n        if (key && datum === null) {\n          nextParsed[key] = null;\n        }\n      });\n      return nextParsed;\n    });\n  }, [data, keys, onError]);\n\n  return useMemo(() => {\n    return keys.map((key) => {\n      if (!key) {\n        return key as null | undefined;\n      }\n      return parsed[key];\n    });\n  }, [keys, parsed]);\n};\n","import type { KeyedTransactionInfo } from '@p2p-wallet-web/sail';\n\nimport type { ParsedConfirmedTransaction } from '../../../types';\nimport type { CustomParsedTransaction } from './parsers';\nimport { CreateAccountParser, OrcaSwapParser, SerumSwapParser, TransferParser } from './parsers';\n\nexport const parser = (info: KeyedTransactionInfo): CustomParsedTransaction => {\n  // get data\n  const transactionInfo = info.transactionInfo as ParsedConfirmedTransaction;\n  const instructions = transactionInfo.transaction.message.instructions;\n\n  let parsed;\n\n  switch (true) {\n    case OrcaSwapParser.can(instructions):\n      parsed = OrcaSwapParser.parse(transactionInfo);\n      break;\n    case SerumSwapParser.can(instructions):\n      parsed = SerumSwapParser.parse(transactionInfo);\n      break;\n    case CreateAccountParser.can(instructions):\n      parsed = CreateAccountParser.parse(transactionInfo);\n      break;\n    case TransferParser.can(instructions):\n      parsed = TransferParser.parse(transactionInfo);\n      break;\n    default:\n      parsed = null;\n      break;\n  }\n\n  return parsed;\n};\n","import { useMemo } from 'react';\n\nimport type { ParsedTransactionDatum } from '../index';\nimport { useParsedTransactionsData } from './useParsedTransactionsData';\n\n/**\n * Loads the parsed data of a single transaction.\n * @returns\n */\nexport const useParsedTransactionData = (\n  key: string | null | undefined,\n): { loading: boolean; data: ParsedTransactionDatum } => {\n  const theKey = useMemo(() => [key], [key]);\n  const [data] = useParsedTransactionsData(theKey);\n  return {\n    loading: key !== undefined && data === undefined,\n    data,\n  };\n};\n","import { useMemo } from 'react';\n\nimport type { PublicKey } from '@solana/web3.js';\n\nimport { useTokenAccountsContext } from '../../../tokenAccounts';\nimport type {\n  CustomParsedTransaction,\n  Transaction,\n  TransactionDetails,\n  TransactionInfo,\n} from '../../models';\nimport { useParsedTransactionData } from '../useParsedTransactionData';\n\nconst transactionDetails = (\n  transaction: TransactionInfo | null | undefined,\n  sources: string[],\n): TransactionDetails => {\n  if (!transaction?.data) {\n    return {\n      type: 'transaction',\n      icon: 'db',\n      isReceiver: false,\n    };\n  }\n\n  // TODO: Do ren btc parsers\n  // else if (type === 'mintRenBTC') {\n  //   icon = 'bottom';\n  //   isReceiver = true;\n  // } else if (type === 'burnRenBTC') {\n  //   icon = 'top';\n  // }\n\n  return transaction.data.details(sources);\n};\n\nexport const useTransaction = (\n  key: string,\n  source?: string,\n): Transaction<CustomParsedTransaction> | undefined => {\n  const { loading, data } = useParsedTransactionData(key);\n  const { userTokenAccountKeys } = useTokenAccountsContext();\n\n  const sources = useMemo(() => {\n    if (source) {\n      return [source];\n    }\n\n    // use user keys if source doesnt provide\n    // uses for transaction status modal\n    return userTokenAccountKeys.map((v: PublicKey) => v.toBase58());\n  }, [source, userTokenAccountKeys]);\n\n  return useMemo(() => {\n    const details = transactionDetails(data?.transactionInfo, sources);\n\n    try {\n      return {\n        key,\n        loading,\n        data: data ? data.transactionInfo.data : null,\n        details,\n        raw: data?.raw,\n      };\n    } catch (e) {\n      console.warn(`Error parsing ${data?.transactionId.toString() ?? '(unknown)'}`, e);\n      return undefined;\n    }\n  }, [data, key, loading, sources]);\n};\n","import { useCallback, useState } from 'react';\n\nimport { usePubkey } from '@p2p-wallet-web/sail';\nimport { useConnectionContext } from '@saberhq/use-solana';\nimport type {\n  ConfirmedSignatureInfo,\n  PublicKey,\n  SignaturesForAddressOptions,\n} from '@solana/web3.js';\nimport { last } from 'ramda';\n\nimport { getTransactionSignatures } from '../utils/connection/getTransactions';\n\nexport const useTransactionSignatures = (\n  _publicKey: PublicKey | string | null | undefined,\n  limit = 10,\n): [ConfirmedSignatureInfo[], boolean, boolean, (isPaging: boolean) => Promise<void>] => {\n  const { connection } = useConnectionContext();\n  const publicKey = usePubkey(_publicKey);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isEnd, setIsEnd] = useState(false);\n  const [signatures, setSignatures] = useState<ConfirmedSignatureInfo[]>([]);\n\n  const fetchTransactionSignatures = useCallback(\n    async (isPaging: boolean | undefined) => {\n      if (!publicKey) {\n        throw new Error('Missing publickey');\n      }\n\n      setIsLoading(true);\n      try {\n        const options: SignaturesForAddressOptions = {\n          limit,\n        };\n\n        if (isPaging) {\n          options.before = signatures ? last(signatures)?.signature : undefined;\n        }\n\n        const newSignatures = await getTransactionSignatures(connection, publicKey, options);\n\n        if (newSignatures.length < limit || newSignatures.length === 0) {\n          setIsEnd(true);\n        }\n\n        setSignatures(() => [...signatures, ...newSignatures]);\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [connection, limit, publicKey, signatures],\n  );\n\n  return [signatures, isLoading, isEnd, fetchTransactionSignatures];\n};\n","export const titleCase = (sentence: string) => {\n  return sentence.replace(/([A-Z]+)*([A-Z][a-z])/g, '$1 $2');\n};\n","//github.com/tc39/proposal-relative-indexing-method#polyfill\nfunction at(n) {\n  // ToInteger() abstract op\n  n = Math.trunc(n) || 0;\n  // Allow negative indexing from the end\n  if (n < 0) n += this.length;\n  // OOB access is guaranteed to return undefined\n  if (n < 0 || n >= this.length) return undefined;\n  // Otherwise, this is just normal property access\n  return this[n];\n}\n\nconst TypedArray = Reflect.getPrototypeOf(Int8Array);\nfor (const C of [Array, String, TypedArray]) {\n  Object.defineProperty(C.prototype, 'at', {\n    value: at,\n    writable: true,\n    enumerable: false,\n    configurable: true,\n  });\n}\n","export enum TransactionErrorType {\n  NotConfirmed = \"not-confirmed\",\n  Cancelled = \"cancelled\",\n  NodeBehind = \"node-behind\",\n  SignatureRequestDenied = \"signature-request-denied\",\n  InsufficientSOL = \"insufficient-sol\",\n  BlockhashNotFound = \"blockhash-not-found\",\n}\n\n/**\n * Categorizes an error coming from the Solana Web3 SDK.\n * @param msg\n * @returns\n */\nexport const categorizeTransactionError = (\n  msg: string\n): TransactionErrorType | null => {\n  if (msg.startsWith(\"Transaction was not confirmed in\")) {\n    return TransactionErrorType.NotConfirmed;\n  }\n  if (msg.startsWith(\"Transaction cancelled\")) {\n    return TransactionErrorType.Cancelled;\n  }\n  if (msg.startsWith(\"failed to send transaction: Node is behind by\")) {\n    return TransactionErrorType.NodeBehind;\n  }\n  if (msg === \"Signature request denied\") {\n    return TransactionErrorType.SignatureRequestDenied;\n  }\n  if (msg === \"Insufficient SOL balance\") {\n    return TransactionErrorType.InsufficientSOL;\n  }\n  if (msg.endsWith(\"Blockhash not found\")) {\n    return TransactionErrorType.BlockhashNotFound;\n  }\n  return null;\n};\n","import type { Network, TransactionEnvelope } from \"@saberhq/solana-contrib\";\nimport type {\n  Commitment,\n  KeyedAccountInfo,\n  PublicKey,\n  TransactionSignature,\n} from \"@solana/web3.js\";\n\nimport type { KeyedTransactionInfo } from \"../internal\";\nimport type { TransactionErrorType } from \"./categorizeTransactionError\";\nimport { categorizeTransactionError } from \"./categorizeTransactionError\";\n\nexport type SailErrorName = `Sail${\n  | \"UnknownTXFail\"\n  | \"Transaction\"\n  | \"InsufficientSOL\"\n  | \"RefetchAfterTX\"\n  | \"RefetchSubscriptions\"\n  | \"TransactionSign\"\n  | \"AccountsCacheRefetch\"\n  | \"TransactionsCacheRefetch\"\n  | \"AccountParse\"\n  | \"AccountLoad\"\n  | \"TransactionParse\"\n  | \"TransactionLoad\"\n  | \"GetMultipleTransactions\"\n  | \"GetMultipleAccounts\"}Error`;\n\nexport const ERROR_TITLES: { [N in SailErrorName]: string } = {\n  SailUnknownTXFailError: \"Transaction failed\",\n  SailTransactionError: \"Transaction processing failed\",\n  SailInsufficientSOLError: \"Insufficient SOL balance\",\n  SailRefetchAfterTXError: \"Error fetching changed accounts\",\n  SailRefetchSubscriptionsError: \"Error refetching subscribed accounts\",\n  SailTransactionSignError: \"Error signing transactions\",\n  SailAccountsCacheRefetchError: \"Error accounts refetching from cache\",\n  SailTransactionsCacheRefetchError: \"Error transactions refetching from cache\",\n  SailAccountParseError: \"Error parsing account\",\n  SailAccountLoadError: \"Error loading account\",\n  SailTransactionParseError: \"Error parsing transaction\",\n  SailTransactionLoadError: \"Error loading transaction\",\n  SailGetMultipleAccountsError: \"Error fetching multiple accounts\",\n  SailGetMultipleTransactionsError: \"Error fetching multiple transactions\",\n};\n\n/**\n * Extracts the message from an error.\n * @param errLike Error-like object.\n * @returns\n */\nexport const extractErrorMessage = (errLike: unknown): string | null => {\n  return \"message\" in (errLike as { message?: string })\n    ? (errLike as { message?: string }).message ?? null\n    : null;\n};\n\n/**\n * Error originating from Sail.\n */\nexport class SailError extends Error {\n  _isSailError = true;\n\n  constructor(\n    /**\n     * Name of the Sail error.\n     */\n    readonly sailErrorName: SailErrorName,\n    /**\n     * The original error thrown, if applicable.\n     */\n    readonly originalError: unknown,\n    /**\n     * Underlying error message.\n     */\n    readonly cause = `${extractErrorMessage(originalError) ?? \"unknown\"}`\n  ) {\n    super(`${ERROR_TITLES[sailErrorName]}: ${cause}`);\n    this.name = sailErrorName;\n    if (originalError instanceof Error) {\n      this.stack = originalError.stack;\n    }\n  }\n\n  /**\n   * Title of the error.\n   */\n  get title(): string {\n    return ERROR_TITLES[this.sailErrorName];\n  }\n}\n\n/**\n * Error originating from Sail.\n */\nexport class SailUnknownTXFailError extends SailError {\n  constructor(\n    originalError: unknown,\n    readonly network: Network,\n    readonly txs: readonly TransactionEnvelope[]\n  ) {\n    super(\"SailUnknownTXFailError\", originalError);\n  }\n}\n\n/**\n * Error on a Solana transaction\n */\nexport class SailTransactionError extends SailError {\n  constructor(\n    readonly network: Network,\n    originalError: unknown,\n    readonly tx: TransactionEnvelope,\n    /**\n     * User message representing the transaction.\n     */\n    readonly userMessage?: string\n  ) {\n    super(\"SailTransactionError\", originalError);\n  }\n\n  /**\n   * Tag used for grouping errors together.\n   */\n  get tag(): TransactionErrorType | null {\n    return categorizeTransactionError(this.message);\n  }\n\n  /**\n   * Returns true if this error is associated with a simulation.\n   */\n  get isSimulation(): boolean {\n    return this.message.includes(\"Transaction simulation failed: \");\n  }\n\n  /**\n   * Fingerprint used for grouping errors.\n   */\n  get fingerprint(): string[] {\n    const tag = this.tag;\n    if (tag) {\n      return [this.name, tag];\n    }\n    return [this.name, ...this.message.split(\": \")];\n  }\n\n  /**\n   * Generates a debug string representation of the transactions involved in this error.\n   * @param network\n   * @returns\n   */\n  generateLogMessage(): string {\n    const parts = [this.tx.debugStr];\n    if (this.network !== \"localnet\") {\n      parts.push(\n        `View on Solana Explorer: ${this.tx.generateInspectLink(this.network)}`\n      );\n    }\n    return parts.join(\"\\n\");\n  }\n}\n\n/**\n * Thrown if there is not enough SOL to pay for a transaction.\n */\nexport class InsufficientSOLError extends SailError {\n  constructor(readonly currentBalance?: number) {\n    super(\"SailInsufficientSOLError\", null, \"Insufficient SOL balance\");\n  }\n}\n\n/**\n * Thrown if there is an error refetching accounts after a transaction.\n */\nexport class SailRefetchAfterTXError extends SailError {\n  constructor(\n    originalError: unknown,\n    readonly writable: readonly PublicKey[],\n    readonly txSigs: readonly TransactionSignature[]\n  ) {\n    super(\"SailRefetchAfterTXError\", originalError);\n  }\n}\n\n/**\n * Thrown if an error occurs when refetching subscriptions.\n */\nexport class SailRefetchSubscriptionsError extends SailError {\n  constructor(originalError: unknown) {\n    super(\"SailRefetchSubscriptionsError\", originalError);\n  }\n}\n\n/**\n * Thrown if transactions could not be signed.\n */\nexport class SailTransactionSignError extends SailError {\n  constructor(\n    originalError: unknown,\n    readonly txs: readonly TransactionEnvelope[]\n  ) {\n    super(\"SailTransactionSignError\", originalError);\n  }\n}\n\n/**\n * Thrown if a cache refetch results in an error.\n */\nexport class SailAccountsCacheRefetchError extends SailError {\n  constructor(\n    originalError: unknown,\n    readonly keys: readonly (PublicKey | null | undefined)[]\n  ) {\n    super(\"SailAccountsCacheRefetchError\", originalError);\n  }\n}\n\n/**\n * Thrown if a cache refetch results in an error.\n */\nexport class SailTransactionsCacheRefetchError extends SailError {\n  constructor(\n    originalError: unknown,\n    readonly keys: readonly (string | null | undefined)[]\n  ) {\n    super(\"SailTransactionsCacheRefetchError\", originalError);\n  }\n}\n\n/**\n * Thrown if there is an error parsing an account.\n */\nexport class SailAccountParseError extends SailError {\n  constructor(originalError: unknown, readonly data: KeyedAccountInfo) {\n    super(\"SailAccountParseError\", originalError);\n  }\n}\n\n/**\n * Thrown if there is an error parsing an account.\n */\nexport class SailTransactionParseError extends SailError {\n  constructor(originalError: unknown, readonly data: KeyedTransactionInfo) {\n    super(\"SailTransactionParseError\", originalError);\n  }\n}\n\n/**\n * Thrown if an account could not be loaded.\n */\nexport class SailAccountLoadError extends SailError {\n  constructor(originalError: unknown, readonly accountId: PublicKey) {\n    super(\"SailAccountLoadError\", originalError);\n  }\n\n  get userMessage(): string {\n    return `Error loading account ${this.accountId.toString()}`;\n  }\n}\n\n/**\n * Thrown if an account could not be loaded.\n */\nexport class SailTransactionLoadError extends SailError {\n  constructor(originalError: unknown, readonly transactionId: string) {\n    super(\"SailTransactionLoadError\", originalError);\n  }\n\n  get userMessage(): string {\n    return `Error loading transaction ${this.transactionId}`;\n  }\n}\n\n/**\n * Callback called whenever getMultipleAccounts fails.\n */\nexport class SailGetMultipleAccountsError extends SailError {\n  constructor(\n    readonly keys: readonly PublicKey[],\n    readonly commitment: Commitment,\n    originalError: unknown\n  ) {\n    super(\"SailGetMultipleAccountsError\", originalError);\n  }\n}\n\n/**\n * Callback called whenever getMultipleTransactions fails.\n */\nexport class SailGetMultipleTransactionsError extends SailError {\n  constructor(\n    readonly keys: readonly string[],\n    readonly commitment: Commitment,\n    originalError: unknown\n  ) {\n    super(\"SailGetMultipleTransactionsError\", originalError);\n  }\n}\n","import { Keypair } from \"@solana/web3.js\";\nimport { useMemo } from \"react\";\n\n/**\n * Parses a Keypair from a JSON secret key.\n * @param valueStr The string representation of the JSON secret key.\n * @returns\n */\nexport const useKeypair = (\n  valueStr: string | null | undefined\n): Keypair | null | undefined => {\n  return useMemo(() => {\n    if (typeof valueStr !== \"string\") {\n      return valueStr;\n    }\n    if (!valueStr) {\n      return null;\n    }\n    try {\n      return Keypair.fromSecretKey(\n        Uint8Array.from([...(JSON.parse(valueStr) as number[])])\n      );\n    } catch (e) {\n      return null;\n    }\n  }, [valueStr]);\n};\n","import { PublicKey } from \"@solana/web3.js\";\nimport { useMemo } from \"react\";\n\n/**\n * Parses a Pubkey.\n * @param raw The string or Pubkey representation of the key.\n * @returns\n */\nexport const usePubkey = (\n  raw: PublicKey | string | null | undefined\n): PublicKey | null | undefined => {\n  return useMemo(() => {\n    if (raw === undefined) {\n      return raw;\n    }\n    if (!raw) {\n      return null;\n    }\n    if (raw instanceof PublicKey) {\n      return raw;\n    }\n    try {\n      return new PublicKey(raw);\n    } catch (e) {\n      return null;\n    }\n  }, [raw]);\n};\n","import { useEffect, useMemo, useState } from \"react\";\n\nimport type { PublicKey } from \"@solana/web3.js\";\nimport { useDebouncedCallback } from \"use-debounce\";\n\nimport type { AccountFetchResult } from \"../\";\nimport {\n  getCacheKeyOfPublicKey,\n  SailAccountsCacheRefetchError,\n  useSail,\n} from \"../\";\nimport type { AccountDatum } from \"../internal\";\n\n/**\n * Fetches data of the given accounts.\n * @param keys Keys to fetch. Ensure that this is memoized or unlikely to change.\n *\n * @returns One of three types:\n * - Buffer -- the account was found\n * - null -- account not found or an error occurred while loading the account\n * - undefined -- account key not provided or not yet loaded\n */\nexport const useAccountsData = (\n  keys: (PublicKey | null | undefined)[]\n): readonly AccountDatum[] => {\n  const {\n    accounts: { getDatum, onCache, subscribe, fetchKeys },\n    onError,\n  } = useSail();\n\n  const [data, setData] = useState<{ [cacheKey: string]: AccountDatum }>(() =>\n    keys.reduce<{ [cacheKey: string]: AccountDatum }>((acc, key) => {\n      if (key) {\n        acc[getCacheKeyOfPublicKey(key)] = getDatum(key);\n      }\n\n      return acc;\n    }, {})\n  );\n\n  // TODO: add cancellation\n  const fetchAndSetKeys = useDebouncedCallback(\n    async (\n      fetchKeys: (\n        keys: (PublicKey | null | undefined)[]\n      ) => Promise<AccountFetchResult[]>,\n      keys: (PublicKey | null | undefined)[]\n    ) => {\n      const keysData = await fetchKeys(keys);\n      const nextData = keys.reduce<{ [cacheKey: string]: AccountDatum }>(\n        (cacheState, key, keyIndex) => {\n          if (key) {\n            cacheState[getCacheKeyOfPublicKey(key)] = keysData[keyIndex]?.data;\n          }\n\n          return cacheState;\n        },\n        {}\n      );\n      setData(nextData);\n    },\n    100\n  );\n\n  useEffect(() => {\n    void (async () => {\n      await fetchAndSetKeys(fetchKeys, keys)?.catch((e) => {\n        onError(new SailAccountsCacheRefetchError(e, keys));\n      });\n    })();\n  }, [keys, fetchAndSetKeys, fetchKeys, onError]);\n\n  // subscribe to account changes\n  useEffect(() => {\n    const allKeysUnsubscribe = keys\n      .filter((k): k is PublicKey => !!k)\n      .map(subscribe);\n    return () => {\n      allKeysUnsubscribe.map((fn) => fn());\n    };\n  }, [keys, subscribe]);\n\n  // refresh from the cache whenever the cache is updated\n  useEffect(() => {\n    return onCache((e) => {\n      if (keys.find((key) => key?.equals(e.id))) {\n        void fetchAndSetKeys(fetchKeys, keys)?.catch((e) => {\n          onError(new SailAccountsCacheRefetchError(e, keys));\n        });\n      }\n    });\n  }, [keys, onCache, fetchAndSetKeys, fetchKeys, onError]);\n\n  // unload debounces when the component dismounts\n  useEffect(() => {\n    return () => {\n      fetchAndSetKeys.cancel();\n    };\n  }, [fetchAndSetKeys]);\n\n  return useMemo(() => {\n    return keys.map((key) => {\n      if (!key) {\n        return key;\n      }\n\n      return data[getCacheKeyOfPublicKey(key)];\n    });\n  }, [data, keys]);\n};\n","import { useMemo } from \"react\";\n\nimport type { PublicKey } from \"@solana/web3.js\";\n\nimport type { AccountDatum } from \"../internal\";\nimport { useAccountsData } from \"./useAccountsData\";\n\nexport const useAccountData = (\n  key?: PublicKey | null\n): { loading: boolean; data: AccountDatum } => {\n  const theKey = useMemo(() => [key], [key]);\n  const [data] = useAccountsData(theKey);\n  return {\n    loading: key !== undefined && data === undefined,\n    data,\n  };\n};\n","import { useEffect, useMemo, useState } from \"react\";\n\nimport type { AccountParsers } from \"@saberhq/anchor-contrib\";\nimport type { KeyedAccountInfo, PublicKey } from \"@solana/web3.js\";\nimport mapValues from \"lodash.mapvalues\";\nimport zip from \"lodash.zip\";\n\nimport {\n  getCacheKeyOfPublicKey,\n  SailAccountParseError,\n  useSail,\n} from \"../index\";\nimport type { ParsedAccountDatum } from \"../internal\";\nimport { useAccountsData } from \"./useAccountsData\";\n\nexport type AccountParser<T> = (info: KeyedAccountInfo) => T;\n\n/**\n * Makes account parsers from a coder.\n * @param parsers\n * @returns\n */\nexport const makeParsersFromCoder = <M>(parsers: AccountParsers<M>) => {\n  return mapValues(\n    parsers,\n    (p) => (info: KeyedAccountInfo) => p(info.accountInfo.data)\n  );\n};\n\nexport type ParserHooks<T> = {\n  useSingleData: (key: PublicKey | null | undefined) => {\n    loading: boolean;\n    data: ParsedAccountDatum<T>;\n  };\n  useData: (keys: (PublicKey | null | undefined)[]) => ParsedAccountDatum<T>[];\n};\n\n/**\n * Makes hooks for parsers.\n * @param parsers\n * @returns\n */\nexport const makeParserHooks = <M>(\n  parsers: AccountParsers<M>\n): {\n  [K in keyof M]: ParserHooks<M[K]>;\n} => {\n  const sailParsers = makeParsersFromCoder(parsers);\n  return mapValues(sailParsers, (parser) => ({\n    useSingleData: (key: PublicKey | null | undefined) =>\n      useParsedAccountData(key, parser),\n    useData: (keys: (PublicKey | null | undefined)[]) =>\n      useParsedAccountsData(keys, parser),\n  })) as {\n    [K in keyof M]: ParserHooks<M[K]>;\n  };\n};\n\n/**\n * Parses accounts with the given parser.\n * @param keys\n * @param parser\n * @returns\n */\nexport const useParsedAccountsData = <T>(\n  keys: (PublicKey | null | undefined)[],\n  parser: AccountParser<T>\n): ParsedAccountDatum<T>[] => {\n  const { onError } = useSail();\n  const data = useAccountsData(keys);\n  const [parsed, setParsed] = useState<Record<string, ParsedAccountDatum<T>>>(\n    keys.reduce<Record<string, ParsedAccountDatum<T>>>((acc, k) => {\n      if (k) {\n        acc[getCacheKeyOfPublicKey(k)] = undefined;\n      }\n\n      return acc;\n    }, {})\n  );\n\n  useEffect(() => {\n    setParsed((prevParsed) => {\n      const nextParsed = { ...prevParsed };\n      zip(keys, data).forEach(([key, datum]) => {\n        if (datum) {\n          const key = getCacheKeyOfPublicKey(datum.accountId);\n          const prevValue = prevParsed[key];\n          if (\n            prevValue &&\n            prevValue.raw.length === datum.accountInfo.data.length &&\n            prevValue.raw.equals(datum.accountInfo.data)\n          ) {\n            // preserve referential equality if buffers are equal\n            return;\n          }\n          try {\n            const parsed = parser(datum);\n            nextParsed[key] = {\n              ...datum,\n              accountInfo: {\n                ...datum.accountInfo,\n                data: parsed,\n              },\n              raw: datum.accountInfo.data,\n            };\n          } catch (e) {\n            onError(new SailAccountParseError(e, datum));\n            nextParsed[key] = null;\n            return;\n          }\n        }\n        if (key && datum === null) {\n          nextParsed[getCacheKeyOfPublicKey(key)] = null;\n        }\n      });\n      return nextParsed;\n    });\n  }, [data, keys, onError, parser]);\n\n  return useMemo(() => {\n    return keys.map((key) => {\n      if (!key) {\n        return key;\n      }\n      return parsed[getCacheKeyOfPublicKey(key)];\n    });\n  }, [keys, parsed]);\n};\n\n/**\n * Loads the parsed data of a single account.\n * @returns\n */\nexport const useParsedAccountData = <T>(\n  key: PublicKey | null | undefined,\n  parser: AccountParser<T>\n): { loading: boolean; data: ParsedAccountDatum<T> } => {\n  const theKey = useMemo(() => [key], [key]);\n  const [data] = useParsedAccountsData(theKey, parser);\n  return {\n    loading: key !== undefined && data === undefined,\n    data,\n  };\n};\n","import { useEffect, useMemo, useState } from \"react\";\n\nimport { useDebouncedCallback } from \"use-debounce\";\n\nimport type { TransactionDatum, TransactionFetchResult } from \"../\";\nimport { SailTransactionsCacheRefetchError, useSail } from \"../\";\n\n/**\n * Fetches data of the given signatures.\n * @param keys Keys to fetch. Ensure that this is memoized or unlikely to change.\n *\n * @returns One of three types:\n * - Buffer -- the transaction was found\n * - null -- transaction not found or an error occurred while loading the transaction\n * - undefined -- transaction key not provided or not yet loaded\n */\nexport const useTransactionsData = (\n  keys: (string | null | undefined)[]\n): readonly TransactionDatum[] => {\n  const {\n    transactions: { getDatum, onCache, subscribe, fetchKeys },\n    onError,\n  } = useSail();\n\n  const [data, setData] = useState<{ [cacheKey: string]: TransactionDatum }>(\n    () =>\n      keys.reduce<{ [cacheKey: string]: TransactionDatum }>((acc, key) => {\n        if (key) {\n          acc[key] = getDatum(key);\n        }\n\n        return acc;\n      }, {})\n  );\n\n  // TODO: add cancellation\n  const fetchAndSetKeys = useDebouncedCallback(\n    async (\n      fetchKeys: (\n        keys: (string | null | undefined)[]\n      ) => Promise<TransactionFetchResult[]>,\n      keys: (string | null | undefined)[]\n    ) => {\n      const keysData = await fetchKeys(keys);\n      const nextData = keys.reduce<{ [cacheKey: string]: TransactionDatum }>(\n        (cacheState, key, keyIndex) => {\n          if (key) {\n            cacheState[key] = keysData[keyIndex]?.data;\n          }\n\n          return cacheState;\n        },\n        {}\n      );\n      setData(nextData);\n    },\n    100\n  );\n\n  useEffect(() => {\n    void (async () => {\n      await fetchAndSetKeys(fetchKeys, keys)?.catch((e) => {\n        onError(new SailTransactionsCacheRefetchError(e, keys));\n      });\n    })();\n  }, [keys, fetchAndSetKeys, fetchKeys, onError]);\n\n  // subscribe to account changes\n  useEffect(() => {\n    const allKeysUnsubscribe = keys\n      .filter((k): k is string => !!k)\n      .map(subscribe);\n    return () => {\n      allKeysUnsubscribe.map((fn) => fn());\n    };\n  }, [keys, subscribe]);\n\n  // refresh from the cache whenever the cache is updated\n  useEffect(() => {\n    return onCache((e) => {\n      if (keys.find((key) => key === e.id)) {\n        void fetchAndSetKeys(fetchKeys, keys)?.catch((e) => {\n          onError(new SailTransactionsCacheRefetchError(e, keys));\n        });\n      }\n    });\n  }, [keys, onCache, fetchAndSetKeys, fetchKeys, onError]);\n\n  // unload debounces when the component dismounts\n  useEffect(() => {\n    return () => {\n      fetchAndSetKeys.cancel();\n    };\n  }, [fetchAndSetKeys]);\n\n  return useMemo(() => {\n    return keys.map((key) => {\n      if (key) {\n        return data[key];\n      }\n\n      return key as null | undefined;\n    });\n  }, [data, keys]);\n};\n","import { useMemo } from \"react\";\n\nimport type { TransactionDatum } from \"../internal\";\nimport { useTransactionsData } from \"./useTransactionsData\";\n\nexport const useTransactionData = (\n  key?: string | null\n): { loading: boolean; data: TransactionDatum } => {\n  const theKey = useMemo(() => [key], [key]);\n  const [data] = useTransactionsData(theKey);\n  return {\n    loading: key !== undefined && data === undefined,\n    data,\n  };\n};\n","import type { PublicKey } from \"@solana/web3.js\";\nimport { EventEmitter as Emitter } from \"eventemitter3\";\n\nexport class CacheUpdateEvent {\n  static type = \"CacheUpdate\";\n  id: PublicKey;\n  isNew: boolean;\n  constructor(id: PublicKey, isNew: boolean) {\n    this.id = id;\n    this.isNew = isNew;\n  }\n}\n\nexport class CacheDeleteEvent {\n  static type = \"CacheUpdate\";\n  id: PublicKey;\n  constructor(id: PublicKey) {\n    this.id = id;\n  }\n}\n\nexport class CacheClearEvent {\n  static type = \"CacheDelete\";\n}\n\nexport class AccountsEmitter {\n  private readonly _emitter = new Emitter();\n\n  onCache(callback: (args: CacheUpdateEvent) => void): () => void {\n    this._emitter.on(CacheUpdateEvent.type, callback);\n\n    return () => this._emitter.removeListener(CacheUpdateEvent.type, callback);\n  }\n\n  raiseCacheUpdated(id: PublicKey, isNew: boolean): void {\n    this._emitter.emit(CacheUpdateEvent.type, new CacheUpdateEvent(id, isNew));\n  }\n\n  raiseCacheDeleted(id: PublicKey): void {\n    this._emitter.emit(CacheDeleteEvent.type, new CacheDeleteEvent(id));\n  }\n\n  raiseCacheCleared(): void {\n    this._emitter.emit(CacheClearEvent.type, new CacheClearEvent());\n  }\n}\n","import type { PublicKey } from \"@solana/web3.js\";\nimport zip from \"lodash.zip\";\nimport invariant from \"tiny-invariant\";\n\nimport { SailAccountLoadError } from \"../../errors\";\nimport type { AccountFetchResult } from \"./types\";\nimport type { AccountLoader } from \"./useAccountsInternal\";\n\nexport const fetchKeysUsingLoader = async (\n  loader: AccountLoader,\n  keys: (PublicKey | null | undefined)[]\n): Promise<AccountFetchResult[]> => {\n  const keysWithIndex = keys.map((k, i) => [k, i]);\n  const keysSpecified = keysWithIndex.filter(\n    (args): args is [PublicKey, number] => !!args[0]\n  );\n  const result = await loader.loadMany(keysSpecified.map((k) => k[0]));\n  const nextData: AccountFetchResult[] = keys.map(() => ({ data: undefined }));\n  zip(keysSpecified, result).forEach(([indexInfo, keyResult]) => {\n    invariant(indexInfo, \"index info missing\");\n    invariant(keyResult !== undefined, \"key result missing\");\n\n    const [accountId, nextIndex] = indexInfo;\n    if (keyResult instanceof Error) {\n      return (nextData[nextIndex] = {\n        data: null,\n        error: new SailAccountLoadError(keyResult, accountId),\n      });\n    }\n    return (nextData[nextIndex] = {\n      data: keyResult\n        ? {\n            accountId,\n            accountInfo: keyResult,\n          }\n        : null,\n    });\n  });\n  return nextData;\n};\n","import type {\n  AccountInfo,\n  Commitment,\n  Connection,\n  PublicKey,\n} from \"@solana/web3.js\";\n\nimport { chunks, SailGetMultipleAccountsError } from \"../../../\";\n\nconst GET_MULTIPLE_ACCOUNTS_CHUNK_SIZE = 99;\n\nexport const getMultipleAccounts = async (\n  connection: Connection,\n  keys: readonly PublicKey[],\n  onGetMultipleAccountsError: (err: SailGetMultipleAccountsError) => void,\n  commitment: Commitment = \"recent\"\n): Promise<{\n  keys: readonly PublicKey[];\n  array: readonly (AccountInfo<Buffer> | null | SailGetMultipleAccountsError)[];\n}> => {\n  const result = await Promise.all(\n    chunks(keys, GET_MULTIPLE_ACCOUNTS_CHUNK_SIZE).map(\n      async (\n        chunk\n      ): Promise<\n        {\n          keys: PublicKey[];\n        } & (\n          | {\n              array: (AccountInfo<Buffer> | null)[];\n            }\n          | {\n              error: SailGetMultipleAccountsError;\n            }\n        )\n      > => {\n        try {\n          return {\n            keys: chunk,\n            array: await connection.getMultipleAccountsInfo(chunk, commitment),\n          };\n        } catch (e) {\n          const error = new SailGetMultipleAccountsError(chunk, commitment, e);\n          onGetMultipleAccountsError(error);\n          return {\n            keys: chunk,\n            error,\n          };\n        }\n      }\n    )\n  );\n  const array = result\n    .map((el) => {\n      if (\"error\" in el) {\n        return el.keys.map(() => el.error);\n      }\n      return el.array;\n    })\n    .flat();\n  return { keys, array };\n};\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { unstable_batchedUpdates } from \"react-dom\";\n\nimport { useConnectionContext } from \"@saberhq/use-solana\";\nimport type { AccountInfo } from \"@solana/web3.js\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport DataLoader from \"dataloader\";\n\nimport type { AccountFetchResult, SailError } from \"../../\";\nimport { SailRefetchSubscriptionsError } from \"../../\";\nimport type { CacheUpdateEvent } from \"./emitter\";\nimport { AccountsEmitter } from \"./emitter\";\nimport { fetchKeysUsingLoader } from \"./fetchKeysUsingLoader\";\nimport type { AccountDatum } from \"./types\";\nimport { getMultipleAccounts } from \"./utils/getMultipleAccounts\";\n\n/**\n * Gets the cache key associated with the given pubkey.\n * @param pubkey\n * @returns\n */\nexport const getCacheKeyOfPublicKey = (pubkey: PublicKey): string =>\n  pubkey.toBuffer().toString(\"base64\");\n\nexport type AccountLoader = DataLoader<\n  PublicKey,\n  AccountInfo<Buffer> | null,\n  string\n>;\n\nexport type AccountsCache = Map<string, AccountInfo<Buffer> | null>;\n\ninterface AccountsProviderState {\n  accountsCache: AccountsCache;\n  emitter: AccountsEmitter;\n  subscribedAccounts: Map<string, number>;\n}\n\nconst newState = (): AccountsProviderState => ({\n  accountsCache: new Map<string, AccountInfo<Buffer> | null>(),\n  emitter: new AccountsEmitter(),\n  subscribedAccounts: new Map(),\n});\n\nexport interface UseAccountsArgs {\n  /**\n   * Duration in ms in which to batch all accounts data requests. Defaults to 500ms.\n   */\n  batchDurationMs?: number;\n  /**\n   * Milliseconds between each refresh. Defaults to 60_000.\n   */\n  refreshIntervalMs?: number;\n  /**\n   * Called whenever an error occurs.\n   */\n  onError: (err: SailError) => void;\n}\n\nexport interface UseAccounts extends Omit<UseAccountsArgs, \"onError\"> {\n  /**\n   * The loader. Usually should not be used directly.\n   */\n  loader: AccountLoader;\n  /**\n   * Cache of accounts\n   */\n  accountsCache: AccountsCache;\n  /**\n   * Emitter of accounts\n   */\n  emitter: AccountsEmitter;\n\n  /**\n   * Refetches an account.\n   */\n  refetch: (key: PublicKey) => Promise<AccountInfo<Buffer> | null>;\n  /**\n   * Refetches multiple accounts.\n   */\n  refetchMany: (\n    keys: PublicKey[]\n  ) => Promise<(AccountInfo<Buffer> | Error | null)[]>;\n  /**\n   * Refetches all accounts that are being subscribed to.\n   */\n  refetchAllSubscriptions: () => Promise<void>;\n\n  /**\n   * Registers a callback to be called whenever an item is cached.\n   */\n  onCache: (cb: (args: CacheUpdateEvent) => void) => void;\n\n  /**\n   * Fetches the data associated with the given keys, via the AccountLoader.\n   */\n  fetchKeys: (\n    keys: (PublicKey | null | undefined)[]\n  ) => Promise<AccountFetchResult[]>;\n\n  /**\n   * Causes a key to be refetched periodically.\n   */\n  subscribe: (key: PublicKey) => () => Promise<void>;\n\n  /**\n   * Gets the cached data of an account.\n   */\n  getCached: (key: PublicKey) => AccountInfo<Buffer> | null | undefined;\n  /**\n   * Gets an AccountDatum from the cache.\n   *\n   * If the AccountInfo has never been fetched, this returns undefined.\n   * If the AccountInfo has been fetched but wasn't found, this returns null.\n   */\n  getDatum: (key: PublicKey | null | undefined) => AccountDatum;\n}\n\nexport const useAccountsInternal = (args: UseAccountsArgs): UseAccounts => {\n  const { batchDurationMs = 500, refreshIntervalMs = 60_000, onError } = args;\n  const { network, connection } = useConnectionContext();\n\n  // Cache of accounts\n  const [{ accountsCache, emitter, subscribedAccounts }, setState] =\n    useState<AccountsProviderState>(newState());\n\n  useEffect(() => {\n    setState((prevState) => {\n      // clear accounts cache and subscriptions whenever the network changes\n      prevState.accountsCache.clear();\n      prevState.subscribedAccounts.clear();\n      prevState.emitter.raiseCacheCleared();\n      return newState();\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [network]);\n\n  const accountLoader = useMemo(\n    () =>\n      new DataLoader<PublicKey, AccountInfo<Buffer> | null, string>(\n        async (keys: readonly PublicKey[]) => {\n          const result = await getMultipleAccounts(\n            connection,\n            keys,\n            onError,\n            \"recent\"\n          );\n          unstable_batchedUpdates(() => {\n            result.array.forEach((info, i) => {\n              const addr = keys[i];\n              if (addr && !(info instanceof Error)) {\n                accountsCache.set(getCacheKeyOfPublicKey(addr), info);\n                emitter.raiseCacheUpdated(addr, true);\n              }\n            });\n          });\n          return result.array;\n        },\n        {\n          // aggregate all requests over 500ms\n          batchScheduleFn: (callback) => setTimeout(callback, batchDurationMs),\n          cacheKeyFn: getCacheKeyOfPublicKey,\n        }\n      ),\n    [accountsCache, batchDurationMs, connection, emitter, onError]\n  );\n\n  const fetchKeys = useCallback(\n    async (keys: (PublicKey | null | undefined)[]) => {\n      return await fetchKeysUsingLoader(accountLoader, keys);\n    },\n    [accountLoader]\n  );\n\n  const onCache = useMemo(() => emitter.onCache.bind(emitter), [emitter]);\n\n  const refetch = useCallback(\n    async (key: PublicKey) => {\n      const result = await accountLoader.clear(key).load(key);\n      return result;\n    },\n    [accountLoader]\n  );\n\n  const refetchMany = useCallback(\n    async (keys: PublicKey[]) => {\n      keys.forEach((key) => {\n        accountLoader.clear(key);\n      });\n      return await accountLoader.loadMany(keys);\n    },\n    [accountLoader]\n  );\n\n  const getCached = useCallback(\n    (key: PublicKey): AccountInfo<Buffer> | null | undefined => {\n      // null: account not found on blockchain\n      // undefined: cache miss (not yet fetched)\n      return accountsCache.get(getCacheKeyOfPublicKey(key));\n    },\n    [accountsCache]\n  );\n\n  const subscribe = useCallback(\n    (key: PublicKey): (() => Promise<void>) => {\n      const keyStr = getCacheKeyOfPublicKey(key);\n      const amount = subscribedAccounts.get(keyStr);\n      if (amount === undefined || amount === 0) {\n        subscribedAccounts.set(keyStr, 1);\n      } else {\n        subscribedAccounts.set(keyStr, amount + 1);\n      }\n      return () => {\n        const currentAmount = subscribedAccounts.get(keyStr);\n        if ((currentAmount ?? 0) > 1) {\n          subscribedAccounts.set(keyStr, (currentAmount ?? 0) - 1);\n        } else {\n          subscribedAccounts.delete(keyStr);\n        }\n        return Promise.resolve();\n      };\n    },\n    [subscribedAccounts]\n  );\n\n  const refetchAllSubscriptions = useCallback(async () => {\n    const keysToFetch = [...subscribedAccounts.keys()].map((keyStr) => {\n      return new PublicKey(Buffer.from(keyStr, \"base64\"));\n    });\n    await refetchMany(keysToFetch);\n  }, [refetchMany, subscribedAccounts]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      void refetchAllSubscriptions().catch((e) => {\n        onError(new SailRefetchSubscriptionsError(e));\n      });\n    }, refreshIntervalMs);\n    return () => clearInterval(interval);\n  }, [onError, refetchAllSubscriptions, refreshIntervalMs]);\n\n  const getDatum = useCallback(\n    (k: PublicKey | null | undefined) => {\n      if (!k) {\n        return k;\n      }\n      const accountInfo = getCached(k);\n      if (accountInfo) {\n        return {\n          accountId: k,\n          accountInfo,\n        };\n      }\n      return accountInfo;\n    },\n    [getCached]\n  );\n\n  return {\n    loader: accountLoader,\n    accountsCache,\n    emitter,\n\n    getCached,\n    getDatum,\n    refetch,\n    refetchMany,\n    refetchAllSubscriptions,\n    onCache,\n    fetchKeys,\n    subscribe,\n\n    batchDurationMs,\n    refreshIntervalMs,\n  };\n};\n","import { EventEmitter as Emitter } from \"eventemitter3\";\n\nexport class CacheUpdateEvent {\n  static type = \"CacheUpdate\";\n  id: string;\n  isNew: boolean;\n  constructor(id: string, isNew: boolean) {\n    this.id = id;\n    this.isNew = isNew;\n  }\n}\n\nexport class CacheDeleteEvent {\n  static type = \"CacheUpdate\";\n  id: string;\n  constructor(id: string) {\n    this.id = id;\n  }\n}\n\nexport class CacheClearEvent {\n  static type = \"CacheDelete\";\n}\n\nexport class TransactionsEmitter {\n  private readonly _emitter = new Emitter();\n\n  onCache(callback: (args: CacheUpdateEvent) => void): () => void {\n    this._emitter.on(CacheUpdateEvent.type, callback);\n\n    return () => this._emitter.removeListener(CacheUpdateEvent.type, callback);\n  }\n\n  raiseCacheUpdated(id: string, isNew: boolean): void {\n    this._emitter.emit(CacheUpdateEvent.type, new CacheUpdateEvent(id, isNew));\n  }\n\n  raiseCacheDeleted(id: string): void {\n    this._emitter.emit(CacheDeleteEvent.type, new CacheDeleteEvent(id));\n  }\n\n  raiseCacheCleared(): void {\n    this._emitter.emit(CacheClearEvent.type, new CacheClearEvent());\n  }\n}\n","import zip from \"lodash.zip\";\nimport invariant from \"tiny-invariant\";\n\nimport { SailTransactionLoadError } from \"../../errors\";\nimport type { TransactionFetchResult } from \"./types\";\nimport type { TransactionLoader } from \"./useTransactionsInternal\";\n\nexport const fetchKeysUsingLoader = async (\n  loader: TransactionLoader,\n  keys: (string | null | undefined)[]\n): Promise<TransactionFetchResult[]> => {\n  const keysWithIndex = keys.map((k, i) => [k, i]);\n  const keysSpecified = keysWithIndex.filter(\n    (args): args is [string, number] => !!args[0]\n  );\n  const result = await loader.loadMany(keysSpecified.map((k) => k[0]));\n  const nextData: TransactionFetchResult[] = keys.map(() => ({\n    data: undefined,\n  }));\n  zip(keysSpecified, result).forEach(([indexInfo, keyResult]) => {\n    invariant(indexInfo, \"index info missing\");\n    invariant(keyResult !== undefined, \"key result missing\");\n\n    const [transactionId, nextIndex] = indexInfo;\n    if (keyResult instanceof Error) {\n      return (nextData[nextIndex] = {\n        data: null,\n        error: new SailTransactionLoadError(keyResult, transactionId),\n      });\n    }\n    return (nextData[nextIndex] = {\n      data: keyResult\n        ? {\n            transactionId,\n            transactionInfo: keyResult,\n          }\n        : null,\n    });\n  });\n  return nextData;\n};\n","import type {\n  Connection,\n  Finality,\n  ParsedConfirmedTransaction,\n} from \"@solana/web3.js\";\n\nimport { chunks, SailGetMultipleTransactionsError } from \"../../../\";\n\nconst GET_MULTIPLE_TRANSACTIONS_CHUNK_SIZE = 99;\n\nexport const getMultipleTransactions = async (\n  connection: Connection,\n  keys: readonly string[],\n  onGetMultipleAccountsError: (err: SailGetMultipleTransactionsError) => void,\n  commitment: Finality = \"confirmed\"\n): Promise<{\n  keys: readonly string[];\n  array: readonly (\n    | ParsedConfirmedTransaction\n    | null\n    | SailGetMultipleTransactionsError\n  )[];\n}> => {\n  const result = await Promise.all(\n    chunks(keys, GET_MULTIPLE_TRANSACTIONS_CHUNK_SIZE).map(\n      async (\n        chunk\n      ): Promise<\n        {\n          keys: string[];\n        } & (\n          | {\n              array: (ParsedConfirmedTransaction | null)[];\n            }\n          | {\n              error: SailGetMultipleTransactionsError;\n            }\n        )\n      > => {\n        try {\n          return {\n            keys: chunk,\n            array: await connection.getParsedConfirmedTransactions(\n              chunk,\n              commitment\n            ),\n          };\n        } catch (e) {\n          const error = new SailGetMultipleTransactionsError(\n            chunk,\n            commitment,\n            e\n          );\n          onGetMultipleAccountsError(error);\n          return {\n            keys: chunk,\n            error,\n          };\n        }\n      }\n    )\n  );\n  const array = result\n    .map((el) => {\n      if (\"error\" in el) {\n        return el.keys.map(() => el.error);\n      }\n      return el.array;\n    })\n    .flat();\n  return { keys, array };\n};\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { unstable_batchedUpdates } from \"react-dom\";\n\nimport { useConnectionContext } from \"@saberhq/use-solana\";\nimport type { ParsedConfirmedTransaction } from \"@solana/web3.js\";\nimport DataLoader from \"dataloader\";\n\nimport type {\n  SailError,\n  TransactionDatum,\n  TransactionFetchResult,\n} from \"../../\";\nimport { SailRefetchSubscriptionsError } from \"../../\";\nimport type { CacheUpdateEvent } from \"./emitter\";\nimport { TransactionsEmitter } from \"./emitter\";\nimport { fetchKeysUsingLoader } from \"./fetchKeysUsingLoader\";\nimport { getMultipleTransactions } from \"./utils/getMultipleTransactions\";\n\nexport type TransactionLoader = DataLoader<\n  string,\n  ParsedConfirmedTransaction | null,\n  string\n>;\n\nexport type TransactionsCache = Map<string, ParsedConfirmedTransaction | null>;\n\ninterface TransactionsProviderState {\n  transactionsCache: TransactionsCache;\n  emitter: TransactionsEmitter;\n  subscribedTransactions: Map<string, number>;\n}\n\nconst newState = (): TransactionsProviderState => ({\n  transactionsCache: new Map<string, ParsedConfirmedTransaction | null>(),\n  emitter: new TransactionsEmitter(),\n  subscribedTransactions: new Map(),\n});\n\nexport interface UseTransactionsArgs {\n  /**\n   * Duration in ms in which to batch all transactions data requests. Defaults to 500ms.\n   */\n  batchDurationMs?: number;\n  /**\n   * Milliseconds between each refresh. Defaults to 60_000.\n   */\n  refreshIntervalMs?: number;\n  /**\n   * Called whenever an error occurs.\n   */\n  onError: (err: SailError) => void;\n}\n\nexport interface UseTransactions extends Omit<UseTransactionsArgs, \"onError\"> {\n  /**\n   * The loader. Usually should not be used directly.\n   */\n  loader: TransactionLoader;\n  /**\n   * Cache of transactions\n   */\n  transactionsCache: TransactionsCache;\n  /**\n   * Emitter of transactions\n   */\n  emitter: TransactionsEmitter;\n\n  /**\n   * Refetches a transaction.\n   */\n  refetch: (key: string) => Promise<ParsedConfirmedTransaction | null>;\n  /**\n   * Refetches multiple transactions.\n   */\n  refetchMany: (\n    keys: string[]\n  ) => Promise<(ParsedConfirmedTransaction | Error | null)[]>;\n  /**\n   * Refetches all transactions that are being subscribed to.\n   */\n  refetchAllSubscriptions: () => Promise<void>;\n\n  /**\n   * Registers a callback to be called whenever an item is cached.\n   */\n  onCache: (cb: (args: CacheUpdateEvent) => void) => void;\n\n  /**\n   * Fetches the data associated with the given keys, via the transactionLoader.\n   */\n  fetchKeys: (\n    keys: (string | null | undefined)[]\n  ) => Promise<TransactionFetchResult[]>;\n\n  /**\n   * Causes a key to be refetched periodically.\n   */\n  subscribe: (key: string) => () => Promise<void>;\n\n  /**\n   * Gets the cached data of a transaction.\n   */\n  getCached: (key: string) => ParsedConfirmedTransaction | null | undefined;\n  /**\n   * Gets an TransactionDatum from a key.\n   */\n  getDatum: (key: string | null | undefined) => TransactionDatum;\n}\n\nexport const useTransactionsInternal = (\n  args: UseTransactionsArgs\n): UseTransactions => {\n  const { batchDurationMs = 500, refreshIntervalMs = 60_000, onError } = args;\n  const { network, connection } = useConnectionContext();\n\n  // Cache of transactions\n  const [{ transactionsCache, emitter, subscribedTransactions }, setState] =\n    useState<TransactionsProviderState>(newState());\n\n  useEffect(() => {\n    setState((prevState) => {\n      // clear transactions cache and subscriptions whenever the network changes\n      prevState.transactionsCache.clear();\n      prevState.subscribedTransactions.clear();\n      prevState.emitter.raiseCacheCleared();\n      return newState();\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [network]);\n\n  const transactionLoader = useMemo(\n    () =>\n      new DataLoader<string, ParsedConfirmedTransaction | null, string>(\n        async (keys: readonly string[]) => {\n          const result = await getMultipleTransactions(\n            connection,\n            keys,\n            onError,\n            \"confirmed\"\n          );\n          unstable_batchedUpdates(() => {\n            result.array.forEach((info, i) => {\n              const addr = keys[i];\n              if (addr && !(info instanceof Error)) {\n                transactionsCache.set(addr, info);\n                emitter.raiseCacheUpdated(addr, true);\n              }\n            });\n          });\n          return result.array;\n        },\n        {\n          // aggregate all requests over 500ms\n          batchScheduleFn: (callback) => setTimeout(callback, batchDurationMs),\n          // cacheKeyFn: getCacheKeyOfPublicKey,\n        }\n      ),\n    [transactionsCache, batchDurationMs, connection, emitter, onError]\n  );\n\n  const fetchKeys = useCallback(\n    async (keys: (string | null | undefined)[]) => {\n      return await fetchKeysUsingLoader(transactionLoader, keys);\n    },\n    [transactionLoader]\n  );\n\n  const onCache = useMemo(() => emitter.onCache.bind(emitter), [emitter]);\n\n  const refetch = useCallback(\n    async (key: string) => {\n      const result = await transactionLoader.clear(key).load(key);\n      return result;\n    },\n    [transactionLoader]\n  );\n\n  const refetchMany = useCallback(\n    async (keys: string[]) => {\n      keys.forEach((key) => {\n        transactionLoader.clear(key);\n      });\n      return await transactionLoader.loadMany(keys);\n    },\n    [transactionLoader]\n  );\n\n  const getCached = useCallback(\n    (key: string): ParsedConfirmedTransaction | null | undefined => {\n      // null: account not found on blockchain\n      // undefined: cache miss (not yet fetched)\n      return transactionsCache.get(key);\n    },\n    [transactionsCache]\n  );\n\n  const subscribe = useCallback(\n    (key: string): (() => Promise<void>) => {\n      const amount = subscribedTransactions.get(key);\n      if (amount === undefined || amount === 0) {\n        subscribedTransactions.set(key, 1);\n      } else {\n        subscribedTransactions.set(key, amount + 1);\n      }\n      return () => {\n        const currentAmount = subscribedTransactions.get(key);\n        if ((currentAmount ?? 0) > 1) {\n          subscribedTransactions.set(key, (currentAmount ?? 0) - 1);\n        } else {\n          subscribedTransactions.delete(key);\n        }\n        return Promise.resolve();\n      };\n    },\n    [subscribedTransactions]\n  );\n\n  const refetchAllSubscriptions = useCallback(async () => {\n    const keysToFetch = [...subscribedTransactions.keys()];\n    await refetchMany(keysToFetch);\n  }, [refetchMany, subscribedTransactions]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      void refetchAllSubscriptions().catch((e) => {\n        onError(new SailRefetchSubscriptionsError(e));\n      });\n    }, refreshIntervalMs);\n    return () => clearInterval(interval);\n  }, [onError, refetchAllSubscriptions, refreshIntervalMs]);\n\n  const getDatum = useCallback(\n    (k: string | null | undefined): TransactionDatum => {\n      if (k) {\n        const transactionInfo = getCached(k);\n        if (transactionInfo) {\n          return {\n            transactionId: k,\n            transactionInfo,\n          };\n        }\n        if (transactionInfo === null) {\n          // Cache hit but null entry in cache\n          return null;\n        }\n      }\n      return undefined; // k === undefined ? undefined : null\n    },\n    [getCached]\n  );\n\n  return {\n    loader: transactionLoader,\n    transactionsCache,\n    emitter,\n\n    getCached,\n    getDatum,\n    refetch,\n    refetchMany,\n    refetchAllSubscriptions,\n    onCache,\n    fetchKeys,\n    subscribe,\n\n    batchDurationMs,\n    refreshIntervalMs,\n  };\n};\n","import { useCallback } from \"react\";\n\nimport type {\n  Network,\n  PendingTransaction,\n  TransactionEnvelope,\n} from \"@saberhq/solana-contrib\";\nimport { generateUncheckedInspectLink } from \"@saberhq/solana-contrib\";\nimport { useSolana } from \"@saberhq/use-solana\";\nimport type {\n  ConfirmOptions,\n  Finality,\n  PublicKey,\n  Transaction,\n} from \"@solana/web3.js\";\nimport type { OperationOptions } from \"retry\";\nimport invariant from \"tiny-invariant\";\n\nimport {\n  extractErrorMessage,\n  InsufficientSOLError,\n  SailError,\n  SailRefetchAfterTXError,\n  SailTransactionError,\n  SailTransactionSignError,\n  SailUnknownTXFailError,\n} from \"../../errors\";\nimport type { UseAccounts } from \"../../index\";\n\nconst DEBUG_MODE =\n  !!process.env.REACT_APP_LOCAL_PUBKEY ||\n  !!process.env.LOCAL_PUBKEY ||\n  !!process.env.DEBUG_MODE;\n\nexport interface HandleTXResponse {\n  success: boolean;\n  pending: PendingTransaction | null;\n  errors?: SailError[];\n}\n\nexport interface HandleTXsResponse {\n  success: boolean;\n  pending: PendingTransaction[];\n  errors?: SailError[];\n}\n\nexport interface UseHandleTXsArgs extends Pick<UseAccounts, \"refetchMany\"> {\n  /**\n   * Delay for the writable accounts to be refetched into the cache after a transaction.\n   */\n  txRefetchDelayMs?: number;\n\n  /**\n   * Called whenever a Transaction is sent.\n   */\n  onTxSend?: (args: {\n    network: Network;\n    pending: PendingTransaction[];\n    message?: string;\n  }) => void;\n\n  /**\n   * Called whenever an error occurs.\n   */\n  onError: (err: SailError) => void;\n\n  /**\n   * If true, waits for a confirmation before proceeding to the next transaction.\n   */\n  waitForConfirmation?: boolean;\n}\n\nexport interface HandleTXOptions extends ConfirmOptions {\n  /**\n   * Options to pass in after a refetch has occured.\n   */\n  refetchAfterTX?: OperationOptions & {\n    commitment?: Finality;\n    /**\n     * Delay for the writable accounts to be refetched into the cache after a transaction.\n     */\n    refetchDelayMs?: number;\n  };\n  /**\n   * Fee payer\n   */\n  feePayer?: PublicKey;\n}\n\nexport interface UseHandleTXsInternal {\n  handleTX: (\n    txEnv: TransactionEnvelope,\n    msg?: string,\n    options?: HandleTXOptions\n  ) => Promise<HandleTXResponse>;\n  handleTXs: (\n    txEnv: TransactionEnvelope[],\n    msg?: string,\n    options?: HandleTXOptions\n  ) => Promise<HandleTXsResponse>;\n}\n\nexport const useHandleTXsInternal = ({\n  refetchMany,\n  onTxSend,\n  onError,\n  txRefetchDelayMs = 1_000,\n  waitForConfirmation = false,\n}: UseHandleTXsArgs): UseHandleTXsInternal => {\n  const { network } = useSolana();\n\n  const handleTXs = useCallback(\n    async (\n      txs: TransactionEnvelope[],\n      message?: string,\n      options?: HandleTXOptions\n    ): Promise<{\n      success: boolean;\n      pending: PendingTransaction[];\n      errors?: SailError[];\n    }> => {\n      if (txs.length === 0) {\n        return {\n          success: true,\n          pending: [],\n        };\n      }\n\n      if (DEBUG_MODE) {\n        const txTable = await Promise.all(\n          txs.map(async (tx) => {\n            return await tx.simulateTable({ verifySigners: false, ...options });\n          })\n        );\n        txs.forEach((tx, i) => {\n          const table = txTable[i];\n          if (network !== \"localnet\") {\n            console.debug(generateUncheckedInspectLink(network, tx.build()));\n          }\n          console.debug(table);\n        });\n      }\n      try {\n        const firstTX = txs[0];\n        invariant(firstTX, \"firstTX\");\n        const provider = firstTX.provider;\n\n        const nativeBalance = (\n          await provider.getAccountInfo(\n            options?.feePayer || provider.wallet.publicKey\n          )\n        )?.accountInfo.lamports;\n        if (!nativeBalance || nativeBalance === 0) {\n          const error = new InsufficientSOLError(nativeBalance);\n          onError(error);\n          return {\n            success: false,\n            pending: [],\n            errors: [error],\n          };\n        }\n\n        let signedTXs: Transaction[];\n        try {\n          signedTXs = await provider.signer.signAll(\n            txs.map((tx) => ({\n              tx: tx.build(options?.feePayer),\n              signers: tx.signers,\n            })),\n            options\n          );\n        } catch (e) {\n          const fail = new SailTransactionSignError(e, txs);\n          onError(fail);\n          return {\n            success: false,\n            pending: [],\n            errors: [fail],\n          };\n        }\n\n        const errors: SailError[] = [];\n        const maybePending = await Promise.all(\n          signedTXs.map(async (signedTX, i) => {\n            try {\n              return await provider.broadcaster.broadcast(signedTX, options);\n            } catch (e) {\n              const txEnvelope = txs[i];\n              if (!txEnvelope) {\n                // should be impossible\n                throw new Error(`Unknown TX: ${i} of ${txs.length}`);\n              }\n              const txError = new SailTransactionError(\n                network,\n                e,\n                txEnvelope,\n                message\n              );\n              console.error(`Error sending TX ${i}: ${txError.message}`);\n              console.debug(txError.generateLogMessage());\n              errors.push(txError);\n              onError(txError);\n              return null;\n            }\n          })\n        );\n\n        // if any TXs could not send, do not continue.\n        const pending = maybePending.filter(\n          (p): p is PendingTransaction => !!p\n        );\n        if (errors.length > 0) {\n          // don't throw anything here because we already threw the errors above\n          return {\n            success: false,\n            pending,\n            errors,\n          };\n        }\n\n        // get the unique writable keys for every transaction\n        const writable = [\n          ...new Set([...txs.flatMap((tx) => tx.writableKeys)]),\n        ];\n\n        // refetch everything\n        void (async () => {\n          const refetchAfterTX = options?.refetchAfterTX;\n          try {\n            // wait for the tx to be confirmed\n            // it is possible that it never gets\n            await Promise.all(\n              pending.map((p) =>\n                p\n                  .wait({\n                    commitment: \"confirmed\",\n                    minTimeout: 1_000,\n                    ...refetchAfterTX,\n                  })\n                  .catch((err) => {\n                    throw new Error(\n                      `Could not await confirmation of transaction ${\n                        p.signature\n                      }: ${extractErrorMessage(err) ?? \"unknown\"}`\n                    );\n                  })\n              )\n            );\n            // then fetch, after a delay\n            setTimeout(() => {\n              void refetchMany(writable).catch((e) => {\n                onError(\n                  new SailRefetchAfterTXError(\n                    e,\n                    writable,\n                    pending.map((p) => p.signature)\n                  )\n                );\n              });\n            }, refetchAfterTX?.refetchDelayMs ?? txRefetchDelayMs);\n          } catch (e) {\n            onError(\n              new SailRefetchAfterTXError(\n                e,\n                writable,\n                pending.map((p) => p.signature)\n              )\n            );\n          }\n        })();\n\n        if (waitForConfirmation) {\n          // await for the tx to be confirmed\n          await Promise.all(pending.map((p) => p.wait()));\n        }\n\n        onTxSend?.({ network, pending, message });\n        return {\n          success: true,\n          pending,\n        };\n      } catch (e) {\n        // Log the instruction logs\n        console.error(\"Transaction failed.\", e);\n        txs.forEach((tx, i) => {\n          if (txs.length > 1) {\n            console.debug(`TX #${i + 1} of ${txs.length}`);\n          }\n          console.debug(tx.debugStr);\n          if (network !== \"localnet\") {\n            console.debug(\n              `View on Solana Explorer: ${tx.generateInspectLink(network)}`\n            );\n          }\n        });\n\n        const sailError: SailError =\n          e instanceof SailError ||\n          (\"_isSailError\" in (e as SailError) && (e as SailError)._isSailError)\n            ? (e as SailError)\n            : new SailUnknownTXFailError(e, network, txs);\n        onError(sailError);\n        return { success: false, pending: [], errors: [sailError] };\n      }\n    },\n    [\n      network,\n      onError,\n      onTxSend,\n      refetchMany,\n      txRefetchDelayMs,\n      waitForConfirmation,\n    ]\n  );\n\n  const handleTX = useCallback(\n    async (\n      txEnv: TransactionEnvelope,\n      message?: string,\n      options?: HandleTXOptions\n    ): Promise<{\n      success: boolean;\n      pending: PendingTransaction | null;\n      errors?: SailError[];\n    }> => {\n      const { success, pending, errors } = await handleTXs(\n        [txEnv],\n        message,\n        options\n      );\n      return { success, pending: pending[0] ?? null, errors };\n    },\n    [handleTXs]\n  );\n\n  return { handleTX, handleTXs };\n};\n","import type { MintData, TokenAccountData } from \"@saberhq/token-utils\";\nimport { deserializeAccount, deserializeMint } from \"@saberhq/token-utils\";\n\nimport type { AccountParser } from \"./hooks\";\n\n/**\n * Parses token accounts.\n */\nexport const TOKEN_ACCOUNT_PARSER: AccountParser<TokenAccountData> = (info) => {\n  return {\n    address: info.accountId,\n    ...deserializeAccount(info.accountInfo.data),\n  };\n};\n\n/**\n * Parses mint accounts.\n */\nexport const MINT_PARSER: AccountParser<MintData> = (d) => {\n  return deserializeMint(d.accountInfo.data);\n};\n","import { createContainer } from \"unstated-next\";\n\nimport type { SailError } from \".\";\nimport { useAccountsInternal } from \".\";\nimport type {\n  UseAccounts,\n  UseAccountsArgs,\n  UseHandleTXsArgs,\n  UseHandleTXsInternal,\n  UseTransactions,\n} from \"./internal\";\nimport { useHandleTXsInternal, useTransactionsInternal } from \"./internal\";\n\nexport interface UseSail extends UseHandleTXsInternal {\n  accounts: UseAccounts;\n  transactions: UseTransactions;\n  /**\n   * Called whenever an error occurs.\n   */\n  onError: (err: SailError) => void;\n}\n\nexport type UseSailArgs = Omit<\n  UseAccountsArgs & Omit<UseHandleTXsArgs, \"refetchMany\">,\n  \"onError\"\n> & {\n  onSailError?: (err: SailError) => void;\n};\n\nconst defaultOnError = (err: SailError) => console.error(err.message, err);\n\nconst useSailInternal = ({\n  onSailError = defaultOnError,\n  ...args\n}: UseSailArgs = {}): UseSail => {\n  const accounts = useAccountsInternal({ ...args, onError: onSailError });\n  const transactions = useTransactionsInternal({\n    ...args,\n    onError: onSailError,\n  });\n  const handleTXs = useHandleTXsInternal({\n    ...args,\n    onError: onSailError,\n    refetchMany: accounts.refetchMany,\n  });\n\n  return {\n    accounts,\n    transactions,\n    onError: onSailError,\n    ...handleTXs,\n  };\n};\n\nexport const { Provider: SailProvider, useContainer: useSail } =\n  createContainer(useSailInternal);\n","import type { AccountDatum } from \"../internal/accounts/types\";\n\nexport const accountsEqual = (a: AccountDatum, b: AccountDatum): boolean => {\n  if (a && b) {\n    return a.accountInfo.data.equals(b.accountInfo.data);\n  }\n  return false;\n};\n\nexport function chunks<T>(array: readonly T[], size: number): T[][] {\n  return Array.apply<number, T[], T[][]>(\n    0,\n    new Array(Math.ceil(array.length / size)) as T[]\n  ).map((_, index) => array.slice(index * size, (index + 1) * size));\n}\n","import type { BigintIsh, Token } from '@saberhq/token-utils';\nimport { TokenAmount as TokenAmountOriginal } from '@saberhq/token-utils';\nimport { parseAmountFromString } from '@ubeswap/token-math';\n\nexport const NUMBER_FORMAT = {\n  decimalSeparator: '.',\n  groupSeparator: ' ',\n  groupSize: 3,\n};\nexport class TokenAmount extends TokenAmountOriginal {\n  override new(token: Token, amount: BigintIsh): this {\n    return new TokenAmount(token, amount) as this;\n  }\n\n  static override parse(token: Token, uiAmount: string): TokenAmount {\n    const prev = parseAmountFromString(\n      token,\n      uiAmount,\n      NUMBER_FORMAT.decimalSeparator,\n      NUMBER_FORMAT.groupSeparator,\n    );\n    return new TokenAmount(token, prev);\n  }\n\n  override divideByInteger(other: BigintIsh): TokenAmount {\n    const value = super.divideByInteger(other);\n    return new TokenAmount(this.token, value.raw);\n  }\n\n  override formatUnits(format = NUMBER_FORMAT) {\n    return super.formatUnits(format);\n  }\n}\n","export const breakpoints = {\n  small: 440,\n  tablet: 600,\n  desktop: 836,\n};\n\nexport const up = {\n  small: `@media (min-width: ${breakpoints.small}px)`,\n  tablet: `@media (min-width: ${breakpoints.tablet}px)`,\n  desktop: `@media (min-width: ${breakpoints.desktop}px)`,\n};\n","import { useMediaQuery } from 'react-responsive';\n\nimport { breakpoints } from './breakpoints';\n\nexport const useIsMobile = () => useMediaQuery({ maxWidth: breakpoints.tablet - 1 });\n\nexport const useIsSmall = () => useMediaQuery({ minWidth: breakpoints.small });\n\nexport const useIsTablet = () => useMediaQuery({ minWidth: breakpoints.tablet });\n\nexport const useIsDesktop = () => useMediaQuery({ minWidth: breakpoints.desktop });\n","import { parseToRgb } from \"polished\";\n\nexport const toRGB = (hex: string): string => {\n  const color = parseToRgb(hex);\n  return [color.red, color.green, color.blue].join(',');\n}\n","function setValue(obj: Object, path: string, value: string) {\n  const a = path.split('.');\n  let o = obj;\n  while (a.length - 1) {\n    const n = a.shift();\n    if (!(n in o)) o[n] = {};\n    o = o[n];\n  }\n  o[a[0]] = value;\n}\n\nconst flattenObject = <T>(obj: T, theme = {}, prefix = '') =>\n  Object.keys(obj).reduce((acc, k) => {\n    const pre = prefix.length ? prefix + '-' : '--';\n    if (typeof obj[k] === 'object') {\n      Object.assign(acc, flattenObject(obj[k], theme, pre + k));\n    } else {\n      const keys = (pre + k).replace('--', '').replace(/-/g, '.');\n      setValue(theme, keys, `var(${pre + k})`);\n      acc[pre + k] = obj[k];\n    }\n    return { ...acc, theme };\n  }, {}) as { theme: T; [k: string]: any; };\n\nexport const generate = <T>(tokens: T): {\n  theme: T,\n  variables: string;\n} => {\n  const { theme, ...vars } = flattenObject(tokens);\n  const variables = Object.keys(vars).reduce((acc, key) => {\n    acc += `${key}: ${vars[key]};`;\n    return acc;\n  }, '');\n\n  return { theme, variables };\n};\n","import { generate, toRGB } from './utils';\n\nconst theme = {\n  colors: {\n    bg: {\n      primary: '#FFFFFF',\n      secondary: '#F6F6F8',\n      tertiary: '#FAFBFC',\n      special: '#FAFAFC', // this color is from iOS design system\n      activePrimary: '#EFF3FF',\n      activeSecondary: '#FFFFFF',\n      buttonPrimary: '#5887FF',\n      buttonSecondary: '#F6F6F8',\n      buttonDisabled: '#A3A5BA',\n      app: '#FBFBFD',\n      pressed: '#E4EAFF',\n    },\n    stroke: {\n      primary: '#D3D4DE',\n      primaryRGB: toRGB('#D3D4DE'),\n      secondary: '#F2F2F7',\n      tertiary: '#F6F6F8',\n    },\n    system: {\n      errorMain: '#F43D3D',\n      successMain: '#2DB533',\n      warningMain: '#FFA631',\n      errorBg: '#FEF5F5',\n      successBg: '#F5FBF5',\n      warningBg: '#FFFBF5',\n    },\n    textIcon: {\n      primary: '#202020',\n      secondary: '#8E8E93',\n      tertiary: '#D2D4E5',\n      links: '#82A5FF',\n      linksRGB: toRGB('#82A5FF'),\n      active: '#5887FF',\n      buttonPrimary: '#FFFFFF',\n      buttonSecondary: '#8E8E93',\n      buttonDisabled: '#D0D3E9',\n    },\n    card: '#F6F6F9',\n  },\n};\n\nexport const lightTheme = generate(theme);\n","import { generate, toRGB } from './utils';\n\nconst theme = {\n  colors: {\n    bg: {\n      primary: '#FFFFFF',\n      secondary: '#F6F6F8',\n      tertiary: '#FAFBFC',\n      special: '#FAFAFC', // this color is from iOS design system\n      activePrimary: '#EFF3FF',\n      activeSecondary: '#FFFFFF',\n      buttonPrimary: '#5887FF',\n      buttonSecondary: '#F6F6F8',\n      buttonDisabled: '#A3A5BA',\n      app: '#FBFBFD',\n      pressed: '#E4EAFF',\n      // chart: '',\n    },\n    stroke: {\n      primary: '#D3D4DE',\n      primaryRGB: toRGB('#D3D4DE'),\n      secondary: '#F2F2F7',\n      tertiary: '#F6F6F8',\n      // 'chart-red': '',\n      // 'chart-green': '',\n    },\n    system: {\n      errorMain: '#F43D3D',\n      successMain: '#2DB533',\n      warningMain: '#FFA631',\n      errorBg: '#FEF5F5',\n      successBg: '#F5FBF5',\n      warningBg: '#FFFBF5',\n    },\n    textIcon: {\n      primary: '#202020',\n      secondary: '#8E8E93',\n      tertiary: '#D2D4E5',\n      links: '#82A5FF',\n      active: '#5887FF',\n      buttonPrimary: '#FFFFFF',\n      buttonSecondary: '#8E8E93',\n      buttonDisabled: '#D0D3E9',\n    },\n    card: '#F6F6F9',\n  },\n};\n\nexport const darkTheme = generate(theme);\n","import { lightTheme } from \"./light\";\nimport { darkTheme } from \"./dark\";\n\nexport const theme = lightTheme.theme;\nexport const light = lightTheme.variables;\nexport const dark = darkTheme.variables;\n\n","type Points = 'bottom' | 'middle' | 'top' | 'nav' | 'modal';\n\ntype Zindexes = {\n  [P in Points as P]: number;\n};\n\ntype Getters = {\n  step: number;\n  above: (point: Points) => number;\n  under: (point: Points) => number;\n};\n\ntype ZIndexesObject = Getters & Zindexes;\n\nexport const zIndexes: ZIndexesObject = {\n  step: 1,\n  bottom: 0,\n  middle: 10,\n  top: 20,\n  nav: 30,\n  modal: 40,\n\n  above: function (point: Points) {\n    return this[point] + this.step;\n  },\n\n  under: function (point: Points) {\n    return this[point] - this.step;\n  },\n};\n","import { theme } from '../themes';\n\nconst primaryRGBA = `\n  border: 1px solid rgba(${theme.colors.stroke.primaryRGB}, 0.3);\n`;\n\nconst primary = `\n  border: 0.5px solid ${theme.colors.stroke.primary};\n`;\n\nconst primary1 = `\n  border: 1px solid ${theme.colors.stroke.primary};\n`;\n\nconst secondary = `\n  border: 1px solid ${theme.colors.stroke.secondary};\n`;\n\nconst linksRGBA = `\n  border: 1px solid rgba(${theme.colors.textIcon.linksRGB}, 0.7);\n`;\n\nexport const borders = {\n  primary,\n  primary1,\n  primaryRGBA,\n  secondary,\n  linksRGBA,\n};\n","import { theme } from '../themes';\n\nconst card = `\n  box-shadow: 0px 4px 4px ${theme.colors.card};\n`;\n\nconst notification = `\n  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.06);\n`;\n\nexport const shadows = {\n  card,\n  notification,\n};\n","import type { FC } from 'react';\nimport { useEffect } from 'react';\nimport { useLocation } from 'react-router';\nimport { useIntercom } from 'react-use-intercom';\n\nimport { useIsMobile } from '@p2p-wallet-web/ui';\n\nexport const Intercom: FC = () => {\n  const { update } = useIntercom();\n  const location = useLocation();\n  const isMobile = useIsMobile();\n\n  useEffect(() => {\n    update();\n  }, [update, location]);\n\n  useEffect(() => {\n    update({\n      hideDefaultLauncher: isMobile ? true : false,\n    });\n  }, [isMobile, update]);\n\n  return null;\n};\n","import { styled } from '@linaria/react';\n\nexport const Toast = styled.div`\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  max-width: 100%;\n  min-height: 40px;\n  padding: 16px;\n\n  word-break: break-all;\n  word-break: break-word;\n\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\n  cursor: initial;\n\n  @media (min-width: 500px) {\n    width: 282px;\n  }\n`;\n","import type { ReactNode, RefObject } from 'react';\nimport { createRef, PureComponent } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nimport { Toast } from './Toast';\n\nconst LIMIT = 3;\nconst HIDE_TIMEOUT = 7000;\nconst HIDE_LEAVE_TIMEOUT = 5000;\n\nconst Wrapper = styled.div`\n  position: fixed;\n  right: 16px;\n  bottom: 8px;\n  left: 16px;\n  z-index: 9999;\n\n  @media (min-width: 500px) {\n    right: 30px;\n    bottom: 22px;\n    left: 30px;\n  }\n`;\n\nconst ToastContainer = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n\n  max-width: 100%;\n  padding-bottom: 8px;\n\n  transition: transform 0.3s ease-out;\n\n  &.isRight {\n    right: 0;\n    left: unset;\n  }\n\n  &.isInvisible {\n    visibility: hidden;\n  }\n`;\n\nconst ToastWrapper = styled.div`\n  &.isAppearing {\n    animation: fromBottomAnimation 0.4s ease-out;\n  }\n\n  &.isHiding {\n    animation: toLeftAnimation 0.3s ease-in forwards;\n\n    &.isRight {\n      animation: toRightAnimation 0.3s ease-in forwards;\n    }\n  }\n\n  @keyframes fromBottomAnimation {\n    from {\n      transform: translate(0, 1000px);\n    }\n    to {\n      transform: translate(0, 0);\n    }\n  }\n\n  @keyframes toLeftAnimation {\n    from {\n      transform: translate(0, 0);\n    }\n    to {\n      transform: translate(-500px, 0);\n    }\n  }\n\n  @keyframes toRightAnimation {\n    from {\n      transform: translate(0, 0);\n    }\n    to {\n      transform: translate(500px, 0);\n    }\n  }\n`;\n\nexport type RendererParams = {\n  type: string;\n  header?: string;\n  text?: string;\n  onClose?: () => void;\n};\ntype RendererType = (params: RendererParams) => ReactNode;\n\ntype ToastParams = {\n  type: string;\n  header?: string;\n  text?: string;\n  renderer?: RendererType;\n};\n\ntype SizeType = {\n  [id: string]: number;\n};\n\ninterface Props {\n  anchor?: 'left' | 'right';\n  renderToast?: RendererType;\n  className: string;\n}\n\ninterface State {\n  currentToasts: Array<{ id: number; isHiding?: boolean } & ToastParams>;\n  delayedQueue: ToastParams[];\n  heights: SizeType;\n  bottomOffsets: SizeType;\n  isHovered: boolean;\n}\n\nlet instance: ToastManager | null;\n\nfunction addToast(params: ToastParams) {\n  if (!instance) {\n    throw new Error('ToastsManager is not mounted');\n  }\n\n  setTimeout(() => {\n    if (instance) {\n      instance.addToast(params);\n    }\n  }, 0);\n}\n\n/**\n * The component is quite complicated to support nice toast animations\n */\nexport class ToastManager extends PureComponent<Props, State> {\n  static defaultProps = {\n    className: undefined,\n    anchor: 'left',\n    renderToast: undefined,\n  };\n\n  static info(header: string, text?: string) {\n    addToast({\n      type: 'info',\n      header,\n      text,\n    });\n  }\n\n  static warn(header: string, text?: string) {\n    addToast({\n      type: 'warn',\n      header,\n      text,\n    });\n  }\n\n  static error(header: string, text?: string) {\n    addToast({\n      type: 'error',\n      header,\n      text,\n    });\n  }\n\n  static show(renderer: RendererType) {\n    addToast({\n      type: 'component',\n      renderer,\n    });\n  }\n\n  lastId = 0;\n\n  toastsRefs: {\n    [id: string]: RefObject<HTMLDivElement>;\n  } = {};\n\n  hideTimeouts: number[] = [];\n\n  clearingTimeouts: number[] = [];\n\n  state: State = {\n    currentToasts: [],\n    delayedQueue: [],\n    heights: {},\n    bottomOffsets: {},\n    isHovered: false,\n  };\n\n  componentDidMount() {\n    instance = this;\n\n    window.addEventListener('blur', this.onLeave);\n  }\n\n  componentDidUpdate(_: Props, prevState: State) {\n    const { currentToasts } = this.state;\n\n    const prevLength = prevState.currentToasts.length;\n\n    if (currentToasts.length > 0 && !prevLength) {\n      window.addEventListener('resize', this.onResize);\n    } else if (currentToasts.length === 0 && prevLength) {\n      window.removeEventListener('resize', this.onResize);\n    }\n\n    this.checkHeights();\n  }\n\n  componentWillUnmount() {\n    if (instance === this) {\n      instance = null;\n    }\n\n    window.removeEventListener('blur', this.onLeave);\n\n    for (const id of this.hideTimeouts) {\n      clearTimeout(id);\n    }\n\n    for (const id of this.clearingTimeouts) {\n      clearTimeout(id);\n    }\n  }\n\n  onCloseClick = (id: number) => {\n    this.startToastsHiding(id);\n  };\n\n  onMouseEnter = () => {\n    this.setState({\n      isHovered: true,\n    });\n\n    for (const id of this.hideTimeouts) {\n      clearTimeout(id);\n    }\n  };\n\n  onLeave = () => {\n    const { currentToasts } = this.state;\n\n    this.setState({\n      isHovered: false,\n    });\n\n    if (currentToasts.length === 0) {\n      return;\n    }\n\n    const hideIds = new Set(currentToasts.map(({ id }) => id));\n\n    const timeoutId = window.setTimeout(() => {\n      this.startToastsHiding(hideIds);\n    }, HIDE_LEAVE_TIMEOUT);\n\n    this.hideTimeouts.push(timeoutId);\n  };\n\n  onResize = () => {\n    this.checkHeights();\n  };\n\n  getActiveToastsCount() {\n    const { currentToasts } = this.state;\n\n    return currentToasts.filter((toast) => !toast.isHiding).length;\n  }\n\n  checkDelayedQueue() {\n    const { delayedQueue } = this.state;\n\n    if (delayedQueue.length > 0 && this.getActiveToastsCount() < LIMIT) {\n      const [firstToast, ...other] = delayedQueue;\n\n      this.setState(\n        {\n          delayedQueue: other,\n        },\n        () => {\n          this.checkDelayedQueue();\n        },\n      );\n\n      this.showToast(firstToast);\n    }\n  }\n\n  startToastsHiding(ids: number | Set<number>) {\n    if (!(ids instanceof Set)) {\n      // eslint-disable-next-line no-param-reassign\n      ids = new Set<number>([ids]);\n    }\n\n    const { currentToasts } = this.state;\n\n    this.setState(\n      {\n        currentToasts: currentToasts.map((toast) => {\n          if ((ids as Set<number>).has(toast.id)) {\n            return {\n              ...toast,\n              isHiding: true,\n            };\n          }\n\n          return toast;\n        }),\n      },\n      () => {\n        this.checkDelayedQueue();\n      },\n    );\n\n    this.clearingTimeouts.push(\n      window.setTimeout(() => {\n        this.removeToasts(ids as Set<number>);\n      }, 400),\n    );\n  }\n\n  addToast(toastParams: ToastParams): void {\n    const { delayedQueue } = this.state;\n\n    if (this.getActiveToastsCount() >= LIMIT) {\n      this.setState({\n        delayedQueue: delayedQueue.concat(toastParams),\n      });\n      return;\n    }\n\n    this.showToast(toastParams);\n  }\n\n  showToast({ type, header, text, renderer }: ToastParams) {\n    const { currentToasts, isHovered } = this.state;\n\n    this.lastId += 1;\n\n    const id = this.lastId;\n\n    this.toastsRefs[id] = createRef();\n\n    if (!isHovered) {\n      this.startToastHideTimeout(id);\n    }\n\n    this.setState({\n      currentToasts: currentToasts.concat({\n        id,\n        type,\n        header,\n        text,\n        renderer,\n      }),\n    });\n  }\n\n  removeToasts(ids: Set<number>) {\n    const { currentToasts } = this.state;\n\n    this.setState({\n      currentToasts: currentToasts.filter((toast) => !ids.has(toast.id)),\n    });\n  }\n\n  calcOffsets(heights: SizeType) {\n    const { currentToasts, bottomOffsets } = this.state;\n\n    const newBottomOffsets: SizeType = {};\n    let totalOffset = 0;\n\n    for (let i = currentToasts.length - 1; i >= 0; i -= 1) {\n      const { id, isHiding } = currentToasts[i];\n\n      if (isHiding) {\n        newBottomOffsets[id] = bottomOffsets[id];\n      } else {\n        const height = heights[id];\n        let bottomOffset;\n\n        if (height) {\n          bottomOffset = totalOffset;\n          totalOffset += height;\n        } else {\n          // TODO:\n          bottomOffset = 0;\n        }\n\n        newBottomOffsets[id] = bottomOffset;\n      }\n    }\n\n    this.setState({\n      heights,\n      bottomOffsets: newBottomOffsets,\n    });\n  }\n\n  checkHeights() {\n    const { currentToasts, heights } = this.state;\n\n    const newHeights: SizeType = {};\n    let heightsUpdated = false;\n\n    for (const id of Object.keys(this.toastsRefs)) {\n      const ref = this.toastsRefs[id];\n\n      if (ref.current) {\n        const foundToast = currentToasts.find((toast) => toast.id === Number(id));\n\n        if (foundToast) {\n          const height = foundToast.isHiding ? 0 : ref.current.clientHeight;\n\n          newHeights[id] = height;\n\n          if (heights[id] === undefined || heights[id] !== height) {\n            heightsUpdated = true;\n          }\n        }\n      }\n    }\n\n    if (heightsUpdated) {\n      this.calcOffsets(newHeights);\n    }\n  }\n\n  startToastHideTimeout(id: number) {\n    const timeoutId = window.setTimeout(() => {\n      this.startToastsHiding(id);\n    }, HIDE_TIMEOUT);\n\n    this.hideTimeouts.push(timeoutId);\n  }\n\n  renderToasts() {\n    const { renderToast, anchor } = this.props;\n    const { currentToasts, bottomOffsets } = this.state;\n\n    const isRight = anchor === 'right';\n\n    return currentToasts.map(({ id, type, header, text, renderer, isHiding }) => {\n      const bottomOffset = bottomOffsets[id];\n      const isOffsetCalculated = bottomOffset !== undefined;\n\n      const render = renderer || renderToast;\n\n      return (\n        <ToastContainer\n          key={id}\n          ref={this.toastsRefs[id]}\n          style={{\n            transform: `translate(0, -${bottomOffset}px)`,\n          }}\n          className={classNames({ isInvisible: !isOffsetCalculated, isRight })}\n        >\n          <ToastWrapper\n            className={classNames({ isRight, isAppearing: isOffsetCalculated, isHiding })}\n          >\n            {render ? (\n              render({ type, header, text, onClose: () => this.onCloseClick(id) })\n            ) : (\n              <Toast>{header}</Toast>\n            )}\n          </ToastWrapper>\n        </ToastContainer>\n      );\n    });\n  }\n\n  render() {\n    const { className } = this.props;\n\n    return (\n      <Wrapper className={className} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onLeave}>\n        {this.renderToasts()}\n      </Wrapper>\n    );\n  }\n}\n","import type { FunctionComponent } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nimport type { RendererParams } from 'components/common/ToastManager';\nimport { Toast } from 'components/common/ToastManager';\nimport { TokenAvatar } from 'components/common/TokenAvatar';\nimport { Icon } from 'components/ui';\n\nconst ToastStyled = styled(Toast)`\n  position: relative;\n\n  align-items: flex-start;\n\n  color: #000;\n\n  background-color: #fff;\n`;\n\nconst ToastIconWrapper = styled.div`\n  padding: 10px;\n\n  border-radius: 12px;\n`;\n\nconst ToastIcon = styled(Icon)`\n  flex-shrink: 0;\n  width: 22px;\n  height: 22px;\n`;\n\nconst InfoIcon = styled(Icon)`\n  flex-shrink: 0;\n  width: 24px;\n  height: 22px;\n`;\n\nconst ToastWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  padding: 0 10px 0 16px;\n`;\n\nconst ToastHeader = styled.div`\n  display: inline-block;\n\n  font-weight: 600;\n  font-size: 16px;\n\n  &::first-letter {\n    text-transform: uppercase;\n  }\n`;\n\nconst ToastText = styled.div`\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n  padding-top: 5px;\n\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 16px;\n\n  &.confirmed {\n    color: #4caf50;\n  }\n`;\n\nconst CloseButton = styled.button`\n  position: absolute;\n  top: 14px;\n  right: 14px;\n\n  flex-shrink: 0;\n  height: 14px;\n  margin: -10px -12px -10px 0;\n\n  color: #a3a5ba;\n\n  background-color: transparent;\n  border: 0;\n  outline: none;\n  cursor: pointer;\n\n  transition: color 0.15s;\n\n  appearance: none;\n\n  &:hover {\n    color: #000;\n  }\n`;\n\nconst CloseIcon = styled(Icon)`\n  width: 14px;\n  height: 14px;\n`;\n\nconst StatusIcon = styled(Icon)`\n  flex-shrink: 0;\n  width: 15px;\n  height: 15px;\n  margin-right: 8px;\n`;\n\nconst SwapAvatarsWrapper = styled.div`\n  position: relative;\n\n  width: 48px;\n  height: 48px;\n\n  & > :nth-child(1) {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  & > :nth-child(2) {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n  }\n`;\n\nconst ButtonWrapper = styled.div`\n  align-items: center;\n  margin-top: 8px;\n  padding-top: 12px;\n`;\n\ntype TransferParams = {\n  status?:\n    | 'processing'\n    | 'success'\n    | 'error'\n    | 'warning'\n    | 'confirmingDeposit'\n    | 'confirmedDeposit';\n  symbol?: string;\n  symbolB?: string;\n  button?: React.ReactNode;\n};\n\ntype Props = RendererParams & TransferParams;\n\nexport const NotifyToast: FunctionComponent<Props> = ({\n  type,\n  header,\n  text,\n  status,\n  symbol,\n  symbolB,\n  onClose,\n  button,\n}) => {\n  let icon;\n  let statusIcon;\n\n  switch (type) {\n    case 'info':\n      icon = <ToastIcon name=\"success\" style={{ color: '#4caf50' }} />;\n      break;\n    case 'warn':\n      icon = <InfoIcon name=\"attention\" />;\n      break;\n    case 'error':\n      icon = <ToastIcon name=\"error\" style={{ color: '#ff5959' }} />;\n      break;\n    case 'transfer':\n    case 'transferChecked':\n      icon = <TokenAvatar symbol={symbol} size={44} />;\n      break;\n    case 'swap':\n      icon = (\n        <SwapAvatarsWrapper>\n          <TokenAvatar symbol={symbol} size={32} />\n          <TokenAvatar symbol={symbolB} size={32} />\n        </SwapAvatarsWrapper>\n      );\n      break;\n    case 'mint':\n      icon = (\n        <ToastIconWrapper>\n          <ToastIcon name=\"warning-transparent\" style={{ color: '#ffa631' }} />\n        </ToastIconWrapper>\n      );\n      break;\n    case 'confirmingDeposit':\n      icon = <TokenAvatar symbol=\"BTC\" size={44} />;\n      break;\n    default:\n      icon = null;\n  }\n\n  switch (status) {\n    case 'processing':\n      statusIcon = <StatusIcon name=\"clock\" style={{ color: '#ffa631' }} />;\n      break;\n    case 'success':\n      statusIcon = <StatusIcon name=\"success\" style={{ color: '#4caf50' }} />;\n      break;\n    case 'error':\n      statusIcon = <StatusIcon name=\"warning\" style={{ color: '#ff5959' }} />;\n      break;\n    case 'confirmingDeposit':\n      statusIcon = <StatusIcon name=\"clock\" style={{ color: '#a3a5ba' }} />;\n      break;\n    case 'confirmedDeposit':\n      statusIcon = <StatusIcon name=\"clock\" />;\n      break;\n    default:\n      statusIcon = null;\n  }\n\n  return (\n    <ToastStyled>\n      {icon}\n      <ToastWrapper>\n        <ToastHeader>{header}</ToastHeader>\n        <ToastText className={classNames({ confirmed: status === 'confirmedDeposit' })}>\n          {status ? statusIcon : undefined}\n          {text}\n        </ToastText>\n        {button ? <ButtonWrapper>{button}</ButtonWrapper> : undefined}\n      </ToastWrapper>\n      {onClose ? (\n        <CloseButton type=\"button\" name=\"notify-toast__close\" onClick={onClose}>\n          <CloseIcon name=\"close\" />\n        </CloseButton>\n      ) : null}\n    </ToastStyled>\n  );\n};\n","import type { AxiosResponse } from 'axios';\nimport axios from 'axios';\nimport assert from 'ts-invariant';\nimport { injectable } from 'tsyringe';\n\nimport {\n  MOONPAY_API_KEY,\n  MOONPAY_API_URL,\n  MOONPAY_SIGNER_URL,\n} from 'new/services/BuyService/constants';\nimport type {\n  MoonpayBaseParams,\n  MoonpayGetAllCurrenciesResponse,\n  MoonpayGetBuyQuoteParams,\n  MoonpayGetBuyQuoteResponse,\n  MoonpayGetPriceResponse,\n} from 'new/services/BuyService/types';\n\nconst request = axios.create({ baseURL: MOONPAY_API_URL });\n\nconst baseParams: MoonpayBaseParams = {\n  apiKey: MOONPAY_API_KEY,\n};\n\n@injectable()\nexport class MoonpayProvider {\n  private _abortController: AbortController | null = null;\n\n  constructor() {\n    assert(MOONPAY_API_KEY, 'Define moonpay api key in .env');\n    assert(MOONPAY_SIGNER_URL, 'Define moonpay signer url in .env');\n  }\n\n  async getByQuote(\n    baseCurrencyAmount: string | number,\n    quoteCurrencyAmount: number | string,\n    baseCurrencyCode: string,\n    quoteCurrencyCode: string,\n  ): Promise<MoonpayGetBuyQuoteResponse | void> {\n    try {\n      this._abortController?.abort();\n    } finally {\n      this._abortController = new AbortController();\n    }\n\n    const params: MoonpayGetBuyQuoteParams = {\n      ...baseParams,\n      baseCurrencyAmount,\n      quoteCurrencyAmount,\n      baseCurrencyCode,\n      fixed: true,\n      regionalPricing: true,\n    };\n\n    return request(`${quoteCurrencyCode}/buy_quote`, {\n      signal: this._abortController.signal,\n      params,\n    })\n      .then((response: AxiosResponse<MoonpayGetBuyQuoteResponse>) => response.data)\n      .catch((error) => {\n        let mes;\n        if (error.response) {\n          mes = error.response.data.message;\n        } else {\n          mes = error.message;\n        }\n        new Error(mes);\n      });\n  }\n\n  async getPrice(fiatCurrency: string, cryptoCurrency: string): Promise<number | undefined> {\n    return request(`${cryptoCurrency}/ask_price`, { params: baseParams }).then(\n      (response: AxiosResponse<MoonpayGetPriceResponse>) =>\n        response.data[fiatCurrency.toUpperCase()],\n    );\n  }\n\n  async getAllCurrencies(): Promise<MoonpayGetAllCurrenciesResponse> {\n    return request({ params: baseParams }).then(\n      (response: AxiosResponse<MoonpayGetAllCurrenciesResponse>) => response.data,\n    );\n  }\n\n  getMoonpayKeysAreSet(): boolean {\n    return !!MOONPAY_API_KEY && !!MOONPAY_SIGNER_URL;\n  }\n}\n","import { injectable } from 'tsyringe';\n\nimport { MoonpayProvider } from 'new/services/BuyService/MoonpayProvider';\nimport type { ExchangeInput } from 'new/services/BuyService/structures';\nimport { CryptoCurrency, ExchangeOutput, FiatCurrency } from 'new/services/BuyService/structures';\nimport type { MoonpayGetBuyQuoteResponse } from 'new/services/BuyService/types';\n\ninterface BuyServiceType {\n  convert(input: ExchangeInput, output: ExchangeOutput): Promise<ExchangeOutput | void>;\n  getExchangeRate(fiatCurrency: FiatCurrency, cryptoCurrency: CryptoCurrency): Promise<number>;\n  getMinAmount(\n    cryptoCurrency: CryptoCurrency,\n    fiatCurrency: FiatCurrency,\n  ): Promise<{ minCryptoAmount: number; minFiatAmount: number }>;\n  getMoonpayKeysAreSet(): boolean;\n}\n\n@injectable()\nexport class BuyService implements BuyServiceType {\n  constructor(private _provider: MoonpayProvider) {}\n\n  convert(input: ExchangeInput, output: ExchangeOutput): Promise<ExchangeOutput> {\n    const baseCurrencyAmountForRequest = FiatCurrency.isFiat(input.currency) ? input.amount : 0;\n    const quoteCurrencyAmountForRequest = CryptoCurrency.isCrypto(input.currency)\n      ? input.amount\n      : 0;\n\n    const baseCurrencyCode = [input.currency, output.currency].find((currency) =>\n      FiatCurrency.isFiat(currency),\n    )!.moonpayCode;\n\n    const quoteCurrencyCode = [input.currency, output.currency].find((currency) =>\n      CryptoCurrency.isCrypto(currency),\n    )!.moonpayCode;\n\n    return this._provider\n      .getByQuote(\n        baseCurrencyAmountForRequest,\n        quoteCurrencyAmountForRequest,\n        baseCurrencyCode,\n        quoteCurrencyCode,\n      )\n      .then((data) => {\n        const {\n          quoteCurrencyPrice,\n          quoteCurrencyAmount,\n          baseCurrencyAmount,\n          feeAmount,\n          networkFeeAmount,\n          totalAmount,\n        } = data as MoonpayGetBuyQuoteResponse;\n\n        return new ExchangeOutput(\n          CryptoCurrency.isCrypto(output.currency) ? quoteCurrencyAmount : baseCurrencyAmount,\n          output.currency,\n          quoteCurrencyPrice,\n          feeAmount,\n          networkFeeAmount,\n          baseCurrencyAmount,\n          totalAmount,\n        );\n      });\n  }\n\n  getExchangeRate(fiatCurrency: FiatCurrency, cryptoCurrency: CryptoCurrency): Promise<number> {\n    return this._provider\n      .getPrice(fiatCurrency.moonpayCode, cryptoCurrency.moonpayCode)\n      .then((exchangeRate) => exchangeRate || 0);\n  }\n\n  getMinAmount(\n    cryptoCurrency: CryptoCurrency,\n    fiatCurrency: FiatCurrency,\n  ): Promise<{ minCryptoAmount: number; minFiatAmount: number }> {\n    return this._provider.getAllCurrencies().then((currencies) => ({\n      minCryptoAmount:\n        currencies?.find((currencyItem) => currencyItem.code === cryptoCurrency.moonpayCode)\n          ?.minBuyAmount || 0,\n      minFiatAmount:\n        currencies?.find((currencyItem) => currencyItem.code === fiatCurrency.moonpayCode)\n          ?.minBuyAmount || 0,\n    }));\n  }\n\n  getMoonpayKeysAreSet(): boolean {\n    return this._provider.getMoonpayKeysAreSet();\n  }\n}\n","import { matchPath } from 'react-router';\n\nimport type { History, Location, LocationState, Path, UnregisterCallback } from 'history';\nimport { action, makeObservable, observable } from 'mobx';\nimport assert from 'ts-invariant';\nimport { singleton } from 'tsyringe';\n\n@singleton()\nexport class LocationService {\n  _location?: Location;\n\n  private _history?: History;\n  private _removeListener?: UnregisterCallback;\n\n  constructor() {\n    makeObservable(this, {\n      _location: observable,\n    });\n  }\n\n  private _assertHistory(): void {\n    assert(this._history, 'History is not set in LocationService');\n  }\n\n  private _assertLocation(): void {\n    assert(this._location, 'Location is not set in LocationService');\n  }\n\n  private _listenHistory(): void {\n    if (this._removeListener) {\n      this._removeListener();\n    }\n\n    this._assertHistory();\n    this._removeListener = this._history!.listen(\n      action((location) => {\n        this._location = location;\n      }),\n    );\n  }\n\n  setHistory(history: History): void {\n    this._history = history;\n\n    this._listenHistory();\n  }\n\n  getParams<Params>(pathTemplate: string): Params {\n    this._assertLocation();\n    const match = matchPath<Params>(this._location!.pathname || '', { path: pathTemplate });\n\n    if (!match) {\n      return {} as Params;\n    }\n\n    return match.params;\n  }\n\n  push(pathname: Path, props?: LocationState): void {\n    this._assertHistory();\n    this._history!.push(pathname, props ?? { fromPage: this._location?.pathname });\n  }\n\n  reload(): void {\n    this._assertHistory();\n    this._history!.go(0);\n  }\n}\n","import { action, computed, makeObservable, observable, reaction, runInAction } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { LoadableState } from 'new/app/models/LoadableRelay';\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { BuyService } from 'new/services/BuyService';\nimport type { CryptoCurrencySymbol } from 'new/services/BuyService/structures';\nimport {\n  CryptoCurrency,\n  ExchangeInput,\n  ExchangeOutput,\n  FiatCurrency,\n} from 'new/services/BuyService/structures';\nimport { LocationService } from 'new/services/LocationService';\nimport { TokensRepository } from 'new/services/Repositories';\nimport { SolanaService } from 'new/services/SolanaService';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nconst UPDATE_INTERVAL = 10 * 1000; // 10 secs\n\ntype CryptoCurrenciesForSelectType = Record<CryptoCurrencySymbol, CryptoCurrency>;\n\n@singleton()\nexport class BuyViewModel extends ViewModel {\n  isShowIframe: boolean;\n  input: ExchangeInput;\n  output: ExchangeOutput;\n  minFiatAmount: number;\n  minCryptoAmount: number;\n  exchangeRate: number;\n  crypto: CryptoCurrency;\n  loadingState: LoadableState;\n\n  private _timer?: NodeJS.Timer;\n\n  constructor(\n    private _buyService: BuyService,\n    private _solanaService: SolanaService,\n    private _locationService: LocationService,\n    private _tokensRepository: TokensRepository,\n  ) {\n    super();\n\n    this.isShowIframe = false;\n    this.input = ExchangeInput.zeroInstance(FiatCurrency.usd);\n    this.output = ExchangeOutput.zeroInstance(CryptoCurrency.sol);\n    this.minFiatAmount = 0;\n    this.minCryptoAmount = 0;\n    this.exchangeRate = 0;\n    this.crypto = CryptoCurrency.sol;\n    this.loadingState = LoadableState.notRequested;\n\n    makeObservable(this, {\n      isShowIframe: observable,\n      areMoonpayConstantsSet: computed,\n      cryptoCurrenciesForSelect: computed,\n\n      loadingState: observable,\n      input: observable,\n      output: observable,\n      crypto: observable,\n      minFiatAmount: observable,\n      minCryptoAmount: observable,\n      exchangeRate: observable,\n\n      setAmount: action.bound,\n      setIsShowIframe: action,\n      swap: action.bound,\n    });\n  }\n\n  protected override setDefaults() {\n    this.isShowIframe = false;\n    this.input = ExchangeInput.zeroInstance(FiatCurrency.usd);\n    this.output = ExchangeOutput.zeroInstance(CryptoCurrency.sol);\n    this.minFiatAmount = 0;\n    this.minCryptoAmount = 0;\n    this.exchangeRate = 0;\n    this.crypto = CryptoCurrency.sol;\n    this.loadingState = LoadableState.notRequested;\n  }\n\n  protected override onInitialize() {\n    this._addReactions();\n\n    this._startUpdating();\n  }\n\n  protected override afterReactionsRemoved() {\n    this._stopUpdating();\n  }\n\n  private _addReactions(): void {\n    this.addReaction(\n      reaction(\n        () => this._getSymbolFromParams(),\n        (symbol) => {\n          if (symbol) {\n            this._setCryptoCurrency(this.cryptoCurrenciesForSelect[symbol]);\n          }\n        },\n        {\n          fireImmediately: true,\n        },\n      ),\n    );\n\n    this.addReaction(\n      reaction(\n        () => this.crypto,\n        () => this._update(),\n      ),\n    );\n\n    this.addReaction(\n      reaction(\n        () => ({\n          amount: this.input.amount,\n          crypto: this.crypto,\n        }),\n        ({ amount }) => {\n          if (amount === 0) {\n            this._changeOutput(ExchangeOutput.zeroInstance(this.output.currency));\n            this._setLoadingState(LoadableState.loaded);\n            return;\n          }\n\n          this._setLoadingState(LoadableState.loading);\n\n          this._buyService\n            .convert(this.input, this.output)\n            .then((output) => {\n              this._setLoadingState(LoadableState.loaded);\n              this._changeOutput(output);\n            })\n            .catch((error) => {\n              this._setLoadingState(LoadableState.error(error.message));\n              this._changeOutput(ExchangeOutput.zeroInstance(this.output.currency));\n            });\n        },\n      ),\n    );\n  }\n\n  private _getSymbolFromParams(): CryptoCurrencySymbol {\n    return (\n      this._locationService.getParams<{ symbol?: CryptoCurrencySymbol }>('/buy/:symbol?').symbol ||\n      'SOL'\n    );\n  }\n\n  private _startUpdating(): void {\n    this._update();\n\n    this._timer = setInterval(() => {\n      this._update();\n    }, UPDATE_INTERVAL);\n  }\n\n  private _stopUpdating(): void {\n    clearInterval(this._timer);\n  }\n\n  private _update(): void {\n    Promise.all([\n      this._buyService.getExchangeRate(FiatCurrency.usd, this.crypto),\n      this._buyService.getMinAmount(this.crypto, FiatCurrency.usd),\n    ]).then(\n      action(([exchangeRate, { minCryptoAmount, minFiatAmount }]) => {\n        this.exchangeRate = exchangeRate;\n\n        this.minCryptoAmount = minCryptoAmount;\n\n        const newMinFiatAmount = Number(\n          numberToString(Math.max(Math.ceil(minCryptoAmount * exchangeRate), minFiatAmount), {\n            maximumFractionDigits: 2,\n          }),\n        );\n\n        this.minFiatAmount = newMinFiatAmount;\n      }),\n    );\n  }\n\n  private _changeOutput(output: ExchangeOutput): void {\n    runInAction(() => (this.output = output));\n  }\n\n  private _setCryptoCurrency(cryptoCurrency: CryptoCurrency): void {\n    runInAction(() => {\n      this.crypto = cryptoCurrency;\n\n      if (FiatCurrency.isFiat(this.input.currency)) {\n        const { amount, price, networkFee, processingFee, purchaseCost, total } = this.output;\n        this.output = new ExchangeOutput(\n          amount,\n          cryptoCurrency,\n          price,\n          processingFee,\n          networkFee,\n          purchaseCost,\n          total,\n        );\n      } else {\n        this.input = new ExchangeInput(this.input.amount, cryptoCurrency);\n      }\n    });\n  }\n\n  private _setLoadingState(value: LoadableState): void {\n    runInAction(() => (this.loadingState = value));\n  }\n\n  get areMoonpayConstantsSet(): boolean {\n    return this._buyService.getMoonpayKeysAreSet();\n  }\n\n  get cryptoCurrenciesForSelect(): CryptoCurrenciesForSelectType {\n    return {\n      SOL: CryptoCurrency.sol,\n      USDC: CryptoCurrency.usdc,\n    };\n  }\n\n  get pubkeyBase58(): string {\n    return this._solanaService.provider.wallet.publicKey.toBase58();\n  }\n\n  getTokenWithMint(mint: string): Promise<Token | undefined> {\n    return this._tokensRepository.getTokenWithMint(mint);\n  }\n\n  setAmount(amount: string): void {\n    const newAmount = Number(amount);\n    if (newAmount === this.input.amount) {\n      return;\n    }\n\n    this.input = new ExchangeInput(newAmount, this.input.currency);\n  }\n\n  setIsShowIframe(value: boolean): void {\n    this.isShowIframe = value;\n  }\n\n  swap(): void {\n    const { input, output } = this.input.swap(this.output);\n    this.input = input;\n    this.output = output;\n  }\n}\n","import type { FunctionComponent } from 'react';\nimport * as React from 'react';\nimport { forwardRef } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { borders, shadows, up } from '@p2p-wallet-web/ui';\n\nconst Wrapper = styled.div`\n  padding: 20px;\n\n  background: #fff;\n  border-radius: 12px;\n\n  ${up.tablet} {\n    ${borders.primaryRGBA}\n    ${shadows.card}\n  }\n`;\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  forwardedRef?: React.Ref<HTMLDivElement>;\n}\n\nconst CardOriginal: FunctionComponent<Props> = ({\n  forwardedRef,\n  children,\n  className,\n  ...props\n}) => {\n  return (\n    <Wrapper ref={forwardedRef} {...props} className={className}>\n      {children}\n    </Wrapper>\n  );\n};\n\nexport const Card = forwardRef<HTMLDivElement, Props>((props, ref: React.Ref<HTMLDivElement>) => (\n  <CardOriginal {...props} forwardedRef={ref} />\n));\n","import type { FunctionComponent } from 'react';\nimport { forwardRef } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { shadows, theme, up } from '@p2p-wallet-web/ui';\n\nimport { Card } from '../Card';\n\nconst Wrapper = styled(Card)`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n\n  padding: 0;\n\n  ${up.tablet} {\n    ${shadows.card}\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 60px;\n  margin-top: 8px;\n  padding: 8px 20px;\n`;\n\nconst Title = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 24px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n`;\n\nconst Action = styled.div``;\n\nconst Content = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n`;\n\ntype Props = {\n  forwardedRef?: React.Ref<HTMLDivElement>;\n  title?: React.ReactNode;\n  action?: React.ReactNode;\n  children?: React.ReactNode;\n  className?: string;\n};\n\nconst WidgetOriginal: FunctionComponent<Props> = ({\n  forwardedRef,\n  title,\n  action,\n  children,\n  className,\n}) => {\n  return (\n    <Wrapper ref={forwardedRef} className={className}>\n      {title || action ? (\n        <Header>\n          {title ? <Title>{title}</Title> : undefined}\n          {action ? <Action>{action}</Action> : undefined}\n        </Header>\n      ) : undefined}\n      {children ? <Content>{children}</Content> : undefined}\n    </Wrapper>\n  );\n};\n\nexport const Widget = forwardRef<HTMLDivElement, Props>((props, ref: React.Ref<HTMLDivElement>) => (\n  <WidgetOriginal {...props} forwardedRef={ref} />\n));\n","import type { FunctionComponent } from 'react';\nimport { forwardRef, Fragment } from 'react';\nimport * as React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport { styled } from '@linaria/react';\nimport { theme, useIsTablet } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Widget } from 'components/common/Widget';\nimport { Icon } from 'components/ui';\n\nconst TitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst BackLink = styled(NavLink)`\n  display: flex;\n  align-items: center;\n\n  text-decoration: none;\n`;\n\nconst IconWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n`;\n\nexport const IconStyled = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.secondary};\n\n  &.back {\n    width: 24px;\n    height: 24px;\n\n    transform: rotate(90deg);\n  }\n`;\n\nexport const Title = styled.div`\n  margin-left: 8px;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 24px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  &.previous,\n  &.notLast {\n    color: ${theme.colors.textIcon.secondary};\n    font-weight: normal;\n  }\n`;\n\ntype Props = {\n  forwardedRef?: React.Ref<HTMLDivElement>;\n  icon?: string;\n  title: string | string[];\n  backTo?: string;\n  action?: React.ReactNode;\n  children?: React.ReactNode;\n  className?: string;\n};\n\nconst WidgetPageOriginal: FunctionComponent<Props> = ({\n  forwardedRef,\n  icon,\n  title,\n  backTo,\n  action,\n  children,\n  className,\n  ...props\n}) => {\n  const isTable = useIsTablet();\n\n  const renderTitle = () => {\n    if (!isTable) {\n      return null;\n    }\n\n    if (Array.isArray(title)) {\n      return (\n        <TitleWrapper>\n          {title.map((t, i) => {\n            const first = i === 0;\n            const previous = title.length - 2 === i;\n            const notLast = title.length - 1 !== i;\n\n            if (first) {\n              return (\n                <Fragment key={t}>\n                  <BackLink to={backTo}>\n                    <IconStyled name=\"chevron\" className=\"back\" />\n                    <Title key={t} className={classNames({ notLast })}>\n                      {t}\n                    </Title>\n                  </BackLink>\n                  {notLast ? <Title className={classNames({ notLast })}>/</Title> : undefined}\n                </Fragment>\n              );\n            }\n\n            return (\n              <Fragment key={t}>\n                <Title className={classNames({ notLast })}>{t}</Title>\n                {notLast ? <Title className={classNames({ previous })}>/</Title> : undefined}\n              </Fragment>\n            );\n          })}\n        </TitleWrapper>\n      );\n    }\n\n    return (\n      <TitleWrapper>\n        {icon ? (\n          <IconWrapper>\n            <IconStyled name={icon} />\n          </IconWrapper>\n        ) : undefined}\n        <Title>{title}</Title>\n      </TitleWrapper>\n    );\n  };\n\n  return (\n    <Widget\n      ref={forwardedRef}\n      title={renderTitle()}\n      action={action}\n      className={className}\n      {...props}\n    >\n      {children}\n    </Widget>\n  );\n};\n\nexport const WidgetPage = forwardRef<HTMLDivElement, Props>(\n  (props, ref: React.Ref<HTMLDivElement>) => <WidgetPageOriginal {...props} forwardedRef={ref} />,\n);\n","import type { FunctionComponent } from 'react';\nimport { forwardRef } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\n\nimport { WidgetPage } from 'components/common/WidgetPage';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n\n  ${up.tablet} {\n    flex: initial;\n    justify-content: initial;\n  }\n`;\n\nconst Content = styled.div`\n  display: grid;\n  grid-gap: 16px;\n  padding: 16px;\n\n  ${up.tablet} {\n    padding: 16px 20px;\n  }\n`;\n\nconst BottomWrapper = styled.div`\n  padding: 16px;\n\n  ${up.tablet} {\n    border-top: 1px solid ${theme.colors.stroke.tertiary};\n  }\n`;\n\ntype Props = {\n  forwardedRef?: React.Ref<HTMLDivElement>;\n  icon?: string;\n  title: string | string[];\n  action?: React.ReactNode;\n  backTo?: string;\n  children?: React.ReactNode;\n  bottom?: React.ReactNode;\n  className?: string;\n};\n\nconst WidgetPageWithBottomOriginal: FunctionComponent<Props> = ({\n  forwardedRef,\n  icon,\n  title,\n  action,\n  backTo,\n  children,\n  bottom,\n  className,\n  ...props\n}) => {\n  return (\n    <WidgetPage\n      ref={forwardedRef}\n      title={title}\n      icon={icon}\n      action={action}\n      className={className}\n      backTo={backTo}\n      {...props}\n    >\n      <Wrapper>\n        <Content>{children}</Content>\n        {bottom ? <BottomWrapper>{bottom}</BottomWrapper> : undefined}\n      </Wrapper>\n    </WidgetPage>\n  );\n};\n\nexport const WidgetPageWithBottom = forwardRef<HTMLDivElement, Props>(\n  (props, ref: React.Ref<HTMLDivElement>) => (\n    <WidgetPageWithBottomOriginal {...props} forwardedRef={ref} />\n  ),\n);\n","import type { FC } from 'react';\nimport React from 'react';\n\nimport { WidgetPageWithBottom } from 'components/common/WidgetPageWithBottom';\n\ninterface Props {\n  bottom?: React.ReactNode;\n  children: React.ReactNode;\n}\n\nexport const WidgetPageBuy: FC<Props> = ({ bottom, children }) => {\n  return (\n    <WidgetPageWithBottom title=\"Buy Solana on Moonpay\" icon=\"plus\" bottom={bottom}>\n      {children}\n    </WidgetPageWithBottom>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { useTrackEventOpen } from 'app/hooks/metrics';\nimport type { BuyViewModelProps } from 'new/scenes/Main/Buy/Subviews/Moonpay/types';\nimport { WidgetPageBuy } from 'new/scenes/Main/Buy/Subviews/Moonpay/WidgetPageBuy';\nimport { MOONPAY_API_KEY, MOONPAY_SIGNER_URL } from 'new/services/BuyService/constants';\nimport { buildParams } from 'new/services/BuyService/MoonpayProvider/utils';\nimport type { MoonpayIframeParams } from 'new/services/BuyService/types';\n\nconst Wrapper = styled.div`\n  height: 640px;\n`;\n\nconst baseParams: MoonpayIframeParams = {\n  apiKey: MOONPAY_API_KEY,\n  currencyCode: 'sol',\n  baseCurrencyAmount: 100,\n  baseCurrencyCode: 'usd',\n  lockAmount: false,\n};\n\nexport const MoonpayIframeWidget: FC<BuyViewModelProps> = observer(({ viewModel }) => {\n  useTrackEventOpen('Buy_Provider_Step_Viewed');\n\n  const urlWithParams = expr(\n    () =>\n      `${MOONPAY_SIGNER_URL}?${buildParams<MoonpayIframeParams>({\n        ...baseParams,\n        currencyCode: viewModel.crypto.moonpayCode,\n        baseCurrencyAmount: viewModel.output.total,\n        walletAddress: viewModel.pubkeyBase58,\n      })}`,\n  );\n\n  return (\n    <WidgetPageBuy>\n      <Wrapper>\n        <iframe\n          allow=\"accelerometer; autoplay; camera; gyroscope; payment\"\n          frameBorder=\"0\"\n          width=\"100%\"\n          height=\"100%\"\n          src={urlWithParams}\n          title=\"MoonPay Widget\"\n        >\n          <p>Your browser does not support iframes.</p>\n        </iframe>\n      </Wrapper>\n    </WidgetPageBuy>\n  );\n});\n","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { trackEvent } from 'utils/analytics';\nimport type { TrackEventType } from 'utils/analytics/types';\n\n// TODO: make somthing with types in TrackEventType\nexport const useTrackEventOpen: TrackEventType = (event: string, _?: any) => {\n  const location = useLocation<{ fromPage?: string }>();\n\n  useEffect(() => {\n    trackEvent(event, { Last_Screen: location.state?.fromPage });\n  }, []);\n};\n","export const buildParams = <T>(params: T) => {\n  return Object.entries(params)\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\n\nimport { Button, Icon } from 'components/ui';\nimport type { BuyViewModelProps } from 'new/scenes/Main/Buy/Subviews/Moonpay/types';\nimport { CryptoCurrency, FiatCurrency } from 'new/services/BuyService/structures';\nimport { numberToFiatString } from 'new/utils/NumberExtensions';\n\nconst IconWrapper = styled(Icon)`\n  width: 24px;\n  height: 24px;\n  margin-right: 8px;\n`;\n\nexport const MoonpayButton: FC<BuyViewModelProps> = observer(({ viewModel }) => {\n  if (viewModel.loadingState.isLoading) {\n    return (\n      <Button disabled primary full>\n        Loading...\n      </Button>\n    );\n  }\n\n  if (!viewModel.input.amount) {\n    return (\n      <Button disabled primary full>\n        Enter the amount\n      </Button>\n    );\n  }\n\n  if (\n    FiatCurrency.isFiat(viewModel.input.currency) &&\n    viewModel.input.amount &&\n    viewModel.minFiatAmount > viewModel.input.amount\n  ) {\n    return (\n      <Button disabled primary full>\n        Minimum amount {numberToFiatString(viewModel.minFiatAmount)}\n      </Button>\n    );\n  }\n\n  if (\n    CryptoCurrency.isCrypto(viewModel.input.currency) &&\n    viewModel.input.amount &&\n    viewModel.minCryptoAmount > viewModel.input.amount\n  ) {\n    return (\n      <Button disabled primary full>\n        Minimum purchase of {viewModel.minCryptoAmount} {viewModel.crypto.symbol} required\n      </Button>\n    );\n  }\n\n  /*if (viewModel.loadingState.isError && viewModel.input.amount) {\n    return (\n      <Button disabled primary full>\n        {viewModel.loadingState.message}\n      </Button>\n    );\n  }*/\n\n  return (\n    <Button primary full onClick={() => viewModel.setIsShowIframe(true)}>\n      <IconWrapper name=\"external\" />\n      Continue on Moonpay\n    </Button>\n  );\n});\n","import { action, makeObservable, observable } from 'mobx';\nimport { last } from 'ramda';\nimport { singleton } from 'tsyringe';\n\nimport type { ModalType } from './types';\n\nexport type ModalState = { modalType: ModalType; modalId: number; props: any };\n\nexport interface ModalServiceType {\n  openModal: <T, S extends {}>(modalType: ModalType, props?: S) => Promise<T | void>; // TODO: right return type\n  closeModal: <T>(modalId: number, result?: T) => T | void; // TODO: right return type\n  closeTopModal: () => void;\n}\n\nexport type ModalPromise<T> = Promise<T | void> & { modalId: number };\n\n@singleton()\nexport class ModalService implements ModalServiceType {\n  modals: ModalState[] = [];\n  private _modalIdCounter = 0;\n  private _promises = new Map();\n\n  constructor() {\n    makeObservable(this, {\n      modals: observable,\n\n      openModal: action,\n      closeModal: action,\n      closeTopModal: action,\n    });\n  }\n\n  // TODO: change order of types\n  openModal<T, S extends {}>(modalType: ModalType, props?: S): ModalPromise<T> {\n    ++this._modalIdCounter;\n\n    this.modals.push({\n      modalType,\n      modalId: this._modalIdCounter,\n      props,\n    });\n\n    const promise = new Promise<T>((resolve) => {\n      this._promises.set(this._modalIdCounter, {\n        modalId: this._modalIdCounter,\n        resolve,\n      });\n    }) as ModalPromise<T>;\n\n    promise.modalId = this._modalIdCounter;\n\n    return promise;\n  }\n\n  closeModal<T>(modalId: number, result?: T): T | void {\n    this.modals = this.modals.filter((modal) => modal.modalId !== modalId);\n\n    const dialogInfo = this._promises.get(modalId);\n    if (dialogInfo) {\n      dialogInfo.resolve(result);\n      this._promises.delete(modalId);\n    }\n\n    return result;\n  }\n\n  closeTopModal(): void {\n    if (this.modals.length === 0) {\n      return;\n    }\n\n    this.closeModal(last(this.modals)!.modalId);\n  }\n}\n","export enum ModalType {\n  SHOW_MODAL_ACTIONS_MOBILE,\n  SHOW_MODAL_RECEIVE_BITCOIN,\n  SHOW_MODAL_TRANSACTION,\n  SHOW_MODAL_CONFIRM_SEND,\n  SHOW_MODAL_CONFIRM_SWAP,\n  SHOW_MODAL_PROCESS_TRANSACTION,\n  SHOW_MODAL_TRANSACTION_DETAILS,\n  SHOW_MODAL_ERROR,\n  SHOW_MODAL_CHOOSE_BUY_TOKEN_MOBILE,\n  SHOW_MODAL_SELECT_LIST_MOBILE,\n}\n\nexport type ModalPropsType<T = boolean, P = any> = {\n  close: (result?: T) => void;\n} & {\n  [K in keyof P]: P[K];\n};\n","import { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport type { ModalPromise, ModalType } from 'new/services/ModalService';\nimport { ModalService } from 'new/services/ModalService';\n\n@singleton()\nexport class ListMobileViewModel extends ViewModel {\n  constructor(private _modalService: ModalService) {\n    super();\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {}\n\n  protected override afterReactionsRemoved() {}\n\n  openModal<T>(modalType: ModalType, props: any): ModalPromise<T> {\n    return this._modalService.openModal<T, any>(modalType, props);\n  }\n\n  closeModal<T>(modalId: number, result?: T): T | void {\n    return this._modalService.closeModal<T>(modalId, result);\n  }\n}\n","import type { FC } from 'react';\nimport { useEffect } from 'react';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { ModalType } from 'new/services/ModalService';\nimport { ListMobileViewModel } from 'new/ui/components/common/Select/ListMobile/ListMobile.ViewModel';\n\ntype Props = {\n  title?: string;\n  onCloseByWrapper: () => void;\n};\n\nexport const ListMobile: FC<Props> = ({ children, title, onCloseByWrapper }) => {\n  const viewModel = useViewModel(ListMobileViewModel);\n\n  useEffect(() => {\n    const modalPromise = viewModel.openModal<{ closedByItem?: boolean }>(\n      ModalType.SHOW_MODAL_SELECT_LIST_MOBILE,\n      {\n        items: children,\n        title,\n      },\n    );\n    const { modalId } = modalPromise;\n\n    modalPromise.then((result) => {\n      if (result && result.closedByItem) {\n        return;\n      }\n\n      onCloseByWrapper();\n    });\n\n    return () => {\n      viewModel.closeModal(modalId, { closedByItem: true });\n    };\n  }, []);\n\n  return null;\n};\n","import type { FunctionComponent } from 'react';\nimport { Children, cloneElement, isValidElement, useEffect, useRef, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { shadows, theme, useIsMobile } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\nimport { Loader } from 'new/ui/components/common/Loader';\nimport { ListMobile } from 'new/ui/components/common/Select/ListMobile';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  flex: 1;\n`;\n\nconst Value = styled.div`\n  display: flex;\n  flex-grow: 1;\n  overflow: hidden;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 140%;\n  white-space: nowrap;\n\n  text-overflow: ellipsis;\n\n  &::first-letter {\n    text-transform: capitalize;\n  }\n`;\n\nconst CaretIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.secondary};\n`;\n\nconst Selector = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 12px 20px;\n\n  border: 1px solid ${theme.colors.stroke.secondary};\n  border-radius: 12px;\n\n  cursor: pointer;\n\n  &.isOpen,\n  &:hover {\n    ${CaretIcon} {\n      color: ${theme.colors.textIcon.active};\n    }\n  }\n\n  &.isOpen {\n    border-color: ${theme.colors.textIcon.active};\n\n    ${CaretIcon} {\n      transform: rotate(180deg);\n    }\n  }\n\n  &.flat {\n    padding: 12px 0;\n\n    border: none;\n  }\n`;\n\nconst ItemsMobileWrapper = styled.div`\n  display: grid;\n  grid-row-gap: 12px;\n\n  padding: 18px 2px;\n`;\n\nconst DropDownList = styled.div`\n  position: absolute;\n  right: 0;\n  z-index: 1;\n\n  display: grid;\n  grid-row-gap: 8px;\n\n  width: 100%;\n  min-width: 204px;\n  padding: 8px;\n\n  background: ${theme.colors.bg.primary};\n  border-radius: 8px;\n  ${shadows.notification};\n`;\n\ntype Props = {\n  value: string | React.ReactNode;\n  isLoading?: boolean;\n  onToggle?: (isOpen: boolean) => void;\n  className?: string;\n  flat?: boolean;\n  mobileListTitle?: string;\n};\n\nexport const Select: FunctionComponent<Props> = ({\n  value,\n  isLoading,\n  children,\n  onToggle,\n  className,\n  flat,\n  mobileListTitle,\n}) => {\n  const selectorRef = useRef<HTMLDivElement>(null);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const isMobile = useIsMobile();\n\n  const handleAwayClick = (e: MouseEvent) => {\n    if (!selectorRef.current?.contains(e.target as HTMLDivElement)) {\n      setIsOpen(false);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('click', handleAwayClick);\n\n    return () => {\n      window.removeEventListener('click', handleAwayClick);\n    };\n  }, []);\n\n  const handleSelectorClick = () => {\n    if (isLoading) {\n      return;\n    }\n\n    setIsOpen(!isOpen);\n    if (onToggle) {\n      onToggle(!isOpen);\n    }\n  };\n\n  const handleMobileListCloseByWrapper = () => {\n    handleSelectorClick();\n  };\n\n  const items = Children.map(children, (child) => {\n    if (isValidElement(child)) {\n      return cloneElement(child, { close: handleSelectorClick });\n    }\n    return child;\n  });\n\n  return (\n    <Wrapper ref={selectorRef} className={className}>\n      <Selector onClick={handleSelectorClick} className={classNames({ isOpen, flat })}>\n        <Value>{value}</Value>\n        {isLoading ? <Loader size=\"24\" /> : <CaretIcon name=\"caret\" />}\n      </Selector>\n      {isOpen ? (\n        isMobile ? (\n          <ListMobile title={mobileListTitle} onCloseByWrapper={handleMobileListCloseByWrapper}>\n            <ItemsMobileWrapper>{items}</ItemsMobileWrapper>\n          </ListMobile>\n        ) : (\n          <DropDownList>{items}</DropDownList>\n        )\n      ) : undefined}\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\n\nconst Value = styled.div`\n  display: flex;\n  flex: 1;\n  align-items: center;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  ${up.tablet} {\n    font-size: 16px;\n  }\n`;\n\nconst CheckIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n  margin-left: 4px;\n\n  color: transparent;\n`;\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 12px;\n\n  border: 1px solid transparent;\n  border-radius: 12px;\n  cursor: pointer;\n\n  &:hover {\n    background: ${theme.colors.bg.activePrimary};\n    border-color: ${theme.colors.textIcon.links};\n  }\n\n  &.isSelected {\n    ${Value} {\n      font-weight: 700;\n    }\n\n    ${CheckIcon} {\n      color: ${theme.colors.textIcon.active};\n    }\n  }\n`;\n\ntype Props = {\n  isSelected: boolean;\n  onItemClick: () => void;\n  close?: () => void;\n};\n\nexport const SelectItem: FunctionComponent<Props> = ({\n  children,\n  isSelected,\n  onItemClick,\n  close = () => {},\n}) => {\n  const handleItemClick = () => {\n    onItemClick();\n    close();\n  };\n\n  return (\n    <Wrapper onClick={handleItemClick} className={classNames({ isSelected })}>\n      <Value>{children}</Value>\n      <CheckIcon name=\"check\" />\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\nimport { useCallback } from 'react';\nimport { useHistory } from 'react-router';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { TokenAvatar } from 'components/common/TokenAvatar';\nimport type { BuyViewModelProps } from 'new/scenes/Main/Buy/Subviews/Moonpay/types';\nimport type { CryptoCurrency } from 'new/services/BuyService/structures';\nimport { Select, SelectItem } from 'new/ui/components/common/Select';\n\nconst InfoWrapper = styled.div`\n  margin-left: 12px;\n`;\n\nconst Line = styled.div`\n  line-height: 17px;\n`;\n\nconst Text = styled.div`\n  display: inline-block;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  &.bottom {\n    color: ${theme.colors.textIcon.primary};\n    font-size: 16px;\n  }\n\n  &::first-letter {\n    text-transform: uppercase;\n  }\n`;\n\nconst Item = styled.div`\n  margin-left: 12px;\n\n  &::first-letter {\n    text-transform: uppercase;\n  }\n`;\n\nconst Normal = styled.span`\n  font-weight: normal;\n`;\n\nexport const CurrencySelect: FC<BuyViewModelProps> = observer(({ viewModel }) => {\n  const history = useHistory();\n\n  const handleItemClick = useCallback(\n    (nextCurrency: CryptoCurrency) => () => {\n      history.push(`/buy/${nextCurrency.symbol}`);\n    },\n    [],\n  );\n\n  return (\n    <Select\n      value={\n        <>\n          <TokenAvatar symbol={viewModel.crypto.symbol} size={44} />\n          <InfoWrapper>\n            <Line>\n              <Text>I want to buy</Text>\n            </Line>\n            <Line>\n              <Text className=\"bottom\">\n                {viewModel.crypto.fullName} ({viewModel.crypto.symbol})\n              </Text>\n            </Line>\n          </InfoWrapper>\n        </>\n      }\n    >\n      {Object.values(viewModel.cryptoCurrenciesForSelect).map((itemCurrency) => (\n        <SelectItem\n          key={itemCurrency.symbol}\n          isSelected={viewModel.crypto.symbol === itemCurrency.symbol}\n          onItemClick={handleItemClick(itemCurrency)}\n        >\n          <TokenAvatar symbol={itemCurrency.symbol} size={44} />\n          <Item>\n            {itemCurrency.fullName} <Normal>({itemCurrency.symbol})</Normal>\n          </Item>\n        </SelectItem>\n      ))}\n    </Select>\n  );\n});\n","import type { FC } from 'react';\n\nimport { trackEvent } from 'utils/analytics';\n\nimport { Accordion } from '../Accordion';\nimport { AccordionTitle } from './AccordionTitle';\nimport { ListWrapper, Row, Text } from './common';\n\ntype AccordionRowValueElement = {\n  className?: string;\n  value: React.ReactNode;\n};\n\ntype AccordionRowValue = React.ReactNode | (React.ReactNode | AccordionRowValueElement)[];\n\ntype AccordionRow = {\n  id: number;\n  titleClassName?: string;\n  title: string;\n  value: AccordionRowValue;\n};\n\ntype AccordionList = {\n  id: number;\n  className?: string;\n  rows: AccordionRow[];\n};\n\nexport type Accordion = AccordionList[];\n\ninterface Props {\n  title: string;\n  titleBottomName: string;\n  titleBottomValue: string;\n  accordion: Accordion;\n}\n\nexport const AccordionDetails: FC<Props> = (props) => {\n  const handleToggle = (isOpen: boolean) => {\n    if (isOpen) {\n      trackEvent('Buy_Fees_Showed');\n    }\n  };\n\n  return (\n    <Accordion title={<AccordionTitle {...props} />} onToggle={handleToggle} noContentPadding>\n      {props.accordion.map((list) => (\n        <ListWrapper key={list.id} className={list.className}>\n          {list.rows.map((row) => (\n            <Row key={row.id}>\n              <Text className={row.titleClassName}>{row.title}</Text>\n              <Text>\n                {Array.isArray(row.value)\n                  ? row.value.map((el) =>\n                      (el as AccordionRowValueElement).value ? (\n                        <Text className={(el as AccordionRowValueElement).className}>\n                          {(el as AccordionRowValueElement).value}\n                        </Text>\n                      ) : (\n                        el\n                      ),\n                    )\n                  : row.value}\n              </Text>\n            </Row>\n          ))}\n        </ListWrapper>\n      ))}\n    </Accordion>\n  );\n};\n","import type { FC } from 'react';\n\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport type { Accordion } from 'components/ui/AccordionDetails';\nimport { AccordionDetails } from 'components/ui/AccordionDetails';\nimport type { BuyViewModelProps } from 'new/scenes/Main/Buy/Subviews/Moonpay/types';\nimport { numberToFiatString } from 'new/utils/NumberExtensions';\n\nexport const Details: FC<BuyViewModelProps> = observer(({ viewModel }) => {\n  const accordion = expr(() => {\n    const lists: Accordion = [\n      {\n        id: 1,\n        rows: [\n          {\n            id: 1,\n            titleClassName: 'gray',\n            title: `1 ${viewModel.crypto.symbol} price`,\n            value: numberToFiatString(viewModel.output.price),\n          },\n        ],\n      },\n      {\n        id: 2,\n        rows: [\n          {\n            id: 1,\n            titleClassName: 'gray',\n            title: `${viewModel.crypto.symbol} purchase cost`,\n            value: numberToFiatString(viewModel.output.purchaseCost),\n          },\n          {\n            id: 2,\n            titleClassName: 'gray',\n            title: 'Processing fee',\n            value: numberToFiatString(viewModel.output.processingFee),\n          },\n          {\n            id: 3,\n            titleClassName: 'gray',\n            title: 'Network fee',\n            value: numberToFiatString(viewModel.output.networkFee),\n          },\n        ],\n      },\n      {\n        id: 3,\n        className: 'total',\n        rows: [\n          {\n            id: 1,\n            title: 'Total',\n            value: numberToFiatString(viewModel.output.total),\n          },\n        ],\n      },\n    ];\n\n    return lists;\n  });\n\n  return (\n    <AccordionDetails\n      title=\"Purchase details\"\n      titleBottomName=\"Total amount spent\"\n      titleBottomValue={numberToFiatString(viewModel.output.total)}\n      accordion={accordion}\n    />\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { Button, Icon } from 'components/ui';\n\nconst ArrowsIcon = styled(Icon)`\n  width: 13px;\n  height: 13px;\n\n  color: #5887ff;\n`;\n\nconst ButtonStyled = styled(Button)`\n  padding: 0 10px;\n\n  border: #e5e5e5 solid 1px;\n`;\n\ninterface Props {\n  title: string;\n  onClick: () => void;\n}\n\nexport const AmountTypeButton: FC<Props> = ({ title, onClick }) => (\n  <ButtonStyled onClick={onClick} small>\n    {title}&nbsp;\n    <ArrowsIcon name=\"opposite-arrows\" />\n  </ButtonStyled>\n);\n","import type { FC } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { useUpdateEffect } from 'react-use';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nconst WrapperLabel = styled.label`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: flex-end;\n\n  /* Fix outer \"margin\" */\n  min-width: 0;\n`;\n\nconst textCss = `\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 600;\n  font-size: 28px;\n  line-height: 120%;\n`;\n\nconst Prefix = styled.div`\n  margin-right: 8px;\n\n  ${textCss}\n\n  &.isText {\n    margin-right: 4px;\n  }\n`;\n\nconst Input = styled.input`\n  /* Fix outer \"margin\" */\n  min-width: 0;\n  padding: 0;\n\n  text-align: right;\n\n  background: transparent;\n  border: 0;\n\n  outline: none;\n\n  appearance: none;\n\n  ${textCss}\n\n  &::placeholder {\n    color: ${theme.colors.textIcon.secondary};\n  }\n\n  &.error {\n    color: ${theme.colors.system.errorMain};\n  }\n`;\n\nconst DECIMAL_ONLY = /^\\d*(\\.\\d*)?$/;\n\ninterface Props\n  extends Omit<\n    React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>,\n    'onChange' | 'prefix'\n  > {\n  prefix?: React.ReactNode;\n  onChange?: (val: string) => void;\n}\n\nexport const InputAmount: FC<Props> = ({\n  prefix,\n  placeholder = '0',\n  value = '',\n  onChange,\n  ...props\n}) => {\n  const [localValue, setLocalValue] = useState(value);\n\n  useUpdateEffect(() => {\n    if (Number(value) !== Number(localValue)) {\n      setLocalValue(value);\n    }\n  }, [value]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    let nextValue = e.target.value.replace(/^0(\\d+)/, '$1');\n\n    if (nextValue === '.') {\n      nextValue = '0.';\n    }\n\n    if ((!Number.isNaN(nextValue) && DECIMAL_ONLY.test(nextValue)) || nextValue === '') {\n      setLocalValue(nextValue);\n      onChange?.(nextValue);\n    }\n  };\n\n  // Calculate width of input for correct prefix render\n  // on left side of input\n  const width = useMemo(() => {\n    const val = localValue || placeholder;\n    if (val) {\n      return String(val).length + 'ch';\n    }\n  }, [localValue, placeholder]);\n\n  return (\n    <WrapperLabel>\n      {prefix ? (\n        <Prefix\n          className={classNames({\n            isText: typeof prefix === 'string',\n          })}\n        >\n          {prefix}\n        </Prefix>\n      ) : undefined}\n      <Input\n        {...props}\n        placeholder={placeholder}\n        value={localValue}\n        type=\"text\"\n        inputMode=\"decimal\"\n        autoComplete=\"off\"\n        autoCorrect=\"off\"\n        spellCheck=\"false\"\n        onChange={handleChange}\n        style={{ width }}\n      />\n    </WrapperLabel>\n  );\n};\n","import type { FC } from 'react';\nimport { useLayoutEffect, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { borders, theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport type { BuyViewModelProps } from 'new/scenes/Main/Buy/Subviews/Moonpay/types';\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { FiatCurrency } from 'new/services/BuyService/structures';\nimport { Defaults } from 'new/services/Defaults';\nimport { AmountTypeButton } from 'new/ui/components/common/AmountTypeButton';\nimport { TokenAvatar } from 'new/ui/components/common/TokenAvatar';\nimport { InputAmount } from 'new/ui/components/ui/InputAmount';\nimport { numberToFiatString, numberToTokenString } from 'new/utils/NumberExtensions';\n\nconst Wrapper = styled.div`\n  border-radius: 12px;\n  ${borders.secondary}\n`;\n\nconst InputWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-sizing: content-box;\n  height: 36px;\n  padding: 16px 20px;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ${theme.colors.stroke.secondary};\n  }\n`;\n\nconst Title = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n`;\n\nexport const Inputs: FC<BuyViewModelProps> = observer(({ viewModel }) => {\n  const [token, setToken] = useState<Token | undefined>();\n\n  useLayoutEffect(() => {\n    viewModel.getTokenWithMint(viewModel.crypto.mintAddress).then(setToken);\n  }, [viewModel.crypto.mintAddress]);\n\n  const isFiatInputCurrency = FiatCurrency.isFiat(viewModel.input.currency);\n\n  const prefix = isFiatInputCurrency ? (\n    Defaults.fiat.symbol\n  ) : (\n    <TokenAvatar token={token} size={32} />\n  );\n\n  const buttonAmountFormatted = isFiatInputCurrency\n    ? token\n      ? numberToTokenString(viewModel.output.amount, token)\n      : ''\n    : numberToFiatString(viewModel.output.amount);\n\n  return (\n    <Wrapper>\n      <InputWrapper>\n        <Title>{isFiatInputCurrency ? 'You pay' : 'You get'}</Title>\n        <InputAmount\n          prefix={prefix}\n          value={viewModel.input.amount}\n          onChange={viewModel.setAmount}\n        />\n      </InputWrapper>\n      <InputWrapper>\n        <Title>{isFiatInputCurrency ? 'You get' : 'You pay'}</Title>\n        <AmountTypeButton title={buttonAmountFormatted} onClick={viewModel.swap} />\n      </InputWrapper>\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { useIsMobile } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { MoonpayButton } from 'new/scenes/Main/Buy/Subviews/Moonpay/Button';\nimport { CurrencySelect } from 'new/scenes/Main/Buy/Subviews/Moonpay/CurrencySelector';\nimport { Details } from 'new/scenes/Main/Buy/Subviews/Moonpay/Details/Details';\nimport { Inputs } from 'new/scenes/Main/Buy/Subviews/Moonpay/Inputs';\nimport type { BuyViewModelProps } from 'new/scenes/Main/Buy/Subviews/Moonpay/types';\nimport { WidgetPageBuy } from 'new/scenes/Main/Buy/Subviews/Moonpay/WidgetPageBuy';\n\nexport const MoonpayWidget: FC<BuyViewModelProps> = observer(({ viewModel }) => {\n  const isMobile = useIsMobile();\n\n  return (\n    <WidgetPageBuy bottom={<MoonpayButton viewModel={viewModel} />}>\n      {!isMobile ? <CurrencySelect viewModel={viewModel} /> : null}\n      <Inputs viewModel={viewModel} />\n      <Details viewModel={viewModel} />\n    </WidgetPageBuy>\n  );\n});\n","import type { FunctionComponent } from 'react';\nimport { useLocation } from 'react-router';\nimport { Link, NavLink } from 'react-router-dom';\n\nimport { styled } from '@linaria/react';\nimport { borders, shadows, theme, up } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\nimport { appStorePath, playStorePath } from 'new/constants';\nimport { trackEvent } from 'utils/analytics';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-gap: 8px;\n`;\n\nconst NavButton = styled.div`\n  display: grid;\n  grid-template-rows: 30px;\n  grid-template-columns: repeat(2, max-content) 1fr;\n  align-items: center;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  background: ${theme.colors.bg.primary};\n\n  border-radius: 12px;\n\n  ${borders.primary};\n  ${shadows.card}\n\n  ${up.tablet} {\n    padding: 10px 10px;\n  }\n\n  ${up.desktop} {\n    padding: 10px 16px;\n  }\n`;\n\nconst IconBlock = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n`;\n\nconst NavIcon = styled(Icon)`\n  width: 20px;\n  height: 20px;\n\n  color: ${theme.colors.textIcon.secondary};\n`;\n\nconst StoreIcon = styled(Icon)`\n  justify-self: flex-end;\n  width: 20px;\n  height: 20px;\n  margin-right: 3px;\n\n  color: ${theme.colors.textIcon.tertiary};\n`;\n\nconst Name = styled.span`\n  ${up.tablet} {\n    display: none;\n  }\n\n  ${up.desktop} {\n    display: block;\n    margin-left: 8px;\n  }\n`;\n\nconst NavLinkMenu = styled(NavLink)`\n  &.active {\n    ${NavButton} {\n      color: ${theme.colors.textIcon.active};\n      font-weight: 700;\n      letter-spacing: 0.03em;\n\n      background: ${theme.colors.bg.activePrimary};\n\n      border-color: ${theme.colors.bg.buttonPrimary};\n\n      ${NavIcon} {\n        color: ${theme.colors.textIcon.active};\n      }\n    }\n  }\n\n  &:hover {\n    ${NavButton} {\n      background-color: ${theme.colors.bg.activePrimary};\n    }\n  }\n\n  &:active {\n    ${NavButton} {\n      background-color: ${theme.colors.bg.pressed};\n    }\n  }\n\n  &:focus-visible {\n    border-radius: 12px;\n    outline: ${theme.colors.textIcon.active} solid 1px;\n    outline-offset: 2px;\n  }\n`;\n\nconst Separator = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin: 8px 0;\n  padding: 0;\n`;\n\nconst Line = styled.hr`\n  flex: none;\n  flex-grow: 0;\n  align-self: stretch;\n  order: 0;\n  height: 2px;\n  margin: 0 0;\n\n  background: #f6f6f8;\n  border: none;\n`;\n\nexport const LeftNavMenu: FunctionComponent = () => {\n  const location = useLocation();\n\n  const handleAppLinkClick = (store: 'app_store' | 'google_play') => () => {\n    if (store === 'app_store') {\n      trackEvent('App_Store_Pressed');\n    } else if (store === 'google_play') {\n      trackEvent('Google_Play_Pressed');\n    }\n  };\n\n  return (\n    <Wrapper>\n      <NavLinkMenu\n        to={{ pathname: '/wallets', state: { fromPage: location.pathname } }}\n        className=\"button\"\n      >\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"wallet\" />\n          </IconBlock>\n          <Name>Wallets</Name>\n        </NavButton>\n      </NavLinkMenu>\n\n      <NavLinkMenu\n        to={{ pathname: '/buy', state: { fromPage: location.pathname } }}\n        className=\"button\"\n      >\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"plus\" />\n          </IconBlock>\n          <Name>Buy</Name>\n        </NavButton>\n      </NavLinkMenu>\n\n      <NavLinkMenu\n        to={{ pathname: '/receive', state: { fromPage: location.pathname } }}\n        className=\"button\"\n      >\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"bottom\" />\n          </IconBlock>\n          <Name>Receive</Name>\n        </NavButton>\n      </NavLinkMenu>\n      <NavLinkMenu\n        to={{ pathname: '/send', state: { fromPage: location.pathname } }}\n        className=\"button\"\n      >\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"top\" />\n          </IconBlock>\n          <Name>Send</Name>\n        </NavButton>\n      </NavLinkMenu>\n      <NavLinkMenu\n        to={{ pathname: '/swap', state: { fromPage: location.pathname } }}\n        className=\"button\"\n      >\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"swap\" />\n          </IconBlock>\n          <Name>Swap</Name>\n        </NavButton>\n      </NavLinkMenu>\n      <NavLinkMenu\n        to={{ pathname: '/settings', state: { fromPage: location.pathname } }}\n        className=\"button\"\n      >\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"gear\" />\n          </IconBlock>\n          <Name>Settings</Name>\n        </NavButton>\n      </NavLinkMenu>\n      <Separator>\n        <Line />\n      </Separator>\n      <NavLinkMenu\n        to={{ pathname: appStorePath }}\n        as={Link}\n        target=\"_blank\"\n        className=\"button\"\n        onClick={handleAppLinkClick('app_store')}\n      >\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"app-store\" />\n          </IconBlock>\n          <Name>App Store</Name>\n          <StoreIcon name=\"store-icon\" />\n        </NavButton>\n      </NavLinkMenu>\n      <NavLinkMenu\n        to={{ pathname: playStorePath }}\n        as={Link}\n        target=\"_blank\"\n        className=\"button\"\n        onClick={handleAppLinkClick('google_play')}\n      >\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"google-play\" />\n          </IconBlock>\n          <Name>Google Play</Name>\n          <StoreIcon name=\"store-icon\" />\n        </NavButton>\n      </NavLinkMenu>\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent } from 'react';\nimport * as React from 'react';\nimport { forwardRef } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { borders, shadows, up } from '@p2p-wallet-web/ui';\n\nconst Wrapper = styled.div`\n  padding: 20px;\n\n  background: #fff;\n  border-radius: 12px;\n\n  ${up.tablet} {\n    ${borders.primaryRGBA}\n    ${shadows.card}\n  }\n`;\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  forwardedRef?: React.Ref<HTMLDivElement>;\n}\n\nconst CardOriginal: FunctionComponent<Props> = ({\n  forwardedRef,\n  children,\n  className,\n  ...props\n}) => {\n  return (\n    <Wrapper ref={forwardedRef} {...props} className={className}>\n      {children}\n    </Wrapper>\n  );\n};\n\nexport const Card = forwardRef<HTMLDivElement, Props>((props, ref: React.Ref<HTMLDivElement>) => (\n  <CardOriginal {...props} forwardedRef={ref} />\n));\n","import type { FunctionComponent } from 'react';\nimport { forwardRef } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { shadows, theme, up } from '@p2p-wallet-web/ui';\n\nimport { Card } from 'new/ui/components/ui/Card';\n\nconst Wrapper = styled(Card)`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n\n  padding: 0;\n\n  ${up.tablet} {\n    ${shadows.card}\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 60px;\n  margin-top: 8px;\n  padding: 8px 20px;\n`;\n\nconst Title = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 24px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n`;\n\nconst Action = styled.div``;\n\nconst Content = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n`;\n\ntype Props = {\n  forwardedRef?: React.Ref<HTMLDivElement>;\n  title?: React.ReactNode;\n  action?: React.ReactNode;\n  children?: React.ReactNode;\n  className?: string;\n};\n\nconst WidgetOriginal: FunctionComponent<Props> = ({\n  forwardedRef,\n  title,\n  action,\n  children,\n  className,\n}) => {\n  return (\n    <Wrapper ref={forwardedRef} className={className}>\n      {title || action ? (\n        <Header>\n          {title ? <Title>{title}</Title> : undefined}\n          {action ? <Action>{action}</Action> : undefined}\n        </Header>\n      ) : undefined}\n      {children ? <Content>{children}</Content> : undefined}\n    </Wrapper>\n  );\n};\n\nexport const Widget = forwardRef<HTMLDivElement, Props>((props, ref: React.Ref<HTMLDivElement>) => (\n  <WidgetOriginal {...props} forwardedRef={ref} />\n));\n","import type { FunctionComponent, HTMLAttributes } from 'react';\n\nimport { styled } from '@linaria/react';\n\nconst Wrapper = styled.img<{ size: string | number | undefined }>`\n  width: ${({ size }) => (size ? `${size}px` : 'auto')};\n  height: ${({ size }) => (size ? `${size}px` : 'auto')};\n\n  border-radius: 12px;\n\n  /* transparent pixel for not showing border if no src */\n  &:not([src]) {\n    content: url('data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==');\n  }\n`;\n\ntype Props = {\n  src?: string;\n  size?: string | number;\n};\n\nexport const Avatar: FunctionComponent<Props & HTMLAttributes<HTMLDivElement>> = ({\n  src,\n  size,\n  ...props\n}) => {\n  return <Wrapper src={src} size={size} {...props} />;\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { rgba } from 'polished';\n\nimport { Icon } from 'components/ui';\nimport type { LayoutViewModel } from 'new/ui/components/common/Layout/Layout.ViewModel';\nimport { Widget } from 'new/ui/components/common/Widget';\nimport { Avatar } from 'new/ui/components/ui/Avatar';\n\nconst Top = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 10px 20px;\n\n  border-bottom: 1px solid ${rgba('#000', 0.05)};\n`;\n\nconst Username = styled.div`\n  margin-left: 20px;\n\n  color: #202020;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 140%;\n`;\n\nconst Bottom = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 54px;\n  margin: 0 16px 0 20px;\n`;\n\nconst Address = styled.div`\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 140%;\n`;\n\nconst CopiedText = styled.div`\n  color: #2db533;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 140%;\n`;\n\nconst CopyIcon = styled(Icon)`\n  width: 21px;\n  height: 21px;\n\n  color: #a3a5ba;\n`;\n\nconst CopyWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n\n  background: rgba(163, 165, 186, 0.1);\n  border-radius: 8px;\n  cursor: pointer;\n\n  &:hover {\n    background: #eff3ff;\n\n    ${CopyIcon} {\n      color: #5887ff;\n    }\n  }\n`;\n\ntype Props = {\n  viewModel: Readonly<LayoutViewModel>;\n};\n\nexport const ProfileWidget: FC<Props> = ({ viewModel }) => {\n  const [copied, setCopied] = useState(false);\n\n  const username = 'konstantin';\n  const address = `${username}.p2pwallet.org`;\n\n  const handleCopyClick = () => {\n    try {\n      void navigator.clipboard.writeText(`https://${address}`);\n      setCopied(true);\n      viewModel.notificationService.info('URL Copied!');\n\n      // fade copied after some seconds\n      setTimeout(() => {\n        setCopied(false);\n      }, 2000);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <Widget>\n      <Top>\n        <Avatar src=\"https://i.pravatar.cc/100\" size={36} />\n        <Username>@{username}</Username>\n      </Top>\n      <Bottom>\n        {copied ? <CopiedText>URL Copied!</CopiedText> : <Address>{address}</Address>}\n        <CopyWrapper onClick={handleCopyClick}>\n          <CopyIcon name=\"copy\" />\n        </CopyWrapper>\n      </Bottom>\n    </Widget>\n  );\n};\n","import type { FC } from 'react';\nimport Sticky from 'react-stickynode';\n\nimport { styled } from '@linaria/react';\nimport { up } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { isEnabled } from 'new/services/FeatureFlags';\nimport { Features } from 'new/services/FeatureFlags/features';\nimport {\n  COLUMN_LEFT_WIDTH,\n  COLUMN_LEFT_WIDTH_MOBILE,\n  CONTAINER_PADDING_TOP,\n  HEADER_HEIGHT,\n} from 'new/ui/components/common/Layout';\nimport { LeftNavMenu } from 'new/ui/components/common/Layout/DesktopLayout/ColumnLeft/LeftNavMenu';\nimport { ProfileWidget } from 'new/ui/components/common/Layout/DesktopLayout/ColumnLeft/ProfileWidget';\nimport type { LayoutViewModel } from 'new/ui/components/common/Layout/Layout.ViewModel';\n\nconst ColumnLeftSticky = styled(Sticky)`\n  height: fit-content;\n\n  ${up.tablet} {\n    width: ${COLUMN_LEFT_WIDTH_MOBILE}px;\n  }\n\n  ${up.desktop} {\n    width: 100%;\n    max-width: ${COLUMN_LEFT_WIDTH}px;\n  }\n`;\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-gap: 16px;\n  grid-template-rows: min-content;\n`;\n\ntype Props = {\n  viewModel: Readonly<LayoutViewModel>;\n};\n\nexport const ColumnLeft: FC<Props> = observer(({ viewModel }) => {\n  return (\n    <ColumnLeftSticky top={HEADER_HEIGHT + CONTAINER_PADDING_TOP}>\n      <Wrapper>\n        {isEnabled(Features.LeftNavMenuProfile) ? <ProfileWidget viewModel={viewModel} /> : null}\n        <LeftNavMenu />\n      </Wrapper>\n    </ColumnLeftSticky>\n  );\n});\n","export const CONTAINER_PADDING_TOP = 16;\nexport const COLUMN_LEFT_WIDTH = 228;\nexport const COLUMN_LEFT_WIDTH_MOBILE = 52;\nexport const COLUMN_RIGHT_WIDTH = 524;\nexport const COLUMNS_GRID_GUTTER = 20;\n","import { useEffect, useRef, useState } from 'react';\n\nconst getScrollbarWidth = (() => {\n  let scrollElement: HTMLElement | null = null;\n\n  return () => {\n    if (scrollElement === null) {\n      const containerDiv = document.createElement('div');\n\n      containerDiv.innerHTML = `\n        <div style=\"position: absolute; top: -200px; width: 100px; height: 100px; overflow: scroll; visibility: hidden;\"></div>\n      `;\n\n      scrollElement = containerDiv.firstElementChild as HTMLElement;\n      document.body.append(scrollElement);\n    }\n\n    return scrollElement.offsetWidth - scrollElement.clientWidth;\n  };\n})();\n\nconst listeners: React.Dispatch<number | null>[] = [];\n\nlet width: number | null;\nlet prevWidth: number | null;\n\nfunction onResize() {\n  const scrollbarWidth = getScrollbarWidth();\n\n  if (scrollbarWidth === 0) {\n    width = null;\n  } else {\n    width = window.innerWidth - scrollbarWidth;\n  }\n\n  if (width !== prevWidth) {\n    for (const callback of listeners) {\n      callback(width);\n    }\n  }\n\n  prevWidth = width;\n}\n\nexport const useWidthWithoutScrollbar = (): number | null => {\n  const [value, setValue] = useState<number | null>(width);\n  const currentRef = useRef<number | null>(null);\n  currentRef.current = value;\n\n  useEffect(() => {\n    if (listeners.length === 0) {\n      window.addEventListener('resize', onResize);\n    }\n\n    listeners.push(setValue);\n\n    if (width === undefined) {\n      onResize();\n    } else if (currentRef.current !== width) {\n      setValue(width);\n    }\n\n    return () => {\n      const index = listeners.lastIndexOf(setValue);\n\n      if (index !== -1) {\n        listeners.splice(index, 1);\n      }\n\n      if (listeners.length === 0) {\n        window.removeEventListener('resize', onResize);\n      }\n    };\n  }, []);\n\n  return value;\n};\n","import type { FunctionComponent } from 'react';\nimport * as React from 'react';\n\nimport { useWidthWithoutScrollbar } from 'new/utils/hooks/useWidthWithoutScrollbar';\n\nexport const ScrollFix: FunctionComponent<React.HTMLAttributes<HTMLDivElement>> = ({\n  style,\n  ...props\n}) => {\n  const width = useWidthWithoutScrollbar();\n\n  return <div style={width ? { ...style, width } : style} {...props} />;\n};\n","import type { FC } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { up, useIsDesktop, useIsTablet } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport { Header, HEADER_HEIGHT } from 'new/ui/components/common/Layout';\nimport { ColumnLeft } from 'new/ui/components/common/Layout/DesktopLayout/ColumnLeft';\nimport type { LayoutViewModel } from 'new/ui/components/common/Layout/Layout.ViewModel';\nimport { ScrollFix } from 'new/ui/components/common/ScollFix';\n\nimport {\n  COLUMN_LEFT_WIDTH,\n  COLUMN_LEFT_WIDTH_MOBILE,\n  COLUMN_RIGHT_WIDTH,\n  COLUMNS_GRID_GUTTER,\n  CONTAINER_PADDING_TOP,\n} from '../constants';\nimport type { BreadcrumbType } from '../types';\n\nconst Wrapper = styled.div``;\n\nconst MainScrollFix = styled(ScrollFix)`\n  padding: 0 20px 170px;\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  max-width: 796px;\n  min-height: calc(100vh - ${CONTAINER_PADDING_TOP}px - ${HEADER_HEIGHT}px);\n  margin: 0 auto;\n\n  ${up.tablet} {\n    padding-top: ${CONTAINER_PADDING_TOP}px;\n  }\n`;\n\nconst Content = styled.div``;\n\nconst ColumnsWrapper = styled.div`\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: ${COLUMNS_GRID_GUTTER}px;\n\n  &.isTablet {\n    grid-template-columns: ${COLUMN_LEFT_WIDTH_MOBILE}px 1fr;\n  }\n\n  &.isDesktop {\n    grid-template-columns: ${COLUMN_LEFT_WIDTH}px 1fr;\n  }\n`;\n\nconst ColumnRightWrapper = styled.div`\n  max-width: ${COLUMN_RIGHT_WIDTH}px;\n  height: fit-content;\n`;\n\nconst ColumnRight = styled.div`\n  display: grid;\n  grid-gap: 24px;\n  grid-template-rows: min-content;\n`;\n\ntype Props = {\n  viewModel: Readonly<LayoutViewModel>;\n  breadcrumb?: BreadcrumbType;\n  children: React.ReactNode;\n};\n\nexport const DesktopLayoutOrigin: FC<Props> = observer(({ viewModel, breadcrumb, children }) => {\n  const isTablet = useIsTablet();\n  const isDesktop = useIsDesktop();\n\n  return (\n    <Wrapper>\n      <Header viewModel={viewModel} breadcrumb={breadcrumb} />\n      <MainScrollFix id=\"container\">\n        <Container>\n          {viewModel.walletConnected ? (\n            <Content>\n              <ColumnsWrapper className={classNames({ isTablet, isDesktop })}>\n                <ColumnLeft viewModel={viewModel} />\n                <ColumnRightWrapper>\n                  <ColumnRight>{children}</ColumnRight>\n                </ColumnRightWrapper>\n              </ColumnsWrapper>\n            </Content>\n          ) : undefined}\n        </Container>\n      </MainScrollFix>\n    </Wrapper>\n  );\n});\n\nexport const DesktopLayout = React.memo(DesktopLayoutOrigin);\n","export const HEADER_HEIGHT = 64;\n","import type { FunctionComponent } from 'react';\nimport { Link, NavLink } from 'react-router-dom';\n\nimport { styled } from '@linaria/react';\nimport { zIndexes } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { Icon } from 'components/ui';\nimport logo from 'new/ui/assets/images/logo.png';\nimport type { BreadcrumbType } from 'new/ui/components/common/Layout';\nimport {\n  COLUMN_LEFT_WIDTH,\n  COLUMNS_GRID_GUTTER,\n  HEADER_HEIGHT,\n} from 'new/ui/components/common/Layout';\nimport type { LayoutViewModel } from 'new/ui/components/common/Layout/Layout.ViewModel';\nimport { ScrollFix } from 'new/ui/components/common/ScollFix';\n\nconst Wrapper = styled.header`\n  position: sticky;\n  top: 0;\n  z-index: ${zIndexes.nav};\n\n  width: 100%;\n  height: ${HEADER_HEIGHT}px;\n\n  background: #fff;\n  border-bottom: 1px solid #f6f6f8;\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.05);\n`;\n\nconst ScrollFixContainer = styled(ScrollFix)`\n  height: 100%;\n  padding: 0 20px;\n`;\n\nconst MainContainer = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n\n  width: 100%;\n  max-width: 796px;\n  height: 100%;\n  margin: 0 auto;\n`;\n\nconst Content = styled.div`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n`;\n\nconst LogoLink = styled(Link)`\n  color: #000;\n  font-weight: bold;\n  font-size: 22px;\n  line-height: 120%;\n  text-decoration: none;\n`;\n\nconst LogoImg = styled.img`\n  width: 108px;\n  height: 38px;\n`;\n\nconst BreadcrumbWrapper = styled.div`\n  position: absolute;\n  left: ${COLUMN_LEFT_WIDTH + COLUMNS_GRID_GUTTER}px;\n\n  display: flex;\n  align-items: center;\n\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 20px;\n  line-height: 120%;\n`;\n\nconst BackIcon = styled(Icon)`\n  width: 22px;\n  height: 22px;\n  margin-left: -2px;\n\n  color: #a3a5ba;\n\n  transform: rotate(90deg);\n`;\n\nconst BackLink = styled(NavLink)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  margin-right: 16px;\n\n  background: #f6f6f8;\n  border-radius: 12px;\n  cursor: pointer;\n\n  &:hover {\n    background: #eff3ff;\n\n    ${BackIcon} {\n      color: #5887ff;\n    }\n  }\n`;\n\ntype Props = {\n  viewModel: Readonly<LayoutViewModel>;\n  breadcrumb?: BreadcrumbType;\n};\n\nexport const Header: FunctionComponent<Props> = observer(({ viewModel, breadcrumb }) => {\n  return (\n    <Wrapper>\n      <ScrollFixContainer>\n        <MainContainer>\n          <Content>\n            <LogoLink to={viewModel.walletConnected ? '/wallets' : '/'}>\n              <LogoImg src={logo} />\n            </LogoLink>\n            {breadcrumb ? (\n              <BreadcrumbWrapper>\n                {breadcrumb.backTo ? (\n                  <BackLink to={breadcrumb.backTo}>\n                    <BackIcon name=\"chevron\" />\n                  </BackLink>\n                ) : undefined}\n                {breadcrumb.currentName}\n              </BreadcrumbWrapper>\n            ) : undefined}\n          </Content>\n        </MainContainer>\n      </ScrollFixContainer>\n    </Wrapper>\n  );\n});\n","import { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { ModalService, ModalType } from 'new/services/ModalService';\nimport { NotificationService } from 'new/services/NotificationService';\nimport { SolanaService } from 'new/services/SolanaService';\n\n@singleton()\nexport class LayoutViewModel extends ViewModel {\n  constructor(\n    private _modalService: ModalService,\n    private _solanaService: SolanaService,\n    public notificationService: NotificationService,\n  ) {\n    super();\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {}\n\n  protected override afterReactionsRemoved() {}\n\n  get walletConnected() {\n    return !!this._solanaService.provider.wallet.publicKey;\n  }\n\n  openActionsMobileModal() {\n    void this._modalService.openModal(ModalType.SHOW_MODAL_ACTIONS_MOBILE, {\n      layoutViewModel: this,\n    });\n  }\n\n  openChooseBuyTokenMobileModal() {\n    void this._modalService.openModal(ModalType.SHOW_MODAL_CHOOSE_BUY_TOKEN_MOBILE);\n  }\n}\n","import type { FC } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { useIntercom } from 'react-use-intercom';\n\nimport { styled } from '@linaria/react';\nimport { theme, zIndexes } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\nimport { MOBILE_FOOTER_TABS_HEIGHT } from 'new/ui/components/common/Layout';\nimport type { LayoutViewModel } from 'new/ui/components/common/Layout/Layout.ViewModel';\n\nconst Wrapper = styled.div`\n  position: sticky;\n  bottom: 0;\n  z-index: ${zIndexes.nav};\n\n  display: flex;\n  align-content: center;\n  width: 100%;\n  height: ${MOBILE_FOOTER_TABS_HEIGHT}px;\n\n  background: ${theme.colors.bg.activeSecondary};\n  box-shadow: 0 -2px 8px rgba(56, 60, 71, 0.05);\n`;\n\nconst NavButton = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  font-weight: 600;\n  font-size: 12px;\n  line-height: 120%;\n\n  border-radius: 12px;\n`;\n\nconst IconBlock = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n`;\n\nconst NavIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n`;\n\nconst Name = styled.span``;\n\nconst NavLinkMenu = styled.div`\n  display: flex;\n  flex: 1;\n\n  color: ${theme.colors.textIcon.secondary};\n\n  /* TODO: temp, delete after release recieve and settings */\n\n  &.disabled {\n    pointer-events: none;\n  }\n\n  &.active,\n  &:hover {\n    color: ${theme.colors.textIcon.active};\n  }\n`;\n\ninterface Props {\n  viewModel: LayoutViewModel;\n}\n\nexport const MobileFooterTabs: FC<Props> = ({ viewModel }) => {\n  const { showMessages } = useIntercom();\n\n  const handleActionsClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    viewModel.openActionsMobileModal();\n  };\n\n  const handleFeedbackClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    e.preventDefault();\n\n    showMessages();\n  };\n\n  return (\n    <Wrapper>\n      <NavLinkMenu\n        as={NavLink}\n        to={{ pathname: '/wallets', state: { fromPage: location.pathname } }}\n        className=\"button\"\n      >\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"wallet\" />\n          </IconBlock>\n          <Name>Wallets</Name>\n        </NavButton>\n      </NavLinkMenu>\n      <NavLinkMenu as={NavLink} to=\"/actions\" onClick={handleActionsClick} className=\"button\">\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"info\" />\n          </IconBlock>\n          <Name>Actions</Name>\n        </NavButton>\n      </NavLinkMenu>\n      <NavLinkMenu as={NavLink} to=\"/feedback\" onClick={handleFeedbackClick} className=\"button\">\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"send-message\" />\n          </IconBlock>\n          <Name>Feedback</Name>\n        </NavButton>\n      </NavLinkMenu>\n      <NavLinkMenu\n        as={NavLink}\n        to={{ pathname: '/settings', state: { fromPage: location.pathname } }}\n        className=\"button\"\n      >\n        <NavButton>\n          <IconBlock>\n            <NavIcon name=\"gear\" />\n          </IconBlock>\n          <Name>Settings</Name>\n        </NavButton>\n      </NavLinkMenu>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport type { LayoutViewModel } from 'new/ui/components/common/Layout/Layout.ViewModel';\nimport { MOBILE_HEADER_HEIGHT } from 'new/ui/components/common/Layout/MobileLayout/MobileHeader/constants';\nimport logo from 'new/ui/components/common/Layout/MobileLayout/MobileHeader/logo.png';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: ${MOBILE_HEADER_HEIGHT}px;\n  padding: 0 20px;\n\n  border-bottom: 1px solid ${theme.colors.stroke.tertiary};\n`;\n\nconst LogoLink = styled(Link)`\n  color: #000;\n  font-weight: bold;\n  font-size: 22px;\n  line-height: 120%;\n  text-decoration: none;\n`;\n\nconst LogoImg = styled.img`\n  width: 32px;\n  height: 32px;\n`;\n\nconst Name = styled.span`\n  margin-left: 12px;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n`;\n\nconst ActionWrapper = styled.div`\n  justify-self: flex-end;\n  margin-right: -3px;\n`;\n\ntype Props = {\n  viewModel: LayoutViewModel;\n  action?: React.ReactNode;\n};\n\nexport const MobileHeader: FC<Props> = observer(({ viewModel, action }) => {\n  return (\n    <Wrapper>\n      <LogoLink to={viewModel.walletConnected ? '/wallets' : '/'}>\n        <LogoImg src={logo} />\n        <Name>Wallet</Name>\n      </LogoLink>\n      {action ? <ActionWrapper>{action}</ActionWrapper> : undefined}\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\n\nimport type { BreadcrumbType } from 'new/ui/components/common/Layout';\nimport { MOBILE_FOOTER_TABS_HEIGHT, MobileFooterTabs } from 'new/ui/components/common/Layout';\nimport type { LayoutViewModel } from 'new/ui/components/common/Layout/Layout.ViewModel';\nimport { MobileHeader } from 'new/ui/components/common/Layout/MobileLayout/MobileHeader';\nimport { ScrollFix } from 'new/ui/components/common/ScollFix';\n\nconst fullHeight = `\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n`;\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-template-rows: 1fr ${MOBILE_FOOTER_TABS_HEIGHT}px;\n  height: 100vh;\n`;\n\nconst Container = styled.div`\n  ${fullHeight}\n`;\n\nconst ScrollFixStyled = styled(ScrollFix)`\n  ${fullHeight}\n`;\n\nconst Content = styled.div`\n  ${fullHeight}\n`;\n\ntype Props = {\n  viewModel: LayoutViewModel;\n  breadcrumb?: BreadcrumbType;\n  action?: React.ReactNode;\n  children: React.ReactNode;\n};\n\nexport const MobileLayout: FC<Props> = observer(({ viewModel, action, children }) => {\n  return (\n    <Wrapper>\n      <Container>\n        <ScrollFixStyled>\n          <MobileHeader viewModel={viewModel} action={action} />\n          {viewModel.walletConnected ? <Content>{children}</Content> : undefined}\n        </ScrollFixStyled>\n      </Container>\n      <MobileFooterTabs viewModel={viewModel} />\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet';\n\nimport { useIsMobile } from '@p2p-wallet-web/ui';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { DesktopLayout } from 'new/ui/components/common/Layout/DesktopLayout';\nimport { LayoutViewModel } from 'new/ui/components/common/Layout/Layout.ViewModel';\nimport { MobileLayout } from 'new/ui/components/common/Layout/MobileLayout';\nimport type { BreadcrumbType } from 'new/ui/components/common/Layout/types';\n\n// NProgress.configure({ showSpinner: false, parent: '#container' });\n\ntype Props = {\n  breadcrumb?: BreadcrumbType;\n  mobileAction?: React.ReactNode;\n  children: React.ReactNode;\n};\n\nexport const LayoutOriginal: FC<Props> = ({ breadcrumb, mobileAction, children }) => {\n  const isMobile = useIsMobile();\n  const viewModel = useViewModel(LayoutViewModel);\n\n  // useEffect(() => {\n  //   if (loading) {\n  //     NProgress.start();\n  //   } else {\n  //     NProgress.done();\n  //   }\n  // }, [loading]);\n\n  return (\n    <>\n      <Helmet>\n        <body className=\"\" />\n      </Helmet>\n      {isMobile ? (\n        <MobileLayout viewModel={viewModel} breadcrumb={breadcrumb} action={mobileAction}>\n          {children}\n        </MobileLayout>\n      ) : (\n        <DesktopLayout viewModel={viewModel} breadcrumb={breadcrumb}>\n          {children}\n        </DesktopLayout>\n      )}\n    </>\n  );\n};\n\nexport const Layout = React.memo(LayoutOriginal);\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { BuyViewModel } from 'new/scenes/Main/Buy/Buy.ViewModel';\nimport { MoonpayIframeWidget, MoonpayWidget } from 'new/scenes/Main/Buy/Subviews';\nimport { Layout } from 'new/ui/components/common/Layout';\n\nconst Error = styled.div`\n  align-self: center;\n\n  color: #f43d3d;\n`;\n\nexport const Buy: FC = observer(() => {\n  const viewModel = useViewModel(BuyViewModel);\n\n  const renderContent = () => {\n    if (!viewModel.areMoonpayConstantsSet) {\n      return <Error>MOONPAY_SIGNER_URL and MOONPAY_API_KEY must be set</Error>;\n    }\n\n    if (viewModel.isShowIframe) {\n      return <MoonpayIframeWidget viewModel={viewModel} />;\n    }\n\n    return <MoonpayWidget viewModel={viewModel} />;\n  };\n\n  return <Layout>{renderContent()}</Layout>;\n});\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { Defaults } from 'new/services/Defaults';\nimport { ModalService, ModalType } from 'new/services/ModalService';\nimport { NameService } from 'new/services/NameService';\nimport { WalletsRepository } from 'new/services/Repositories';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\n@singleton()\nexport class HomeViewModel extends ViewModel {\n  username: string | null;\n\n  constructor(\n    public walletsRepository: WalletsRepository,\n    public nameService: NameService,\n    private _modalService: ModalService,\n  ) {\n    super();\n\n    this.username = null;\n\n    makeObservable(this, {\n      username: observable,\n      isWalletReady: computed,\n      balance: computed,\n      isBalanceLoading: computed,\n      changeUsername: action,\n    });\n  }\n\n  protected override setDefaults() {\n    this.username = null;\n  }\n\n  protected override onInitialize() {\n    // this.walletsRepository.initialize();\n\n    this.addReaction(\n      reaction(\n        () => !!this.walletsRepository.nativeWallet?.pubkey,\n        () => {\n          this._getUsername();\n        },\n      ),\n    );\n  }\n\n  protected override afterReactionsRemoved() {\n    // this.walletsRepository.end();\n  }\n\n  private _getUsername() {\n    if (this.walletsRepository.nativeWallet?.pubkey) {\n      void this.nameService.getName(this.walletsRepository.nativeWallet.pubkey).then((username) => {\n        this.changeUsername(username);\n      });\n    }\n  }\n\n  changeUsername(username: string | null) {\n    this.username = username;\n  }\n\n  get isWalletReady(): boolean {\n    const state = this.walletsRepository.state;\n    const data = this.walletsRepository.dataObservable;\n\n    // if loaded\n    // TODO: track previous\n    if (data?.length) {\n      if (state === SDFetcherState.loading || state === SDFetcherState.initializing) {\n        const amount =\n          data?.reduce((partialResult, wallet) => partialResult + wallet.amount, 0) ?? 0;\n\n        return amount > 0;\n      } else {\n        const amount =\n          data?.reduce((partialResult, wallet) => partialResult + wallet.amount, 0) ?? 0;\n        return amount > 0;\n      }\n    }\n\n    // Not loaded\n    return true;\n  }\n\n  get balance(): string {\n    const data = this.walletsRepository.dataObservable ?? [];\n    const state = this.walletsRepository.state;\n\n    switch (state) {\n      case SDFetcherState.initializing:\n        return '';\n      case SDFetcherState.loading:\n        return 'Loading...';\n      case SDFetcherState.loaded: {\n        const equityValue = data.reduce(\n          (partialResult, wallet) => partialResult + wallet.amountInCurrentFiat,\n          0,\n        );\n        return `${Defaults.fiat.symbol} ${numberToString(equityValue, {\n          maximumFractionDigits: 2,\n        })}`;\n      }\n      case SDFetcherState.error:\n        return 'Error';\n    }\n  }\n\n  get isBalanceLoading() {\n    return this.walletsRepository.state === SDFetcherState.loading;\n  }\n\n  openChooseBuyTokenMobileModal() {\n    void this._modalService.openModal(ModalType.SHOW_MODAL_CHOOSE_BUY_TOKEN_MOBILE);\n  }\n}\n","import { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nexport const NavButton = styled.button`\n  position: relative;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  color: ${theme.colors.textIcon.buttonPrimary};\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 140%;\n  letter-spacing: 0.02em;\n\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid transparent;\n\n  &:first-child {\n    border-radius: 16px 0 0 16px;\n  }\n\n  &:last-child {\n    border-radius: 0 16px 16px 0;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n  }\n\n  /*\n  &:focus {\n    background: rgba(255, 255, 255, 0.1);\n\n    &::before {\n      position: absolute;\n      top: -2px;\n      right: -2px;\n      bottom: -2px;\n      left: -2px;\n\n      border: 1px solid #fff;\n      border-radius: 12px;\n\n      content: '';\n    }\n  }\n\n  &:active {\n    background: transparent;\n\n    &::before {\n      display: none;\n    }\n  }\n   */\n\n  &:focus {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  &:active {\n    background: transparent;\n\n    &::before {\n      position: absolute;\n      top: -3px;\n      right: -3px;\n      bottom: -3px;\n      left: -3px;\n\n      border: 1px solid #fff;\n      border-radius: 16px;\n\n      content: '';\n    }\n  }\n`;\n","import type { FC, HTMLAttributes } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 32px;\n  height: 32px;\n`;\n\nconst IconStyled = styled(Icon)`\n  width: 20px;\n  height: 20px;\n\n  color: ${theme.colors.textIcon.buttonPrimary};\n`;\n\ninterface Props extends HTMLAttributes<HTMLDivElement> {\n  name: string;\n}\n\nexport const NavButtonIcon: FC<Props> = ({ name, className }) => {\n  return (\n    <Wrapper className={className}>\n      <IconStyled name={name} />\n    </Wrapper>\n  );\n};\n","import { styled } from '@linaria/react';\n\nexport const NavButtons = styled.div`\n  position: relative;\n\n  display: grid;\n  grid-auto-flow: column;\n\n  padding: 4px;\n\n  background: radial-gradient(\n    107.23% 531.12% at -7.23% -21.88%,\n    #e7f959 2.43%,\n    #59bf82 14.81%,\n    #4d84e8 51.34%,\n    #4c76ff 82.21%\n  );\n  border-radius: 16px;\n`;\n","import type { FC } from 'react';\nimport { useHistory, useLocation } from 'react-router';\n\nimport { styled } from '@linaria/react';\nimport { theme, up, useIsMobile } from '@p2p-wallet-web/ui';\n\nimport { NavButton, NavButtonIcon, NavButtons } from 'components/common/NavButtons';\nimport type { HomeViewModel } from 'new/scenes/Main/Home';\nimport { Card } from 'new/ui/components/ui/Card';\n\nimport rocketImg from './rocket.png';\n\nconst WrapperCard = styled(Card)`\n  position: relative;\n\n  display: grid;\n  grid-gap: 8px;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  grid-gap: 8px;\n  justify-items: center;\n\n  text-align: center;\n`;\n\nconst RocketImg = styled.img`\n  width: 263px;\n  height: 263px;\n`;\n\nconst Title = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 600;\n  font-size: 20px;\n  letter-spacing: 0.01em;\n`;\n\nconst Description = styled.div`\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 16px;\n  letter-spacing: 0.01em;\n`;\n\nconst ButtonsWrapper = styled.div`\n  padding: 16px;\n`;\n\nconst NavButtonsStyled = styled(NavButtons)`\n  height: 82px;\n\n  ${up.tablet} {\n    height: 68px;\n  }\n`;\n\nconst NavButtonStyled = styled(NavButton)`\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 8px;\n\n  font-size: 20px;\n`;\n\ntype Props = {\n  viewModel: HomeViewModel;\n};\n\nexport const EmptyWalletView: FC<Props> = ({ viewModel }) => {\n  const history = useHistory();\n  const location = useLocation();\n  const isMobile = useIsMobile();\n\n  const handleBuyButtonClick = () => {\n    if (isMobile) {\n      viewModel.openChooseBuyTokenMobileModal();\n    } else {\n      handleButtonClick('/buy')();\n    }\n  };\n\n  const handleButtonClick = (route: string) => () => {\n    history.push(route, { fromPage: location.pathname });\n  };\n\n  return (\n    <WrapperCard>\n      <Content>\n        <RocketImg src={rocketImg} />\n        <Title>Top up your account to get started</Title>\n        <Description>Make your first deposit or buy with your credit card</Description>\n      </Content>\n      <ButtonsWrapper>\n        <NavButtonsStyled>\n          <NavButtonStyled onClick={handleBuyButtonClick}>\n            <NavButtonIcon name=\"plus\" /> Buy\n          </NavButtonStyled>\n          <NavButtonStyled onClick={handleButtonClick('/receive')}>\n            <NavButtonIcon name=\"bottom\" /> Receive\n          </NavButtonStyled>\n        </NavButtonsStyled>\n      </ButtonsWrapper>\n    </WrapperCard>\n  );\n};\n","import type { FC } from 'react';\nimport Skeleton from 'react-loading-skeleton';\n\nimport { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport type { HomeViewModel } from 'new/scenes/Main/Home';\nimport { Defaults } from 'new/services/Defaults';\n\nconst Wrapper = styled.div``;\n\nconst BalanceWrapper = styled.div`\n  display: grid;\n  grid-gap: 4px;\n\n  text-align: center;\n\n  ${up.tablet} {\n    text-align: left;\n  }\n`;\n\nconst Title = styled.div`\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n  white-space: nowrap;\n\n  ${up.tablet} {\n    color: ${theme.colors.textIcon.primary};\n  }\n`;\n\nconst Strong = styled.span`\n  color: ${theme.colors.textIcon.primary};\n  font-weight: bold;\n`;\n\nconst Balance = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-weight: bold;\n  font-size: 28px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n  font-feature-settings: 'tnum' on, 'lnum' on;\n`;\n\ninterface Props {\n  viewModel: Readonly<HomeViewModel>;\n}\n\nexport const BalanceView: FC<Props> = observer(({ viewModel }) => {\n  const domain = Defaults.apiEndpoint.network === 'mainnet-beta' ? '.p2p.sol' : '.p2p';\n\n  return (\n    <Wrapper>\n      <BalanceWrapper>\n        <Title>\n          {viewModel.username ? (\n            <>\n              <Strong>{viewModel.username}</Strong>\n              {domain}\n            </>\n          ) : (\n            'Balance'\n          )}\n        </Title>\n        <Balance>\n          {viewModel.isBalanceLoading ? <Skeleton width={100} height={30} /> : viewModel.balance}\n        </Balance>\n      </BalanceWrapper>\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\n\nimport type { HomeViewModel } from 'new/scenes/Main/Home';\n\nimport { BalanceView } from '../common/BalanceView';\nimport walletImg from './wallet.png';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  margin-top: 29px;\n\n  padding: 28px 24px;\n\n  background: #e6fdee;\n  border-radius: 16px;\n`;\n\nconst WalletImg = styled.img`\n  position: absolute;\n  right: 22px;\n  bottom: 0;\n\n  width: 147px;\n  height: 147px;\n`;\n\ninterface Props {\n  viewModel: Readonly<HomeViewModel>;\n}\n\nexport const Desktop: FC<Props> = observer(({ viewModel }) => {\n  return (\n    <Wrapper>\n      <BalanceView viewModel={viewModel} />\n      <WalletImg src={walletImg} />\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport type { HomeViewModel } from 'new/scenes/Main/Home';\n\nimport { BalanceView } from '../common/BalanceView';\n\nconst Wrapper = styled.div`\n  padding: 16px 0 8px;\n`;\n\ninterface Props {\n  viewModel: Readonly<HomeViewModel>;\n}\n\nexport const Mobile: FC<Props> = ({ viewModel }) => {\n  return (\n    <Wrapper>\n      <BalanceView viewModel={viewModel} />\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent } from 'react';\n\nimport { useIsMobile } from '@p2p-wallet-web/ui';\n\nimport type { HomeViewModel } from 'new/scenes/Main/Home';\n\nimport { Desktop } from './Desktop';\nimport { Mobile } from './Mobile';\n\ntype Props = {\n  viewModel: Readonly<HomeViewModel>;\n};\n\nexport const Header: FunctionComponent<Props> = ({ viewModel }) => {\n  const isMobile = useIsMobile();\n\n  if (isMobile) {\n    return <Mobile viewModel={viewModel} />;\n  }\n\n  return <Desktop viewModel={viewModel} />;\n};\n","import type { FC } from 'react';\nimport { useEffect, useRef, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\nimport throttle from 'lodash.throttle';\n\nimport { NavButton, NavButtonIcon, NavButtons } from 'components/common/NavButtons';\nimport type { HomeViewModel } from 'new/scenes/Main/Home';\n\nconst Wrapper = styled.div`\n  position: sticky;\n  top: -1px;\n  z-index: 1;\n\n  padding-top: 17px;\n`;\n\nconst NavButtonsMenuStyled = styled(NavButtons)`\n  height: 82px;\n\n  &.stuck {\n    height: 50px;\n  }\n`;\n\nconst MENU_TRIGGER_OFFSET = 100;\n\ninterface Props {\n  viewModel: HomeViewModel;\n}\n\nexport const NavButtonsMenu: FC<Props> = ({ viewModel }) => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const menuRef = useRef<HTMLDivElement>(null);\n  const [stuck, setStuck] = useState(false);\n\n  const handleBuyButtonClick = () => {\n    viewModel.openChooseBuyTokenMobileModal();\n  };\n\n  useEffect(() => {\n    const onScroll = throttle(() => {\n      const menuBottomEdge = menuRef?.current?.getBoundingClientRect()?.bottom;\n\n      if (menuBottomEdge) {\n        setStuck(menuBottomEdge < MENU_TRIGGER_OFFSET);\n      }\n    }, 200);\n\n    window.addEventListener('scroll', onScroll);\n\n    return () => {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, []);\n\n  const handleButtonClick = (route: string) => () => {\n    history.push(route, { fromPage: location.pathname });\n  };\n\n  return (\n    <Wrapper>\n      <NavButtonsMenuStyled className={classNames({ stuck })} ref={menuRef}>\n        <NavButton onClick={handleBuyButtonClick}>\n          {!stuck ? <NavButtonIcon name=\"plus\" /> : undefined} Buy\n        </NavButton>\n        <NavButton onClick={handleButtonClick('/receive')}>\n          {!stuck ? <NavButtonIcon name=\"bottom\" /> : undefined}\n          Receive\n        </NavButton>\n        <NavButton onClick={handleButtonClick('/send')}>\n          {!stuck ? <NavButtonIcon name=\"top\" /> : undefined}\n          Send\n        </NavButton>\n        <NavButton onClick={handleButtonClick('/swap')}>\n          {!stuck ? <NavButtonIcon name=\"arrow-swap\" /> : undefined}\n          Swap\n        </NavButton>\n      </NavButtonsMenuStyled>\n    </Wrapper>\n  );\n};\n","import { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\n\nimport { StaticSectionsCollectionView } from 'new/ui/components/common/StaticSectionsCollectionView';\n\nexport const Title = styled.div`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  margin-left: 16px;\n  padding: 16px 0 0 12px;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  cursor: pointer;\n\n  ${up.tablet} {\n    margin-left: initial;\n    padding-left: 8px;\n  }\n`;\n\nexport const StaticSectionsCollectionViewStyled = styled(StaticSectionsCollectionView)`\n  display: grid;\n  grid-gap: 8px;\n\n  ${up.tablet} {\n    grid-gap: 16px;\n  }\n`;\n","import type { FC, HTMLAttributes } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nimport { SWIPE_ACTION_BUTTON_SIZE } from './constants';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: ${SWIPE_ACTION_BUTTON_SIZE}px;\n  height: ${SWIPE_ACTION_BUTTON_SIZE}px;\n\n  color: ${theme.colors.textIcon.secondary};\n`;\n\ntype Props = HTMLAttributes<HTMLDivElement>;\n\nexport const SwipeActionButton: FC<Props> = ({ children, onClick }) => {\n  return <Wrapper onClick={onClick}>{children}</Wrapper>;\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\nimport type { SwipeEventData } from 'react-swipeable';\nimport { useSwipeable } from 'react-swipeable';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { SWIPE_ACTION_BUTTON_SIZE, SwipeActionButton } from './SwipeActionButton';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  overflow: hidden;\n`;\n\nconst ActionsBehind = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n  width: 100%;\n  height: 100%;\n\n  background: ${theme.colors.bg.secondary};\n`;\n\nconst Content = styled.div`\n  transition: all 0.25s ease;\n\n  &.isExpanded {\n    overflow: hidden;\n\n    border-radius: 0 4px 4px 0;\n    box-shadow: 4px 0 8px #eeeded;\n  }\n`;\n\ntype Action = {\n  icon: React.ReactNode;\n  onClick?: () => void;\n};\n\ninterface Props {\n  actions?: Action[];\n}\n\nexport const SwipeToRevealActions: FC<Props> = ({ actions, children }) => {\n  const [isScrolling, setIsScrolling] = useState<boolean>(false);\n  const [isExpanded, setIsExpanded] = useState<boolean>(false);\n\n  function handlePanStart(e: SwipeEventData) {\n    if (e.dir === 'Down' || e.dir === 'Up') {\n      setIsScrolling(true);\n    }\n  }\n\n  function handlePanEnd() {\n    setIsScrolling(false);\n  }\n\n  function handleSwipe(e: SwipeEventData) {\n    if (!isScrolling) {\n      if (e.dir === 'Left' && !isExpanded) {\n        // LEFT SWIPE...\n        setIsExpanded(true);\n      } else if (e.dir === 'Right' && isExpanded) {\n        // RIGHT SWIPE...\n        setIsExpanded(false);\n      }\n    }\n  }\n\n  const handlers = useSwipeable({\n    onSwipeStart: (eventData) => handlePanStart(eventData),\n    onSwiped: () => handlePanEnd(),\n    onSwiping: (eventData) => handleSwipe(eventData),\n    trackMouse: true,\n  });\n\n  return (\n    <Wrapper {...handlers}>\n      <ActionsBehind>\n        {actions?.map((action, index) => (\n          <SwipeActionButton key={index} onClick={action.onClick}>\n            {action.icon}\n          </SwipeActionButton>\n        ))}\n      </ActionsBehind>\n      <Content\n        style={{\n          transform: `translateX(${\n            isExpanded ? `-${(actions?.length || 0) * SWIPE_ACTION_BUTTON_SIZE}px` : '0px'\n          })`,\n        }}\n        className={classNames({ isExpanded })}\n      >\n        {children}\n      </Content>\n    </Wrapper>\n  );\n};\n","export const SWIPE_ACTION_BUTTON_SIZE = 66;\n","import type { FC, HTMLAttributes } from 'react';\nimport { useCallback } from 'react';\nimport { useHistory, useLocation } from 'react-router';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\n\nimport { Menu, MenuItem } from 'components/ui';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\n// export for styling on hover in TokenAccountRow\nexport const MenuStyled = styled(Menu)``;\n\ninterface Props extends HTMLAttributes<HTMLDivElement> {\n  wallet: Wallet;\n  isHidden: boolean;\n  onToggleClick: () => void;\n}\n\nexport const TokenMenu: FC<Props> = observer(\n  ({ wallet, isHidden = false, onToggleClick, className }) => {\n    const history = useHistory();\n    const location = useLocation();\n\n    const handleButtonClick = useCallback(\n      (route: string) => () => {\n        history.push(route, { fromPage: location.pathname });\n      },\n      [history, location.pathname],\n    );\n\n    return (\n      <Wrapper className={className}>\n        <MenuStyled vertical>\n          {wallet.token.isNativeSOL || wallet.token.symbol === 'USDC' ? (\n            <MenuItem icon=\"plus\" onItemClick={handleButtonClick(`/buy/${wallet.token.symbol}`)}>\n              Buy {wallet.token.symbol}\n            </MenuItem>\n          ) : undefined}\n          <MenuItem icon=\"top\" onItemClick={handleButtonClick(`/send/${wallet.pubkey}`)}>\n            Send {wallet.token.symbol}\n          </MenuItem>\n          {wallet.token.symbol ? (\n            <MenuItem icon=\"swap\" onItemClick={handleButtonClick(`/swap/${wallet.token.symbol}`)}>\n              Swap {wallet.token.symbol}\n            </MenuItem>\n          ) : undefined}\n          <MenuItem icon=\"bottom\" onItemClick={handleButtonClick('/receive')}>\n            Receive {wallet.token.symbol}\n          </MenuItem>\n          {!wallet.token.isNativeSOL ? (\n            <MenuItem icon={isHidden ? 'eye' : 'eye-hide'} onItemClick={onToggleClick}>\n              {isHidden ? 'Show' : 'Hide'} {wallet.token.symbol}\n            </MenuItem>\n          ) : undefined}\n        </MenuStyled>\n      </Wrapper>\n    );\n  },\n);\n","import type { FC } from 'react';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { styled } from '@linaria/react';\nimport { borders, theme, up, useIsMobile, useIsTablet } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { BaseWalletCellContent } from 'new/ui/components/common/BaseWalletCellContent';\nimport { TokenAvatarStyled } from 'new/ui/components/common/BaseWalletCellContent/styled';\nimport { SwipeToRevealActions } from 'new/ui/components/common/SwipeToRevealActions';\n\nimport { MenuStyled, TokenMenu } from './TokenMenu';\n\nconst wrapperCss = `\n  display: flex;\n  align-items: center;\n  padding: 12px 24px;\n\n  background: ${theme.colors.bg.primary};\n\n  ${up.tablet} {\n    padding: 12px 8px;\n\n    border: 1px solid transparent;\n    border-radius: 12px;\n    cursor: pointer;\n  }\n`;\n\nconst IconStyled = styled(Icon)`\n  width: 24px;\n  height: 24px;\n`;\n\nconst Wrapper = styled.div`\n  ${wrapperCss};\n`;\n\nconst WrapperLink = styled(Link)`\n  ${wrapperCss};\n\n  text-decoration: none;\n\n  ${up.tablet} {\n    &:hover {\n      background: ${theme.colors.bg.activePrimary};\n      ${borders.linksRGBA}\n\n      ${TokenAvatarStyled} {\n        background: transparent;\n      }\n\n      ${MenuStyled} {\n        color: ${theme.colors.textIcon.active};\n      }\n    }\n  }\n`;\n\nconst TokenMenuStyled = styled(TokenMenu)`\n  margin-left: 8px;\n`;\n\ninterface Props {\n  wallet?: Wallet;\n  isPlaceholder?: boolean;\n  isHidden?: boolean;\n  onToggleClick?: () => void;\n}\n\nexport const BaseWalletCell: FC<Props> = ({\n  wallet,\n  isPlaceholder = false,\n  isHidden = false,\n  onToggleClick,\n}) => {\n  const isMobile = useIsMobile();\n  const isTablet = useIsTablet();\n\n  if (isPlaceholder) {\n    return (\n      <Wrapper>\n        <BaseWalletCellContent isPlaceholder={isPlaceholder} />\n      </Wrapper>\n    );\n  }\n\n  const actions = [\n    {\n      icon: <IconStyled name={isHidden ? 'eye' : 'eye-hide'} />,\n      onClick: onToggleClick,\n    },\n  ];\n\n  // Mobile and not SOL\n  const shouldHasSwipe = isMobile && !wallet?.token.isNativeSOL;\n  const SwipeOrFragment = shouldHasSwipe ? SwipeToRevealActions : React.Fragment;\n\n  return (\n    <SwipeOrFragment {...(shouldHasSwipe ? { actions } : {})}>\n      <WrapperLink to={wallet ? `/wallet/${wallet.pubkey}` : ''}>\n        <BaseWalletCellContent wallet={wallet} />\n        {isTablet && wallet ? (\n          <TokenMenuStyled wallet={wallet} isHidden={isHidden} onToggleClick={onToggleClick!} />\n        ) : undefined}\n      </WrapperLink>\n    </SwipeOrFragment>\n  );\n};\n","import type { FC } from 'react';\n\nimport type { Wallet } from 'new/sdk/SolanaSDK';\n\nimport { BaseWalletCell } from '../../common/BaseWalletCell';\n\ninterface Props {\n  wallet?: Wallet;\n  isPlaceholder?: boolean;\n  onShowClick?: () => void;\n}\n\nexport const HidedWalletCell: FC<Props> = ({ wallet, isPlaceholder, onShowClick }) => {\n  return (\n    <BaseWalletCell\n      wallet={wallet}\n      isPlaceholder={isPlaceholder}\n      isHidden\n      onToggleClick={onShowClick}\n    />\n  );\n};\n","import type { FC } from 'react';\nimport { useCallback } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport { Icon } from 'components/ui';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport type { WalletsRepository } from 'new/services/Repositories';\n\nimport { StaticSectionsCollectionViewStyled, Title } from '../common/styled';\nimport { HidedWalletCell } from './HidedWalletCell';\n\nconst ChevronIcon = styled(Icon)`\n  width: 16px;\n  height: 16px;\n\n  color: ${theme.colors.textIcon.secondary};\n`;\n\nconst ChevronWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 24px;\n  height: 24px;\n\n  transform: rotate(0deg);\n  cursor: pointer;\n\n  &.isOpen {\n    transform: rotate(180deg);\n  }\n`;\n\ninterface Props {\n  viewModel: Readonly<WalletsRepository>;\n}\n\nexport const HiddenWalletsSection: FC<Props> = observer(({ viewModel }) => {\n  const handleChevronClick = () => {\n    viewModel.toggleIsHiddenWalletShown();\n  };\n\n  const customFilter = useCallback((wallet: Wallet) => {\n    if (!wallet) {\n      return false;\n    }\n\n    return wallet.isHidden;\n  }, []);\n\n  const handleShowClick = (wallet: Wallet) => {\n    viewModel.toggleWalletVisibility(wallet);\n  };\n\n  if (!viewModel.hiddenWallets.length) {\n    return null;\n  }\n\n  return (\n    <>\n      <Title\n        onClick={handleChevronClick}\n        className={classNames({ isOpen: viewModel.isHiddenWalletsShown })}\n      >\n        Hidden token{viewModel.hiddenWallets.length !== 1 ? 's' : ''}\n        <ChevronWrapper className={classNames({ isOpen: viewModel.isHiddenWalletsShown })}>\n          <ChevronIcon name=\"chevron\" />\n        </ChevronWrapper>\n      </Title>\n      {viewModel.isHiddenWalletsShown ? (\n        <StaticSectionsCollectionViewStyled<Wallet>\n          viewModel={viewModel}\n          renderPlaceholder={(key) => <HidedWalletCell key={key} isPlaceholder />}\n          renderItem={(wallet: Wallet) => (\n            <HidedWalletCell\n              key={wallet.pubkey}\n              wallet={wallet}\n              onShowClick={() => handleShowClick(wallet)}\n            />\n          )}\n          customFilter={customFilter}\n        />\n      ) : null}\n    </>\n  );\n});\n","import type { FC } from 'react';\n\nimport type { Wallet } from 'new/sdk/SolanaSDK';\n\nimport { BaseWalletCell } from '../../common/BaseWalletCell';\n\ninterface Props {\n  wallet?: Wallet;\n  isPlaceholder?: boolean;\n  onHideClick?: () => void;\n}\n\nexport const VisibleWalletCell: FC<Props> = ({ wallet, isPlaceholder, onHideClick }) => {\n  return (\n    <BaseWalletCell wallet={wallet} isPlaceholder={isPlaceholder} onToggleClick={onHideClick} />\n  );\n};\n","import type { FC } from 'react';\n\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport type { WalletsRepository } from 'new/services/Repositories';\n\nimport { StaticSectionsCollectionViewStyled, Title } from '../common/styled';\nimport { VisibleWalletCell } from './VisibleWalletCell';\n\ninterface Props {\n  viewModel: Readonly<WalletsRepository>;\n}\n\nexport const WalletsSection: FC<Props> = ({ viewModel }) => {\n  const handleHideClick = (wallet: Wallet) => {\n    viewModel.toggleWalletVisibility(wallet);\n  };\n\n  return (\n    <>\n      <Title>Tokens</Title>\n      <StaticSectionsCollectionViewStyled<Wallet>\n        viewModel={viewModel}\n        renderPlaceholder={(key) => <VisibleWalletCell key={key} isPlaceholder />}\n        renderItem={(wallet: Wallet) => (\n          <VisibleWalletCell\n            key={wallet.pubkey}\n            wallet={wallet}\n            onHideClick={() => handleHideClick(wallet)}\n          />\n        )}\n        customFilter={(wallet: Wallet) => {\n          if (!wallet) {\n            return false;\n          }\n\n          return !wallet.isHidden;\n        }}\n      />\n    </>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { up } from '@p2p-wallet-web/ui';\n\nimport type { WalletsRepository } from 'new/services/Repositories';\n\nimport { HiddenWalletsSection } from './HiddenWalletsSection';\nimport { WalletsSection } from './WalletsSection';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-gap: 8px;\n  margin: 0 -18px;\n\n  ${up.tablet} {\n    grid-gap: 16px;\n    margin: initial;\n  }\n`;\n\ninterface Props {\n  viewModel: Readonly<WalletsRepository>;\n}\n\nexport const WalletsCollectionView: FC<Props> = ({ viewModel }) => {\n  return (\n    <Wrapper>\n      <WalletsSection viewModel={viewModel} />\n      <HiddenWalletsSection viewModel={viewModel} />\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { up, useIsMobile } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { WidgetPage } from 'components/common/WidgetPage';\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { Layout } from 'new/ui/components/common/Layout';\n\nimport { HomeViewModel } from './Home.ViewModel';\nimport { EmptyWalletView } from './Subviews/EmptyWalletView';\nimport { Header } from './Subviews/Header';\nimport { NavButtonsMenu } from './Subviews/NavButtonsMenu';\nimport { WalletsCollectionView } from './Subviews/WalletsCollectionView';\n\nconst Content = styled.div`\n  padding: 16px 16px 8px;\n\n  ${up.tablet} {\n    padding: 0 16px 16px;\n  }\n`;\n\nexport const Home: FC = observer(() => {\n  const viewModel = useViewModel<HomeViewModel>(HomeViewModel);\n  const isMobile = useIsMobile();\n\n  // useLayoutEffect(() => {\n  //   viewModel.walletsRepository.reload();\n  // }, [viewModel.walletsRepository]);\n\n  return (\n    <Layout>\n      {viewModel.isWalletReady ? (\n        <WidgetPage title=\"Wallets\" icon=\"wallet\">\n          <Content>\n            <Header viewModel={viewModel} />\n            {isMobile ? <NavButtonsMenu viewModel={viewModel} /> : undefined}\n            <WalletsCollectionView viewModel={viewModel.walletsRepository} />\n          </Content>\n        </WidgetPage>\n      ) : (\n        <EmptyWalletView viewModel={viewModel} />\n      )}\n    </Layout>\n  );\n});\n","class UnauthorizedError extends Error {}\nclass ParamsMissingError extends Error {}\nclass InvalidEndpointError extends Error {}\nclass UnknownError extends Error {}\nclass OtherError extends Error {}\n\nexport class RenVMError extends Error {\n  static unauthorized(): UnauthorizedError {\n    return new UnauthorizedError('Unauthorized');\n  }\n\n  static unknown(): UnknownError {\n    return new UnknownError('Unknown error');\n  }\n\n  static paramsMissing(): ParamsMissingError {\n    return new ParamsMissingError('One or some parameters are missing');\n  }\n\n  static invalidEndpoint(): InvalidEndpointError {\n    return new InvalidEndpointError('Invalid endpoint');\n  }\n\n  //\n\n  static other(reason?: string): OtherError {\n    return new OtherError(reason);\n  }\n\n  static equals(lhs: Error, rhs: Error) {\n    if (isSameInstance(lhs, rhs, ParamsMissingError)) {\n      return lhs.message === rhs.message;\n    }\n\n    return false;\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isSameInstance(lhs: Error, rhs: Error, Instance: any) {\n  return lhs instanceof Instance && rhs instanceof Instance;\n}\n","import { v2 } from '@renproject/rpc';\nimport { toURLBase64 } from '@renproject/utils/internal/common';\n\nimport { RenVMError } from './RenVMError';\nimport type { State } from './RenVMState';\nimport type { Selector } from './Selector';\n\nexport class MintTransactionInput {\n  txid: string;\n  txindex: string;\n  ghash: string;\n  gpubkey: string;\n  nhash: string;\n  nonce: string;\n  payload: string;\n  phash: string;\n  to: string;\n  amount: string;\n\n  constructor({\n    txid,\n    txindex,\n    ghash,\n    gpubkey,\n    nhash,\n    nonce,\n    payload,\n    phash,\n    to,\n    amount,\n  }: {\n    txid: string;\n    txindex: string;\n    ghash: string;\n    gpubkey: string;\n    nhash: string;\n    nonce: string;\n    payload: string;\n    phash: string;\n    to: string;\n    amount: string;\n  }) {\n    this.txid = txid;\n    this.txindex = txindex;\n    this.ghash = ghash;\n    this.gpubkey = gpubkey;\n    this.nhash = nhash;\n    this.nonce = nonce;\n    this.payload = payload;\n    this.phash = phash;\n    this.to = to;\n    this.amount = amount;\n  }\n\n  static fromBuffer({\n    gHash,\n    gPubkey,\n    nHash,\n    nonce,\n    amount,\n    pHash,\n    to,\n    txIndex,\n    txid,\n  }: {\n    gHash: Uint8Array;\n    gPubkey: Uint8Array;\n    nHash: Uint8Array;\n    nonce: Uint8Array;\n    amount: string;\n    pHash: Uint8Array;\n    to: string;\n    txIndex: string;\n    txid: Uint8Array;\n  }): MintTransactionInput {\n    return new MintTransactionInput({\n      txid: toURLBase64(txid),\n      txindex: txIndex,\n      ghash: toURLBase64(gHash),\n      gpubkey: toURLBase64(gPubkey),\n      nhash: toURLBase64(nHash),\n      nonce: toURLBase64(nonce),\n      payload: '',\n      phash: toURLBase64(pHash),\n      to,\n      amount,\n    });\n  }\n\n  static fromState({ state, nonce }: { state: State; nonce: Uint8Array }): MintTransactionInput {\n    const { gHash, nHash, amount, pHash, txIndex, txid, sendTo } = state;\n    if (!(gHash && nHash && amount && pHash && txIndex && txid && sendTo)) {\n      throw RenVMError.paramsMissing();\n    }\n\n    return new MintTransactionInput({\n      txid: toURLBase64(txid),\n      txindex: txIndex,\n      ghash: toURLBase64(gHash),\n      gpubkey: state.gPubkey ? toURLBase64(state.gPubkey) : '',\n      nhash: toURLBase64(nHash),\n      nonce: toURLBase64(nonce),\n      payload: '',\n      phash: toURLBase64(pHash),\n      to: sendTo,\n      amount: amount,\n    });\n  }\n\n  hash({ selector, version }: { selector: Selector; version: string }): Uint8Array {\n    return v2.hashTransaction(version, selector.toString(), {\n      t: v2.mintParamsType(),\n      v: {\n        txid: this.txid,\n        txindex: this.txindex,\n        ghash: this.ghash,\n        gpubkey: this.gpubkey,\n        nhash: this.nhash,\n        nonce: this.nonce,\n        payload: this.payload,\n        phash: this.phash,\n        to: this.to,\n        amount: this.amount,\n      },\n    });\n  }\n}\n","export class Network {\n  readonly chain: string;\n  readonly endpoint: string;\n  readonly lightNode: string;\n  readonly gatewayRegistry: string;\n  readonly genesisHash: string;\n  readonly p2shPrefix: number;\n\n  constructor({\n    chain,\n    endpoint,\n    lightNode,\n    gatewayRegistry,\n    genesisHash,\n    p2shPrefix,\n  }: {\n    chain: string;\n    endpoint: string;\n    lightNode: string;\n    gatewayRegistry: string;\n    genesisHash: string;\n    p2shPrefix: number;\n  }) {\n    this.chain = chain;\n    this.endpoint = endpoint;\n    this.lightNode = lightNode;\n    this.gatewayRegistry = gatewayRegistry;\n    this.genesisHash = genesisHash;\n    this.p2shPrefix = p2shPrefix;\n  }\n\n  static get mainnet(): Network {\n    return new Network({\n      chain: 'mainnet',\n      endpoint: 'https://ren.rpcpool.com/',\n      lightNode: 'https://lightnode-mainnet.herokuapp.com',\n      gatewayRegistry: 'REGrPFKQhRneFFdUV3e9UDdzqUJyS6SKj88GdXFCRd2',\n      genesisHash: '5eykt4UsFv8P8NJdTREpY1vzqKqZKvdpKuc147dw2N9d',\n      p2shPrefix: 0x05,\n    });\n  }\n\n  static get testnet(): Network {\n    return new Network({\n      chain: 'testnet',\n      endpoint: 'https://api.devnet.solana.com',\n      lightNode: 'https://lightnode-testnet.herokuapp.com/',\n      gatewayRegistry: 'REGrPFKQhRneFFdUV3e9UDdzqUJyS6SKj88GdXFCRd2',\n      genesisHash: 'EtWTRABZaYq6iMfeYKouRu166VU2xqa1wcaWoxPkrZBG',\n      p2shPrefix: 0xc4,\n    });\n  }\n\n  static get devnet(): Network {\n    return new Network({\n      chain: 'devnet',\n      endpoint: 'https://api.testnet.solana.com',\n      lightNode: 'https://lightnode-devnet.herokuapp.com',\n      gatewayRegistry: 'REGrPFKQhRneFFdUV3e9UDdzqUJyS6SKj88GdXFCRd2',\n      genesisHash: '4uhcVJyU9pJkvQyS88uRDiswHXSCkY3zQawwpjk2NsNY',\n      p2shPrefix: 0xc4,\n    });\n  }\n\n  get isTestnet(): boolean {\n    return this.chain !== 'mainnet';\n  }\n}\n","import { Type } from 'class-transformer';\n\nclass Outpoint {\n  // @ts-ignore\n  hash: string;\n  // @ts-ignore\n  index: string;\n}\n\nclass ShardState {\n  @Type(() => Outpoint)\n  // @ts-ignore\n  outpoint: Outpoint;\n  // @ts-ignore\n  pubKeyScript: string;\n  // @ts-ignore\n  value: string;\n}\n\nclass Shard {\n  // @ts-ignore\n  pubKey: string;\n  // @ts-ignore\n  shard: string;\n  @Type(() => ShardState)\n  // @ts-ignore\n  state: ShardState;\n}\n\nclass Chain {\n  // @ts-ignore\n  burnFee: string;\n  // @ts-ignore\n  chain: string;\n  // @ts-ignore\n  mintFee: string;\n}\n\nclass Fees {\n  @Type(() => Chain)\n  // @ts-ignore\n  chains: Chain[];\n}\n\nclass BTCValue {\n  @Type(() => Fees)\n  // @ts-ignore\n  fees: Fees;\n  // @ts-ignore\n  gasCap: string;\n  // @ts-ignore\n  gasLimit: string;\n  // @ts-ignore\n  gasPrice: string;\n  // @ts-ignore\n  latestHeight: string;\n  // @ts-ignore\n  minimumAmount: string;\n  @Type(() => Shard)\n  // @ts-ignore\n  shards: Shard[];\n}\n\nclass V {\n  @Type(() => BTCValue)\n  // @ts-ignore\n  BTC: BTCValue;\n  // @ios:\n  // let bch, btc, dgb, doge: StructBCH?\n  // let fil, luna: StructFIL?\n  // let system: StructSystem?\n  // let zec: StructBCH?\n\n  get btc(): BTCValue {\n    return this.BTC;\n  }\n}\n\nclass T {}\n\nclass State {\n  @Type(() => T)\n  // @ts-ignore\n  t: T;\n  @Type(() => V)\n  // @ts-ignore\n  v: V;\n}\n\nexport class ResponseQueryBlockState {\n  @Type(() => State)\n  // @ts-ignore\n  state: State;\n\n  publicKey(mintTokenSymbol: string): string | null {\n    if (mintTokenSymbol === 'BTC') {\n      return this.state.v.btc.shards[0]?.pubKey ?? null;\n    }\n    return null;\n  }\n}\n","export class ResponseQueryConfig {\n  //@ts-ignore\n  confirmations: Confirmations;\n  //@ts-ignore\n  maxConfirmations: Confirmations;\n  //@ts-ignore\n  network: string;\n  //@ts-ignore\n  registries: Registries;\n  whitelist?: string[];\n}\n\nclass Confirmations {\n  //@ts-ignore\n  Bitcoin: string;\n  //@ts-ignore\n  Ethereum: string;\n}\n\nclass Registries {\n  //@ts-ignore\n  Ethereum: string;\n}\n","export class ResponseQueryTxMint {\n  //@ts-ignore\n  tx: Tx;\n  //@ts-ignore\n  txStatus: string;\n\n  get valueOut(): ValueOut {\n    return this.tx.out.v;\n  }\n\n  get valueIn(): ValueIn {\n    return this.tx.in.v;\n  }\n}\n\nexport class Tx {\n  //@ts-ignore\n  hash: string;\n  //@ts-ignore\n  version: string;\n  //@ts-ignore\n  selector: string;\n  //@ts-ignore\n  in: In;\n  //@ts-ignore\n  out: Out;\n}\n\nclass In {\n  //@ts-ignore\n  v: ValueIn;\n}\n\nclass ValueIn {\n  //@ts-ignore\n  amount: string;\n  //@ts-ignore\n  ghash: string;\n  //@ts-ignore\n  gpubkey: string;\n  //@ts-ignore\n  nhash: string;\n  //@ts-ignore\n  nonce: string;\n  //@ts-ignore\n  payload: string;\n  //@ts-ignore\n  phash: string;\n  //@ts-ignore\n  to: string;\n  //@ts-ignore\n  txid: string;\n  //@ts-ignore\n  txindex: string;\n}\n\nclass Out {\n  //@ts-ignore\n  t: TypeOut;\n  //@ts-ignore\n  v: ValueOut;\n}\n\nclass TypeOut {\n  struct?: OutStructType[];\n}\n\nclass OutStructType {\n  hash?: string;\n  amount?: string;\n  sighash?: string;\n  sig?: string;\n  txid?: string;\n  txindex?: string;\n}\n\nclass ValueOut {\n  amount?: string;\n  hash?: string;\n  sig?: string;\n  sighash?: string;\n  txid?: string;\n  txindex?: string;\n  revert?: string;\n}\n","export class ResponseSubmitTxMint {}\n","import { capitalizeFirstLetter } from 'new/utils/StringExtensions';\n\nexport enum Direction {\n  to = 'to',\n  from = 'from',\n}\n\nexport class Selector {\n  mintTokenSymbol: string;\n  chainName: string;\n  direction: Direction;\n\n  constructor({\n    mintTokenSymbol,\n    chainName,\n    direction,\n  }: {\n    mintTokenSymbol: string;\n    chainName: string;\n    direction: Direction;\n  }) {\n    this.mintTokenSymbol = mintTokenSymbol;\n    this.chainName = chainName;\n    this.direction = direction;\n  }\n\n  toString(): string {\n    return `${this.mintTokenSymbol}/${this.direction}${capitalizeFirstLetter(this.chainName)}`;\n  }\n}\n","import { generateGHash, generateNHash, generatePHash, generateSHash } from '@renproject/utils';\nimport { toURLBase64 } from '@renproject/utils/internal/common';\nimport { u64 } from '@solana/spl-token';\nimport bech32 from 'bech32';\nimport BN from 'bn.js';\nimport base58 from 'bs58';\n\nimport type { RenVMChainType } from '../chains/RenVMChainType';\nimport type { State } from '../models';\nimport { Direction, MintTransactionInput, Selector } from '../models';\nimport type { RenVMRpcClientType } from '../RPCClient';\n\nexport interface BurnDetailsJSONType {\n  confirmedSignature: string;\n  nonce: string;\n  recipient: string;\n  amount: string;\n}\n\nexport class BurnDetails {\n  confirmedSignature: string;\n  nonce: u64;\n  recipient: string;\n  amount: string;\n\n  constructor({\n    confirmedSignature,\n    nonce,\n    recipient,\n    amount,\n  }: {\n    confirmedSignature: string;\n    nonce: u64;\n    recipient: string;\n    amount: string;\n  }) {\n    this.confirmedSignature = confirmedSignature;\n    this.nonce = nonce;\n    this.recipient = recipient;\n    this.amount = amount;\n  }\n\n  static fromJSON(data: BurnDetailsJSONType) {\n    return new BurnDetails({\n      confirmedSignature: data.confirmedSignature,\n      nonce: new u64(data.nonce),\n      recipient: data.recipient,\n      amount: data.amount,\n    });\n  }\n\n  toJSON(): BurnDetailsJSONType {\n    return {\n      confirmedSignature: this.confirmedSignature,\n      nonce: this.nonce.toString(),\n      recipient: this.recipient,\n      amount: this.amount,\n    };\n  }\n}\n\nexport class BurnAndRelease {\n  private _rpcClient: RenVMRpcClientType;\n  private _chain: RenVMChainType;\n  private readonly _mintTokenSymbol: string;\n  private readonly _version: string;\n  private _burnToChainName: string; // Ex.: Bitcoin\n\n  constructor({\n    rpcClient,\n    chain,\n    mintTokenSymbol,\n    version,\n    burnTo,\n  }: {\n    rpcClient: RenVMRpcClientType;\n    chain: RenVMChainType;\n    mintTokenSymbol: string;\n    version: string;\n    burnTo: string;\n  }) {\n    this._rpcClient = rpcClient;\n    this._chain = chain;\n    this._mintTokenSymbol = mintTokenSymbol;\n    this._version = version;\n    this._burnToChainName = burnTo;\n  }\n\n  submitBurnTransaction({\n    account,\n    amount,\n    recipient,\n  }: {\n    account: Uint8Array;\n    amount: string;\n    recipient: string;\n  }): Promise<BurnDetails> {\n    return this._chain.submitBurn({\n      mintTokenSymbol: this._mintTokenSymbol,\n      account,\n      amount,\n      recipient,\n    });\n  }\n\n  getBurnState(burnDetails: BurnDetails): State {\n    const txid = this._chain.signatureToData(burnDetails.confirmedSignature);\n    const nonceBuffer = this._getNonceBuffer(new BN(burnDetails.nonce));\n    const nHash = generateNHash(nonceBuffer, txid, '0');\n    const pHash = generatePHash();\n    const sHash = generateSHash(\n      new Selector({\n        mintTokenSymbol: this._mintTokenSymbol,\n        chainName: this._burnToChainName,\n        direction: Direction.to,\n      }).toString(),\n    );\n    const gHash = generateGHash(\n      pHash,\n      sHash,\n      BurnAndRelease.addressToBytes(burnDetails.recipient),\n      nonceBuffer,\n    );\n\n    const mintTx = MintTransactionInput.fromBuffer({\n      gHash,\n      gPubkey: new Uint8Array(),\n      nHash,\n      nonce: nonceBuffer,\n      amount: burnDetails.amount,\n      pHash,\n      to: burnDetails.recipient,\n      txIndex: '0',\n      txid,\n    });\n\n    const txHash = toURLBase64(\n      mintTx.hash({\n        selector: this._chain.selector({\n          mintTokenSymbol: this._mintTokenSymbol,\n          direction: Direction.from,\n        }),\n        version: this._version,\n      }),\n    );\n\n    return {\n      sendTo: burnDetails.recipient,\n      txIndex: '0',\n      amount: burnDetails.amount,\n      nHash,\n      txid,\n      pHash,\n      gHash,\n      txHash,\n      gPubkey: new Uint8Array(),\n    };\n  }\n\n  async release({ state, details }: { state: State; details: BurnDetails }): Promise<string> {\n    const selector = this._selector(Direction.from);\n    const nonceBuffer = this._getNonceBuffer(new BN(details.nonce));\n\n    // get input\n    const mintTx = MintTransactionInput.fromState({ state, nonce: nonceBuffer });\n    const hash = toURLBase64(mintTx.hash({ selector, version: this._version }));\n\n    // send transaction\n    await this._rpcClient.submitTx({\n      hash,\n      selector,\n      version: this._version,\n      input: mintTx,\n    });\n    return hash;\n  }\n\n  private _getNonceBuffer(nonce: BN) {\n    return new BN(nonce.toString()).toArrayLike(Buffer, 'be', 32);\n  }\n\n  private _selector(direction: Direction): Selector {\n    return this._chain.selector({\n      mintTokenSymbol: this._mintTokenSymbol,\n      direction,\n    });\n  }\n\n  static addressToBytes(address: string): Buffer {\n    // Attempt to decode address as a bech32 address, and if that fails\n    // fall back to base58.\n    try {\n      const [type, ...words] = bech32.decode(address).words;\n      return Buffer.concat([Buffer.from([type!]), Buffer.from(bech32.fromWords(words))]);\n    } catch (error) {\n      try {\n        return base58.decode(address);\n      } catch (internalError) {\n        throw new Error(`Unrecognized address format \"${address}\".`);\n      }\n    }\n  }\n}\n","import { RenVMError } from '../../models';\n\nexport interface SessionJSONType {\n  createdAt: number;\n  endAt: number;\n  nonce: string;\n}\n\nexport class Session {\n  createdAt: Date;\n  endAt: Date;\n  nonce: string;\n\n  constructor({\n    nonce,\n    createdAt = new Date(),\n    endAt,\n  }: {\n    nonce?: string;\n    createdAt?: Date;\n    endAt?: Date;\n  } = {}) {\n    if (endAt && endAt <= createdAt) {\n      throw RenVMError.other('Invalid session');\n    }\n\n    this.nonce = nonce ?? _generateNonce(Math.floor(Date.now() / 1000 / 60 / 60 / 24));\n    this.createdAt = createdAt;\n\n    this.endAt =\n      endAt ?? new Date(new Date(this.createdAt).setHours(this.createdAt.getHours() + 36));\n  }\n\n  get isValid(): boolean {\n    return this.endAt > new Date();\n  }\n\n  static fromJSON(json: SessionJSONType): Session {\n    return new Session({\n      nonce: json.nonce,\n      createdAt: new Date(json.createdAt),\n      endAt: new Date(json.endAt),\n    });\n  }\n}\n\nfunction _generateNonce(sessionDay: number): string {\n  return Buffer.from(sessionDay.toString(16).padStart(32)).toString('hex');\n}\n","import { createAddressArray } from '@renproject/chains-bitcoin/script';\nimport { hash160 } from '@renproject/chains-bitcoin/utils/utils';\nimport { generateGHash, generateNHash, generatePHash, generateSHash } from '@renproject/utils';\nimport { fromHex } from '@renproject/utils/internal/common';\nimport { toURLBase64 } from '@renproject/utils/module/internal/common';\nimport type { CancellablePromise } from 'real-cancellable-promise';\nimport { buildCancellablePromise } from 'real-cancellable-promise';\n\nimport type { RenVMChainType } from '../../chains/RenVMChainType';\nimport type { Selector, State } from '../../models';\nimport { Direction, MintTransactionInput, RenVMError } from '../../models';\nimport type { RenVMRpcClientType } from '../../RPCClient/RPCClient';\nimport { Session } from './LockAndMint.Session';\n\nexport interface GatewayAddressResponse {\n  gatewayAddress: Uint8Array;\n  sendTo: Uint8Array;\n  gHash: Uint8Array;\n  gPubkey: Uint8Array;\n}\n\nexport class LockAndMint {\n  // Dependencies\n  private _rpcClient: RenVMRpcClientType;\n  private _chain: RenVMChainType;\n  private _mintTokenSymbol: string;\n  private _version: string;\n  private _destinationAddress: Uint8Array;\n\n  // State\n  private _session: Session;\n\n  constructor({\n    rpcClient,\n    chain,\n    mintTokenSymbol,\n    version,\n    destinationAddress,\n    session,\n  }: {\n    rpcClient: RenVMRpcClientType;\n    chain: RenVMChainType;\n    mintTokenSymbol: string;\n    version: string;\n    destinationAddress: Uint8Array;\n    session: Session | null;\n  }) {\n    this._rpcClient = rpcClient;\n    this._chain = chain;\n    this._mintTokenSymbol = mintTokenSymbol;\n    this._version = version;\n    this._destinationAddress = destinationAddress;\n\n    if (session) {\n      this._session = session;\n    } else {\n      this._session = new Session();\n    }\n  }\n\n  async generateGatewayAddress(): Promise<GatewayAddressResponse> {\n    const sendTo = this._chain.getAssociatedTokenAddress({\n      address: this._destinationAddress,\n      mintTokenSymbol: this._mintTokenSymbol,\n    });\n    const tokenGatewayContractHex = generateSHash(this._selector(Direction.to).toString());\n    const gHash = generateGHash(\n      generatePHash(),\n      tokenGatewayContractHex,\n      sendTo,\n      fromHex(this._session.nonce),\n    );\n\n    const gPubkey = await this._rpcClient.selectPublicKey(this._mintTokenSymbol);\n\n    if (!gPubkey) {\n      throw new RenVMError(\"Provider's public key not found\");\n    }\n\n    const gatewayAddress = createAddressArray(\n      hash160(gPubkey),\n      gHash,\n      Uint8Array.from([this._rpcClient.network.p2shPrefix]),\n    );\n\n    return { gatewayAddress, sendTo, gHash, gPubkey };\n  }\n\n  getDepositState({\n    transactionHash,\n    txIndex,\n    amount,\n    to,\n    gHash,\n    gPubkey,\n  }: {\n    transactionHash: string;\n    txIndex: string;\n    amount: string;\n    to: Uint8Array;\n    gHash: Uint8Array;\n    gPubkey: Uint8Array;\n  }): State {\n    const nonce = fromHex(this._session.nonce);\n    const txid = fromHex(reverseHex(transactionHash));\n    const nHash = generateNHash(nonce, txid, txIndex ?? '0');\n    const pHash = generatePHash();\n\n    const mintTx = MintTransactionInput.fromBuffer({\n      gHash,\n      gPubkey,\n      nHash,\n      nonce,\n      amount,\n      pHash,\n      to: this._chain.dataToAddress(to),\n      txIndex,\n      txid,\n    });\n\n    const txHash = toURLBase64(\n      mintTx.hash({ selector: this._selector(Direction.to), version: this._version }),\n    );\n\n    const state: State = {\n      gHash,\n      gPubkey,\n      sendTo: this._chain.dataToAddress(to),\n      txid,\n      nHash,\n      pHash,\n      txHash,\n      txIndex,\n      amount,\n    };\n\n    return state;\n  }\n\n  submitMintTransaction(state: State): CancellablePromise<string> {\n    return buildCancellablePromise(async (capture) => {\n      const selector = this._selector(Direction.to);\n\n      // get input\n      const mintTx = MintTransactionInput.fromState({ state, nonce: fromHex(this._session.nonce) });\n      const hash = toURLBase64(mintTx.hash({ selector, version: this._version }));\n\n      // send transaction\n      await capture(\n        this._rpcClient.submitTx({\n          hash,\n          selector,\n          version: this._version,\n          input: mintTx,\n        }),\n      );\n\n      return hash;\n    });\n  }\n\n  mint({\n    state,\n    account,\n  }: {\n    state: State;\n    account: Uint8Array;\n  }): CancellablePromise<{ amountOut?: string; signature: string }> {\n    return buildCancellablePromise(async (capture) => {\n      const txHash = state.txHash;\n      if (!txHash) {\n        throw new RenVMError('txHash not found');\n      }\n\n      const response = await capture(this._rpcClient.queryMint(txHash));\n\n      const revert = response.tx.out.v.revert;\n      if (revert) {\n        throw new RenVMError(revert);\n      }\n\n      if (response.txStatus !== 'done') {\n        throw RenVMError.paramsMissing();\n      }\n\n      const amountOut = response.tx.out.v.amount;\n\n      const signature = await capture(\n        this._chain.submitMint({\n          address: this._destinationAddress,\n          mintTokenSymbol: this._mintTokenSymbol,\n          account,\n          responseQueryMint: response,\n        }),\n      );\n\n      return { amountOut, signature };\n    });\n  }\n\n  private _selector(direction: Direction): Selector {\n    return this._chain.selector({ mintTokenSymbol: this._mintTokenSymbol, direction });\n  }\n}\n\nfunction reverseHex(src: string): string {\n  return (\n    src\n      .match(/[a-fA-F0-9]{2}/g)\n      ?.reverse()\n      .join('') ?? ''\n  );\n}\n","import { u64 } from '@solana/spl-token';\nimport { Transform, Type } from 'class-transformer';\n\nexport class BlockstreamInfoStatus {\n  // @ts-ignore\n  confirmed: boolean;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  blockHeight?: u64;\n  blockHash?: string;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  blockTime?: u64;\n}\n\nexport class IncomingTransaction {\n  // @ts-ignore\n  txid: string;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  vout: u64;\n  @Type(() => BlockstreamInfoStatus)\n  // @ts-ignore\n  status: BlockstreamInfoStatus;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  value: u64;\n}\n","import { u64 } from '@solana/spl-token';\nimport { Type } from 'class-transformer';\n\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport { IncomingTransaction } from './LockAndMint.IncomingTransaction';\n\nexport enum ValidationStatusType {\n  valid = 'valid',\n  invalid = 'invalid',\n}\n\nexport class ValidationStatus {\n  // @ts-ignore\n  type: ValidationStatusType;\n  reason?: string;\n\n  private constructor(props: { type: ValidationStatusType; reason?: string }) {\n    if (!props) {\n      return;\n    }\n\n    this.type = props.type;\n    this.reason = props.reason;\n  }\n\n  static valid(): ValidationStatus {\n    return new ValidationStatus({ type: ValidationStatusType.valid });\n  }\n\n  static invalid(reason?: string): ValidationStatus {\n    return new ValidationStatus({ type: ValidationStatusType.invalid, reason });\n  }\n}\n\ninterface ProcessingTxType {\n  tx: IncomingTransaction;\n  receivedAt?: Date;\n  oneVoteAt?: Date;\n  twoVoteAt?: Date;\n  threeVoteAt?: Date;\n  confirmedAt?: Date;\n  submittedAt?: Date;\n  mintedAt?: Date;\n  validationStatus?: ValidationStatus;\n  isProcessing?: boolean;\n}\n\nexport class ProcessingTx {\n  @Type(() => IncomingTransaction)\n  // @ts-ignore\n  tx: IncomingTransaction;\n  @Type(() => Date)\n  receivedAt?: Date;\n  @Type(() => Date)\n  oneVoteAt?: Date;\n  @Type(() => Date)\n  twoVoteAt?: Date;\n  @Type(() => Date)\n  threeVoteAt?: Date;\n  @Type(() => Date)\n  confirmedAt?: Date;\n  @Type(() => Date)\n  submittedAt?: Date;\n  @Type(() => Date)\n  mintedAt?: Date;\n  @Type(() => ValidationStatus)\n  // @ts-ignore\n  validationStatus: ValidationStatus;\n  // @ts-ignore\n  isProcessing: boolean;\n\n  constructor(props: ProcessingTxType) {\n    // @web: for class-transformer\n    if (!props) {\n      return;\n    }\n\n    this.tx = props.tx;\n    this.receivedAt = props.receivedAt;\n    this.oneVoteAt = props.oneVoteAt;\n    this.twoVoteAt = props.twoVoteAt;\n    this.threeVoteAt = props.threeVoteAt;\n    this.confirmedAt = props.confirmedAt;\n    this.submittedAt = props.submittedAt;\n    this.mintedAt = props.mintedAt;\n    this.validationStatus = props.validationStatus ?? ValidationStatus.valid();\n    this.isProcessing = props.isProcessing ?? false;\n  }\n\n  static get maxVote(): u64 {\n    return new u64(3);\n  }\n\n  static grouped(txs: ProcessingTx[]): {\n    minted: ProcessingTx[];\n    submitted: ProcessingTx[];\n    confirmed: ProcessingTx[];\n    received: ProcessingTx[];\n  } {\n    const minted: ProcessingTx[] = [];\n    const submitted: ProcessingTx[] = [];\n    const confirmed: ProcessingTx[] = [];\n    const received: ProcessingTx[] = [];\n    for (const tx of txs) {\n      if (tx.mintedAt) {\n        minted.push(tx);\n      } else if (tx.submittedAt) {\n        submitted.push(tx);\n      } else if (tx.confirmedAt) {\n        confirmed.push(tx);\n      } else if (tx.receivedAt) {\n        received.push(tx);\n      }\n    }\n    return { minted, submitted, confirmed, received };\n  }\n\n  // TODO: extension. must be in client\n  get statusString(): string {\n    if (this.mintedAt) {\n      return `Successfully minted ${numberToString(convertToBalance(this.tx.value, 8), {\n        maximumFractionDigits: 9,\n      })} renBTC!`;\n    }\n\n    if (this.submittedAt) {\n      return 'Minting';\n    }\n\n    if (this.confirmedAt) {\n      return 'Submitting to RenVM';\n    }\n\n    if (this.receivedAt) {\n      return `Waiting for deposit confirmation ${this.tx.vout}/${ProcessingTx.maxVote}`;\n    }\n\n    return '';\n  }\n\n  // TODO: extension. must be in client\n  get value(): number {\n    return convertToBalance(this.tx.value, 8);\n  }\n}\n","import type { CancellablePromise } from 'real-cancellable-promise';\n\nimport type * as BurnAndRelease from '../actions/BurnAndRelease';\nimport type { Direction, ResponseQueryTxMint } from '../models';\nimport { Selector } from '../models';\n\nexport abstract class RenVMChainType {\n  abstract chainName: string;\n  abstract getAssociatedTokenAddress({\n    address,\n    mintTokenSymbol,\n  }: {\n    address: Uint8Array;\n    mintTokenSymbol: string;\n  }): Uint8Array; // represent as data, because there might be different encoding methods for various of chains\n  abstract dataToAddress(data: Uint8Array): string;\n\n  abstract signatureToData(signature: string): Uint8Array;\n\n  abstract submitMint({\n    address,\n    mintTokenSymbol,\n    account,\n    responseQueryMint,\n  }: {\n    address: Uint8Array;\n    mintTokenSymbol: string;\n    account: Uint8Array;\n    responseQueryMint: ResponseQueryTxMint;\n  }): CancellablePromise<string>;\n\n  abstract submitBurn({\n    mintTokenSymbol,\n    account,\n    amount,\n    recipient,\n  }: {\n    mintTokenSymbol: string;\n    account: Uint8Array;\n    amount: string;\n    recipient: string;\n  }): Promise<BurnAndRelease.BurnDetails>;\n\n  abstract waitForConfirmation(signature: string): Promise<void>;\n\n  abstract isAlreadyMintedError(error: Error): boolean;\n\n  // extension\n\n  selector({\n    mintTokenSymbol,\n    direction,\n  }: {\n    mintTokenSymbol: string;\n    direction: Direction;\n  }): Selector {\n    return new Selector({ mintTokenSymbol, chainName: this.chainName, direction });\n  }\n}\n","// https://github.dev/renproject/ren-js/blob/5791e7b9ed3a8d64cf8581f78161eb13f218a13f/packages/lib/utils/src/signatureUtils.ts#L27\nimport { secp256k1n, signatureToBuffer } from '@renproject/utils/build/main/signatureUtils';\nimport { fromHex, Ox } from '@renproject/utils/internal/common';\nimport BigNumber from 'bignumber.js';\n\nimport { RenVMError } from '../models';\n\nconst switchV = (v: number) => (v === 27 ? 28 : 27); // 28 - (v - 27);\n\nconst to32Bytes = (bn: BigNumber): Buffer =>\n  Buffer.from(fromHex(('0'.repeat(64) + bn.toString(16)).slice(-64)));\n\nexport function fixSignatureSimple(data: Buffer): Buffer {\n  if (data.length <= 64) {\n    throw new RenVMError('Signature is not valid');\n  }\n\n  const [r, s, v] = [data.slice(0, 32), data.slice(32, 64), data[64]! % 27];\n\n  let sBN = new BigNumber(Ox(s), 16);\n  let vFixed = ((v || 0) % 27) + 27;\n\n  // For a given key, there are two valid signatures for each signed message.\n  // We always take the one with the lower `s`.\n  // secp256k1n/2 = 57896044618658097711785492504343953926418782139537452191302581570759080747168.5\n  if (sBN.gt(secp256k1n.div(2))) {\n    // Take s = -s % secp256k1n\n    sBN = secp256k1n.minus(sBN);\n    // Switch v\n    vFixed = switchV(vFixed);\n  }\n\n  return signatureToBuffer({\n    r,\n    s: to32Bytes(sBN),\n    v: vFixed,\n  });\n}\n","import { toBuffer } from '@renproject/chains-solana/build/main/util';\nimport { assert } from '@renproject/utils';\nimport type { CreateSecp256k1InstructionWithEthAddressParams, PublicKey } from '@solana/web3.js';\nimport { Secp256k1Program, TransactionInstruction } from '@solana/web3.js';\nimport { Buffer } from 'buffer';\nimport BufferLayout from 'buffer-layout';\n\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nconst SECP256K1_INSTRUCTION_LAYOUT = BufferLayout.struct([\n  BufferLayout.u8('numSignatures'),\n  BufferLayout.u16('signatureOffset'),\n  BufferLayout.u8('signatureInstructionIndex'),\n  BufferLayout.u16('ethAddressOffset'),\n  BufferLayout.u8('ethAddressInstructionIndex'),\n  BufferLayout.u16('messageDataOffset'),\n  BufferLayout.u16('messageDataSize'),\n  BufferLayout.u8('messageInstructionIndex'),\n  BufferLayout.blob(21, 'ethAddress'),\n  BufferLayout.blob(64, 'signature'),\n  BufferLayout.u8('recoveryId'),\n]);\n\nexport class RenProgram {\n  static ETHEREUM_ADDRESS_BYTES = 20;\n  static SIGNATURE_OFFSETS_SERIALIZED_SIZE = 11;\n\n  static mintInstruction({\n    account,\n    gatewayAccount,\n    tokenMint,\n    recipientTokenAccount,\n    mintLogAccount,\n    mintAuthority,\n    programId,\n  }: {\n    account: PublicKey;\n    gatewayAccount: PublicKey;\n    tokenMint: PublicKey;\n    recipientTokenAccount: PublicKey;\n    mintLogAccount: PublicKey;\n    mintAuthority: PublicKey;\n    programId: PublicKey;\n  }): TransactionInstruction {\n    return new TransactionInstruction({\n      keys: [\n        { pubkey: account, isSigner: true, isWritable: false },\n        { pubkey: gatewayAccount, isSigner: false, isWritable: false },\n        { pubkey: tokenMint, isSigner: false, isWritable: true },\n        { pubkey: recipientTokenAccount, isSigner: false, isWritable: true },\n        { pubkey: mintLogAccount, isSigner: false, isWritable: true },\n        { pubkey: mintAuthority, isSigner: false, isWritable: false },\n        { pubkey: SolanaSDKPublicKey.programId, isSigner: false, isWritable: false },\n        { pubkey: SolanaSDKPublicKey.sysvarInstruction, isSigner: false, isWritable: false },\n        { pubkey: SolanaSDKPublicKey.sysvarRent, isSigner: false, isWritable: false },\n        { pubkey: SolanaSDKPublicKey.tokenProgramId, isSigner: false, isWritable: false },\n      ],\n      programId,\n      data: Buffer.from([1]),\n    });\n  }\n\n  /**\n   * Create an secp256k1 instruction with an Ethereum address.\n   *\n   * We need to add an extra byte to the ethAddress to match our secp offset\n   * */\n  static createInstructionWithEthAddress2({\n    ethAddress: rawAddress,\n    message,\n    signature,\n    recoveryId,\n  }: CreateSecp256k1InstructionWithEthAddressParams): TransactionInstruction {\n    let ethAddress;\n    if (typeof rawAddress === 'string') {\n      if (rawAddress.startsWith('0x')) {\n        ethAddress = Buffer.from(rawAddress.substr(2), 'hex');\n      } else {\n        ethAddress = Buffer.from(rawAddress, 'hex');\n      }\n    } else {\n      ethAddress = rawAddress;\n    }\n    const ethAddressLength: number = ethAddress.length;\n    assert(\n      ethAddress.length === this.ETHEREUM_ADDRESS_BYTES,\n      `Address must be ${this.ETHEREUM_ADDRESS_BYTES} bytes but received ${ethAddressLength} bytes`,\n    );\n    const dataStart = 1 + this.SIGNATURE_OFFSETS_SERIALIZED_SIZE;\n    const ethAddressOffset = dataStart + 1;\n    const signatureOffset = ethAddressOffset + ethAddressLength;\n    const messageDataOffset = signatureOffset + signature.length + 1;\n    const numSignatures = 1;\n    const instructionData = Buffer.alloc(\n      Number(SECP256K1_INSTRUCTION_LAYOUT.span) + message.length,\n    );\n    SECP256K1_INSTRUCTION_LAYOUT.encode(\n      {\n        numSignatures,\n        signatureOffset,\n        signatureInstructionIndex: 1,\n        ethAddressOffset,\n        ethAddressInstructionIndex: 1,\n        messageDataOffset,\n        messageDataSize: message.length,\n        messageInstructionIndex: 1,\n        signature: toBuffer(signature),\n        ethAddress: toBuffer([0, ...ethAddress]),\n        recoveryId,\n      },\n      instructionData,\n    );\n    instructionData.fill(toBuffer(message), SECP256K1_INSTRUCTION_LAYOUT.span);\n\n    return new TransactionInstruction({\n      keys: [],\n      programId: Secp256k1Program.programId,\n      data: instructionData,\n    });\n  }\n\n  static burnInstruction({\n    account,\n    source,\n    gatewayAccount,\n    tokenMint,\n    burnLogAccountId,\n    recipient,\n    programId,\n  }: {\n    account: PublicKey;\n    source: PublicKey;\n    gatewayAccount: PublicKey;\n    tokenMint: PublicKey;\n    burnLogAccountId: PublicKey;\n    recipient: Buffer;\n    programId: PublicKey;\n  }): TransactionInstruction {\n    return new TransactionInstruction({\n      keys: [\n        { pubkey: account, isSigner: true, isWritable: false },\n        { pubkey: source, isSigner: false, isWritable: true },\n        { pubkey: gatewayAccount, isSigner: false, isWritable: true },\n        { pubkey: tokenMint, isSigner: false, isWritable: true },\n        { pubkey: burnLogAccountId, isSigner: false, isWritable: true },\n        { pubkey: SolanaSDKPublicKey.programId, isSigner: false, isWritable: false },\n        { pubkey: SolanaSDKPublicKey.sysvarInstruction, isSigner: false, isWritable: false },\n        { pubkey: SolanaSDKPublicKey.sysvarRent, isSigner: false, isWritable: false },\n      ],\n      programId,\n      data: Buffer.from([2, recipient.length, ...recipient]),\n    });\n  }\n}\n","import type { Layout } from '@project-serum/borsh';\nimport { array, bool, publicKey, struct, u8, u64 as u64borsh, vec } from '@project-serum/borsh';\nimport { generateSHash } from '@renproject/utils';\nimport { fromBase64 } from '@renproject/utils/internal/common';\nimport { keccak256 } from '@renproject/utils/module/internal/hashes';\nimport { Token, u64 } from '@solana/spl-token';\nimport type { AccountInfo as BufferInfo } from '@solana/web3.js';\nimport { PublicKey } from '@solana/web3.js';\nimport { BN } from 'bn.js';\nimport base58 from 'bs58';\nimport type { CancellablePromise } from 'real-cancellable-promise';\nimport { buildCancellablePromise, pseudoCancellable } from 'real-cancellable-promise';\n\nimport type { SolanaSDK } from 'new/sdk/SolanaSDK';\nimport {\n  getAssociatedTokenAddressSync,\n  MintInfo,\n  SolanaSDKError,\n  SolanaSDKPublicKey,\n} from 'new/sdk/SolanaSDK';\nimport { isAlreadyInUseSolanaError } from 'new/utils/ErrorExtensions';\n\nimport { BurnDetails } from '../../actions/BurnAndRelease';\nimport type { ResponseQueryTxMint } from '../../models';\nimport { Direction, RenVMError } from '../../models';\nimport type { RenVMRpcClientType } from '../../RPCClient';\nimport { fixSignatureSimple } from '../../utils/Hash';\nimport { RenVMChainType } from '../RenVMChainType';\nimport { RenProgram } from './SolanaChainRenProgram';\n\nexport class SolanaChain extends RenVMChainType {\n  // Constants\n  static gatewayRegistryStateKey = 'GatewayRegistryState';\n  gatewayStateKey = 'GatewayStateV0.1.4';\n  chainName = 'Solana';\n\n  // Properties\n  gatewayRegistryData: GatewayRegistryData;\n  client: RenVMRpcClientType;\n  apiClient: SolanaSDK;\n\n  constructor({\n    gatewayRegistryData,\n    client,\n    apiClient,\n  }: {\n    gatewayRegistryData: GatewayRegistryData;\n    client: RenVMRpcClientType;\n    apiClient: SolanaSDK;\n  }) {\n    super();\n\n    this.gatewayRegistryData = gatewayRegistryData;\n    this.client = client;\n    this.apiClient = apiClient;\n  }\n\n  // Methods\n\n  static async load({\n    client,\n    apiClient,\n  }: {\n    client: RenVMRpcClientType;\n    apiClient: SolanaSDK;\n    // TODO: apiClient and blockchainClient after SolanaSDK decomposition\n  }): Promise<SolanaChain> {\n    const pubkey = new PublicKey(client.network.gatewayRegistry);\n    const stateKey = PublicKey.findProgramAddressSync(\n      [Buffer.from(this.gatewayRegistryStateKey)],\n      pubkey,\n    );\n    const result = await apiClient.getAccountInfo<GatewayRegistryData | null>({\n      account: stateKey[0]!.toString(),\n      decodedTo: GatewayRegistryDataLayout,\n    });\n\n    const data = result?.data;\n    if (!data) {\n      throw SolanaSDKError.couldNotRetrieveAccountInfo();\n    }\n\n    return new SolanaChain({\n      gatewayRegistryData: data,\n      client,\n      apiClient,\n    });\n  }\n\n  resolveTokenGatewayContract(mintTokenSymbol: string): PublicKey {\n    let sHash: PublicKey | undefined;\n    try {\n      sHash = new PublicKey(\n        base58.encode(\n          generateSHash(\n            this.selector({\n              mintTokenSymbol,\n              direction: Direction.to,\n            }).toString(),\n          ),\n        ),\n      );\n    } catch {\n      // ignore\n    }\n    if (!sHash) {\n      throw new RenVMError('Could not resolve token gateway contract');\n    }\n\n    const index = this.gatewayRegistryData.selectors.findIndex((s) =>\n      sHash ? Buffer.from(s).equals(sHash.toBuffer()) : false,\n    );\n    if (index === -1 || this.gatewayRegistryData.gateways.length <= index) {\n      throw new RenVMError('Could not resolve token gateway contract');\n    }\n    return this.gatewayRegistryData.gateways[index]!;\n  }\n\n  getSPLTokenPubkey(mintTokenSymbol: string): PublicKey {\n    const program = this.resolveTokenGatewayContract(mintTokenSymbol);\n    const sHash = generateSHash(\n      this.selector({ mintTokenSymbol, direction: Direction.to }).toString(),\n    );\n    return PublicKey.findProgramAddressSync([Buffer.from(sHash)], program)[0];\n  }\n\n  getAssociatedTokenAddress({\n    address,\n    mintTokenSymbol,\n  }: {\n    address: Uint8Array;\n    mintTokenSymbol: string;\n  }): Uint8Array {\n    const tokenMint = this.getSPLTokenPubkey(mintTokenSymbol);\n    return getAssociatedTokenAddressSync(tokenMint, new PublicKey(address)).toBytes();\n  }\n\n  dataToAddress(data: Uint8Array): string {\n    return base58.encode(data);\n  }\n\n  signatureToData(signature: string): Uint8Array {\n    return Uint8Array.from(base58.decode(signature)); // TODO: maybe Buffer\n  }\n\n  async createAssociatedTokenAccount({\n    address,\n    mintTokenSymbol,\n    owner,\n  }: {\n    address: PublicKey;\n    mintTokenSymbol: string;\n    owner: PublicKey; // instead of signer\n  }): Promise<string> {\n    const tokenMint = this.getSPLTokenPubkey(mintTokenSymbol);\n    const createAccountInstruction = Token.createAssociatedTokenAccountInstruction(\n      SolanaSDKPublicKey.splAssociatedTokenAccountProgramId,\n      SolanaSDKPublicKey.tokenProgramId,\n      tokenMint,\n      getAssociatedTokenAddressSync(tokenMint, address),\n      address,\n      owner,\n    );\n\n    // TODO: check it works, maybe we need to hack like with create renBTC\n    const preparedTransaction = await this.apiClient.prepareTransaction({\n      instructions: [createAccountInstruction],\n      owner, // instead of signers\n      feePayer: owner,\n    });\n\n    return this.apiClient.sendTransaction({\n      preparedTransaction,\n    });\n  }\n\n  submitMint({\n    address,\n    mintTokenSymbol,\n    account,\n    responseQueryMint,\n  }: {\n    address: Uint8Array;\n    mintTokenSymbol: string;\n    account: Uint8Array; // instead of signer\n    responseQueryMint: ResponseQueryTxMint;\n  }): CancellablePromise<string> {\n    return buildCancellablePromise(async (capture) => {\n      const pHash = fromBase64(responseQueryMint.valueIn.phash);\n      const nHash = fromBase64(responseQueryMint.valueIn.nhash);\n      const amount = responseQueryMint.valueOut.amount;\n      if (!pHash || !nHash || !amount) {\n        throw RenVMError.paramsMissing();\n      }\n\n      const sHash = generateSHash(\n        this.selector({ mintTokenSymbol, direction: Direction.to }).toString(),\n      );\n\n      const _sig = responseQueryMint.valueOut.sig;\n      if (!_sig) {\n        throw RenVMError.paramsMissing();\n      }\n\n      const _siga = Buffer.from(fromBase64(_sig));\n      // TODO: this looks weird, check it\n      const fixedSig = fixSignatureSimple(_siga);\n      const sig = Buffer.from(fixedSig); // just clone\n      const program = this.resolveTokenGatewayContract(mintTokenSymbol);\n      const gatewayAccountId: PublicKey = PublicKey.findProgramAddressSync(\n        [Buffer.from(this.gatewayStateKey)],\n        program,\n      )[0];\n      const tokenMint = this.getSPLTokenPubkey(mintTokenSymbol);\n      const mintAuthority: PublicKey = PublicKey.findProgramAddressSync(\n        [tokenMint.toBuffer()],\n        program,\n      )[0];\n      const recipientTokenAccount = new PublicKey(\n        this.getAssociatedTokenAddress({\n          address,\n          mintTokenSymbol,\n        }),\n      );\n      const renVMMessage = SolanaChain.buildRenVMMessage({\n        pHash,\n        amount,\n        token: sHash,\n        to: recipientTokenAccount,\n        nHash,\n      });\n      const mintLogAccount: PublicKey = PublicKey.findProgramAddressSync(\n        [keccak256(renVMMessage)],\n        program,\n      )[0];\n\n      const mintInstruction = RenProgram.mintInstruction({\n        account: new PublicKey(account),\n        gatewayAccount: gatewayAccountId,\n        tokenMint,\n        recipientTokenAccount,\n        mintLogAccount,\n        mintAuthority,\n        programId: program,\n      });\n\n      const response: BufferInfo<GatewayStateData | null> | null = await capture(\n        pseudoCancellable(\n          this.apiClient.getAccountInfo({\n            account: gatewayAccountId.toString(),\n            decodedTo: GatewayStateDataLayout,\n          }),\n        ),\n      );\n\n      const gatewayState = response?.data;\n      if (!gatewayState) {\n        throw SolanaSDKError.couldNotRetrieveAccountInfo();\n      }\n\n      const secpInstruction = RenProgram.createInstructionWithEthAddress2({\n        ethAddress: Buffer.from(gatewayState.renVMAuthority),\n        message: renVMMessage,\n        signature: sig.slice(0, 64),\n        recoveryId: sig[64]! - 27,\n      });\n\n      const preparedTransaction = await capture(\n        pseudoCancellable(\n          this.apiClient.prepareTransaction({\n            instructions: [mintInstruction, secpInstruction],\n            // owner: new PublicKey(account), // TODO: check, i think we need to sign in sendTransaction instead of prepare\n            feePayer: new PublicKey(account),\n          }),\n        ),\n      );\n      return pseudoCancellable(\n        this.apiClient.sendTransaction({\n          preparedTransaction,\n        }),\n      );\n    });\n  }\n\n  async submitBurn({\n    mintTokenSymbol,\n    account,\n    amount,\n    recipient,\n  }: {\n    mintTokenSymbol: string;\n    account: Uint8Array; // instead of signer\n    amount: string;\n    recipient: string;\n  }): Promise<BurnDetails> {\n    const amountNew = new u64(amount);\n    // TODO: condition to throw\n    if (!amountNew) {\n      throw RenVMError.other('Amount is not valid');\n    }\n    const accountNew = new PublicKey(account);\n    const program = this.resolveTokenGatewayContract(mintTokenSymbol);\n    const tokenMint = this.getSPLTokenPubkey(mintTokenSymbol);\n    const source = new PublicKey(\n      this.getAssociatedTokenAddress({\n        address: accountNew.toBytes(),\n        mintTokenSymbol,\n      }),\n    );\n    const gatewayAccountId = PublicKey.findProgramAddressSync(\n      [Buffer.from(this.gatewayStateKey)],\n      program,\n    )[0];\n\n    const response: BufferInfo<GatewayStateData | null> | null =\n      await this.apiClient.getAccountInfo({\n        account: gatewayAccountId.toString(),\n        decodedTo: GatewayStateDataLayout,\n      });\n\n    const gatewayState = response?.data;\n    if (!gatewayState) {\n      throw SolanaSDKError.couldNotRetrieveAccountInfo();\n    }\n\n    const nonce = gatewayState.burnCount.addn(1);\n    const burnLogAccountId = PublicKey.findProgramAddressSync(\n      [nonce.toArrayLike(Buffer, 'le', 8)],\n      program,\n    )[0];\n\n    // @ts-ignore\n    const burnCheckedInstruction = Token.createBurnCheckedInstruction(\n      SolanaSDKPublicKey.tokenProgramId,\n      tokenMint,\n      source,\n      accountNew,\n      [],\n      amountNew,\n      8,\n    );\n\n    const burnInstruction = RenProgram.burnInstruction({\n      account: accountNew,\n      source,\n      gatewayAccount: gatewayAccountId,\n      tokenMint,\n      burnLogAccountId,\n      recipient: Buffer.from(recipient),\n      programId: program,\n    });\n\n    const preparedTransaction = await this.apiClient.prepareTransaction({\n      instructions: [burnCheckedInstruction, burnInstruction],\n      owner: accountNew,\n      feePayer: accountNew,\n    });\n\n    const signature = await this.apiClient.sendTransaction({\n      preparedTransaction,\n    });\n\n    return new BurnDetails({\n      confirmedSignature: signature,\n      nonce,\n      recipient,\n      amount,\n    });\n  }\n\n  async findMintByDepositDetail({\n    nHash,\n    pHash,\n    to,\n    mintTokenSymbol,\n    amount,\n  }: {\n    nHash: Uint8Array;\n    pHash: Uint8Array;\n    to: PublicKey;\n    mintTokenSymbol: string;\n    amount: string;\n  }): Promise<string> {\n    const program = this.resolveTokenGatewayContract(mintTokenSymbol);\n    const sHash = generateSHash(\n      this.selector({ mintTokenSymbol, direction: Direction.to }).toString(),\n    );\n    const renVMMessage = SolanaChain.buildRenVMMessage({ pHash, amount, token: sHash, to, nHash });\n\n    const mintLogAccount = PublicKey.findProgramAddressSync([keccak256(renVMMessage)], program)[0];\n    const bufferInfo: BufferInfo<MintInfo | null> | null = await this.apiClient.getAccountInfo({\n      account: mintLogAccount.toString(),\n      decodedTo: MintInfo,\n    });\n    const mint = bufferInfo?.data;\n    if (!mint) {\n      throw RenVMError.other('Invalid mint info');\n    }\n\n    if (!mint.isInitialized) {\n      return '';\n    }\n\n    const signatures = await this.apiClient.provider.connection.getSignaturesForAddress(\n      mintLogAccount,\n    );\n\n    return signatures[0]?.signature ?? '';\n  }\n\n  async waitForConfirmation(signature: string): Promise<void> {\n    // TODO: add ignore status\n    return this.apiClient.waitForConfirmation(signature);\n  }\n\n  isAlreadyMintedError(error: Error): boolean {\n    // TODO: inside function\n    return isAlreadyInUseSolanaError(error);\n  }\n\n  // Static methods\n\n  static buildRenVMMessage({\n    pHash,\n    amount,\n    token,\n    to,\n    nHash,\n  }: {\n    pHash: Uint8Array;\n    amount: string;\n    token: Uint8Array;\n    to: PublicKey;\n    nHash: Uint8Array;\n  }): Buffer {\n    const preencode = {\n      pHash: new Uint8Array(pHash),\n      amount: new Uint8Array(new BN(amount).toArray('be', 32)),\n      token: new Uint8Array(token),\n      to: new Uint8Array(to.toBuffer()),\n      nHash: new Uint8Array(nHash),\n    };\n\n    // form data\n    return Buffer.from([\n      ...preencode.pHash,\n      ...preencode.amount,\n      ...preencode.token,\n      ...preencode.to,\n      ...preencode.nHash,\n    ]);\n  }\n}\n\ninterface GatewayStateData {\n  isInitialized: boolean;\n  /// RenVM Authority is the Eth compatible address of RenVM's authority key. RenVM mint\n  /// instructions require a ECDSA over Secp256k1 mint signature signed by the authority key.\n  renVMAuthority: Uint8Array;\n  /// Keccak256 hash of the RenVM selector for the gateway's token\n  selectors: Uint8Array;\n  /// The number of burn operations that have happened so far. This is incremented whenever Ren\n  /// tokens on Solana are burned.\n  burnCount: u64;\n  /// The number of decimals in the underlying asset.\n  underlyingDecimals: u64;\n}\n\n// https://github.dev/renproject/ren-js/blob/5791e7b9ed3a8d64cf8581f78161eb13f218a13f/packages/lib/chains/chains-solana/src/layouts.ts#L74\nconst GatewayStateDataLayout: Layout<GatewayStateData> = struct([\n  bool('isInitialized'),\n  array(u8(), 20, 'renVMAuthority'),\n  array(u8(), 32, 'selectors'),\n  u64borsh('burnCount'),\n  u8('underlyingDecimals'),\n]);\n\ninterface GatewayRegistryData {\n  isInitialized: boolean;\n  /// Owner is the pubkey that's allowed to write data to the registry state.\n  owner: PublicKey;\n  /// Number of selectors/gateway addresses stored in the registry.\n  count: u64;\n  /// RenVM selector hashes.\n  selectors: Uint8Array[];\n  /// RenVM gateway program addresses.\n  gateways: PublicKey[];\n}\n\n//github.dev/renproject/ren-js/blob/5791e7b9ed3a8d64cf8581f78161eb13f218a13f/packages/lib/chains/chains-solana/src/layouts.ts#L84\nconst GatewayRegistryDataLayout: Layout<GatewayRegistryData> = struct([\n  bool('isInitialized'),\n  publicKey('owner'),\n  u64borsh('count'),\n  vec(array(u8(), 32), 'selectors'),\n  vec(publicKey(), 'gateways'),\n]);\n","import { SolanaError } from 'new/sdk/SolanaSDK';\n\nexport function isAlreadyInUseSolanaError(error: Error): boolean {\n  if (error instanceof SolanaError) {\n    console.error('do it', error);\n    // TODO: invalidResponse\n    // response.data?.logs?.contains(\n    // starts(with: \"Allocate: account Address { address: \") &&\n    //             hasSuffix(\"} already in use\")\n  }\n  return false;\n}\n","import type { AxiosRequestConfig, AxiosResponse } from 'axios';\nimport axios from 'axios';\nimport { CancellablePromise, Cancellation } from 'real-cancellable-promise';\n\nexport function cancellableAxios<T>(\n  config: AxiosRequestConfig,\n): CancellablePromise<AxiosResponse<T>> {\n  const source = axios.CancelToken.source();\n  config = { ...config, cancelToken: source.token };\n\n  const promise = axios(config)\n    .then((response) => response)\n    .catch((e) => {\n      if (e instanceof axios.Cancel) {\n        throw new Cancellation();\n      }\n\n      // rethrow the original error\n      throw e;\n    });\n\n  return new CancellablePromise<AxiosResponse<T>>(promise, () => source.cancel());\n}\n\nexport function cancellableFetch(\n  input: RequestInfo,\n  init: RequestInit = {},\n): CancellablePromise<Response> {\n  const controller = new AbortController();\n\n  const promise = fetch(input, {\n    ...init,\n    signal: controller.signal,\n  }).catch((e) => {\n    if (e.name === 'AbortError') {\n      throw new Cancellation();\n    }\n\n    // rethrow the original error\n    throw e;\n  });\n\n  return new CancellablePromise<Response>(promise, () => controller.abort());\n}\n","import type { JSONRPCResponse } from '@renproject/provider';\nimport type { RenVMParams, RenVMResponses } from '@renproject/rpc/build/module/v2';\nimport { mintParamsType, RPCMethod } from '@renproject/rpc/build/module/v2';\nimport { SECONDS } from '@renproject/utils/build/main';\nimport { fromBase64 } from '@renproject/utils/internal/common';\nimport { u64 } from '@solana/spl-token';\nimport { plainToInstance } from 'class-transformer';\nimport type { CancellablePromise } from 'real-cancellable-promise';\nimport { buildCancellablePromise } from 'real-cancellable-promise';\n\nimport { LogEvent, Logger } from 'new/sdk/SolanaSDK';\nimport { cancellableAxios } from 'new/utils/promise/PromiseExtensions';\n\nimport { IncomingTransaction } from '../actions/LockAndMint';\nimport type { MintTransactionInput, Network, Selector } from '../models';\nimport {\n  RenVMError,\n  ResponseQueryBlockState,\n  ResponseQueryConfig,\n  ResponseQueryTxMint,\n  ResponseSubmitTxMint,\n} from '../models';\n\nconst makeBody = (method: string, params?: unknown) => ({\n  id: 1,\n  jsonrpc: '2.0',\n  method,\n  params,\n});\n\nexport interface RenVMRpcClientType {\n  readonly network: Network;\n  call<Method extends keyof RenVMParams>({\n    endpoint,\n    method,\n    params,\n    log,\n  }: {\n    endpoint: string;\n    method: Method;\n    params: RenVMParams[Method];\n    log: boolean;\n    retry?: number; // @renjs\n    timeout?: number; // @renjs\n  }): CancellablePromise<RenVMResponses[Method]>;\n  selectPublicKey(mintTokenSymbol: string): Promise<Uint8Array | null>;\n  getIncomingTransactions(address: string): Promise<IncomingTransaction[]>;\n\n  // extension\n\n  queryMint(txHash: string): CancellablePromise<ResponseQueryTxMint>;\n\n  queryBlockState(log: boolean): CancellablePromise<ResponseQueryBlockState>;\n\n  queryConfig(): Promise<ResponseQueryConfig>;\n\n  submitTx({\n    hash,\n    selector,\n    version,\n    input,\n  }: {\n    hash: string;\n    selector: Selector;\n    version: string;\n    input: MintTransactionInput;\n  }): CancellablePromise<ResponseSubmitTxMint>;\n\n  getTransactionFee(mintTokenSymbol: string): Promise<u64>;\n}\n\nexport class RpcClient implements RenVMRpcClientType {\n  readonly network: Network;\n\n  constructor({ network }: { network: Network }) {\n    this.network = network;\n  }\n\n  call<Method extends keyof RenVMParams>({\n    endpoint,\n    method,\n    params,\n    log,\n    timeout = 120 * SECONDS,\n  }: {\n    endpoint: string;\n    method: Method;\n    params: RenVMParams[Method];\n    log: boolean;\n    retry?: number; // @renjs\n    timeout?: number; // @renjs\n  }): CancellablePromise<RenVMResponses[Method]> {\n    return buildCancellablePromise(async (capture) => {\n      try {\n        new URL(endpoint);\n      } catch {\n        throw RenVMError.invalidEndpoint();\n      }\n\n      // Log\n      if (log) {\n        Logger.log(\n          `renBTC event ${method} ${JSON.stringify(params, null, '    ')}`,\n          LogEvent.request,\n        );\n      }\n\n      // prepare urlRequest\n      const body = makeBody(method, params);\n\n      const response = await capture(\n        cancellableAxios<JSONRPCResponse<RenVMResponses[Method]>>({\n          method: 'post',\n          url: endpoint,\n          data: body,\n          // Use a 120 second timeout. This could be reduced, but\n          // should be done based on the method, since some requests\n          // may take a long time, especially on a slow connection.\n          timeout,\n        }),\n      );\n\n      const statusCode = response.status ?? 0;\n      const isValidStatus = 200 <= statusCode && statusCode <= 300;\n\n      if (log) {\n        Logger.log(JSON.stringify(response.data.result, null, '    '), LogEvent.response);\n      }\n\n      const result = response.data.result;\n      if (isValidStatus && result) {\n        return result;\n      }\n\n      throw response.data.error ?? RenVMError.unknown();\n    });\n  }\n\n  async getIncomingTransactions(address: string): Promise<IncomingTransaction[]> {\n    const urlString = `https://blockstream.info${\n      this.network.isTestnet ? '/testnet' : ''\n    }/api/address/${address}/utxo`;\n    try {\n      new URL(urlString);\n    } catch {\n      throw RenVMError.invalidEndpoint();\n    }\n    Logger.log(urlString, LogEvent.request);\n    const data: IncomingTransaction[] = await (await fetch(urlString)).json();\n    Logger.log(JSON.stringify(data, null, '    '), LogEvent.response);\n\n    return plainToInstance(IncomingTransaction, data);\n  }\n\n  // extension\n\n  private _emptyParams: Record<string, string> = {};\n\n  queryMint(txHash: string): CancellablePromise<ResponseQueryTxMint> {\n    return buildCancellablePromise(async (capture) => {\n      const result = await capture(\n        this.call({\n          endpoint: this.network.lightNode,\n          method: RPCMethod.QueryTx,\n          params: { txHash: txHash },\n          log: true,\n        }),\n      );\n      return plainToInstance(ResponseQueryTxMint, result);\n    });\n  }\n\n  queryBlockState(log = false): CancellablePromise<ResponseQueryBlockState> {\n    return buildCancellablePromise(async (capture) => {\n      const result = await capture(\n        this.call({\n          endpoint: this.network.lightNode,\n          method: RPCMethod.QueryBlockState,\n          params: this._emptyParams,\n          log,\n        }),\n      );\n      return plainToInstance(ResponseQueryBlockState, result);\n    });\n  }\n\n  async queryConfig(): Promise<ResponseQueryConfig> {\n    const result = await this.call({\n      endpoint: this.network.lightNode,\n      method: RPCMethod.QueryConfig,\n      params: this._emptyParams,\n      log: true,\n    });\n    return plainToInstance(ResponseQueryConfig, result);\n  }\n\n  submitTx({\n    hash,\n    selector,\n    version,\n    input,\n  }: {\n    hash: string;\n    selector: Selector;\n    version: string;\n    input: MintTransactionInput;\n  }): CancellablePromise<ResponseSubmitTxMint> {\n    return buildCancellablePromise(async (capture) => {\n      const result = await capture(\n        this.call({\n          endpoint: this.network.lightNode,\n          method: RPCMethod.SubmitTx,\n          params: {\n            tx: {\n              hash,\n              selector: selector.toString(),\n              version,\n              in: {\n                t: mintParamsType(),\n                v: input,\n              },\n            },\n          },\n          log: true,\n        }),\n      );\n      return plainToInstance(ResponseSubmitTxMint, result);\n    });\n  }\n\n  async selectPublicKey(mintTokenSymbol: string): Promise<Uint8Array | null> {\n    const blockState = await this.queryBlockState();\n    return fromBase64(blockState.publicKey(mintTokenSymbol) ?? '');\n  }\n\n  async getTransactionFee(mintTokenSymbol: string): Promise<u64> {\n    // @ios: TODO: - Remove later: Support other tokens\n    if (mintTokenSymbol !== 'BTC') {\n      throw RenVMError.other('Unsupported token');\n    }\n\n    const blockState = await this.queryBlockState(true);\n\n    const gasLimit = new u64(blockState.state.v.btc.gasLimit);\n    const gasCap = new u64(blockState.state.v.btc.gasCap);\n\n    if (!gasLimit || !gasCap) {\n      throw RenVMError.other('Could not calculate transaction fee');\n    }\n    return new u64(gasLimit.mul(gasCap));\n  }\n}\n","import * as BurnAndRelease from '../../actions/BurnAndRelease';\n\nexport const keyForSubmitedBurnTransaction = 'renVMSubmitedBurnTxDetails';\n\n// Persistent store for recovering transaction in case of failure\ninterface BurnAndReleasePersistentStoreType {\n  /// Get last non released transactions for retrying\n  /// - Returns: Transactions that wasn't released last time\n  getNonReleasedTransactions(): BurnAndRelease.BurnDetails[];\n\n  /// Persist non released transaction for retrying next time\n  /// - Parameter transaction: transaction to be persisted\n  persistNonReleasedTransactions(transaction: BurnAndRelease.BurnDetails): void;\n\n  /// Mark transaction as released\n  /// - Parameter transaction: transaction to be marked\n  markAsReleased(transaction: BurnAndRelease.BurnDetails): void;\n}\n\nexport class BurnAndReleasePersistentStore implements BurnAndReleasePersistentStoreType {\n  private readonly _userDefaultKeyForSubmitedBurnTransactions: string;\n\n  constructor({\n    userDefaultKeyForSubmitedBurnTransactions,\n  }: {\n    userDefaultKeyForSubmitedBurnTransactions: string;\n  }) {\n    this._userDefaultKeyForSubmitedBurnTransactions = userDefaultKeyForSubmitedBurnTransactions;\n  }\n\n  getNonReleasedTransactions(): BurnAndRelease.BurnDetails[] {\n    const data = this._getFromUserDefault<BurnAndRelease.BurnDetailsJSONType[] | null>(\n      this._userDefaultKeyForSubmitedBurnTransactions,\n    );\n    return data ? data.map((json) => BurnAndRelease.BurnDetails.fromJSON(json)) : [];\n  }\n\n  persistNonReleasedTransactions(details: BurnAndRelease.BurnDetails): void {\n    let currentValue: BurnAndRelease.BurnDetails[] = (\n      this._getFromUserDefault<BurnAndRelease.BurnDetailsJSONType[] | null>(\n        this._userDefaultKeyForSubmitedBurnTransactions,\n      ) ?? []\n    ).map((json) => BurnAndRelease.BurnDetails.fromJSON(json));\n    currentValue = currentValue.filter(\n      (detail) => detail.confirmedSignature === details.confirmedSignature,\n    );\n    currentValue.push(details);\n    this._saveToUserDefault(currentValue, this._userDefaultKeyForSubmitedBurnTransactions);\n  }\n\n  markAsReleased(details: BurnAndRelease.BurnDetails): void {\n    let currentValue: BurnAndRelease.BurnDetails[] = (\n      this._getFromUserDefault<BurnAndRelease.BurnDetailsJSONType[] | null>(\n        this._userDefaultKeyForSubmitedBurnTransactions,\n      ) ?? []\n    ).map((json) => BurnAndRelease.BurnDetails.fromJSON(json));\n\n    currentValue = currentValue.filter(\n      (detail) => detail.confirmedSignature !== details.confirmedSignature,\n    );\n\n    this._saveToUserDefault(currentValue, this._userDefaultKeyForSubmitedBurnTransactions);\n  }\n\n  // Private\n\n  private _getFromUserDefault<T>(key: string): T | null {\n    try {\n      const data = localStorage.getItem(key);\n      const session: T = JSON.parse(data!);\n      if (!data || !session) {\n        return null;\n      }\n      return session;\n    } catch {\n      return null;\n    }\n  }\n\n  private _saveToUserDefault<T>(value: T, key: string): void {\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n}\n","import type { u64 } from '@solana/spl-token';\nimport promiseRetry from 'promise-retry';\n\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\n\nimport type { BurnDetails as BurnAndReleaseBurnDetails } from '../../actions/BurnAndRelease';\nimport { BurnAndRelease } from '../../actions/BurnAndRelease';\nimport type { RenVMChainType } from '../../chains/RenVMChainType';\nimport { RenVMError } from '../../models/RenVMError';\nimport type { RenVMRpcClientType } from '../../RPCClient';\nimport type { ChainProvider } from '../ChainProvider';\nimport type { BurnAndReleasePersistentStore } from './BurnAndReleasePersistentStore';\n\ntype BurnDetails = BurnAndReleaseBurnDetails;\n\nexport class DestinationChain {\n  name: string;\n  symbol: string;\n  decimals: number;\n\n  constructor({ name, symbol, decimals }: { name: string; symbol: string; decimals: number }) {\n    this.name = name;\n    this.symbol = symbol;\n    this.decimals = decimals;\n  }\n\n  static get bitcoin(): DestinationChain {\n    return new DestinationChain({ name: 'Bitcoin', symbol: 'BTC', decimals: 8 });\n  }\n}\n\nclass Cache {\n  burnAndRelease?: BurnAndRelease;\n\n  save(burnAndRelease: BurnAndRelease): void {\n    this.burnAndRelease = burnAndRelease;\n  }\n}\n\n// The service for burn and release\ninterface BurnAndReleaseService {\n  // Resume on going tasks\n  resume(): void;\n  // Check if network is testnet\n  isTestNet(): boolean;\n  // Get fee of burn and release\n  getFee(): Promise<number>;\n  // Burn and release transaction\n  // - Parameters:\n  //   - recipient: receiver\n  //   - amount: amount to be sent\n  // - Returns: transaction signature\n  burnAndRelease({ recipient, amount }: { recipient: string; amount: u64 }): Promise<string>;\n}\n\nexport class BurnAndReleaseServiceImpl implements BurnAndReleaseService {\n  // Dependencies\n\n  private readonly _rpcClient: RenVMRpcClientType;\n  private _chainProvider: ChainProvider;\n  private _destinationChain: DestinationChain;\n  private _persistentStore: BurnAndReleasePersistentStore;\n  private readonly _version: string;\n\n  // Properties\n\n  private _cache: Cache = new Cache();\n  private _chain?: RenVMChainType;\n\n  // Initializer\n\n  constructor({\n    rpcClient,\n    chainProvider,\n    destinationChain,\n    persistentStore,\n    version,\n  }: {\n    rpcClient: RenVMRpcClientType;\n    chainProvider: ChainProvider;\n    destinationChain: DestinationChain;\n    persistentStore: BurnAndReleasePersistentStore;\n    version: string;\n  }) {\n    this._rpcClient = rpcClient;\n    this._chainProvider = chainProvider;\n    this._destinationChain = destinationChain;\n    this._persistentStore = persistentStore;\n    this._version = version;\n  }\n\n  resume(): void {\n    (async () => {\n      await this._reload();\n      await this._releaseUnfinishedTxsFromPersistentStore();\n    })();\n  }\n\n  isTestNet(): boolean {\n    return this._rpcClient.network.isTestnet;\n  }\n\n  async getFee(): Promise<number> {\n    const lamports = await this._rpcClient.getTransactionFee(this._destinationChain.symbol);\n    return convertToBalance(lamports, this._destinationChain.decimals);\n  }\n\n  async burnAndRelease({ recipient, amount }: { recipient: string; amount: u64 }): Promise<string> {\n    const account = await this._chainProvider.getAccount();\n    const burnAndRelease = await this._getBurnAndRelease();\n\n    const burnDetails = await burnAndRelease.submitBurnTransaction({\n      account,\n      amount: amount.toString(),\n      recipient,\n    });\n\n    this._persistentStore.persistNonReleasedTransactions(burnDetails);\n\n    const chain = this._chain;\n    if (chain) {\n      await chain.waitForConfirmation(burnDetails.confirmedSignature);\n    }\n\n    const signature = await this._release(burnDetails);\n\n    this._persistentStore.markAsReleased(burnDetails);\n    return signature;\n  }\n\n  // Private\n\n  private async _reload(): Promise<void> {\n    this._chain = await this._chainProvider.load();\n    const burnAndRelease = new BurnAndRelease({\n      rpcClient: this._rpcClient,\n      chain: this._chain,\n      mintTokenSymbol: this._destinationChain.symbol,\n      version: this._version,\n      burnTo: this._destinationChain.name,\n    });\n    this._cache.save(burnAndRelease);\n  }\n\n  private async _releaseUnfinishedTxsFromPersistentStore(): Promise<void> {\n    const nonReleasedTransactions = this._persistentStore.getNonReleasedTransactions();\n    // TODO: tasks\n    await Promise.all(\n      nonReleasedTransactions.map(async (detail) => {\n        const chain = this._chain;\n        if (!chain) {\n          throw RenVMError.unknown();\n        }\n\n        try {\n          await chain.waitForConfirmation(detail.confirmedSignature);\n          await this._release(detail);\n        } catch (error) {\n          console.error(error);\n        }\n      }),\n    );\n  }\n\n  private async _release(details: BurnDetails): Promise<string> {\n    const burnAndRelease = await this._getBurnAndRelease();\n    const state = burnAndRelease.getBurnState(details);\n\n    return promiseRetry(\n      async (retry) => {\n        return burnAndRelease.release({ state, details }).catch(retry);\n      },\n      {\n        forever: true,\n        maxTimeout: 3_000,\n      },\n    );\n  }\n\n  private async _getBurnAndRelease(): Promise<BurnAndRelease> {\n    if (!this._cache.burnAndRelease) {\n      await this._reload();\n    }\n    const burnAndRelease = this._cache.burnAndRelease;\n    if (burnAndRelease) {\n      return burnAndRelease;\n    }\n    throw RenVMError.other('Could not initialize burn and release service');\n  }\n}\n","import errcode from 'err-code';\nimport { CancellablePromise, pseudoCancellable } from 'real-cancellable-promise';\nimport type { OperationOptions } from 'retry';\nimport retry from 'retry';\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nfunction isRetryError(err: Error & errcode.Extensions) {\n  return err && err.code === 'EPROMISERETRY' && hasOwn.call(err, 'retried');\n}\n\n/**\n * A function that is retryable, by having implicitly-bound params for both an error handler and an attempt number.\n *\n * @param retry The retry callback upon any rejection. Essentially throws the error on in the form of a { retried: err }\n * wrapper, and tags it with a 'code' field of value \"EPROMISERETRY\" so that it is recognised as needing retrying. Call\n * this from the catch() block when you want to retry a rejected attempt.\n * @param attempt The number of the attempt.\n * @returns A Promise for anything (eg. a HTTP response).\n */\ntype RetryableFn<ResolutionType> = (\n  retry: (error: any) => never,\n  attempt: number,\n) => CancellablePromise<ResolutionType>;\n\n/**\n * Wrap all functions of the object with retry. The params can be entered in either order, just like in the original library.\n *\n * @param fn The function to retry.\n * @param options The options for how long/often to retry the function for.\n * @returns The Promise resolved by the input retryableFn, or rejected (if not retried) from its catch block.\n */\nexport function cancellablePromiseRetry<ResolutionType>(\n  fn: RetryableFn<ResolutionType>,\n  options?: OperationOptions,\n): CancellablePromise<ResolutionType> {\n  const operation = retry.operation(options);\n\n  return pseudoCancellable(\n    new Promise(function (resolve, reject) {\n      operation.attempt(function (number) {\n        CancellablePromise.resolve()\n          .then(function () {\n            return fn(function (err) {\n              if (isRetryError(err)) {\n                err = err.retried;\n              }\n\n              throw errcode(new Error('Retrying'), 'EPROMISERETRY', { retried: err });\n            }, number);\n          })\n          .then(resolve, function (err) {\n            if (isRetryError(err)) {\n              err = err.retried;\n\n              if (operation.retry(err || new Error())) {\n                return;\n              }\n            }\n\n            reject(err);\n          });\n      });\n    }),\n  );\n}\n","import type { u64 } from '@solana/spl-token';\nimport {\n  buildCancellablePromise,\n  CancellablePromise,\n  pseudoCancellable,\n} from 'real-cancellable-promise';\n\nimport { LogEvent, Logger } from 'new/sdk/SolanaSDK';\nimport { cancellablePromiseRetry } from 'new/utils/promise/cancellablePromiseRetry';\n\nimport type { GatewayAddressResponse } from '../../../actions/LockAndMint';\nimport {\n  LockAndMint,\n  ProcessingTx,\n  Session,\n  ValidationStatusType,\n} from '../../../actions/LockAndMint';\nimport type { RenVMChainType } from '../../../chains/RenVMChainType';\nimport { RenVMError } from '../../../models';\nimport type { RenVMRpcClientType } from '../../../RPCClient/RPCClient';\nimport type { ChainProvider } from '../../ChainProvider';\nimport type { LockAndMintService } from '../LockAndMintService';\nimport type { LockAndMintServiceDelegate } from '../LockAndMintServiceDelegate';\nimport type { LockAndMintServicePersistentStore } from '../LockAndMintServicePersistentStore';\nimport type { MintToken } from './Models';\n\n// `LockAndMintService` implementation\nexport class LockAndMintServiceImpl implements LockAndMintService {\n  // Dependencies\n\n  /// PersistentStore for storing current work\n  private _persistentStore: LockAndMintServicePersistentStore;\n\n  private _chainProvider: ChainProvider;\n\n  /// API Client for RenVM\n  private _rpcClient: RenVMRpcClientType;\n\n  // Properties\n\n  // Mint token\n  private _mintToken: MintToken;\n\n  // Version of renVM\n  private _version: string;\n\n  // Refreshing rate\n  private _refreshingRate: number;\n\n  // Minting rate\n  // private _mintingRate: number;\n\n  // Flag to indicate of whether log should be shown or not\n  private _showLog: boolean;\n\n  private _txSubmittedCallback?: (tx: ProcessingTx) => void;\n\n  // Response from gateway address\n  private _gatewayAddressResponse?: GatewayAddressResponse;\n\n  // Loaded lockAndMint\n  private _lockAndMint?: LockAndMint;\n\n  // Chain\n  private _chain?: RenVMChainType;\n\n  // Tasks for cancellation\n  private _tasks: Set<CancellablePromise<any>> = new Set();\n\n  // Delegate\n  delegate?: LockAndMintServiceDelegate;\n\n  // Indicator isLoading\n  isLoading = false;\n\n  constructor({\n    persistentStore,\n    chainProvider,\n    rpcClient,\n    mintToken,\n    version = '1',\n    refreshingRate = 5_000,\n    // mintingRate = 60_000,\n    showLog,\n    txSubmittedCallback,\n  }: {\n    persistentStore: LockAndMintServicePersistentStore;\n    chainProvider: ChainProvider;\n    rpcClient: RenVMRpcClientType;\n    mintToken: MintToken;\n    version?: string;\n    refreshingRate?: number;\n    mintingRate?: number;\n    showLog: boolean;\n    txSubmittedCallback?: (tx: ProcessingTx) => void;\n  }) {\n    this._persistentStore = persistentStore;\n    this._chainProvider = chainProvider;\n    this._rpcClient = rpcClient;\n    this._mintToken = mintToken;\n    this._version = version;\n    this._refreshingRate = refreshingRate;\n    // this._mintingRate = mintingRate;\n    this._showLog = showLog;\n    this._txSubmittedCallback = txSubmittedCallback;\n  }\n\n  // Start the service\n  async resume(): Promise<void> {\n    this._clean();\n\n    // resume current session if any\n    const session = this._persistentStore.session;\n    if (!session?.isValid) {\n      return;\n    }\n\n    // resume\n    await this._resume();\n  }\n\n  // Create new session\n  async createSession(endAt?: Date): Promise<void> {\n    // clean\n    this._clean();\n\n    // create session\n    const session = new Session({ createdAt: new Date(), endAt });\n\n    // save session\n    this._persistentStore.saveSession(session);\n\n    // resume\n    await this._resume();\n  }\n\n  expireCurrentSession(): void {\n    // clean\n    this._clean();\n\n    // clear\n    this._persistentStore.clearAll();\n  }\n\n  // Private\n\n  // Clean all current set up\n  private _clean(): void {\n    this._persistentStore.markAllTransactionsAsNotProcessing();\n    this.delegate?.lockAndMintServiceUpdated(this._persistentStore.processingTransactions);\n\n    this._tasks.forEach((task) => task.cancel('clean'));\n  }\n\n  // Resume the current session\n  private async _resume(): Promise<void> {\n    // loading\n    this.delegate?.lockAndMintServiceWillStartLoading();\n    this.isLoading = true;\n\n    try {\n      // get account\n      const account = await this._chainProvider.getAccount();\n\n      // load chain\n      this._chain = await this._chainProvider.load();\n\n      // load lock and mint\n      this._lockAndMint = new LockAndMint({\n        rpcClient: this._rpcClient,\n        chain: this._chain,\n        mintTokenSymbol: this._mintToken.symbol,\n        version: this._version,\n        destinationAddress: account,\n        session: this._persistentStore.session,\n      });\n\n      // save address\n      this._gatewayAddressResponse = await this._lockAndMint.generateGatewayAddress();\n      const address = this._chain.dataToAddress(this._gatewayAddressResponse.gatewayAddress);\n      this._persistentStore.saveGatewayAddress(address);\n\n      // continue previous works in a separated task\n      const previousTask = this.submitIfNeededAndMintAllTransactionsInQueue();\n      this._tasks.add(previousTask);\n\n      // observe incomming transactions in a separated task\n      const observingTask = async () => {\n        while (true) {\n          await this._getIncommingTransactionsAndMint();\n          await CancellablePromise.delay(this._refreshingRate);\n        }\n      };\n      // TODO: think its wrong. we need to cancel last loop\n      this._tasks.add(pseudoCancellable(observingTask()));\n\n      // loaded\n      this.delegate?.lockAndMintServiceLoaded(address);\n      this.isLoading = false;\n    } catch (error) {\n      // indicate error\n      this.delegate?.lockAndMintServiceWithError();\n      this.isLoading = false;\n\n      console.error(error);\n    }\n  }\n\n  // Get incomming transactions and mint\n  private async _getIncommingTransactionsAndMint(): Promise<void> {\n    const address = this._persistentStore.gatewayAddress;\n    if (!address) {\n      return;\n    }\n\n    // get incomming transaction\n    let incommingTransactions;\n    try {\n      incommingTransactions = await this._rpcClient.getIncomingTransactions(address);\n    } catch (e) {\n      return;\n    }\n\n    // detect action for each incomming transactions, save status for future use\n    const confirmedTxIds = [];\n    for (const transaction of incommingTransactions) {\n      // get marker date\n      let date = new Date();\n      const blocktime = transaction.status.blockTime; // TODO: check time, maybe need to multiply by 1000\n      if (blocktime) {\n        date = new Date(blocktime.toNumber());\n      }\n\n      // for confirmed transaction, do submit\n      if (transaction.status.confirmed) {\n        // check if transaction is invalid\n        const tx: ProcessingTx | undefined = this._persistentStore.processingTransactions.find(\n          (_tx) => _tx.tx.txid === transaction.txid,\n        );\n        if (tx && tx.validationStatus.type !== ValidationStatusType.valid) {\n          if (this._showLog) {\n            Logger.log(\n              `Transaction ${transaction.txid} is being ignored because it is ${tx.validationStatus.type}`,\n              LogEvent.event,\n            );\n          }\n        } else {\n          // mark as confirmed\n          this._persistentStore.markAsConfirmed(transaction, date);\n          this.delegate?.lockAndMintServiceUpdated(this._persistentStore.processingTransactions);\n        }\n\n        // save to submit\n        confirmedTxIds.push(transaction.txid);\n      }\n\n      // for incoming transaction, mark as received and wait\n      else {\n        // mark as received\n        this._persistentStore.markAsReceived(transaction, date);\n        this.delegate?.lockAndMintServiceUpdated(this._persistentStore.processingTransactions);\n      }\n    }\n\n    // submit if needed and mint\n    await this.submitIfNeededAndMintAllTransactionsInQueue();\n  }\n\n  // Submit if needed and mint array of tx\n  submitIfNeededAndMintAllTransactionsInQueue(): CancellablePromise<void> {\n    return buildCancellablePromise(async (capture) => {\n      // get all transactions that are valid and are not being processed\n      const groupedTransactions = ProcessingTx.grouped(\n        this._persistentStore.processingTransactions,\n      );\n      const confirmedAndSubmittedTransactions = groupedTransactions.confirmed.concat(\n        groupedTransactions.submitted,\n      );\n      const transactionsToBeProcessed = confirmedAndSubmittedTransactions.filter(\n        (_tx) => !_tx.isProcessing && _tx.validationStatus.type === ValidationStatusType.valid,\n      );\n\n      // mark as processing\n      for (const tx of transactionsToBeProcessed) {\n        this._persistentStore.markAsProcessing(tx);\n        this.delegate?.lockAndMintServiceUpdated(this._persistentStore.processingTransactions);\n      }\n\n      // process transactions simutaneously\n      await capture(\n        CancellablePromise.all(\n          transactionsToBeProcessed.map(async (tx) => {\n            try {\n              await this.submitIfNeededAndMint(tx);\n            } catch (error) {\n              console.error(error);\n              // TODO: check it works\n              if ((error as RenVMError).message.startsWith('insufficient amount after fees')) {\n                this._persistentStore.markAsInvalid(tx.tx.txid, (error as RenVMError).message);\n                this.delegate?.lockAndMintServiceUpdated(\n                  this._persistentStore.processingTransactions,\n                );\n              }\n\n              if (this._showLog) {\n                Logger.log(\n                  `Could not mint transaction with id ${tx.tx.txid}, error: ${error}`,\n                  LogEvent.error,\n                );\n              }\n            }\n          }),\n        ),\n      );\n    });\n  }\n\n  // Submit if needed and mint tx\n  submitIfNeededAndMint(tx: ProcessingTx): CancellablePromise<void> {\n    return buildCancellablePromise(async (capture) => {\n      const account = await capture(pseudoCancellable(this._chainProvider.getAccount()));\n\n      const response = this._gatewayAddressResponse;\n      const lockAndMint = this._lockAndMint;\n      const chain = this._chain;\n      if (!response || !lockAndMint || !chain) {\n        throw RenVMError.unknown();\n      }\n\n      // get state\n      const state = lockAndMint.getDepositState({\n        transactionHash: tx.tx.txid,\n        txIndex: String(tx.tx.vout),\n        amount: String(tx.tx.value),\n        to: response.sendTo,\n        gHash: response.gHash,\n        gPubkey: response.gPubkey,\n      });\n\n      // submit\n      if (!tx.submittedAt) {\n        try {\n          const hash = await capture(lockAndMint.submitMintTransaction(state));\n          console.debug(`submited transaction with hash: ${hash}`);\n          this._persistentStore.markAsSubmitted(tx.tx, new Date());\n          this.delegate?.lockAndMintServiceUpdated(this._persistentStore.processingTransactions);\n        } catch (error) {\n          console.error(error);\n          // try to mint event if error\n        }\n      }\n\n      if (typeof this._txSubmittedCallback === 'function') {\n        this._txSubmittedCallback(\n          this._persistentStore.getProcessingTransactionByTxid(tx.tx.txid)!,\n        );\n      }\n\n      // mint\n      await capture(\n        cancellablePromiseRetry(\n          (retry) => {\n            return lockAndMint.mint({ state, account }).catch((error) => {\n              console.error(error);\n              if (!chain.isAlreadyMintedError(error as Error)) {\n                if (RenVMError.equals(error as RenVMError, RenVMError.paramsMissing())) {\n                  retry(error);\n                } else {\n                  throw error;\n                }\n              }\n              // already minted\n            });\n          },\n          {\n            forever: true,\n            maxTimeout: 5_000,\n          },\n        ),\n      );\n\n      this._persistentStore.markAsMinted(tx.tx, new Date());\n      this.delegate?.lockAndMintServiceUpdated(this._persistentStore.processingTransactions);\n    });\n  }\n\n  async getFee(): Promise<u64> {\n    return await this._rpcClient.getTransactionFee(this._mintToken.symbol);\n  }\n}\n","export class MintToken {\n  name: string;\n  symbol: string;\n\n  constructor(name: string, symbol: string) {\n    this.name = name;\n    this.symbol = symbol;\n  }\n\n  static get bitcoin(): MintToken {\n    return new MintToken('Bitcoin', 'BTC');\n  }\n}\n","import { instanceToPlain, plainToInstance } from 'class-transformer';\n\nimport { LogEvent, Logger } from 'new/sdk/SolanaSDK';\n\nimport type { IncomingTransaction, SessionJSONType } from '../../actions/LockAndMint';\nimport { ProcessingTx, Session, ValidationStatus } from '../../actions/LockAndMint';\n\nexport const keyForSession = 'renVMSession';\nexport const keyForGatewayAddress = 'renVMGatewayAddress';\nexport const keyForProcessingTransactions = 'renVMProcessingTxs';\n\n// PersistentStore to persist current works\ninterface LockAndMintServicePersistentStoreType {\n  // Session\n  // Current working Session\n  readonly session: Session | null;\n\n  // Save session\n  saveSession(session: Session): void;\n\n  // GatewayAddress\n  // CurrentGatewayAddress\n  readonly gatewayAddress: string | null;\n\n  // Save gateway address\n  saveGatewayAddress(gatewayAddress: string): void;\n\n  // ProcessingTransaction\n  /// Transaction which are being processed\n  readonly processingTransactions: ProcessingTx[];\n\n  getProcessingTransactionByTxid(txid: string): ProcessingTx | null;\n\n  /// Mark as processing\n  markAsProcessing(transaction: ProcessingTx): void;\n\n  /// Mark all transaction as not processing\n  markAllTransactionsAsNotProcessing(): void;\n\n  /// Mark as received\n  markAsReceived(incomingTransaction: IncomingTransaction, date: Date): void;\n\n  /// Mark as confimed\n  markAsConfirmed(incomingTransaction: IncomingTransaction, date: Date): void;\n\n  /// Mark as submited\n  markAsSubmitted(incomingTransaction: IncomingTransaction, date: Date): void;\n\n  /// Mark as minted\n  markAsMinted(incomingTransaction: IncomingTransaction, date: Date): void;\n\n  /// Mark as invalid\n  markAsInvalid(txid: string, reason?: string): void;\n\n  // Clearance\n  /// Clear all (expire current session)\n  clearAll(): void;\n}\n\n// Implementation of LockAndMintServicePersistentStore, using UserDefaults as storage\nexport class LockAndMintServicePersistentStore implements LockAndMintServicePersistentStoreType {\n  // Key to store session in UserDefaults\n  private _userDefaultKeyForSession: string;\n  // Key to store gateway address in UserDefaults\n  private _userDefaultKeyForGatewayAddress: string;\n  // Key to store processingTransactions in UserDefaults\n  private _userDefaultKeyForProcessingTransactions: string;\n\n  // Flag to indicate whether show log or not\n  private _showLog: boolean;\n\n  constructor({\n    userDefaultKeyForSession,\n    userDefaultKeyForGatewayAddress,\n    userDefaultKeyForProcessingTransactions,\n    showLog,\n  }: {\n    userDefaultKeyForSession: string;\n    userDefaultKeyForGatewayAddress: string;\n    userDefaultKeyForProcessingTransactions: string;\n    showLog: boolean;\n  }) {\n    this._userDefaultKeyForSession = userDefaultKeyForSession;\n    this._userDefaultKeyForGatewayAddress = userDefaultKeyForGatewayAddress;\n    this._userDefaultKeyForProcessingTransactions = userDefaultKeyForProcessingTransactions;\n    this._showLog = showLog;\n  }\n\n  // Session\n\n  get session(): Session | null {\n    const data = this._getFromUserDefault<SessionJSONType | null>(this._userDefaultKeyForSession);\n    return data ? Session.fromJSON(data) : null;\n  }\n  saveSession(session: Session): void {\n    this._saveToUserDefault(session, this._userDefaultKeyForSession);\n  }\n\n  // Gateway address\n\n  get gatewayAddress(): string | null {\n    return this._getFromUserDefault(this._userDefaultKeyForGatewayAddress);\n  }\n  saveGatewayAddress(gatewayAddress: string): void {\n    this._saveToUserDefault(gatewayAddress, this._userDefaultKeyForGatewayAddress);\n  }\n\n  // Processing transactions\n\n  get processingTransactions(): ProcessingTx[] {\n    const data = this._getFromUserDefault<any | null>(\n      this._userDefaultKeyForProcessingTransactions,\n    );\n    return data ? plainToInstance(ProcessingTx, data) : [];\n  }\n\n  getProcessingTransactionByTxid(txid: string): ProcessingTx | null {\n    return this.processingTransactions.find((_tx) => _tx.tx.txid === txid) || null;\n  }\n\n  saveProcessingTransactions(txs: ProcessingTx[]): void {\n    this._saveToUserDefault(instanceToPlain(txs), this._userDefaultKeyForProcessingTransactions);\n  }\n\n  markAsProcessing(transaction: ProcessingTx): void {\n    this._save((current) => {\n      const index = current.findIndex((_tx) => _tx.tx.txid === transaction.tx.txid);\n      if (index === -1) {\n        return false;\n      }\n      current[index]!.isProcessing = true;\n      return true;\n    });\n\n    if (this._showLog) {\n      Logger.log(\n        `Transaction with id ${\n          transaction.tx.txid\n        }, vout: ${transaction.tx.vout.toString()}, isConfirmed: ${\n          transaction.tx.status.confirmed\n        }, value: ${transaction.tx.value.toString()} is being processed`,\n        LogEvent.request,\n      );\n    }\n  }\n\n  markAllTransactionsAsNotProcessing(): void {\n    this._save((current) => {\n      for (const tx of current) {\n        tx.isProcessing = false;\n      }\n      return true;\n    });\n\n    if (this._showLog) {\n      Logger.log('All transactions has been removed from queue', LogEvent.info);\n    }\n  }\n\n  markAsReceived(tx: IncomingTransaction, date: Date): void {\n    this._save((current) => {\n      const index = current.findIndex((_tx) => _tx.tx.txid === tx.txid);\n      if (index === -1) {\n        current.push(new ProcessingTx({ tx, receivedAt: date }));\n        return true;\n      }\n\n      if (tx.vout.eqn(3) && !current[index]!.threeVoteAt) {\n        current[index]!.threeVoteAt = date;\n      }\n      if (tx.vout.eqn(2) && !current[index]!.twoVoteAt) {\n        current[index]!.twoVoteAt = date;\n      }\n      if (tx.vout.eqn(1) && !current[index]!.oneVoteAt) {\n        current[index]!.oneVoteAt = date;\n      }\n      if (tx.vout.eqn(0) && !current[index]!.receivedAt) {\n        current[index]!.receivedAt = date;\n      }\n\n      return true;\n    });\n\n    if (this._showLog) {\n      Logger.log(\n        `Received transaction with id ${tx.txid}, vout: ${tx.vout.toString()}, isConfirmed: ${\n          tx.status.confirmed\n        }, value: ${tx.value.toString()}`,\n        LogEvent.event,\n      );\n    }\n  }\n\n  markAsConfirmed(tx: IncomingTransaction, date: Date): void {\n    this._save((current) => {\n      const index = current.findIndex((_tx) => _tx.tx.txid === tx.txid);\n      if (index === -1) {\n        current.push(new ProcessingTx({ tx, confirmedAt: date }));\n        return true;\n      }\n      current[index]!.confirmedAt = date;\n      return true;\n    });\n\n    if (this._showLog) {\n      Logger.log(\n        `Transaction with id ${\n          tx.txid\n        } has been confirmed, vout: ${tx.vout.toString()}, value: ${tx.value.toString()}`,\n        LogEvent.event,\n      );\n    }\n  }\n\n  markAsSubmitted(tx: IncomingTransaction, date: Date): void {\n    this._save((current) => {\n      const index = current.findIndex((_tx) => _tx.tx.txid === tx.txid);\n      if (index === -1) {\n        current.push(new ProcessingTx({ tx, submittedAt: date }));\n        return true;\n      }\n      current[index]!.submittedAt = date;\n      return true;\n    });\n\n    if (this._showLog) {\n      Logger.log(\n        `Transaction with id ${tx.txid} has been submited, value: ${tx.value.toString()}`,\n        LogEvent.event,\n      );\n    }\n  }\n\n  markAsMinted(tx: IncomingTransaction, date: Date): void {\n    this._save((current) => {\n      const index = current.findIndex((_tx) => _tx.tx.txid === tx.txid);\n      if (index === -1) {\n        current.push(new ProcessingTx({ tx, mintedAt: date }));\n        return true;\n      }\n      current[index]!.mintedAt = date;\n      return true;\n    });\n\n    if (this._showLog) {\n      Logger.log(\n        `Transaction with id ${tx.txid} has been minted, value: ${tx.value.toString()}`,\n        LogEvent.event,\n      );\n    }\n  }\n\n  markAsInvalid(txid: string, reason?: string): void {\n    this._save((current) => {\n      const index = current.findIndex((_tx) => _tx.tx.txid === txid);\n      if (index === -1) {\n        return false;\n      }\n      current[index]!.validationStatus = ValidationStatus.invalid(reason);\n      return true;\n    });\n\n    if (this._showLog) {\n      Logger.log(\n        `Transaction with id ${txid} is invalid, reason: ${reason ?? 'null'}`,\n        LogEvent.event,\n      );\n    }\n  }\n\n  clearAll(): void {\n    this._clearFromUserDefault(this._userDefaultKeyForSession);\n    this._clearFromUserDefault(this._userDefaultKeyForGatewayAddress);\n    this._clearFromUserDefault(this._userDefaultKeyForProcessingTransactions);\n  }\n\n  // Private\n\n  private _getFromUserDefault<T>(key: string): T | null {\n    try {\n      const data = localStorage.getItem(key);\n      const session: T = JSON.parse(data!);\n      if (!data || !session) {\n        return null;\n      }\n      return session;\n    } catch {\n      return null;\n    }\n  }\n\n  private _saveToUserDefault<T>(value: T, key: string): void {\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n\n  private _clearFromUserDefault(key: string): void {\n    localStorage.removeItem(key);\n  }\n\n  private _save(modify: (current: ProcessingTx[]) => boolean): void {\n    const current: ProcessingTx[] = this.processingTransactions || [];\n    const shouldSave = modify(current);\n    if (shouldSave) {\n      this.saveProcessingTransactions(current);\n    }\n  }\n}\n","import { injectable } from 'tsyringe';\n\nimport { BurnAndReleasePersistentStore, keyForSubmitedBurnTransaction } from 'new/sdk/RenVM';\n\n@injectable()\nexport class BurnAndReleasePersistentStoreService extends BurnAndReleasePersistentStore {\n  constructor() {\n    super({\n      userDefaultKeyForSubmitedBurnTransactions: keyForSubmitedBurnTransaction,\n    });\n  }\n}\n","import { injectable } from 'tsyringe';\n\nimport { Network, RpcClient as RpcClientOriginal } from 'new/sdk/RenVM';\n\nimport { Defaults } from '../Defaults';\n\n@injectable()\nexport class RpcClient extends RpcClientOriginal {\n  constructor() {\n    super({\n      network: Defaults.apiEndpoint.network === 'mainnet-beta' ? Network.mainnet : Network.testnet,\n    });\n  }\n}\n","import { injectable } from 'tsyringe';\n\nimport type { ChainProvider, RenVMChainType } from 'new/sdk/RenVM';\nimport { SolanaChain } from 'new/sdk/RenVM';\nimport { RpcClient } from 'new/services/RenVM/RpcClient';\nimport { SolanaService } from 'new/services/SolanaService';\n\n// TODO: apiClient and blockchainClient\n@injectable()\nexport class RenVMSolanaChainProvider implements ChainProvider {\n  constructor(private _rpcClient: RpcClient, private _apiClient: SolanaService) {}\n\n  // Get authorized account from chain\n  getAccount(): Promise<Uint8Array> {\n    return Promise.resolve(this._apiClient.provider.wallet.publicKey.toBytes());\n  }\n\n  // Load chain\n  async load(): Promise<RenVMChainType> {\n    return SolanaChain.load({\n      client: this._rpcClient,\n      apiClient: this._apiClient,\n    });\n  }\n}\n","import { injectable } from 'tsyringe';\n\nimport { BurnAndReleaseServiceImpl, DestinationChain } from 'new/sdk/RenVM';\nimport { BurnAndReleasePersistentStoreService } from 'new/services/RenVM/BurnAndReleaseServicePersistentStore';\nimport { RenVMSolanaChainProvider } from 'new/services/RenVM/RenVMSolanaChainProvider';\nimport { RpcClient } from 'new/services/RenVM/RpcClient';\n\n@injectable()\nexport class BurnAndReleaseService extends BurnAndReleaseServiceImpl {\n  constructor(\n    rpcClient: RpcClient,\n    chainProvider: RenVMSolanaChainProvider,\n    persistentStore: BurnAndReleasePersistentStoreService,\n  ) {\n    super({\n      rpcClient,\n      chainProvider,\n      destinationChain: DestinationChain.bitcoin,\n      persistentStore,\n      version: '1',\n    });\n  }\n}\n","export const isDev = process.env.NODE_ENV === 'development' || process.env.NODE_ENV === 'test';\n\nexport const localMnemonic = process.env.REACT_APP_APP_LOCAL_WALLET_MNEMONIC;\n\nexport const appStorePath = 'https://testflight.apple.com/join/hxaQVX0E';\nexport const playStorePath = 'https://play.google.com/store/apps/details?id=org.p2p.wallet';\n","import { NotifyToast } from 'new/ui/components/common/NotifyToast';\nimport type { TransferParams } from 'new/ui/components/common/NotifyToast/NotifyToast';\nimport type { RendererParams } from 'new/ui/managers/NotificationManager';\n\nexport const getMintNotificationRenderer =\n  (params: TransferParams) =>\n  ({ onClose }: RendererParams) => {\n    return <NotifyToast type=\"mint\" onClose={onClose} {...params} />;\n  };\n","import { injectable } from 'tsyringe';\n\nimport { isDev } from 'config/constants';\nimport {\n  keyForGatewayAddress,\n  keyForProcessingTransactions,\n  keyForSession,\n  LockAndMintServicePersistentStore as LockAndMintServicePersistentStoreOriginal,\n} from 'new/sdk/RenVM';\n\n@injectable()\nexport class LockAndMintServicePersistentStore extends LockAndMintServicePersistentStoreOriginal {\n  constructor() {\n    super({\n      userDefaultKeyForSession: keyForSession,\n      userDefaultKeyForGatewayAddress: keyForGatewayAddress,\n      userDefaultKeyForProcessingTransactions: keyForProcessingTransactions,\n      showLog: isDev,\n    });\n  }\n}\n","import { singleton } from 'tsyringe';\n\nimport { isDev } from 'config/constants';\nimport { LockAndMintServiceImpl, MintToken } from 'new/sdk/RenVM';\nimport { NotificationService } from 'new/services/NotificationService';\nimport { RpcClient } from 'new/services/RenVM/RpcClient';\nimport { notifyTransactionIsWaitingForMint } from 'new/services/RenVM/utils/notifyTransactionIsWaitingForMint';\n\nimport { LockAndMintServicePersistentStore } from './LockAndMintServicePersistentStore';\nimport { RenVMSolanaChainProvider } from './RenVMSolanaChainProvider';\n\n@singleton()\nexport class LockAndMintService extends LockAndMintServiceImpl {\n  constructor(\n    persistentStore: LockAndMintServicePersistentStore,\n    chainProvider: RenVMSolanaChainProvider,\n    rpcClient: RpcClient,\n    private _notificationService: NotificationService,\n  ) {\n    super({\n      persistentStore,\n      chainProvider,\n      rpcClient,\n      mintToken: MintToken.bitcoin,\n      showLog: isDev,\n      txSubmittedCallback: (tx) => {\n        notifyTransactionIsWaitingForMint(tx, this._notificationService);\n      },\n    });\n  }\n}\n","import type { ProcessingTx } from 'new/sdk/RenVM';\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport type { NotificationService } from 'new/services/NotificationService';\nimport { getMintNotificationRenderer } from 'new/ui/notifications/mintNotificationRenderer';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nexport const notifyTransactionIsWaitingForMint = (\n  tx: ProcessingTx,\n  notificationService: Readonly<NotificationService>,\n): void => {\n  if (!tx) {\n    return;\n  }\n\n  const txAmountStr = numberToString(convertToBalance(tx.tx.value, 8), {\n    maximumFractionDigits: 8,\n  });\n\n  // is submitted and waiting for minting\n  if (!tx.mintedAt && tx.submittedAt) {\n    notificationService.show(\n      getMintNotificationRenderer({\n        header: 'Awaiting the signature on your wallet',\n        text: `Mint ${txAmountStr} BTC`,\n        status: 'warning',\n      }),\n    );\n\n    return;\n  }\n};\n","import { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { SolanaModel } from 'new/models/SolanaModel';\nimport { BurnAndReleaseService, LockAndMintService } from 'new/services/RenVM';\nimport { WalletsRepository } from 'new/services/Repositories';\n\n@singleton()\nexport class MainViewModel extends ViewModel {\n  constructor(\n    public walletsRepository: WalletsRepository,\n    private _solanaModel: SolanaModel,\n    private _burnAndRelease: BurnAndReleaseService,\n    private _lockAndMint: LockAndMintService,\n  ) {\n    super();\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {\n    this._solanaModel.initialize();\n    this.walletsRepository.initialize();\n    this._burnAndRelease.resume();\n    void this._lockAndMint.resume();\n  }\n\n  protected override afterReactionsRemoved() {\n    this._solanaModel.end();\n    this.walletsRepository.end();\n  }\n}\n","import type { FC } from 'react';\nimport React, { useLayoutEffect } from 'react';\n\nimport { observer } from 'mobx-react-lite';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\n\nimport { MainViewModel } from './Main.ViewModel';\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nexport const Main: FC<Props> = observer(({ children }) => {\n  const viewModel = useViewModel<MainViewModel>(MainViewModel);\n\n  useLayoutEffect(() => {\n    viewModel.walletsRepository.reload();\n  }, [viewModel.walletsRepository]);\n\n  return <>{children}</>;\n});\n","import type { FunctionComponent } from 'react';\nimport { forwardRef, Fragment } from 'react';\nimport * as React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport { styled } from '@linaria/react';\nimport { theme, useIsTablet } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\nimport { Widget } from 'new/ui/components/common/Widget';\n\nconst TitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst BackLink = styled(NavLink)`\n  display: flex;\n  align-items: center;\n\n  text-decoration: none;\n`;\n\nconst IconWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n`;\n\nexport const IconStyled = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.secondary};\n\n  &.back {\n    width: 24px;\n    height: 24px;\n\n    transform: rotate(90deg);\n  }\n`;\n\nexport const Title = styled.div`\n  margin-left: 8px;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 24px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  &.previous,\n  &.notLast {\n    color: ${theme.colors.textIcon.secondary};\n    font-weight: normal;\n  }\n`;\n\ntype Props = {\n  forwardedRef?: React.Ref<HTMLDivElement>;\n  icon?: string;\n  title: string | string[];\n  backTo?: string;\n  action?: React.ReactNode;\n  children?: React.ReactNode;\n  className?: string;\n};\n\nconst WidgetPageOriginal: FunctionComponent<Props> = ({\n  forwardedRef,\n  icon,\n  title,\n  backTo,\n  action,\n  children,\n  className,\n  ...props\n}) => {\n  const isTable = useIsTablet();\n\n  const renderTitle = () => {\n    if (!isTable) {\n      return null;\n    }\n\n    if (Array.isArray(title)) {\n      return (\n        <TitleWrapper>\n          {title.map((t, i) => {\n            const first = i === 0;\n            const previous = title.length - 2 === i;\n            const notLast = title.length - 1 !== i;\n\n            if (first) {\n              return (\n                <Fragment key={t}>\n                  <BackLink to={backTo}>\n                    <IconStyled name=\"chevron\" className=\"back\" />\n                    <Title key={t} className={classNames({ notLast })}>\n                      {t}\n                    </Title>\n                  </BackLink>\n                  {notLast ? <Title className={classNames({ notLast })}>/</Title> : undefined}\n                </Fragment>\n              );\n            }\n\n            return (\n              <Fragment key={t}>\n                <Title className={classNames({ notLast })}>{t}</Title>\n                {notLast ? <Title className={classNames({ previous })}>/</Title> : undefined}\n              </Fragment>\n            );\n          })}\n        </TitleWrapper>\n      );\n    }\n\n    return (\n      <TitleWrapper>\n        {icon ? (\n          <IconWrapper>\n            <IconStyled name={icon} />\n          </IconWrapper>\n        ) : undefined}\n        <Title>{title}</Title>\n      </TitleWrapper>\n    );\n  };\n\n  return (\n    <Widget\n      ref={forwardedRef}\n      title={renderTitle()}\n      action={action}\n      className={className}\n      {...props}\n    >\n      {children}\n    </Widget>\n  );\n};\n\nexport const WidgetPage = forwardRef<HTMLDivElement, Props>(\n  (props, ref: React.Ref<HTMLDivElement>) => <WidgetPageOriginal {...props} forwardedRef={ref} />,\n);\n","// Amount of time remaining until gateway expires\n// We remove 1 day from the ren-tx expiry to reflect the extra mint\n// submission leeway\n// FIXME: once ren-tx takes the two stages into account, fix this\n\n// TODO: in iOS code there is no operation described above. Do we need it?\nexport const getRemainingGatewayTime = (expiryTime: number): number =>\n  Math.ceil(expiryTime - 24 * 60 * 60 * 1000 - Number(new Date()));\n\nconst millisecondsToHMS = (milliseconds: number) => {\n  const seconds = Math.floor((milliseconds / 1000) % 60);\n  const minutes = Math.floor((milliseconds / 1000 / 60) % 60);\n  // take absolute hours as they may be greater than 24\n  const hours = Math.floor(milliseconds / (1000 * 60 * 60));\n  return { hours, minutes, seconds };\n};\n\nconst pad = (value: number) => {\n  return String(value).padStart(2, '0');\n};\n\nexport const getFormattedHMS = (milliseconds: number) => {\n  const { hours, minutes, seconds } = millisecondsToHMS(milliseconds);\n  return `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;\n};\n","import type { u64 } from '@solana/spl-token';\nimport { action, makeObservable, observable, reaction, runInAction } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport type { LockAndMintServiceDelegate, ProcessingTx } from 'new/sdk/RenVM';\nimport { LockAndMintService, LockAndMintServicePersistentStore } from 'new/services/RenVM';\n\nimport { getFormattedHMS } from './utils';\n\n@singleton()\nexport class ReceiveBitcoinViewModel extends ViewModel implements LockAndMintServiceDelegate {\n  isLoading = false;\n  timer?: NodeJS.Timer;\n  address?: string | null;\n  secondsPassed = -1;\n  processingTxs: ProcessingTx[] = []; // @web: processingTransactions\n  sessionEndDate: Date | null = null;\n  remainingTime = '35:59:59';\n  fee: u64 | null = null;\n  isFetchingFee = false;\n\n  constructor(\n    private _lockAndMintService: LockAndMintService,\n    private _persistentStore: LockAndMintServicePersistentStore,\n  ) {\n    super();\n\n    makeObservable(this, {\n      isLoading: observable,\n      address: observable,\n      secondsPassed: observable,\n      processingTxs: observable,\n      sessionEndDate: observable,\n      remainingTime: observable,\n      fee: observable,\n      isFetchingFee: observable,\n\n      lockAndMintServiceWillStartLoading: action,\n      lockAndMintServiceLoaded: action,\n      lockAndMintServiceWithError: action,\n      lockAndMintServiceUpdated: action,\n    });\n  }\n\n  protected override setDefaults() {\n    this.isLoading = false;\n    this.timer = undefined;\n    this.address = null;\n    this.secondsPassed = -1;\n    this.processingTxs = [];\n\n    this.sessionEndDate = null;\n\n    this.remainingTime = '35:59:59';\n  }\n\n  protected override onInitialize() {\n    this._bind();\n  }\n\n  protected override afterReactionsRemoved() {\n    clearInterval(this.timer);\n  }\n\n  async acceptConditionAndLoadAddress(): Promise<void> {\n    const session = this._persistentStore.session;\n    if (!session?.isValid) {\n      await this._lockAndMintService.createSession();\n    } else {\n      this._updateSessionEndDate();\n    }\n  }\n\n  private _bind(): void {\n    // update remainingTime\n    this.addReaction(\n      reaction(\n        () => this.secondsPassed,\n        () => {\n          const endAt = this.sessionEndDate;\n          if (!endAt) {\n            return '35:59:59';\n          }\n\n          const millisecondsRemains = endAt.getTime() - Date.now();\n\n          this.remainingTime = getFormattedHMS(millisecondsRemains);\n        },\n      ),\n    );\n\n    // timer\n    this.timer = setInterval(() => this._checkSessionEnd(), 1_000);\n    this._checkSessionEnd();\n\n    // listen to lockAndMintService\n    this._lockAndMintService.delegate = this;\n\n    if (this._lockAndMintService.isLoading) {\n      runInAction(() => {\n        this.isLoading = true;\n      });\n    }\n\n    runInAction(() => {\n      this.address = this._persistentStore.gatewayAddress;\n\n      const endAt = this._persistentStore.session?.endAt ?? null;\n      this.sessionEndDate = endAt;\n    });\n\n    // set fee\n    runInAction(() => (this.isFetchingFee = true));\n    void this._lockAndMintService\n      .getFee()\n      .then(\n        action((feeAmount) => {\n          this.fee = feeAmount;\n          this.isFetchingFee = false;\n        }),\n      )\n      .catch(action(() => (this.isFetchingFee = false)));\n  }\n\n  private _updateSessionEndDate(): void {\n    const endAt = this._persistentStore.session?.endAt ?? null;\n\n    runInAction(() => {\n      this.sessionEndDate = endAt;\n    });\n  }\n\n  private _checkSessionEnd(): void {\n    const endAt = this._persistentStore.session?.endAt;\n    if (!endAt) {\n      return;\n    }\n\n    if (Date.now() >= endAt.getTime()) {\n      clearInterval(this.timer);\n\n      this._lockAndMintService.expireCurrentSession();\n    } else {\n      runInAction(() => {\n        this.secondsPassed++;\n      });\n    }\n  }\n\n  // Delegated methods\n\n  lockAndMintServiceWillStartLoading(): void {\n    this.isLoading = true;\n  }\n\n  /// Loaded\n  lockAndMintServiceLoaded(gatewayAddress: string): void {\n    this.address = gatewayAddress;\n\n    this._updateSessionEndDate();\n  }\n\n  /// Stop loading with error\n  lockAndMintServiceWithError(): void {\n    this.sessionEndDate = null;\n  }\n\n  /// Transactions updated\n  lockAndMintServiceUpdated(processingTransactions: ProcessingTx[]): void {\n    this.processingTxs = processingTransactions;\n  }\n}\n","import { action, makeObservable, observable } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { ReceiveBitcoinViewModel } from 'new/scenes/Main/Receive/ReceiveToken/Bitcoin/ReceiveBitcoin.ViewModel';\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\nimport type { ModalPromise } from 'new/services/ModalService';\nimport { ModalService, ModalType } from 'new/services/ModalService';\nimport { TokensRepository, WalletsRepository } from 'new/services/Repositories';\nimport { SolanaService } from 'new/services/SolanaService';\n\nexport type TokenTypeName = 'solana' | 'btc';\n\nexport class TokenType {\n  type: TokenTypeName;\n\n  constructor(type: TokenTypeName) {\n    this.type = type;\n  }\n\n  static get solana(): TokenType {\n    return new TokenType('solana');\n  }\n\n  static get btc(): TokenType {\n    return new TokenType('btc');\n  }\n\n  get name(): string {\n    switch (this.type) {\n      case 'solana':\n        return 'Solana';\n      case 'btc':\n        return 'Bitcoin';\n    }\n  }\n\n  get mint(): string {\n    switch (this.type) {\n      case 'solana':\n        return SolanaSDKPublicKey.wrappedSOLMint.toBase58();\n      case 'btc':\n        return SolanaSDKPublicKey.renBTCMint.toBase58();\n    }\n  }\n\n  isSolana(): boolean {\n    return this.type === 'solana';\n  }\n}\n\n@singleton()\nexport class ReceiveViewModel extends ViewModel {\n  solanaToken?: Token;\n  btcToken?: Token;\n\n  tokenType = TokenType.solana;\n\n  constructor(\n    private _walletsRepository: WalletsRepository,\n    private _solanaSDK: SolanaService,\n    private _tokensRepository: TokensRepository,\n    private _modalService: ModalService,\n    private _receiveBitcoinViewModel: ReceiveBitcoinViewModel,\n  ) {\n    super();\n\n    makeObservable(this, {\n      tokenType: observable,\n      solanaToken: observable,\n      btcToken: observable,\n\n      switchTokenType: action,\n    });\n\n    void this._tokensRepository\n      .getTokenWithMint(TokenType.solana.mint)\n      .then(action((token) => (this.solanaToken = token)));\n\n    void this._tokensRepository\n      .getTokenWithMint(TokenType.btc.mint)\n      .then(action((token) => (this.btcToken = token)));\n  }\n\n  protected override setDefaults() {\n    this.tokenType = TokenType.solana;\n  }\n\n  protected override onInitialize() {}\n\n  protected override afterReactionsRemoved() {}\n\n  isRenBtcCreated(): boolean {\n    return this._walletsRepository.getWallets().some((wallet) => wallet.token.isRenBTC);\n  }\n\n  switchTokenType(tokenType: TokenType): void {\n    this.tokenType = tokenType;\n    if (tokenType.type === 'btc') {\n      void this._receiveBitcoinViewModel.acceptConditionAndLoadAddress();\n    }\n  }\n\n  openReceiveBitcoinModal<T>(): ModalPromise<T> {\n    return this._modalService.openModal<T, any>(ModalType.SHOW_MODAL_RECEIVE_BITCOIN);\n  }\n}\n","import type { FunctionComponent } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { Loader } from '../Loader';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 86px;\n`;\n\ntype Props = {\n  size?: string;\n  className?: string;\n};\n\nexport const LoaderBlock: FunctionComponent<Props> = ({ size, className }) => {\n  return (\n    <Wrapper className={className}>\n      <Loader size={size} />\n    </Wrapper>\n  );\n};\n","import { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { NotificationService } from 'new/services/NotificationService';\nimport { copyToClipboardImage, copyToClipboardString } from 'new/utils/Clipboard';\n\n@singleton()\nexport class UserNamedAddressWidgetViewModel extends ViewModel {\n  constructor(private _notificationService: NotificationService) {\n    super();\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {}\n\n  protected override afterReactionsRemoved() {}\n\n  copyString(value: string, text: string): void {\n    void copyToClipboardString(\n      value,\n      () => this._notificationService.info(`${text} copied!`),\n      (_: Error) => this._notificationService.error(`Can't copy ${text} to clipboard`),\n    );\n  }\n\n  copyQRCode(qrElement: HTMLCanvasElement): void {\n    void copyToClipboardImage(\n      qrElement,\n      () => this._notificationService.info('QR Code copied!'),\n      (_: Error) => this._notificationService.error(`Can't copy QR Code to clipboard`),\n    );\n  }\n}\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { borders, shadows, theme, up, useIsMobile, useIsTablet } from '@p2p-wallet-web/ui';\nimport QRCode from 'qrcode.react';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport Logo from 'new/ui/assets/images/logo.png';\nimport { AddressText } from 'new/ui/components/common/AddressText';\nimport { UserNamedAddressWidgetViewModel } from 'new/ui/components/common/UsernameAddressWidget/UserNamedAddressWidget.ViewModel';\nimport { Button } from 'new/ui/components/ui/Button';\nimport { isImageCopyAvailable } from 'new/utils/Clipboard';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-gap: 16px;\n`;\n\nconst UsernameAddressWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  grid-gap: 8px;\n  align-items: center;\n  padding: 24px 16px 16px;\n\n  text-align: center;\n\n  border-radius: 12px;\n  ${borders.primary}\n  ${shadows.card};\n\n  ${up.tablet} {\n    flex-direction: row;\n    padding: 16px 30px 16px 16px;\n\n    text-align: left;\n  }\n`;\n\nconst QRCodeWrapper = styled.div`\n  padding: 15px;\n`;\n\nconst AddressWrapper = styled.div`\n  ${up.tablet} {\n    display: grid;\n    grid-gap: 16px;\n  }\n`;\n\nconst AddressTextStyled = styled(AddressText)`\n  padding: 12px 26px;\n\n  ${up.tablet} {\n    padding: 0;\n  }\n`;\n\nconst Username = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 140%;\n`;\n\nconst LogoImg = styled.img`\n  width: auto;\n  height: 30px;\n`;\n\nconst ButtonsWrapper = styled.div`\n  display: grid;\n  grid-auto-flow: dense;\n  grid-gap: 8px;\n\n  ${up.tablet} {\n    grid-auto-flow: column;\n  }\n`;\n\nconst QR_CODE_SIZE_MOBILE = 237;\nconst QR_CODE_SIZE = 122;\n\ntype Props = {\n  address: string;\n  username?: string;\n};\n\nexport const UsernameAddressWidget: FC<Props> = ({ address, username }) => {\n  const viewModel = useViewModel(UserNamedAddressWidgetViewModel);\n  const isMobile = useIsMobile();\n  const isTablet = useIsTablet();\n\n  const handleImageCopyClick = () => {\n    const qrElement = document.querySelector<HTMLCanvasElement>('#qrcode');\n    if (!qrElement) {\n      return;\n    }\n\n    viewModel.copyQRCode(qrElement);\n  };\n\n  return (\n    <Wrapper>\n      <UsernameAddressWrapper>\n        {isMobile && username ? <Username>{username}</Username> : undefined}\n        <QRCodeWrapper>\n          <QRCode\n            id=\"qrcode\"\n            value={address}\n            size={isMobile ? QR_CODE_SIZE_MOBILE : QR_CODE_SIZE}\n          />\n        </QRCodeWrapper>\n        <AddressWrapper>\n          {isTablet && username ? <Username>{username}</Username> : undefined}\n          <AddressTextStyled address={address} small />\n          {isTablet ? <LogoImg src={Logo} /> : undefined}\n        </AddressWrapper>\n      </UsernameAddressWrapper>\n      <ButtonsWrapper>\n        {username ? (\n          <Button\n            small={!isMobile}\n            medium={isMobile}\n            hollow\n            onClick={() => viewModel.copyString(username, 'Username')}\n          >\n            Copy username\n          </Button>\n        ) : undefined}\n        <Button\n          small={!isMobile}\n          medium={isMobile}\n          hollow\n          onClick={() => viewModel.copyString(address, 'Address')}\n        >\n          Copy address\n        </Button>\n        {isImageCopyAvailable ? (\n          <Button small={!isMobile} medium={isMobile} hollow onClick={handleImageCopyClick}>\n            Copy QR code\n          </Button>\n        ) : null}\n      </ButtonsWrapper>\n    </Wrapper>\n  );\n};\n","import { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\n\nexport const Content = styled.div`\n  display: grid;\n  grid-gap: 16px;\n  padding: 16px 20px;\n\n  ${up.tablet} {\n    padding: 16px 36px;\n  }\n\n  &.noTopPadding {\n    padding-top: 0;\n  }\n`;\n\nexport const ExplorerA = styled.a`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  height: 48px;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n\n  &.disabled {\n    pointer-events: none;\n  }\n`;\n\nexport const BottomWrapper = styled.div`\n  display: flex;\n\n  justify-content: center;\n  padding: 15px 20px;\n\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 140%;\n\n  border-top: 1px solid #f6f6f8;\n`;\n\nexport const ShareIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n  margin-right: 8px;\n\n  color: ${theme.colors.textIcon.secondary};\n`;\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nconst Wrapper = styled.div`\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n  position: relative;\n\n  width: 20px;\n  height: 20px;\n  margin: 0 auto;\n  overflow: hidden;\n\n  border-radius: 50%;\n\n  animation: spin 1s linear infinite;\n\n  &::after {\n    position: absolute;\n\n    top: 50%;\n    left: 50%;\n\n    width: 80%;\n    height: 80%;\n\n    background: #fff;\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n\n    content: '';\n  }\n`;\n\nconst Inner = styled.div`\n  position: absolute;\n\n  width: 100%;\n  height: 50%;\n  margin-top: 50%;\n\n  background: linear-gradient(90deg, #5987ff, #d3dffe);\n\n  &::before {\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    width: 100%;\n    height: 100%;\n    margin-top: -50%;\n\n    background: linear-gradient(90deg, #f9fafe, #d3dffe);\n\n    content: '';\n  }\n`;\n\ninterface Props {\n  size?: string;\n}\n\nexport const Loader: FC<Props> = ({ size, ...props }) => {\n  return (\n    <Wrapper style={{ width: size && `${size}px`, height: size && `${size}px` }} {...props}>\n      <Inner />\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { borders, theme } from '@p2p-wallet-web/ui';\nimport { u64 } from '@solana/spl-token';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { Loader } from 'components/common/Loader';\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport type { ReceiveBitcoinViewModel } from '../ReceiveBitcoin.ViewModel';\n\nconst Wrapper = styled.div`\n  padding: 16px;\n\n  color: ${theme.colors.textIcon.primary};\n  font-size: 14px;\n  line-height: 160%;\n  letter-spacing: 0.01em;\n\n  background: ${theme.colors.bg.app};\n  border-radius: 12px;\n  ${borders.primaryRGBA}\n`;\n\nconst List = styled.ul`\n  display: grid;\n  grid-gap: 16px;\n  margin: 0;\n  padding-left: 20px;\n`;\n\nconst Row = styled.li`\n  list-style: disc;\n`;\n\nconst MinimumTxAmount = styled.div`\n  display: inline-flex;\n`;\n\ninterface Props {\n  viewModel: Readonly<ReceiveBitcoinViewModel>;\n}\n\nexport const Hint: FC<Props> = observer(({ viewModel }) => {\n  const minTransactionValue = expr(() =>\n    !viewModel.fee\n      ? '0.000112'\n      : numberToString(convertToBalance(viewModel.fee.mul(new u64(2)), 8), {\n          maximumFractionDigits: 8,\n        }),\n  );\n\n  return (\n    <Wrapper>\n      <List>\n        <Row>\n          This address accepts <strong>only Bitcoin</strong>. You may lose assets by sending another\n          coin.\n        </Row>\n        <Row>\n          <MinimumTxAmount>\n            Minimum transaction amount of&nbsp;\n            {viewModel.isFetchingFee ? (\n              <Loader />\n            ) : (\n              <>\n                <strong>{`${minTransactionValue} BTC`}</strong>.\n              </>\n            )}\n          </MinimumTxAmount>\n        </Row>\n        <Row>\n          <strong>{viewModel.remainingTime}</strong> is the remaining time to safely send the\n          assets.\n        </Row>\n      </List>\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\nimport { useState } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n\n  border: 1px solid ${theme.colors.stroke.secondary};\n  border-radius: 12px;\n`;\n\nconst TitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n\n  padding: 12px 20px;\n\n  cursor: pointer;\n\n  &.isOpen {\n    border-bottom: 1px solid ${theme.colors.stroke.secondary};\n  }\n`;\n\nconst Title = styled.div`\n  display: flex;\n  flex: 1;\n  align-content: space-between;\n\n  font-weight: 600;\n  font-size: 16px;\n`;\n\nconst Left = styled.div`\n  display: flex;\n  flex-grow: 1;\n`;\n\nconst Right = styled.div`\n  margin-right: 12px;\n`;\n\nconst ChevronIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.secondary};\n\n  &.isOpen {\n    transform: rotate(180deg);\n  }\n`;\n\nconst Content = styled.div`\n  &:not(.noContentPadding) {\n    padding: 16px 20px;\n  }\n`;\n\ntype Props = {\n  title: string | React.ReactNode;\n  right?: string | React.ReactNode;\n  open?: boolean;\n  hideRightIfOpen?: boolean;\n  noContentPadding?: boolean;\n  onToggle?: (isOpen: boolean) => void;\n  className?: string;\n};\n\nexport const Accordion: FC<Props> = ({\n  title,\n  right,\n  open = false,\n  hideRightIfOpen,\n  noContentPadding,\n  onToggle,\n  children,\n  className,\n}) => {\n  const [isOpen, setIsOpen] = useState(open);\n\n  const handleToggle = () => {\n    setIsOpen(!isOpen);\n\n    if (onToggle) {\n      onToggle(!isOpen);\n    }\n  };\n\n  return (\n    <Wrapper className={className}>\n      <TitleWrapper onClick={handleToggle} className={classNames({ isOpen })}>\n        <Title>\n          <Left>{title}</Left>\n          {right ? hideRightIfOpen && isOpen ? undefined : <Right>{right}</Right> : undefined}\n        </Title>\n        <ChevronIcon name=\"chevron\" className={classNames({ isOpen })} />\n      </TitleWrapper>\n      {isOpen ? (\n        <Content className={classNames({ noContentPadding })}>{children}</Content>\n      ) : undefined}\n    </Wrapper>\n  );\n};\n","import type { FC, ReactElement } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nconst AccordionTitleWrapper = styled.div`\n  display: grid;\n  grid-gap: 4px;\n\n  font-weight: 500;\n  letter-spacing: 0.01em;\n`;\n\nconst AccordionTitlePrimary = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-size: 16px;\n  line-height: 140%;\n`;\n\nconst AccordionTitleSecondary = styled.div`\n  display: flex;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-size: 14px;\n  line-height: 120%;\n`;\n\nconst AccordionTitleSecondaryValue = styled.div`\n  margin-left: 4px;\n\n  color: ${theme.colors.textIcon.primary};\n`;\n\nconst titleBottomNameEl = (\n  titleBottomName: string | ReactElement,\n  titleBottomValue?: string | ReactElement,\n) => (\n  <>\n    {titleBottomName}\n    {titleBottomValue ? ':' : null}\n  </>\n);\n\nconst titleBottomValueEl = (titleBottomValue?: string | ReactElement) =>\n  titleBottomValue ? (\n    <AccordionTitleSecondaryValue>{titleBottomValue}</AccordionTitleSecondaryValue>\n  ) : null;\n\ninterface Props {\n  title: string | ReactElement;\n  titleBottomName: string | ReactElement;\n  titleBottomValue?: string | ReactElement;\n}\n\nexport const AccordionTitle: FC<Props> = ({ title, titleBottomName, titleBottomValue }) => {\n  return (\n    <AccordionTitleWrapper>\n      <AccordionTitlePrimary>{title}</AccordionTitlePrimary>\n      <AccordionTitleSecondary>\n        {titleBottomNameEl(titleBottomName, titleBottomValue)}\n        {titleBottomValueEl(titleBottomValue)}\n      </AccordionTitleSecondary>\n    </AccordionTitleWrapper>\n  );\n};\n","import { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nexport const ListWrapper = styled.div`\n  display: grid;\n  grid-gap: 8px;\n  padding: 20px;\n\n  &.slim {\n    padding: 16px 20px;\n  }\n\n  &.flat {\n    padding: 0 20px;\n  }\n\n  &.total {\n    padding: 23px 20px;\n  }\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ${theme.colors.stroke.secondary};\n  }\n`;\n\nexport const AccordionList = styled.div`\n  display: grid;\n  grid-gap: 4px;\n  padding: 16px 20px;\n\n  &.total {\n    padding: 26px 20px;\n  }\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ${theme.colors.stroke.secondary};\n  }\n`;\n\nexport const Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nexport const Text = styled.div`\n  display: inline-block;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  &.inline-flex {\n    display: inline-flex;\n  }\n\n  &.flex-end {\n    justify-content: flex-end;\n  }\n\n  &.nowrap {\n    white-space: nowrap;\n  }\n\n  &.right {\n    text-align: right;\n  }\n\n  &.big {\n    font-weight: 700;\n  }\n\n  &.grid {\n    display: grid;\n    flex-shrink: 0;\n  }\n\n  &.contentVerticalCenter {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n\n  &.gray {\n    color: ${theme.colors.textIcon.secondary};\n  }\n\n  &.green {\n    color: ${theme.colors.system.successMain};\n  }\n`;\n","import type { FC, ReactElement } from 'react';\n\nimport { Accordion } from '../Accordion';\nimport { AccordionTitle } from './AccordionTitle';\nimport { ListWrapper, Row, Text } from './common';\n\ntype AccordionRowValueElement = {\n  className?: string;\n  value: React.ReactNode;\n};\n\ntype AccordionRowValue = React.ReactNode | (React.ReactNode | AccordionRowValueElement)[];\n\ntype AccordionRow = {\n  id: number;\n  title: string | ReactElement;\n  value: AccordionRowValue;\n  titleClassName?: string;\n  valueClassName?: string;\n};\n\nexport type AccordionItem = {\n  id: number | string;\n  className?: string;\n  rows: AccordionRow[];\n};\n\nexport type AccordionList = AccordionItem[];\n\ninterface Props {\n  title: string | ReactElement;\n  titleBottomName: string | ReactElement;\n  titleBottomValue?: string;\n  accordion: AccordionList;\n}\n\nexport const AccordionDetails: FC<Props> = ({ accordion, ...props }) => {\n  return (\n    <Accordion title={<AccordionTitle {...props} />} noContentPadding>\n      {accordion.map((list) => (\n        <ListWrapper key={list.id} className={list.className}>\n          {list.rows.map((row) => (\n            <Row key={row.id}>\n              <Text className={row.titleClassName}>{row.title}</Text>\n              <Text className={row.valueClassName}>\n                {Array.isArray(row.value)\n                  ? row.value.map((el) =>\n                      (el as AccordionRowValueElement).value ? (\n                        <Text className={(el as AccordionRowValueElement).className}>\n                          {(el as AccordionRowValueElement).value}\n                        </Text>\n                      ) : (\n                        el\n                      ),\n                    )\n                  : row.value}\n              </Text>\n            </Row>\n          ))}\n        </ListWrapper>\n      ))}\n    </Accordion>\n  );\n};\n","import { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nexport const Title = styled.div`\n  display: grid;\n  grid-gap: 4px;\n\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n`;\n\nexport const Label = styled.div``;\n\nexport const Description = styled.div`\n  color: ${theme.colors.textIcon.secondary};\n\n  font-size: 14px;\n  line-height: 140%;\n\n  &.green {\n    color: ${theme.colors.system.successMain};\n  }\n`;\n\nexport const Value = styled.div`\n  font-weight: 700;\n  text-align: end;\n\n  &.green {\n    color: ${theme.colors.system.successMain};\n  }\n\n  &.red {\n    color: ${theme.colors.system.errorMain};\n  }\n`;\n","import { ZERO } from '@orca-so/sdk';\nimport type { u64 } from '@solana/spl-token';\n\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nexport enum Status {\n  waitingForConfirmation = 'waitingForConfirmation',\n  confirmed = 'confirmed',\n  submitted = 'submitted',\n  minted = 'minted',\n}\n\nexport class Record {\n  txid: string;\n  status: Status;\n  time: Date;\n  vout?: u64;\n  amount?: u64;\n\n  constructor({\n    txid,\n    status,\n    time,\n    vout,\n    amount,\n  }: {\n    txid: string;\n    status: Status;\n    time: Date;\n    vout?: u64;\n    amount?: u64;\n  }) {\n    this.txid = txid;\n    this.status = status;\n    this.time = time;\n    this.vout = vout;\n    this.amount = amount;\n  }\n\n  get stringValue(): string {\n    switch (this.status) {\n      case Status.waitingForConfirmation:\n        return 'Waiting for deposit confirmation';\n      case Status.confirmed:\n        return 'Submitting to RenVM';\n      case Status.submitted:\n        return 'Minting';\n      case Status.minted:\n        return `Successfully minted ${numberToString(convertToBalance(this.amount ?? ZERO, 8), {\n          maximumFractionDigits: 9,\n        })} renBTC!`;\n    }\n  }\n}\n","import type { ReactElement } from 'react';\n\nimport { ZERO } from '@orca-so/sdk';\nimport type { u64 } from '@solana/spl-token';\nimport classNames from 'classnames';\n\nimport { ProcessingTx } from 'new/sdk/RenVM';\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport type { AccordionItem, AccordionList } from 'new/ui/components/ui/AccordionDetails';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport { Description, Label, Title, Value } from '../common/styled';\nimport type { Record } from '../Record';\nimport { Status } from '../Record';\n\nexport const prepareAccordionList = (records: Record[]): AccordionList => {\n  const renderValue = (record: Record): ReactElement | null => {\n    let text;\n    let className = 'black';\n\n    let vout: u64;\n    let max: u64;\n\n    switch (record.status) {\n      case Status.waitingForConfirmation:\n        vout = record.vout ?? ZERO;\n        max = ProcessingTx.maxVote;\n\n        text = `${vout}/${max}`;\n\n        if (vout.eqn(0)) {\n          className = 'red';\n        } else if (vout === max) {\n          className = 'green';\n        }\n        break;\n      case Status.minted:\n        text = `+ ${numberToString(convertToBalance(record.amount ?? ZERO, 8), {\n          maximumFractionDigits: 9,\n        })} renBTC`;\n        className = 'green';\n        break;\n    }\n\n    if (text) {\n      return <Value className={classNames({ [className]: true })}>{text}</Value>;\n    }\n\n    return null;\n  };\n\n  return records.map<AccordionItem>((record) => {\n    const item: AccordionItem = {\n      id: `${record.txid}${record.status}`,\n      className: 'slim',\n      rows: [\n        {\n          id: 1,\n          title: (\n            <Title>\n              <Label>{record.stringValue}</Label>\n              <Description>\n                {new Date(record.time).toLocaleString('en-US', {\n                  month: 'long',\n                  year: 'numeric',\n                  day: 'numeric',\n                  hour: 'numeric',\n                  minute: 'numeric',\n                })}\n              </Description>\n            </Title>\n          ),\n          value: renderValue(record),\n          valueClassName: 'contentVerticalCenter',\n        },\n      ],\n    };\n\n    return item;\n  });\n};\n","import type { FC } from 'react';\nimport { useMemo } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nimport type { ProcessingTx } from 'new/sdk/RenVM';\nimport type { AccordionList } from 'new/ui/components/ui/AccordionDetails';\nimport { AccordionDetails } from 'new/ui/components/ui/AccordionDetails';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport { Description } from './common/styled';\nimport type { Record } from './Record';\nimport { prepareAccordionList } from './utils/prepareAccordionList';\nimport { prepareRecords } from './utils/prepareRecords';\n\nconst Wrapper = styled.div`\n  &:not(:last-child) {\n    margin-bottom: 16px;\n  }\n`;\n\ntype Props = {\n  processingTx: ProcessingTx;\n};\n\nexport const Cell: FC<Props> = ({ processingTx }) => {\n  const title = `${numberToString(processingTx.value, {\n    maximumFractionDigits: 9,\n  })} renBTC`;\n\n  const titleBottomName = (\n    <Description className={classNames({ green: processingTx.mintedAt })}>\n      {processingTx.statusString}\n    </Description>\n  );\n\n  const records = useMemo<Record[]>(() => prepareRecords(processingTx), [processingTx]);\n\n  const accordionList = useMemo<AccordionList>(() => prepareAccordionList(records), [records]);\n\n  return (\n    <Wrapper>\n      <AccordionDetails title={title} titleBottomName={titleBottomName} accordion={accordionList} />\n    </Wrapper>\n  );\n};\n","import { u64 } from '@solana/spl-token';\n\nimport type { ProcessingTx } from 'new/sdk/RenVM';\n\nimport { Record, Status } from '../Record';\n\nexport const prepareRecords = (processingTx: ProcessingTx): Record[] => {\n  const records: Record[] = [];\n  if (processingTx.mintedAt) {\n    records.push(\n      new Record({\n        txid: processingTx.tx.txid,\n        status: Status.minted,\n        time: processingTx.mintedAt,\n        amount: processingTx.tx.value,\n      }),\n    );\n  }\n  if (processingTx.submittedAt) {\n    records.push(\n      new Record({\n        txid: processingTx.tx.txid,\n        status: Status.submitted,\n        time: processingTx.submittedAt,\n      }),\n    );\n  }\n  if (processingTx.confirmedAt) {\n    records.push(\n      new Record({\n        txid: processingTx.tx.txid,\n        status: Status.confirmed,\n        time: processingTx.confirmedAt,\n      }),\n    );\n  }\n  if (processingTx.threeVoteAt) {\n    records.push(\n      new Record({\n        txid: processingTx.tx.txid,\n        status: Status.waitingForConfirmation,\n        time: processingTx.threeVoteAt,\n        vout: new u64(3),\n      }),\n    );\n  }\n  if (processingTx.twoVoteAt) {\n    records.push(\n      new Record({\n        txid: processingTx.tx.txid,\n        status: Status.waitingForConfirmation,\n        time: processingTx.twoVoteAt,\n        vout: new u64(2),\n      }),\n    );\n  }\n  if (processingTx.oneVoteAt) {\n    records.push(\n      new Record({\n        txid: processingTx.tx.txid,\n        status: Status.waitingForConfirmation,\n        time: processingTx.oneVoteAt,\n        vout: new u64(1),\n      }),\n    );\n  }\n  if (processingTx.receivedAt) {\n    records.push(\n      new Record({\n        txid: processingTx.tx.txid,\n        status: Status.waitingForConfirmation,\n        time: processingTx.receivedAt,\n        vout: new u64(0),\n      }),\n    );\n  }\n\n  records.sort((rc1, rc2) => {\n    if (rc1.time === rc2.time) {\n      return (rc2.vout ?? new u64(Number.MAX_SAFE_INTEGER))\n        .sub(rc1.vout ?? new u64(Number.MAX_SAFE_INTEGER))\n        .toNumber();\n    } else {\n      return rc2.time.getTime() - rc1.time.getTime();\n    }\n  });\n\n  return records;\n};\n","import type { FC } from 'react';\n\nimport { observer } from 'mobx-react-lite';\n\nimport type { ProcessingTx } from 'new/sdk/RenVM';\nimport { StaticSectionsCollectionView } from 'new/ui/components/common/StaticSectionsCollectionView';\n\nimport type { RenBTCReceivingStatusesViewModel } from '../RenBTCReceivingStatuses.ViewModel';\nimport { Cell } from './Cell';\n\ninterface Props {\n  viewModel: Readonly<RenBTCReceivingStatusesViewModel>;\n}\n\nexport const CollectionView: FC<Props> = observer(({ viewModel }) => {\n  return (\n    <StaticSectionsCollectionView<ProcessingTx>\n      viewModel={viewModel}\n      renderItem={(processingTx) => <Cell key={processingTx.tx.txid} processingTx={processingTx} />}\n    />\n  );\n});\n","import { action, reaction, runInAction } from 'mobx';\nimport { delay, inject, injectable } from 'tsyringe';\n\nimport { SDListViewModel } from 'new/core/viewmodels/SDListViewModel';\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport type { ProcessingTx } from 'new/sdk/RenVM';\n\nimport { ReceiveBitcoinViewModel } from '../ReceiveBitcoin.ViewModel';\n\n@injectable()\nexport class RenBTCReceivingStatusesViewModel extends SDListViewModel<ProcessingTx> {\n  override state = SDFetcherState.loaded;\n\n  constructor(\n    @inject(delay(() => ReceiveBitcoinViewModel))\n    private _receiveBitcoinViewModel: Readonly<ReceiveBitcoinViewModel>,\n  ) {\n    super();\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {\n    this._bind();\n  }\n\n  protected override afterReactionsRemoved() {}\n\n  private _bind(): void {\n    this.addReaction(\n      reaction(\n        () => this._receiveBitcoinViewModel.processingTxs,\n        action((processingTxs) => {\n          this.data = processingTxs.reverse();\n        }),\n      ),\n    );\n\n    runInAction(() => {\n      this.data = this._receiveBitcoinViewModel.processingTxs.reverse();\n    });\n  }\n\n  override reload() {\n    // do nothing\n  }\n\n  override fetchNext() {\n    // do nothing\n  }\n}\n","import type { FC } from 'react';\n\nimport { observer } from 'mobx-react-lite';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { Accordion } from 'new/ui/components/ui/Accordion';\n\nimport { CollectionView } from './CollectionView';\nimport { RenBTCReceivingStatusesViewModel } from './RenBTCReceivingStatuses.ViewModel';\n\nexport const RenBTCReceivingStatuses: FC = observer(() => {\n  const viewModel = useViewModel(RenBTCReceivingStatusesViewModel);\n\n  return (\n    <Accordion title={'Receiving statuses'} open>\n      <CollectionView viewModel={viewModel} />\n    </Accordion>\n  );\n});\n","import type { FC } from 'react';\n\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { LoaderBlock } from 'new/ui/components/common/LoaderBlock';\nimport { UsernameAddressWidget } from 'new/ui/components/common/UsernameAddressWidget';\n\nimport { BottomWrapper, Content, ExplorerA, ShareIcon } from '../common/styled';\nimport { Hint } from './Hint';\nimport { ReceiveBitcoinViewModel } from './ReceiveBitcoin.ViewModel';\nimport { RenBTCReceivingStatuses } from './RenBTCReceivingStatuses';\n\nexport const ReceiveBitcoin: FC = observer(() => {\n  const viewModel = useViewModel(ReceiveBitcoinViewModel);\n\n  if (!viewModel.address) {\n    return <LoaderBlock />;\n  }\n\n  const showReceivingStatuses = viewModel.processingTxs.length;\n\n  return (\n    <>\n      <Content className=\"noTopPadding\">\n        {viewModel.address ? <UsernameAddressWidget address={viewModel.address} /> : null}\n        <Hint viewModel={viewModel} />\n        {showReceivingStatuses ? <RenBTCReceivingStatuses /> : null}\n      </Content>\n      <BottomWrapper>\n        <ExplorerA\n          href={`https://btc.com/btc/address/${viewModel.address}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer noindex\"\n          className={classNames({ button: true, disabled: !viewModel.address })}\n        >\n          <ShareIcon name=\"external\" />\n          View in Bitcoin explorer\n        </ExplorerA>\n      </BottomWrapper>\n    </>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme, useIsMobile } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { Select, SelectItem } from 'new/ui/components/common/Select';\nimport { TokenAvatar } from 'new/ui/components/common/TokenAvatar';\nimport { getAvatarSize } from 'new/utils/common';\n\nimport type { ReceiveViewModel, TokenTypeName } from '../../Receive.ViewModel';\nimport { TokenType } from '../../Receive.ViewModel';\n\nconst InfoWrapper = styled.div`\n  margin-left: 12px;\n`;\n\nconst Line = styled.div`\n  line-height: 17px;\n`;\n\nconst Text = styled.div`\n  display: inline-block;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  &.bottom {\n    color: ${theme.colors.textIcon.primary};\n    font-size: 16px;\n  }\n\n  &::first-letter {\n    text-transform: uppercase;\n  }\n`;\n\nconst Network = styled.div`\n  margin-left: 12px;\n\n  &::first-letter {\n    text-transform: uppercase;\n  }\n`;\n\nconst TOKEN_TYPE_ITEMS = [TokenType.solana, TokenType.btc];\n\ntype Props = {\n  viewModel: ReceiveViewModel;\n};\n\nexport const NetworkSelect: FC<Props> = observer(({ viewModel }) => {\n  const isMobile = useIsMobile();\n\n  const title = 'Showing my address for';\n  const avatarSize = getAvatarSize(isMobile);\n\n  const getToken = (tokenType: TokenType): Token | undefined =>\n    tokenType.isSolana() ? viewModel.solanaToken : viewModel.btcToken;\n\n  const switchToken = (typeName: TokenTypeName): void => {\n    const newTokenType = new TokenType(typeName);\n\n    if (newTokenType.isSolana()) {\n      viewModel.switchTokenType(newTokenType);\n    } else {\n      if (viewModel.isRenBtcCreated()) {\n        viewModel.switchTokenType(newTokenType);\n      } else {\n        void viewModel.openReceiveBitcoinModal<boolean>().then((result) => {\n          if (result) {\n            viewModel.switchTokenType(newTokenType);\n          }\n        });\n      }\n    }\n  };\n\n  return (\n    <Select\n      mobileListTitle={title}\n      value={\n        <>\n          <TokenAvatar token={getToken(viewModel.tokenType)} size={44} />\n          <InfoWrapper>\n            <Line>\n              <Text>{title}</Text>\n            </Line>\n            <Line>\n              <Text className=\"bottom\">{viewModel.tokenType.name} network</Text>\n            </Line>\n          </InfoWrapper>\n        </>\n      }\n    >\n      {TOKEN_TYPE_ITEMS.map((tokenType) => (\n        <SelectItem\n          key={tokenType.type}\n          isSelected={tokenType.type === viewModel.tokenType.type}\n          onItemClick={() => switchToken(tokenType.type)}\n        >\n          <TokenAvatar token={getToken(tokenType)} size={avatarSize} />\n          <Network>{tokenType.name} network</Network>\n        </SelectItem>\n      ))}\n    </Select>\n  );\n});\n","// eslint-disable-next-line @typescript-eslint/no-magic-numbers\nexport const getAvatarSize = (isMobile: boolean) => (isMobile ? 32 : 44);\n","import { action, computed, makeObservable, observable } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { NameService } from 'new/services/NameService';\nimport { SolanaService } from 'new/services/SolanaService';\n\n@singleton()\nexport class ReceiveSolanaViewModel extends ViewModel {\n  username?: string;\n\n  constructor(private _solanaSDK: SolanaService, private _nameService: NameService) {\n    super();\n\n    makeObservable(this, {\n      username: observable,\n      pubkeyBase58: computed,\n    });\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {\n    void this._nameService\n      .getName(this.pubkeyBase58)\n      .then(action((name) => name && (this.username = name)));\n  }\n\n  protected override afterReactionsRemoved() {}\n\n  get pubkeyBase58(): string {\n    return this._solanaSDK.provider.wallet.publicKey.toBase58();\n  }\n}\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { UsernameAddressWidget } from 'new/ui/components/common/UsernameAddressWidget';\nimport { withNameServiceDomain } from 'new/utils/StringExtensions';\n\nimport { ReceiveSolanaViewModel } from './ReceiveSolana.ViewModel';\n\nconst Content = styled.div`\n  display: grid;\n  grid-gap: 16px;\n  padding: 16px 20px;\n\n  ${up.tablet} {\n    padding: 16px 36px;\n  }\n\n  &.noTopPadding {\n    padding-top: 0;\n  }\n`;\n\nconst ExplorerA = styled.a`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  height: 48px;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n`;\n\nconst BottomWrapper = styled.div`\n  display: flex;\n\n  justify-content: center;\n  padding: 15px 20px;\n\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 140%;\n\n  border-top: 1px solid #f6f6f8;\n`;\n\nconst ShareIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n  margin-right: 8px;\n\n  color: ${theme.colors.textIcon.secondary};\n`;\n\nexport const ReceiveSolana: FC = () => {\n  const viewModel = useViewModel(ReceiveSolanaViewModel);\n\n  return (\n    <>\n      <Content className=\"noTopPadding\">\n        <UsernameAddressWidget\n          address={viewModel.pubkeyBase58}\n          username={viewModel.username && withNameServiceDomain(viewModel.username)}\n        />\n      </Content>\n      <BottomWrapper>\n        <ExplorerA\n          href={`https://explorer.solana.com/address/${viewModel.pubkeyBase58}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer noindex\"\n          className=\"button\"\n        >\n          <ShareIcon name=\"external\" />\n          View in Solana explorer\n        </ExplorerA>\n      </BottomWrapper>\n    </>\n  );\n};\n","import type { FC } from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { Layout } from 'new/ui/components/common/Layout';\nimport { WidgetPage } from 'new/ui/components/common/WidgetPage';\n\nimport { ReceiveViewModel } from '../Receive.ViewModel';\nimport { ReceiveBitcoin } from './Bitcoin';\nimport { Content } from './common/styled';\nimport { NetworkSelect } from './NetworkSelect';\nimport { ReceiveSolana } from './Solana';\n\nconst WhatTokensCanIReceiveLink = styled(NavLink)`\n  color: ${theme.colors.textIcon.active};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n  text-align: center;\n  text-decoration: none;\n`;\n\nexport const ReceiveToken: FC = observer(() => {\n  const viewModel = useViewModel(ReceiveViewModel);\n\n  const isTokenListAvailable = viewModel.tokenType.isSolana();\n\n  const renderSourceNetworkReceivePanel = () => {\n    if (viewModel.tokenType.isSolana()) {\n      return <ReceiveSolana />;\n    } else {\n      return <ReceiveBitcoin />;\n    }\n  };\n\n  return (\n    <Layout>\n      <WidgetPage title=\"Receive\" icon=\"bottom\">\n        <Content>\n          <NetworkSelect viewModel={viewModel} />{' '}\n          {isTokenListAvailable ? (\n            <WhatTokensCanIReceiveLink to=\"/receive/tokens\">\n              What tokens can I receive?\n            </WhatTokensCanIReceiveLink>\n          ) : null}\n        </Content>\n\n        {renderSourceNetworkReceivePanel()}\n      </WidgetPage>\n    </Layout>\n  );\n});\n","import React, { useMemo, useRef } from 'react';\nimport { useVirtual } from 'react-virtual';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\nimport { nanoid } from 'nanoid';\n\nimport type { SDListViewModel } from 'new/core/viewmodels/SDListViewModel';\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport { SDCollectionViewItem } from 'new/ui/components/common/StaticSectionsCollectionView/models/SDCollectionViewItem';\n\nconst Wrapper = styled.div`\n  height: 100px;\n  overflow-y: auto;\n`;\n\nconst Container = styled.div``;\n\ninterface Props<T> {\n  viewModel: Readonly<SDListViewModel<T>>;\n  numberOfLoadingCells?: number;\n  renderPlaceholder: () => React.ReactNode;\n  renderItem: (item: T) => React.ReactNode;\n  renderEmpty?: () => React.ReactNode;\n  customFilter?: (item: T) => boolean;\n  transformer?: (items: T[]) => T[];\n  className?: string;\n}\n\n//TODO: make this component to be used instead of StaticSectionsCollectionView\nexport const StaticSectionsCollectionVirtualizedView = observer(\n  <T,>({\n    viewModel,\n    numberOfLoadingCells = 2,\n    renderPlaceholder,\n    renderItem,\n    renderEmpty,\n    customFilter,\n    transformer,\n    className,\n  }: Props<T>) => {\n    const parentRef = useRef<HTMLDivElement>(null);\n\n    const items = useMemo(\n      () =>\n        expr(() => {\n          let _items = viewModel.data;\n\n          if (customFilter) {\n            _items = _items.filter(customFilter);\n          }\n\n          if (transformer) {\n            _items = transformer(_items);\n          }\n\n          const collectionViewItems = _items.map(\n            (item) => new SDCollectionViewItem({ value: item }),\n          );\n          switch (viewModel.state) {\n            case SDFetcherState.initializing:\n            case SDFetcherState.loading:\n              for (let i = 0; i < numberOfLoadingCells; i++) {\n                collectionViewItems.push(new SDCollectionViewItem({ placeholderIndex: nanoid() }));\n              }\n              break;\n            case SDFetcherState.loaded:\n              if (collectionViewItems.length === 0 && renderEmpty) {\n                collectionViewItems.push(new SDCollectionViewItem({ emptyCellIndex: nanoid() }));\n              }\n              break;\n            case SDFetcherState.error:\n              break;\n          }\n          return collectionViewItems;\n        }),\n      [customFilter, numberOfLoadingCells, renderEmpty, viewModel.data, viewModel.state],\n    );\n\n    const rowVirtualizer = useVirtual({\n      paddingStart: 0,\n      paddingEnd: 8,\n      size: items.length,\n      parentRef: parentRef,\n      overscan: 6,\n    });\n\n    if (items.length === 0) {\n      return null;\n    }\n\n    const renderRow = (item: SDCollectionViewItem<T>) => {\n      if (!item.isEmptyCell) {\n        if (item.isPlaceholder) {\n          return renderPlaceholder();\n        }\n\n        return renderItem(item.value!);\n      }\n\n      if (item.isEmptyCell && renderEmpty) {\n        return renderEmpty();\n      }\n\n      return null;\n    };\n\n    return (\n      <Wrapper className={className} ref={parentRef}>\n        <Container\n          style={{\n            position: 'relative',\n            width: '100%',\n            height: rowVirtualizer.totalSize,\n          }}\n        >\n          {rowVirtualizer.virtualItems.map((virtualRow) => (\n            <div\n              ref={virtualRow.measureRef}\n              key={virtualRow.index}\n              style={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                width: '100%',\n                transform: `translateY(${virtualRow.start}px)`,\n              }}\n            >\n              {renderRow(items[virtualRow.index]!)}\n            </div>\n          ))}\n        </Container>\n      </Wrapper>\n    );\n  },\n);\n","import type { FC, HTMLAttributes } from 'react';\nimport * as React from 'react';\nimport { forwardRef } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 12px;\n  align-items: center;\n  padding: 20px;\n\n  color: ${theme.colors.system.errorMain};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  background: ${theme.colors.system.errorBg};\n  border: 1px solid ${theme.colors.system.errorMain};\n  border-radius: 12px;\n`;\n\nconst IconWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n\n  background: ${theme.colors.system.errorMain};\n  border-radius: 16px;\n`;\n\nconst RoundStopIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.buttonPrimary};\n`;\n\ninterface Props extends HTMLAttributes<HTMLDivElement> {\n  searchText: string;\n  key?: string;\n  forwardedRef?: React.Ref<HTMLDivElement>;\n}\n\nconst EmptyErrorOriginal: FC<Props> = ({ searchText, key, forwardedRef, ...props }) => {\n  return (\n    <Wrapper key={key} ref={forwardedRef} {...props}>\n      <div>\n        <IconWrapper>\n          <RoundStopIcon name=\"round-stop\" />\n        </IconWrapper>\n      </div>\n      <div>\n        If there is a token named \"{searchText}\", we don't recommend sending it to your Solana\n        address since it will most likely be lost forever.\n      </div>\n    </Wrapper>\n  );\n};\n\nexport const EmptyError = forwardRef<HTMLInputElement, Props>(\n  (props, ref: React.Ref<HTMLInputElement>) => <EmptyErrorOriginal {...props} forwardedRef={ref} />,\n);\n","import type { FC } from 'react';\nimport { forwardRef } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { borders, theme, up } from '@p2p-wallet-web/ui';\n\nconst Wrapper = styled.div`\n  margin-bottom: 8px;\n  padding: 16px 20px;\n\n  color: ${theme.colors.textIcon.primary};\n  font-size: 14px;\n  line-height: 160%;\n  letter-spacing: 0.01em;\n\n  background: ${theme.colors.bg.app};\n  border-radius: 12px;\n  ${borders.primaryRGBA}\n\n  ${up.tablet} {\n    margin-bottom: 0;\n  }\n`;\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  key?: string;\n  forwardedRef?: React.Ref<HTMLDivElement>;\n}\n\nconst HintOrigin: FC<Props> = ({ key, forwardedRef, style }) => {\n  return (\n    <Wrapper key={key} ref={forwardedRef} style={style}>\n      Each token in this list is available for receiving with this address; you can search for a\n      token by typing its name or ticker.\n      <br />\n      <br />\n      If a token is not on this list,{' '}\n      <strong>we do not recommend sending it to this address</strong>.\n    </Wrapper>\n  );\n};\n\nexport const Hint = forwardRef<HTMLDivElement, Props>((props, ref: React.Ref<HTMLDivElement>) => (\n  <HintOrigin {...props} forwardedRef={ref} />\n));\n","import type { FC, HTMLAttributes } from 'react';\nimport { forwardRef } from 'react';\nimport * as React from 'react';\nimport Skeleton from 'react-loading-skeleton';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { TokenAvatar } from 'new/ui/components/common/TokenAvatar';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 48px;\n  padding: 8px;\n\n  color: ${theme.colors.textIcon.primary};\n  line-height: 150%;\n  letter-spacing: 0.005em;\n  font-feature-settings: 'tnum' on, 'lnum' on;\n`;\n\nconst Name = styled.div`\n  flex: 1;\n  margin-left: 8px;\n\n  font-weight: 500;\n  font-size: 14px;\n`;\n\nconst Symbol = styled.div`\n  font-weight: bold;\n  font-size: 14px;\n`;\n\nconst AVATAR_SIZE = 32;\n\ninterface Props extends HTMLAttributes<HTMLDivElement> {\n  token?: Token;\n  isPlaceholder?: boolean;\n  forwardedRef?: React.Ref<HTMLDivElement>;\n}\n\nconst CellOrigin: FC<Props> = ({ forwardedRef, token, isPlaceholder, style }) => {\n  if (isPlaceholder) {\n    return (\n      <Wrapper>\n        <Skeleton height={AVATAR_SIZE} width={AVATAR_SIZE} borderRadius={12} />\n        <Name>\n          <Skeleton width={100} height={16} />\n        </Name>\n        <Symbol>\n          <Skeleton width={100} height={16} />\n        </Symbol>\n      </Wrapper>\n    );\n  }\n\n  const renderName = (token?: Token) => {\n    if (token?.symbol === 'SOL') {\n      return 'Solana';\n    }\n\n    return token?.name ?? '';\n  };\n\n  return (\n    <Wrapper ref={forwardedRef} style={style}>\n      <TokenAvatar token={token} size={AVATAR_SIZE} />\n      <Name>{renderName(token)}</Name>\n      <Symbol>{token?.symbol}</Symbol>\n    </Wrapper>\n  );\n};\n\nexport const Cell = forwardRef<HTMLDivElement, Props>((props, ref) => (\n  <CellOrigin {...props} forwardedRef={ref} />\n));\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { up, useIsMobile } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { Token } from 'new/sdk/SolanaSDK';\nimport { StaticSectionsCollectionVirtualizedView } from 'new/ui/components/common/StaticSectionsCollectionVitualizedView';\n\nimport { EmptyError } from '../common/EmptyError';\nimport { Hint } from '../common/Hint';\nimport type { SupportedTokensViewModel } from '../SupportedTokens.ViewModel';\nimport { Cell } from './Cell';\n\nconst StaticSectionsCollectionVirtualizedViewStyled = styled(\n  StaticSectionsCollectionVirtualizedView,\n)`\n  height: 600px;\n  overflow-y: auto;\n\n  ${up.tablet} {\n    height: 300px;\n  }\n`;\n\nexport type TokenOrStringType = Token | string;\n\ninterface Props {\n  viewModel: Readonly<SupportedTokensViewModel>;\n}\n\nexport const CollectionView: FC<Props> = observer(({ viewModel }) => {\n  const isMobile = useIsMobile();\n\n  const renderItem = (token: TokenOrStringType) => {\n    if (token instanceof Token) {\n      return <Cell token={token} />;\n    }\n\n    if (token === 'hint') {\n      return <Hint />;\n    }\n  };\n\n  const renderEmpty = isMobile ? () => <EmptyError searchText={viewModel.keyword} /> : undefined;\n\n  const transformer = isMobile ? (tokens: TokenOrStringType[]) => ['hint', ...tokens] : undefined;\n\n  return (\n    <StaticSectionsCollectionVirtualizedViewStyled<TokenOrStringType>\n      viewModel={viewModel}\n      renderPlaceholder={() => <Cell isPlaceholder />}\n      renderItem={renderItem}\n      renderEmpty={renderEmpty}\n      transformer={transformer}\n    />\n  );\n});\n","import { action, flow, makeObservable, observable } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { SDListViewModel } from 'new/core/viewmodels/SDListViewModel';\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { excludingSpecialTokens } from 'new/sdk/SolanaSDK';\nimport { TokensRepository } from 'new/services/Repositories';\n\n@singleton()\nexport class SupportedTokensViewModel extends SDListViewModel<Token> {\n  keyword = '';\n\n  constructor(private _tokensRepository: TokensRepository) {\n    super();\n\n    makeObservable(this, {\n      keyword: observable,\n\n      search: action,\n    });\n  }\n\n  protected override setDefaults() {\n    this.keyword = '';\n  }\n\n  protected override onInitialize() {\n    this.reload();\n  }\n\n  protected override afterReactionsRemoved() {\n    this.requestDisposable?.cancel();\n    this.data = [];\n  }\n\n  override createRequest = flow<Token[], []>(function* (\n    this: SupportedTokensViewModel,\n  ): Generator<Promise<Token[]>> {\n    const existingSymbols = new Set<string>();\n\n    return yield this._tokensRepository\n      .getTokensList()\n      .then((tokens) => excludingSpecialTokens(tokens))\n      .then((tokens) =>\n        tokens.filter((token) => {\n          const include = !existingSymbols.has(token.symbol);\n          if (include) {\n            existingSymbols.add(token.symbol);\n          }\n          return include;\n        }),\n      );\n  });\n\n  override map(newData: Token[]): Token[] {\n    let data = super.map(newData).sort((firstToken, secondToken) => {\n      const firstTokenPriority = getTokenPriority(firstToken);\n      const secondTokenPriority = getTokenPriority(secondToken);\n\n      if (firstTokenPriority === secondTokenPriority) {\n        return firstToken.name < secondToken.name\n          ? -1\n          : firstToken.name === secondToken.name\n          ? 0\n          : 1;\n      } else {\n        return firstTokenPriority > secondTokenPriority\n          ? -1\n          : firstTokenPriority === secondTokenPriority\n          ? 0\n          : 1;\n      }\n    });\n\n    const keyword = this.keyword;\n    if (keyword) {\n      data = data.filter((wallet) => hasKeyword(wallet, keyword));\n    }\n    return data;\n  }\n\n  search(keyword: string): void {\n    if (this.keyword === keyword) {\n      return;\n    }\n    this.keyword = keyword;\n    this.reload();\n  }\n}\n\nconst getTokenPriority = (token: Token): number => {\n  switch (token.symbol) {\n    case 'SOL':\n      return Number.MAX_SAFE_INTEGER;\n    case 'USDC':\n      return Number.MAX_SAFE_INTEGER - 1;\n    case 'BTC':\n      return Number.MAX_SAFE_INTEGER - 2;\n    case 'USDT':\n      return Number.MAX_SAFE_INTEGER - 3;\n    case 'ETH':\n      return Number.MAX_SAFE_INTEGER - 4;\n    default:\n      return 0;\n  }\n};\n\nconst hasKeyword = (token: Token, keyword: string): boolean => {\n  return (\n    token.symbol.toLowerCase().includes(keyword.toLowerCase()) ||\n    token.name.toLowerCase().includes(keyword.toLowerCase())\n  );\n};\n","import type { FC } from 'react';\n\nimport { useIsTablet } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { Layout } from 'new/ui/components/common/Layout';\nimport { WidgetPage } from 'new/ui/components/common/WidgetPage';\nimport { SearchInput } from 'new/ui/components/ui/SearchInput';\n\nimport { Content } from '../ReceiveToken/common/styled';\nimport { CollectionView } from './CollectionView';\nimport { EmptyError } from './common/EmptyError';\nimport { Hint } from './common/Hint';\nimport { SupportedTokensViewModel } from './SupportedTokens.ViewModel';\n\nexport const SupportedTokens: FC = observer(() => {\n  const isTablet = useIsTablet();\n  const viewModel = useViewModel(SupportedTokensViewModel);\n\n  return (\n    <Layout>\n      <WidgetPage title={['Receive', 'List of available tokens']} backTo=\"/receive\">\n        <Content>\n          <SearchInput\n            placeholder=\"Search for a token\"\n            onChange={(value) => viewModel.search(value)}\n          />\n          {isTablet ? <Hint /> : undefined}\n          {isTablet && viewModel.keyword && viewModel.data.length === 0 ? (\n            <EmptyError searchText={viewModel.keyword} />\n          ) : undefined}\n\n          <CollectionView viewModel={viewModel} />\n        </Content>\n      </WidgetPage>\n    </Layout>\n  );\n});\n","import type { FC } from 'react';\nimport { Route, useRouteMatch } from 'react-router';\nimport { Switch } from 'react-router-dom';\n\nimport { ReceiveToken } from './ReceiveToken';\nimport { SupportedTokens } from './SupportedTokens';\n\nexport const Receive: FC = () => {\n  const match = useRouteMatch();\n\n  return (\n    <Switch>\n      <Route path={`${match.path}/tokens`}>\n        <SupportedTokens />\n      </Route>\n      <Route path={match.path} exact>\n        <ReceiveToken />\n      </Route>\n    </Switch>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { ZERO } from '@orca-so/sdk';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport type { FeeInfo } from 'new/scenes/Main/Send';\nimport { Network } from 'new/scenes/Main/Send';\nimport type { Token, Wallet } from 'new/sdk/SolanaSDK';\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { TokenAvatar } from 'new/ui/components/common/TokenAvatar';\nimport { numberToString } from 'new/utils/NumberExtensions';\nimport { capitalizeFirstLetter } from 'new/utils/StringExtensions';\n\nconst Content = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: center;\n  margin-left: 12px;\n`;\n\nconst InfoWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst FirstLineWrapper = styled.div`\n  color: ${theme.colors.textIcon.primary};\n\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n\n  .isSelected & {\n    font-weight: 700;\n  }\n`;\n\nconst SecondLineWrapper = styled.div`\n  display: grid;\n  grid-template-columns: max-content 1fr;\n`;\n\nconst FeeLabel = styled.div`\n  color: ${theme.colors.textIcon.secondary};\n\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 140%;\n`;\n\nconst FeeValue = styled.div`\n  margin-left: 4px;\n\n  color: ${theme.colors.textIcon.primary};\n\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 140%;\n\n  &.green {\n    color: ${theme.colors.system.successMain};\n\n    font-weight: 700;\n  }\n`;\n\ntype Props = {\n  network: Network;\n  token?: Token;\n  payingWallet: Wallet | null;\n  feeInfo: FeeInfo | null;\n};\n\nexport const NetworkView: FC<Props> = observer(({ network, token, payingWallet, feeInfo }) => {\n  // FIXME: remove when Bitcoin fee calculation is known\n  let feeValueElement;\n  if (network === Network.bitcoin) {\n    feeValueElement = <FeeValue>0.0002 renBTC + 0.0002 SOL</FeeValue>;\n  } else {\n    feeValueElement = <FeeValue className=\"green\">$0</FeeValue>;\n  }\n\n  return (\n    <>\n      <TokenAvatar token={token} size={44} />\n      <Content>\n        <InfoWrapper>\n          <FirstLineWrapper>{capitalizeFirstLetter(network)} network</FirstLineWrapper>\n          <SecondLineWrapper>\n            <FeeLabel>Fee:</FeeLabel>\n            {feeValueElement}\n          </SecondLineWrapper>\n        </InfoWrapper>\n      </Content>\n    </>\n  );\n});\n\nconst feeValueEl = ({\n  feeInfo,\n  wallet,\n  separator = ' + ',\n}: {\n  feeInfo: FeeInfo | null;\n  wallet: Wallet | null;\n  separator?: string;\n}) => {\n  // if empty\n  if (\n    feeInfo?.feeAmount.transaction.eq(ZERO) &&\n    (!feeInfo.feeAmount.others || !feeInfo.feeAmount.others.length)\n  ) {\n    return <FeeValue className=\"green\">{Defaults.fiat.symbol}0</FeeValue>;\n  }\n\n  // total (in SOL)\n  const totalFeeInSOL = convertToBalance(feeInfo?.feeAmount.transaction ?? ZERO, 9);\n\n  const fees = `${numberToString(totalFeeInSOL, {\n    maximumFractionDigits: wallet?.token.decimals || 9,\n  })} ${wallet?.token.symbol ?? ''}`;\n\n  const otherFees =\n    feeInfo?.feeAmount.others?.reduce((acc, otherFee) => {\n      acc += `${separator}${numberToString(otherFee.amount, { maximumFractionDigits: 9 })} ${\n        otherFee.unit\n      }`;\n      return acc;\n    }, '') ?? null;\n\n  return <FeeValue>{fees + otherFees}</FeeValue>;\n};\n","import type { FC } from 'react';\nimport { useLayoutEffect, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { Network } from 'new/scenes/Main/Send';\nimport type { NetworkSelectViewModelType } from 'new/scenes/Main/Send/NetworkSelect/NetworkSelect.ViewModel';\nimport { NetworkView } from 'new/scenes/Main/Send/NetworkSelect/NetworkView';\nimport type * as FeeRelayer from 'new/sdk/FeeRelayer';\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { Select, SelectItem } from 'new/ui/components/common/Select';\n\nconst CautionWrapper = styled.div`\n  margin: 0 12px;\n  padding: 18px;\n\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 160%;\n\n  background-color: ${theme.colors.bg.special};\n\n  border-radius: 12px;\n\n  ${up.tablet} {\n    margin: 0;\n\n    font-size: 14px;\n  }\n`;\n\nconst NotificationWrapper = styled.div`\n  margin: 0 12px;\n  padding: 16px 20px;\n\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 160%;\n\n  background-color: ${theme.colors.system.successBg};\n\n  border: 1px solid ${theme.colors.system.successMain};\n  border-radius: 12px;\n\n  ${up.tablet} {\n    margin: 0;\n\n    font-size: 14px;\n  }\n`;\n\nconst cautionEl = () => {\n  return (\n    <CautionWrapper>\n      P2P Wallet will automatically match your withdrawal target address to the correct network for\n      most withdrawals.\n      <br />\n      <br />\n      However, before sending your funds, make sure to double-check the selected network.\n    </CautionWrapper>\n  );\n};\n\nconst notificationEl = (usageStatus: FeeRelayer.UsageStatus | null) => {\n  if (!usageStatus) {\n    return null;\n  }\n\n  let notification;\n\n  if (usageStatus.currentUsage < usageStatus.maxUsage) {\n    notification = `On the Solana network, the first ${usageStatus.maxUsage} transactions in a day are\n        paid by P2P.org. Subsequent transactions will be charged based on the Solana blockchain gas\n        fee.`;\n  } else {\n    notification = `Your ${usageStatus.maxUsage} free transactions have been used up. You will have to pay \n        the network fee for subsequent transactions or wait until tomorrow when the counter resets.`;\n  }\n\n  return <NotificationWrapper key=\"notification\">{notification}</NotificationWrapper>;\n};\n\ntype Props = {\n  viewModel: Readonly<NetworkSelectViewModelType>;\n};\n\nexport const NetworkSelect: FC<Props> = observer(({ viewModel }) => {\n  const [usageStatus, setUsageStatus] = useState<FeeRelayer.UsageStatus | null>(null);\n\n  useLayoutEffect(() => {\n    void viewModel.getFreeTransactionFeeLimit().then(setUsageStatus);\n  }, []);\n\n  const getTokenByNetwork = (network: Network): Token | undefined => {\n    let wallet;\n\n    if (network === Network.solana) {\n      wallet = viewModel.walletsRepository.nativeWallet;\n    } else {\n      wallet = viewModel.walletsRepository\n        .getWallets()\n        .find((wallet) => wallet.token.symbol === 'renBTC');\n    }\n\n    return wallet?.token;\n  };\n\n  return (\n    <Select\n      mobileListTitle=\"Choose the network\"\n      value={\n        <NetworkView\n          network={viewModel.network}\n          token={getTokenByNetwork(viewModel.network)}\n          payingWallet={viewModel.payingWallet}\n          feeInfo={viewModel.feeInfo.value}\n        />\n      }\n    >\n      {cautionEl()}\n\n      {viewModel.getSelectableNetworks\n        .map((network) => [\n          <SelectItem\n            key={network}\n            isSelected={viewModel.network === network}\n            onItemClick={() => viewModel.selectNetwork(network)}\n          >\n            <NetworkView\n              network={network}\n              token={getTokenByNetwork(network)}\n              payingWallet={viewModel.payingWallet}\n              feeInfo={viewModel.feeInfo.value}\n            />\n          </SelectItem>,\n          network === Network.solana ? notificationEl(usageStatus) : null,\n        ])\n        .flat()}\n    </Select>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\n\nimport { Button, Icon } from 'components/ui';\nimport type { SendViewModel } from 'new/scenes/Main/Send';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nconst SendIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n  margin-right: 12px;\n`;\n\ninterface Props {\n  viewModel: Readonly<SendViewModel>;\n}\n\nexport const ActionButton: FC<Props> = observer(({ viewModel }) => {\n  const isDisabled = Boolean(viewModel.error);\n\n  const handleClick = () => {\n    void viewModel.openConfirmModal();\n  };\n\n  return (\n    <Button primary full disabled={isDisabled} onClick={handleClick}>\n      {viewModel.error?.buttonSuggestion ?? (\n        <>\n          <SendIcon name=\"top\" />\n          {`Send ${numberToString(viewModel.amount, {\n            maximumFractionDigits: 9,\n          })} ${viewModel.wallet?.token.symbol ?? ''}`}\n        </>\n      )}\n    </Button>\n  );\n});\n","import type { FC } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { useUpdateEffect } from 'react-use';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nconst WrapperLabel = styled.label`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: flex-end;\n\n  /* Fix outer \"margin\" */\n  min-width: 0;\n`;\n\nconst textCss = `\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 600;\n  font-size: 28px;\n  line-height: 120%;\n`;\n\nconst Prefix = styled.div`\n  margin-right: 8px;\n\n  ${textCss}\n\n  &.isText {\n    margin-right: 4px;\n  }\n`;\n\nconst Input = styled.input`\n  /* Fix outer \"margin\" */\n  min-width: 0;\n  padding: 0;\n\n  text-align: right;\n\n  background: transparent;\n  border: 0;\n\n  outline: none;\n\n  appearance: none;\n\n  ${textCss}\n\n  &::placeholder {\n    color: ${theme.colors.textIcon.secondary};\n  }\n\n  &.error {\n    color: ${theme.colors.system.errorMain};\n  }\n`;\n\nfunction toFixed(amount: string, decimals?: number): string {\n  if (!decimals) {\n    return amount;\n  }\n\n  if (amount.includes('.') && amount.split('.')[1]!.length > decimals) {\n    return Number(amount).toFixed(decimals);\n  }\n\n  return amount;\n}\n\nconst DECIMAL_ONLY = /^\\d*(\\.\\d*)?$/;\n\ninterface Props\n  extends Omit<\n    React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>,\n    'prefix' | 'decimals' | 'onChange'\n  > {\n  prefix?: React.ReactNode;\n  decimals?: number;\n  onChange?: (val: string) => void;\n}\n\nexport const InputAmount: FC<Props> = ({\n  prefix,\n  placeholder = '0',\n  value = '',\n  decimals,\n  onChange,\n  ...props\n}) => {\n  const [localValue, setLocalValue] = useState(value);\n\n  useUpdateEffect(() => {\n    if (Number(value) !== Number(localValue)) {\n      setLocalValue(value);\n    }\n  }, [value]);\n\n  // react to decimals change and notify parent with fixed value\n  // useUpdateEffect(() => {\n  //   if (onChange) {\n  //     const _value = toFixed(String(value), decimals);\n  //     onChange(_value);\n  //   }\n  // }, [decimals]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    let nextValue = e.target.value.replace(/^0(\\d+)/, '$1');\n\n    if (nextValue === '.') {\n      nextValue = '0.';\n    }\n\n    nextValue = toFixed(nextValue, decimals);\n\n    if ((!Number.isNaN(nextValue) && DECIMAL_ONLY.test(nextValue)) || nextValue === '') {\n      setLocalValue(nextValue);\n      if (onChange) {\n        onChange(nextValue);\n      }\n    }\n  };\n\n  // Calculate width of input for correct prefix render\n  // on left side of input\n  const width = useMemo(() => {\n    const val = localValue || placeholder;\n    if (val) {\n      return String(val).length + 'ch';\n    }\n  }, [localValue, placeholder]);\n\n  return (\n    <WrapperLabel>\n      {prefix ? (\n        <Prefix\n          className={classNames({\n            isText: typeof prefix === 'string',\n          })}\n        >\n          {prefix}\n        </Prefix>\n      ) : undefined}\n      <Input\n        {...props}\n        placeholder={placeholder}\n        value={localValue}\n        type=\"text\"\n        inputMode=\"decimal\"\n        autoComplete=\"off\"\n        autoCorrect=\"off\"\n        spellCheck=\"false\"\n        onChange={handleChange}\n        style={{ width }}\n      />\n    </WrapperLabel>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport { Icon } from 'components/ui';\nimport type { ChooseWalletViewModel } from 'new/ui/components/common/ChooseWallet/ChooseWallet.ViewModel';\nimport { TokenAvatar } from 'new/ui/components/common/TokenAvatar';\n\nconst Wrapper = styled.div`\n  display: flex;\n`;\n\nconst WalletIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: #a3a5ba;\n`;\n\nconst TokenAvatarWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n\n  background: #f6f6f8;\n  border-radius: 12px;\n\n  &.isOpen {\n    background: #5887ff;\n\n    ${WalletIcon} {\n      color: #fff;\n    }\n  }\n`;\n\nconst TokenName = styled.div`\n  max-width: 200px;\n  overflow: hidden;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 20px;\n  line-height: 100%;\n\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`;\n\nconst TokenWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  margin-left: 8px;\n\n  &.isOpen {\n    ${TokenName} {\n      color: ${theme.colors.textIcon.active};\n    }\n  }\n`;\n\nconst EmptyName = styled.div`\n  color: #a3a5ba;\n`;\n\ninterface Props {\n  viewModel: Readonly<ChooseWalletViewModel>;\n}\n\nexport const WalletSelectorContent: FC<Props> = observer(({ viewModel }) => {\n  return (\n    <Wrapper>\n      <TokenAvatarWrapper\n        className={classNames({ isOpen: viewModel.isOpen && !viewModel.selectedWallet?.pubkey })}\n      >\n        {viewModel.selectedWallet?.token ? (\n          <TokenAvatar token={viewModel.selectedWallet?.token} size={44} />\n        ) : (\n          <WalletIcon name=\"wallet\" />\n        )}\n      </TokenAvatarWrapper>\n      <TokenWrapper className={classNames({ isOpen: viewModel.isOpen })}>\n        <TokenName title={viewModel.selectedWallet?.pubkey ?? undefined}>\n          {viewModel.selectedWallet?.token.symbol || <EmptyName></EmptyName>}\n        </TokenName>\n      </TokenWrapper>\n    </Wrapper>\n  );\n});\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\nimport { delay, inject, injectable } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { Network, SendViewModel } from 'new/scenes/Main/Send';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { LogEvent, Logger } from 'new/sdk/SolanaSDK';\nimport { ChooseWalletViewModel } from 'new/ui/components/common/ChooseWallet/ChooseWallet.ViewModel';\n\nexport enum CurrencyMode {\n  token = 'token',\n  fiat = 'fiat',\n}\n\nexport enum ChooseTokenAndAmountErrorType {\n  loadingIsNotCompleted = 'loadingIsNotCompleted',\n  destinationWalletIsMissing = 'destinationWalletIsMissing',\n  invalidAmount = 'invalidAmount',\n  insufficientFunds = 'insufficientFunds',\n}\n\nexport class ChooseTokenAndAmountError {\n  readonly type: ChooseTokenAndAmountErrorType;\n\n  static get loadingIsNotCompleted(): ChooseTokenAndAmountError {\n    return new ChooseTokenAndAmountError(ChooseTokenAndAmountErrorType.loadingIsNotCompleted);\n  }\n  static get destinationWalletIsMissing(): ChooseTokenAndAmountError {\n    return new ChooseTokenAndAmountError(ChooseTokenAndAmountErrorType.destinationWalletIsMissing);\n  }\n  static get invalidAmount(): ChooseTokenAndAmountError {\n    return new ChooseTokenAndAmountError(ChooseTokenAndAmountErrorType.invalidAmount);\n  }\n  static get insufficientFunds(): ChooseTokenAndAmountError {\n    return new ChooseTokenAndAmountError(ChooseTokenAndAmountErrorType.insufficientFunds);\n  }\n\n  constructor(type: ChooseTokenAndAmountErrorType) {\n    this.type = type;\n  }\n\n  get buttonSuggestion(): string {\n    switch (this.type) {\n      case ChooseTokenAndAmountErrorType.loadingIsNotCompleted:\n        return 'Loading';\n      case ChooseTokenAndAmountErrorType.destinationWalletIsMissing:\n        return 'Choose destination wallet';\n      case ChooseTokenAndAmountErrorType.invalidAmount:\n        return 'Enter the amount to proceed';\n      case ChooseTokenAndAmountErrorType.insufficientFunds:\n        return 'Insufficient funds';\n    }\n  }\n}\n\ninterface SendTokenChooseTokenAndAmountViewModelType {\n  selectedNetwork: Network | null;\n\n  wallet: Wallet | null;\n  amount: number | null;\n  currencyMode: CurrencyMode;\n  readonly error: ChooseTokenAndAmountError | null;\n}\n\n@injectable()\nexport class ChooseTokenAndAmountViewModel\n  extends ViewModel\n  implements SendTokenChooseTokenAndAmountViewModelType\n{\n  selectedNetwork: Network | null;\n\n  wallet: Wallet | null;\n  amount: number;\n  currencyMode: CurrencyMode;\n\n  constructor(\n    public chooseWalletViewModel: ChooseWalletViewModel,\n    @inject(delay(() => SendViewModel)) public sendViewModel: Readonly<SendViewModel>,\n  ) {\n    super();\n\n    this.wallet = null;\n    this.amount = 0;\n    this.currencyMode = CurrencyMode.token;\n\n    makeObservable(this, {\n      selectedNetwork: observable,\n\n      wallet: observable,\n      amount: observable,\n      currencyMode: observable,\n\n      error: computed,\n      calculateAvailableAmount: computed,\n\n      toggleCurrencyMode: action,\n    });\n  }\n\n  protected override setDefaults() {\n    this.wallet = null;\n    this.amount = 0;\n    this.currencyMode = CurrencyMode.token;\n  }\n\n  protected override onInitialize() {\n    this.chooseWalletViewModel.initialize();\n\n    this._bind();\n  }\n\n  protected override afterReactionsRemoved() {\n    this.chooseWalletViewModel.end();\n  }\n\n  private _bind(): void {\n    this.addReaction(\n      reaction(\n        () => this.sendViewModel.wallet,\n        (wallet) => {\n          this.wallet = wallet;\n        },\n      ),\n    );\n\n    this.addReaction(\n      reaction(\n        () => this.sendViewModel.amount,\n        (amount) => {\n          this.amount = amount;\n        },\n      ),\n    );\n  }\n\n  get error(): ChooseTokenAndAmountError | null {\n    const wallet = this.wallet;\n    const amount = this.amount;\n\n    if (!wallet) {\n      return ChooseTokenAndAmountError.destinationWalletIsMissing;\n    }\n    if (!amount || (amount ?? 0) <= 0) {\n      return ChooseTokenAndAmountError.invalidAmount;\n    }\n    if ((amount ?? 0) > (this.calculateAvailableAmount ?? 0)) {\n      return ChooseTokenAndAmountError.insufficientFunds;\n    }\n    return null;\n  }\n\n  get calculateAvailableAmount(): number | null {\n    const wallet = this.wallet;\n    if (!wallet) {\n      return null;\n    }\n\n    // all amount\n    let availableAmount = wallet.amount;\n\n    // convert to fiat in fiat mode\n    if (this.currencyMode === CurrencyMode.fiat) {\n      availableAmount = availableAmount * wallet.priceInCurrentFiat;\n    }\n\n    Logger.log(`availableAmount ${availableAmount}`, LogEvent.debug);\n\n    return availableAmount;\n  }\n\n  isTokenValidForSelectedNetwork(): boolean {\n    const isValid =\n      this.selectedNetwork !== Network.bitcoin || this.wallet?.token.isRenBTC === true;\n    if (!isValid) {\n      // TODO:\n    }\n    return isValid;\n  }\n\n  // Actions\n\n  toggleCurrencyMode(): void {\n    if (this.currencyMode === CurrencyMode.token) {\n      this.currencyMode = CurrencyMode.fiat;\n    } else {\n      this.currencyMode = CurrencyMode.token;\n    }\n  }\n}\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { Icon } from 'components/ui';\nimport { InputAmount } from 'components/ui/InputAmount';\nimport type { SendViewModel } from 'new/scenes/Main/Send';\nimport { WalletSelectorContent } from 'new/scenes/Main/Send/ChooseTokenAndAmount/WalletSelectorContent';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { AmountTypeButton } from 'new/ui/components/common/AmountTypeButton';\nimport { ChooseWallet } from 'new/ui/components/common/ChooseWallet';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport { CurrencyMode } from './ChooseTokenAndAmount.ViewModel';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  padding: 16px 20px;\n\n  border: 1px solid ${theme.colors.stroke.secondary};\n  border-radius: 12px;\n`;\n\nconst TopWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  margin-bottom: 8px;\n`;\n\nconst Title = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n`;\n\nconst BalanceText = styled.div`\n  display: flex;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n`;\n\nconst AllBalance = styled.div`\n  display: flex;\n  align-items: center;\n\n  cursor: pointer;\n\n  &.disabled {\n    cursor: auto;\n\n    pointer-events: none;\n  }\n\n  &.error {\n    color: ${theme.colors.system.errorMain};\n  }\n\n  &.success {\n    color: ${theme.colors.system.successMain};\n  }\n`;\n\nconst WalletBalanceIcon = styled(Icon)`\n  width: 20px;\n  height: 20px;\n  margin-right: 4px;\n`;\n\nconst Max = styled.div`\n  margin-left: 8px;\n\n  color: ${theme.colors.textIcon.active};\n  text-transform: uppercase;\n`;\n\nconst MainWrapper = styled.div`\n  position: relative;\n\n  display: grid;\n  grid-template-columns: min-content 1fr;\n`;\n\nconst InputWrapper = styled.div`\n  display: flex;\n`;\n\nconst BottomWrapper = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding-top: 4px;\n`;\n\ninterface Props {\n  viewModel: Readonly<SendViewModel>;\n}\n\nexport const ChooseTokenAndAmount: FC<Props> = observer(({ viewModel }) => {\n  const vm = viewModel.chooseTokenAndAmountViewModel;\n\n  // available amount\n  const balanceText = expr(() => {\n    const wallet = vm.wallet;\n    const mode = vm.currencyMode;\n    if (!wallet) {\n      return null;\n    }\n\n    const amount = vm.calculateAvailableAmount;\n    if (!amount) {\n      return null;\n    }\n\n    if (mode === CurrencyMode.fiat) {\n      return `${numberToString(amount, { maximumFractionDigits: 2 })} ${Defaults.fiat.code}`;\n    }\n\n    return `${numberToString(amount, { maximumFractionDigits: 9 })} ${wallet.token.symbol}`;\n  });\n\n  const equityValueLabel = expr(() => {\n    const amount = viewModel.amount;\n    const wallet = vm.wallet;\n    const currencyMode = vm.currencyMode;\n    if (!wallet) {\n      return '';\n    }\n\n    let equityValue = amount * wallet.priceInCurrentFiat;\n    let equityValueSymbol = Defaults.fiat.code;\n    let maximumFractionDigits = 2;\n    if (currencyMode === CurrencyMode.fiat) {\n      if (wallet.priceInCurrentFiat > 0) {\n        equityValue = amount / wallet.priceInCurrentFiat;\n      } else {\n        equityValue = 0;\n      }\n      equityValueSymbol = wallet.token.symbol;\n      maximumFractionDigits = wallet.token.decimals;\n    }\n\n    return `${equityValueSymbol} ${numberToString(equityValue, { maximumFractionDigits })}`;\n  });\n\n  const handleUseAllBalanceClick = () => {\n    const availableAmount = vm.calculateAvailableAmount;\n    const string = numberToString(availableAmount ?? 0, {\n      maximumFractionDigits: 9,\n      groupingSeparator: '',\n    });\n    viewModel.enterAmount(Number(string));\n  };\n\n  const handleWalletChange = (wallet: Wallet) => {\n    viewModel.chooseWallet(wallet);\n  };\n\n  const handleToggleCurrencyModeClick = () => {\n    vm.toggleCurrencyMode();\n  };\n\n  const handleAmountChange = (value: string) => {\n    viewModel.enterAmount(Number(value));\n  };\n\n  // error\n  const balanceClassName = expr(() => {\n    const error = vm.error;\n    const amount = vm.amount;\n\n    let className = '';\n    if (vm.error && amount !== 0) {\n      className = 'error';\n    } else if (!error && amount === vm.calculateAvailableAmount) {\n      className = 'success';\n    }\n    return className;\n  });\n\n  const isAmountEqualMaxBalance = expr(() => vm.amount === vm.calculateAvailableAmount);\n\n  return (\n    <Wrapper>\n      <TopWrapper>\n        <Title>From</Title>\n        <BalanceText>\n          <AllBalance\n            className={classNames({ [balanceClassName]: true })}\n            onClick={handleUseAllBalanceClick}\n          >\n            <WalletBalanceIcon name=\"wallet\" />\n            {balanceText}\n            {!isAmountEqualMaxBalance ? <Max>MAX</Max> : null}\n          </AllBalance>\n        </BalanceText>\n      </TopWrapper>\n      <MainWrapper>\n        <ChooseWallet\n          viewModel={vm.chooseWalletViewModel}\n          selector={<WalletSelectorContent viewModel={vm.chooseWalletViewModel} />}\n          selectedWallet={viewModel.wallet}\n          showOtherWallets={false}\n          onWalletChange={handleWalletChange}\n        />\n        <InputWrapper>\n          <InputAmount\n            placeholder={numberToString(0, {\n              maximumFractionDigits: vm.wallet?.token.decimals ?? 0,\n            })}\n            value={viewModel.amount === 0 ? undefined : viewModel.amount}\n            decimals={viewModel.wallet?.token.decimals}\n            onChange={handleAmountChange}\n          />\n        </InputWrapper>\n      </MainWrapper>\n      {vm.wallet?.priceInCurrentFiat ? (\n        <BottomWrapper>\n          <AmountTypeButton title={equityValueLabel} onClick={handleToggleCurrencyModeClick} />\n        </BottomWrapper>\n      ) : null}\n    </Wrapper>\n  );\n});\n","export class SendServiceError extends Error {\n  static invalidSourceWallet() {\n    return new SendServiceError('Source wallet is not valid');\n  }\n  static sendToYourself() {\n    return new SendServiceError('You can not send tokens to yourself');\n  }\n  static invalidPayingFeeWallet() {\n    return new SendServiceError('Paying fee wallet is not valid');\n  }\n  static swapPoolsNotFound() {\n    return new SendServiceError('Swap pools not found');\n  }\n  static unknown() {\n    return new SendServiceError('Unknown error');\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\n\nimport type { FeeRelayerContext } from 'new/sdk/FeeRelayer';\nimport * as FeeRelayer from 'new/sdk/FeeRelayer';\nimport { FeeRelayerConfiguration, StatsInfoOperationType } from 'new/sdk/FeeRelayer';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { convertToBalance, SolanaSDKError, SolanaSDKPublicKey, toLamport } from 'new/sdk/SolanaSDK';\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport { SendServiceError } from 'new/services/SendService/SendServiceError';\nimport type { SolanaService } from 'new/services/SolanaService';\n\nexport class SendServiceRelayMethod {\n  private _solanaAPIClient: SolanaService;\n  private _feeRelayer: FeeRelayer.FeeRelayer;\n\n  constructor({\n    solanaAPIClient,\n    feeRelayer,\n  }: {\n    solanaAPIClient: SolanaService;\n    feeRelayer: FeeRelayer.FeeRelayer;\n  }) {\n    this._solanaAPIClient = solanaAPIClient;\n    this._feeRelayer = feeRelayer;\n  }\n\n  async getFeeViaRelayMethod({\n    context,\n    wallet,\n    receiver,\n    payingTokenMint,\n  }: {\n    context: FeeRelayerContext;\n    wallet: Wallet;\n    receiver: string;\n    payingTokenMint?: string;\n  }): Promise<SolanaSDK.FeeAmount | null> {\n    let transactionFee: u64 = ZERO;\n\n    // owner's signature\n    transactionFee = new u64(transactionFee.add(context.lamportsPerSignature));\n\n    // feePayer's signature\n    transactionFee = new u64(transactionFee.add(context.lamportsPerSignature));\n\n    let isAssociatedTokenUnregister: boolean;\n    if (wallet.mintAddress === SolanaSDKPublicKey.wrappedSOLMint.toString()) {\n      isAssociatedTokenUnregister = false;\n    } else {\n      const destinationInfo = await this._solanaAPIClient.findSPLTokenDestinationAddress({\n        mintAddress: wallet.mintAddress,\n        destinationAddress: receiver,\n      });\n      isAssociatedTokenUnregister = destinationInfo.isUnregisteredAsocciatedToken;\n    }\n\n    // when free transaction is not available and user is paying with sol, let him do this the normal way (don't use fee relayer)\n    if (\n      this._isFreeTransactionNotAvailableAndUserIsPayingWithSOL({\n        context,\n        payingTokenMint,\n      })\n    ) {\n      // subtract the fee payer signature cost\n      transactionFee = new u64(transactionFee.sub(context.lamportsPerSignature));\n    }\n\n    const expectedFee = new SolanaSDK.FeeAmount({\n      transaction: transactionFee,\n      accountBalances: isAssociatedTokenUnregister ? context.minimumTokenAccountBalance : ZERO,\n    });\n\n    // when free transaction is not available and user is paying with sol, let him do this the normal way (don't use fee relayer)\n    if (\n      this._isFreeTransactionNotAvailableAndUserIsPayingWithSOL({\n        context,\n        payingTokenMint,\n      })\n    ) {\n      return expectedFee;\n    }\n\n    return this._feeRelayer.feeCalculator.calculateNeededTopUpAmount({\n      context,\n      expectedFee,\n      payingTokenMint: payingTokenMint ? new PublicKey(payingTokenMint) : undefined,\n    });\n  }\n\n  async sendToSolanaBCViaRelayMethod({\n    context,\n    wallet,\n    receiver,\n    amount,\n    payingFeeWallet,\n  }: {\n    context: FeeRelayerContext;\n    wallet: Wallet;\n    receiver: string;\n    amount: SolanaSDK.Lamports;\n    payingFeeWallet?: Wallet | null;\n  }): Promise<string> {\n    // get paying fee token\n    const payingFeeTokenNew = this._getPayingFeeToken({\n      payingFeeWallet,\n    });\n\n    const currency = wallet.mintAddress;\n\n    const { preparedTransaction, useFeeRelayer } =\n      await this._prepareForSendingToSolanaNetworkViaRelayMethod({\n        context,\n        wallet,\n        receiver,\n        amount: convertToBalance(amount, wallet.token.decimals),\n        payingFeeToken: payingFeeTokenNew,\n      });\n    // TODo: check\n    // preparedTransaction.transaction.recentBlockhash = await this._solanaAPIClient.getRecentBlockhash();\n\n    if (useFeeRelayer) {\n      // using fee relayer\n      return this._feeRelayer.topUpAndRelayTransaction({\n        context,\n        transaction: preparedTransaction,\n        fee: payingFeeTokenNew,\n        config: new FeeRelayerConfiguration({\n          operationType: StatsInfoOperationType.transfer,\n          currency,\n        }),\n      });\n    } else {\n      // send normally, paid by SOL\n      return this._solanaAPIClient.sendTransaction({\n        preparedTransaction,\n      });\n    }\n  }\n\n  private async _prepareForSendingToSolanaNetworkViaRelayMethod({\n    context,\n    wallet,\n    receiver,\n    amount,\n    payingFeeToken,\n    minRentExemption,\n  }: {\n    context: FeeRelayerContext;\n    wallet: Wallet;\n    receiver: string;\n    amount: number;\n    payingFeeToken?: FeeRelayer.TokenAccount | null;\n    recentBlockhash?: string;\n    lamportsPerSignature?: SolanaSDK.Lamports;\n    minRentExemption?: SolanaSDK.Lamports;\n  }): Promise<{\n    preparedTransaction: SolanaSDK.PreparedTransaction;\n    useFeeRelayer: boolean;\n  }> {\n    const amountNew = toLamport(amount, wallet.token.decimals);\n    const sender = wallet.pubkey;\n    if (!sender) {\n      throw SolanaSDKError.other('Source wallet is not valid');\n    }\n    // form request\n    if (receiver === sender) {\n      throw SolanaSDKError.other('You can not send tokens to yourself');\n    }\n\n    // prepare fee payer\n    let feePayer: PublicKey | null;\n    let useFeeRelayer: boolean;\n\n    // when free transaction is not available and user is paying with sol, let him do this the normal way (don't use fee relayer)\n    if (\n      this._isFreeTransactionNotAvailableAndUserIsPayingWithSOL({\n        context,\n        payingTokenMint: payingFeeToken?.mint.toString(),\n      })\n    ) {\n      feePayer = null;\n      useFeeRelayer = false;\n    }\n    // otherwise send to fee relayer\n    else {\n      feePayer = context.feePayerAddress;\n      useFeeRelayer = true;\n    }\n\n    let preparedTransaction: SolanaSDK.PreparedTransaction;\n    if (wallet.isNativeSOL) {\n      preparedTransaction = await this._solanaAPIClient.prepareSendingNativeSOL({\n        account: this._solanaAPIClient.provider.wallet.publicKey,\n        destination: receiver,\n        amount: amountNew,\n        feePayer,\n      });\n    }\n    // other tokens\n    else {\n      preparedTransaction = (\n        await this._solanaAPIClient.prepareSendingSPLTokens({\n          account: this._solanaAPIClient.provider.wallet.publicKey,\n          mintAddress: wallet.mintAddress,\n          decimals: wallet.token.decimals,\n          fromPublicKey: sender,\n          destinationAddress: receiver,\n          amount: amountNew,\n          feePayer,\n          transferChecked: useFeeRelayer, // create transferChecked instruction when using fee relayer\n          minRentExemption,\n        })\n      ).preparedTransaction;\n    }\n\n    // TODO: check\n    // preparedTransaction.transaction.recentBlockhash = recentBlockhash;\n    return {\n      preparedTransaction,\n      useFeeRelayer,\n    };\n  }\n\n  private _getPayingFeeToken({\n    payingFeeWallet,\n  }: {\n    payingFeeWallet?: Wallet | null;\n  }): FeeRelayer.TokenAccount | null {\n    if (!payingFeeWallet) {\n      return null;\n    }\n\n    const addressString = payingFeeWallet.pubkey;\n    if (!addressString) {\n      throw SendServiceError.invalidPayingFeeWallet();\n    }\n\n    const address = new PublicKey(addressString);\n    const mintAddress = new PublicKey(payingFeeWallet.mintAddress);\n\n    return new FeeRelayer.TokenAccount({\n      address,\n      mint: mintAddress,\n    });\n  }\n\n  private _isFreeTransactionNotAvailableAndUserIsPayingWithSOL({\n    context,\n    payingTokenMint,\n  }: {\n    context: FeeRelayerContext;\n    payingTokenMint?: string;\n  }): boolean {\n    const expectedTransactionFee = new u64(context.lamportsPerSignature.muln(2));\n    return (\n      payingTokenMint === SolanaSDKPublicKey.wrappedSOLMint.toString() &&\n      !context.usageStatus.isFreeTransactionFeeAvailable({\n        transactionFee: expectedTransactionFee,\n      })\n    );\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\nimport { injectable } from 'tsyringe';\n\nimport type { UsageStatus } from 'new/sdk/FeeRelayer';\nimport { FeeRelayerAPIClient } from 'new/sdk/FeeRelayer';\nimport { FeeRelayerRelaySolanaClient } from 'new/sdk/FeeRelayer/relay';\nimport { FeeRelayerContextManager } from 'new/sdk/FeeRelayer/relay/FeeRelayerContextManager';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport { SolanaSDKPublicKey, toLamport } from 'new/sdk/SolanaSDK';\nimport { OrcaSwapService } from 'new/services/OrcaSwapService';\nimport { RelayService } from 'new/services/RelayService';\nimport { BurnAndReleaseService } from 'new/services/RenVM';\nimport { WalletsRepository } from 'new/services/Repositories';\nimport { SendServiceError } from 'new/services/SendService/SendServiceError';\nimport { SendServiceRelayMethod } from 'new/services/SendService/SendServiceRelayMethod';\nimport { SolanaService } from 'new/services/SolanaService';\n\nexport enum SendRelayMethodType {\n  relay,\n  // reward,\n}\n\nexport class SendRelayMethod {\n  type: SendRelayMethodType;\n\n  static get relay(): SendRelayMethod {\n    return new SendRelayMethod(SendRelayMethodType.relay);\n  }\n\n  constructor(type: SendRelayMethodType) {\n    this.type = type;\n  }\n\n  static get default(): SendRelayMethod {\n    return SendRelayMethod.relay;\n  }\n}\n\nexport enum Network {\n  solana = 'solana',\n  bitcoin = 'bitcoin',\n}\n\nexport interface SendServiceType {\n  load(): Promise<void>;\n  checkAccountValidation(account: string): Promise<boolean>;\n  isTestNet(): boolean;\n\n  getFees({\n    wallet,\n    receiver,\n    network,\n    payingTokenMint,\n  }: {\n    wallet: Wallet;\n    receiver?: string;\n    network: Network;\n    payingTokenMint?: string;\n  }): Promise<SolanaSDK.FeeAmount | null>;\n\n  getFeesInPayingToken({\n    feeInSOL,\n    payingFeeWallet,\n  }: {\n    feeInSOL: SolanaSDK.FeeAmount;\n    payingFeeWallet: Wallet;\n  }): Promise<SolanaSDK.FeeAmount | null>;\n\n  // TODO: hide direct usage of ``UsageStatus``\n  getFreeTransactionFeeLimit(): Promise<UsageStatus>;\n\n  getAvailableWalletsToPayFee({ feeInSOL }: { feeInSOL: SolanaSDK.FeeAmount }): Promise<Wallet[]>;\n\n  send({\n    wallet,\n    receiver,\n    amount,\n    network,\n    payingFeeWallet,\n  }: {\n    wallet: Wallet;\n    receiver: string;\n    amount: number;\n    network: Network;\n    payingFeeWallet?: Wallet | null;\n  }): Promise<string>;\n}\n\n@injectable()\nexport class SendService implements SendServiceType {\n  relayMethod: SendRelayMethod;\n\n  private _contextManager: FeeRelayerContextManager;\n\n  private _sendServiceRelayMethod: SendServiceRelayMethod;\n\n  constructor(\n    private _solanaAPIClient: SolanaService,\n    private _orcaSwap: OrcaSwapService,\n    private _renVMBurnAndReleaseService: BurnAndReleaseService,\n    private _feeRelayer: RelayService,\n    private _feeRelayerRelaySolanaClient: FeeRelayerRelaySolanaClient,\n    private _walletsRepository: WalletsRepository,\n  ) {\n    this.relayMethod = SendRelayMethod.default;\n\n    const feeRelayerAPIClient = new FeeRelayerAPIClient();\n    this._contextManager = new FeeRelayerContextManager({\n      owner: this._solanaAPIClient.provider.wallet.publicKey,\n      solanaAPIClient: this._feeRelayerRelaySolanaClient,\n      feeRelayerAPIClient,\n    });\n\n    // Subclasses\n    this._sendServiceRelayMethod = new SendServiceRelayMethod({\n      solanaAPIClient: this._solanaAPIClient,\n      feeRelayer: this._feeRelayer,\n    });\n  }\n\n  // Methods\n\n  async load(): Promise<void> {\n    await this._orcaSwap.load();\n    await this._contextManager.update();\n  }\n\n  checkAccountValidation(account: string): Promise<boolean> {\n    return this._solanaAPIClient.checkAccountValidation(account);\n  }\n\n  isTestNet(): boolean {\n    // TODO: move to Network class isTestnet check\n    return this._solanaAPIClient.endpoint.network !== 'mainnet-beta';\n  }\n\n  // Fees calculator\n\n  async getFees({\n    wallet,\n    receiver,\n    network,\n    payingTokenMint,\n  }: {\n    wallet: Wallet;\n    receiver?: string;\n    network: Network;\n    payingTokenMint?: string;\n  }): Promise<SolanaSDK.FeeAmount | null> {\n    switch (network) {\n      case Network.bitcoin: {\n        return new SolanaSDK.FeeAmount({\n          transaction: new u64(20000),\n          accountBalances: ZERO,\n          others: [\n            new SolanaSDK.OtherFee({\n              amount: 0.0002,\n              unit: 'renBTC',\n            }),\n          ],\n        });\n      }\n      case Network.solana: {\n        if (!receiver) {\n          return null;\n        }\n\n        switch (this.relayMethod.type) {\n          case SendRelayMethodType.relay: {\n            return this._sendServiceRelayMethod.getFeeViaRelayMethod({\n              context: await this._contextManager.getCurrentContext(),\n              wallet,\n              receiver,\n              payingTokenMint,\n            });\n          }\n        }\n      }\n      // case RelayMethod.reward: {\n      //   return SolanaSDK.FeeAmount.zero();\n      // }\n    }\n  }\n\n  getAvailableWalletsToPayFee({ feeInSOL }: { feeInSOL: SolanaSDK.FeeAmount }): Promise<Wallet[]> {\n    return Promise.all(\n      this._walletsRepository\n        .getWallets()\n        .filter((wallet) => (wallet.lamports ?? ZERO).gt(ZERO))\n        .map(async (wallet): Promise<Wallet | null> => {\n          if (wallet.mintAddress === SolanaSDKPublicKey.wrappedSOLMint.toString()) {\n            return (wallet.lamports ?? ZERO).gte(feeInSOL.total) ? wallet : null;\n          }\n\n          return this._feeRelayer.feeCalculator\n            .calculateFeeInPayingToken({\n              orcaSwap: this._orcaSwap,\n              feeInSOL,\n              payingFeeTokenMint: new PublicKey(wallet.mintAddress),\n            })\n            .then((fee) => (fee.total ?? ZERO).lte(wallet.lamports ?? ZERO))\n            .then((flag) => (flag ? wallet : null))\n            .catch(() => null);\n        })\n        .filter(Boolean) as Promise<Wallet>[],\n    );\n  }\n\n  async getFeesInPayingToken({\n    feeInSOL,\n    payingFeeWallet,\n  }: {\n    feeInSOL: SolanaSDK.FeeAmount;\n    payingFeeWallet: Wallet;\n  }): Promise<SolanaSDK.FeeAmount | null> {\n    if (this.relayMethod.type !== SendRelayMethodType.relay) {\n      return null;\n    }\n\n    if (payingFeeWallet.mintAddress === SolanaSDKPublicKey.wrappedSOLMint.toString()) {\n      return feeInSOL;\n    }\n\n    return this._feeRelayer.feeCalculator.calculateFeeInPayingToken({\n      orcaSwap: this._orcaSwap,\n      feeInSOL,\n      payingFeeTokenMint: new PublicKey(payingFeeWallet.mintAddress),\n    });\n  }\n\n  async getFreeTransactionFeeLimit(): Promise<UsageStatus> {\n    return (await this._contextManager.getCurrentContext()).usageStatus;\n  }\n\n  // Send method\n\n  async send({\n    wallet,\n    receiver,\n    amount,\n    network,\n    payingFeeWallet,\n  }: {\n    wallet: Wallet;\n    receiver: string;\n    amount: number;\n    network: Network;\n    payingFeeWallet?: Wallet | null; // null for relayMethod === RelayMethod.reward\n  }): Promise<string> {\n    await this._contextManager.update();\n\n    const amountNew = toLamport(amount, wallet.token.decimals);\n    const sender = wallet.pubkey;\n    if (!sender) {\n      throw SendServiceError.invalidSourceWallet();\n    }\n    // form request\n    if (receiver === sender) {\n      throw SendServiceError.sendToYourself();\n    }\n\n    // detect network\n    let request: Promise<string>;\n    switch (network) {\n      case Network.solana: {\n        switch (this.relayMethod.type) {\n          case SendRelayMethodType.relay: {\n            request = this._sendServiceRelayMethod.sendToSolanaBCViaRelayMethod({\n              context: await this._contextManager.getCurrentContext(),\n              wallet,\n              receiver,\n              amount: amountNew,\n              payingFeeWallet,\n            });\n            break;\n          }\n          // case RelayMethodType.reward: {\n          //   request = this._sendToSolanaBCViaRewardMethod();\n          // }\n        }\n        break;\n      }\n      case Network.bitcoin: {\n        request = this._renVMBurnAndReleaseService.burnAndRelease({\n          recipient: receiver,\n          amount: amountNew,\n        });\n        break;\n      }\n    }\n\n    return request;\n  }\n}\n","import type { FC } from 'react';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nimport { LaagTooltip } from 'components/ui';\nimport type * as FeeRelayer from 'new/sdk/FeeRelayer';\nimport { LoaderBlock } from 'new/ui/components/common/LoaderBlock';\n\nconst TooltipContent = styled.div`\n  width: 300px;\n\n  &.loader {\n    padding: 50px 0;\n  }\n`;\n\ninterface Props {\n  viewModel: Readonly<{\n    getFreeTransactionFeeLimit(): Promise<FeeRelayer.UsageStatus>;\n  }>;\n}\n\nexport const FeeTransactionTooltip: FC<Props> = ({ viewModel }) => {\n  const [limit, setLimit] = useState<FeeRelayer.UsageStatus | null>(null);\n\n  const handleChange = useCallback(\n    (isOver: boolean) => {\n      if (isOver) {\n        setLimit(null);\n        void viewModel.getFreeTransactionFeeLimit().then((limit) => setLimit(limit));\n      }\n    },\n    [viewModel],\n  );\n\n  const elContent = (\n    <TooltipContent>\n      {!limit ? (\n        <TooltipContent className=\"loader\">\n          <LoaderBlock />\n        </TooltipContent>\n      ) : (\n        <>\n          <span>\n            On the Solana network, the first {limit.maxUsage} transactions in a day are paid by\n            P2P.org. You have {limit.maxUsage - limit.currentUsage} free transactions left for today\n          </span>\n          <br />\n          <br /> Subsequent transactions will be charged based on the Solana blockchain gas fee.\n        </>\n      )}\n    </TooltipContent>\n  );\n\n  const iconColor = useMemo(() => {\n    if (!limit) {\n      return theme.colors.system.successMain;\n    }\n\n    if (limit.currentUsage >= limit.maxUsage) {\n      return theme.colors.textIcon.secondary;\n    }\n\n    return theme.colors.system.successMain;\n  }, [limit]);\n\n  return (\n    <LaagTooltip\n      withClose={true}\n      elContent={elContent}\n      iconColor={iconColor}\n      onChange={handleChange}\n    />\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { Icon } from 'components/ui';\nimport { LoadableStateType } from 'new/app/models/LoadableRelay';\nimport type { FeeInfo, SendViewModel } from 'new/scenes/Main/Send';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport type * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { TokenAvatar } from 'new/ui/components/common/TokenAvatar';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nconst Wrapper = styled.div`\n  display: flex;\n  width: 100%;\n`;\n\nconst TokenAvatarStyled = styled(TokenAvatar)`\n  margin-right: 12px;\n`;\n\nconst IconWrapper = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n\n  background: ${theme.colors.system.errorBg};\n  border-radius: 12px;\n`;\n\nconst RoundStopIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.system.errorMain};\n`;\n\nconst Fees = styled.div`\n  flex-grow: 1;\n`;\n\nconst Top = styled.div``;\n\nconst Bottom = styled.div``;\n\nconst Label = styled.span`\n  margin-right: 4px;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n\n  &.alert {\n    color: ${theme.colors.system.errorMain};\n  }\n`;\n\ninterface Props {\n  viewModel: Readonly<SendViewModel>;\n}\n\nexport const WalletSelectorContent: FC<Props> = observer(({ viewModel }) => {\n  const solPrice = viewModel.getPrice('SOL');\n  const payingWallet = viewModel.payingWallet;\n  const feeInfo = viewModel.feeInfo;\n\n  return (\n    <Wrapper>\n      {!payingWallet && feeInfo.value?.hasAvailableWalletToPayFee ? null : !feeInfo.value\n          ?.hasAvailableWalletToPayFee ? (\n        <IconWrapper>\n          <RoundStopIcon name=\"round-stop\" />\n        </IconWrapper>\n      ) : (\n        <TokenAvatarStyled token={payingWallet?.token} size={44} />\n      )}\n      <Fees>\n        {payingWallet ? (\n          <Top>{feeAmountToString({ feeAmount: feeInfo.value?.feeAmountInSOL, solPrice })}</Top>\n        ) : null}\n        <Bottom>\n          {payingWalletToString({\n            state: feeInfo.state.type,\n            value: feeInfo.value,\n            payingWallet,\n          })}\n        </Bottom>\n      </Fees>\n    </Wrapper>\n  );\n});\n\nfunction feeAmountToString({\n  feeAmount,\n  solPrice,\n}: {\n  feeAmount?: SolanaSDK.FeeAmount;\n  solPrice?: number;\n}) {\n  if (!feeAmount) {\n    return null;\n  }\n\n  const titles: string[] = [];\n  if (feeAmount.accountBalances.gtn(0)) {\n    titles.push('Account creation fee');\n  }\n\n  if (feeAmount.transaction.gtn(0)) {\n    titles.push('Transaction fee');\n  }\n\n  const title = titles.join(' + ');\n  let amount = convertToBalance(feeAmount.total, 9);\n  let amountString = `${numberToString(amount, {\n    maximumFractionDigits: 9,\n    autoSetMaximumFractionDigits: true,\n  })} SOL`;\n  if (solPrice) {\n    amount *= solPrice;\n    amountString = `~${Defaults.fiat.symbol} ${numberToString(amount, {\n      maximumFractionDigits: 2,\n    })}`;\n  }\n\n  return (\n    <Label>\n      {title} {amountString}\n    </Label>\n  );\n}\n\nfunction payingWalletToString({\n  state,\n  value,\n  payingWallet,\n}: {\n  state: LoadableStateType;\n  value: FeeInfo | null;\n  payingWallet: Wallet | null;\n}) {\n  if (!payingWallet) {\n    return <Label>Choose the token to pay fees</Label>;\n  }\n\n  switch (state) {\n    case LoadableStateType.notRequested:\n      return <Label>Choose the token to pay fees</Label>;\n    case LoadableStateType.loading:\n      return <Label>Calculating fees</Label>;\n    case LoadableStateType.loaded: {\n      if (!value) {\n        return <Label>Could not calculating fees</Label>;\n      }\n\n      if (!value.hasAvailableWalletToPayFee) {\n        return <Label className=\"alert\">Not enough funds</Label>;\n      }\n\n      return (\n        <Label>\n          {numberToString(convertToBalance(value.feeAmount.total, payingWallet.token.decimals), {\n            maximumFractionDigits: 9,\n            autoSetMaximumFractionDigits: true,\n          })}{' '}\n          {payingWallet.token.symbol}\n        </Label>\n      );\n    }\n    case LoadableStateType.error:\n      return <Label className=\"alert\">Could not calculating fees</Label>;\n  }\n}\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\n\nimport type { SendViewModel } from 'new/scenes/Main/Send';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { ChooseWallet } from 'new/ui/components/common/ChooseWallet';\n\nimport { WalletSelectorContent } from './WalletSelectorContent';\n\nconst Wrapper = styled.div`\n  position: relative;\n`;\n\ninterface Props {\n  viewModel: Readonly<SendViewModel>;\n}\n\nexport const FeeView: FC<Props> = observer(({ viewModel }) => {\n  const handleWalletChange = (wallet: Wallet) => {\n    viewModel.selectPayingWallet(wallet);\n  };\n\n  return (\n    <Wrapper>\n      <ChooseWallet\n        viewModel={viewModel.choosePayingWalletViewModel}\n        selector={<WalletSelectorContent viewModel={viewModel} />}\n        selectedWallet={viewModel.payingWallet}\n        showOtherWallets={false}\n        onWalletChange={handleWalletChange}\n      />\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { ZERO } from '@orca-so/sdk';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { Accordion } from 'components/ui';\nimport { AccordionTitle } from 'components/ui/AccordionDetails/AccordionTitle';\nimport { ListWrapper, Row, Text } from 'components/ui/AccordionDetails/common';\nimport type { SendViewModel } from 'new/scenes/Main/Send';\nimport { Network } from 'new/scenes/Main/Send';\nimport type * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { SendRelayMethodType } from 'new/services/SendService';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport { FeeTransactionTooltip } from './FeeTransactionTooltip';\nimport { FeeView } from './FeeView';\n\ninterface Props {\n  viewModel: Readonly<SendViewModel>;\n}\n\nexport const FeesView: FC<Props> = observer(({ viewModel }) => {\n  const receive = expr(() => {\n    const amount = viewModel.amount;\n    const wallet = viewModel.wallet;\n\n    // use _feeString to render receive line\n    return _feeString({\n      fee: amount,\n      unit: wallet?.token.symbol ?? '',\n      price: viewModel.getPrice(wallet?.token.symbol ?? ''),\n    });\n  });\n\n  const transferFee = expr(() => {\n    const feeAmount = viewModel.feeInfo.value?.feeAmount;\n    const payingWallet = viewModel.payingWallet;\n\n    if (!feeAmount) {\n      return '';\n    }\n\n    const prices = viewModel.getPrices([payingWallet?.token.symbol ?? '']);\n    return _stringForTransactionFee({\n      feeAmount,\n      prices,\n      symbol: payingWallet?.token.symbol ?? '',\n      decimals: payingWallet?.token.decimals,\n    });\n  });\n\n  const feeHint =\n    viewModel.network !== Network.solana ? null : <FeeTransactionTooltip viewModel={viewModel} />;\n\n  const accountCreationFeeIsHidden = expr(() => {\n    const network = viewModel.network;\n    const feeAmount = viewModel.feeInfo.value?.feeAmount;\n    if (!feeAmount) {\n      return true;\n    }\n\n    if (network !== Network.solana) {\n      return true;\n    }\n\n    return feeAmount.accountBalances.eq(ZERO);\n  });\n\n  const accountCreationFee = expr(() => {\n    const network = viewModel.network;\n    const payingWallet = viewModel.payingWallet;\n    const feeAmount = viewModel.feeInfo.value?.feeAmount;\n    if (!feeAmount) {\n      return null;\n    }\n\n    if (network !== Network.solana) {\n      return null;\n    }\n\n    return _stringForAccountCreationFee({\n      feeAmount,\n      price: viewModel.getPrice(payingWallet?.token.symbol ?? ''),\n      symbol: payingWallet?.token.symbol ?? '',\n      decimals: payingWallet?.token.decimals,\n    });\n  });\n\n  const otherFeesIsHidden = expr(() => {\n    const network = viewModel.network;\n    const feeAmount = viewModel.feeInfo.value?.feeAmount;\n\n    if (network !== Network.bitcoin) {\n      return true;\n    }\n\n    const _otherFees = feeAmount?.others;\n    if (!_otherFees) {\n      return true;\n    }\n\n    return _otherFees.length === 0;\n  });\n\n  const otherFees = expr(() => {\n    const feeAmount = viewModel.feeInfo.value?.feeAmountInSOL;\n    if (!feeAmount) {\n      return null;\n    }\n\n    const prices = viewModel.getPrices(['SOL', 'renBTC']) ?? {};\n    return _stringForOtherFees({\n      feeAmount,\n      prices,\n    });\n  });\n\n  const payingFeeTokenIsHidden = expr(() => {\n    if (viewModel.relayMethod.type !== SendRelayMethodType.relay) {\n      return true;\n    }\n\n    const network = viewModel.network;\n    if (network !== Network.solana) {\n      return true;\n    }\n\n    const fee = viewModel.feeInfo.value?.feeAmount;\n    if (fee) {\n      return fee.total.eqn(0); // only this condition to show\n    }\n\n    return true;\n  });\n\n  const totalFee = expr(() => {\n    const feeAmount = viewModel.feeInfo.value?.feeAmount;\n    if (!feeAmount) {\n      return null;\n    }\n\n    const payingWallet = viewModel.payingWallet;\n\n    return _stringForTotalFee({\n      feeAmount,\n      price: viewModel.getPrice(payingWallet?.token.symbol ?? ''),\n      symbol: payingWallet?.token.symbol ?? '',\n      decimals: payingWallet?.token.decimals,\n    });\n  });\n\n  const totalFeeHeader = expr(() => {\n    const feeAmount = viewModel.feeInfo.value?.feeAmount;\n    if (!feeAmount) {\n      return '';\n    }\n\n    const payingWallet = viewModel.payingWallet;\n    const decimals = payingWallet?.token.decimals;\n    const symbol = payingWallet?.token.symbol ?? '';\n\n    const fee = convertToBalance(feeAmount.total, decimals ?? 0);\n    return `${numberToString(fee, { maximumFractionDigits: 9 })} ${symbol}`;\n  });\n\n  return (\n    <Accordion\n      title={\n        <AccordionTitle\n          title=\"Transaction details\"\n          titleBottomName=\"Total fee\"\n          titleBottomValue={totalFeeHeader}\n          // titleBottomName={titleBottomNameEl(isAddressNotMatchNetwork)}\n          // titleBottomValue={titleBottomValueEl(isAddressNotMatchNetwork, details.totalAmount || '')}\n        />\n      }\n      open\n      noContentPadding\n    >\n      <ListWrapper>\n        <Row>\n          <Text className=\"gray\">Receive</Text>\n          {receive}\n        </Row>\n        <Row>\n          <Text className=\"gray\">Transfer fee</Text>\n          <Text className=\"inline-flex\">\n            {transferFee} {feeHint}\n          </Text>\n        </Row>\n        {!accountCreationFeeIsHidden ? (\n          <Row>\n            <Text className=\"gray\">Account creation fee</Text>\n            {accountCreationFee}\n          </Row>\n        ) : null}\n        {!otherFeesIsHidden ? otherFees : null}\n      </ListWrapper>\n      {!payingFeeTokenIsHidden ? (\n        <ListWrapper>\n          <FeeView viewModel={viewModel} />\n        </ListWrapper>\n      ) : null}\n      <ListWrapper className=\"total\">\n        <Row>\n          <Text>Total fee</Text>\n          {totalFee}\n        </Row>\n      </ListWrapper>\n    </Accordion>\n  );\n});\n\nfunction _stringForTransactionFee({\n  feeAmount,\n  prices,\n  symbol,\n  decimals,\n}: {\n  feeAmount: SolanaSDK.FeeAmount;\n  prices: Record<string, number>;\n  symbol: string;\n  decimals?: number;\n}) {\n  if (feeAmount.transaction.eqn(0)) {\n    return (\n      <Text>\n        Free <Text className=\"green inline-flex\">(Paid by P2P.org)</Text>\n      </Text>\n    );\n  } else {\n    const fee = convertToBalance(feeAmount.transaction, decimals ?? 0);\n    return _feeString({ fee, unit: symbol, price: prices[symbol] });\n  }\n}\n\nfunction _stringForAccountCreationFee({\n  feeAmount,\n  price,\n  symbol,\n  decimals,\n}: {\n  feeAmount: SolanaSDK.FeeAmount;\n  price: number;\n  symbol: string;\n  decimals?: number;\n}) {\n  if (feeAmount.accountBalances.lten(0)) {\n    return null;\n  }\n\n  const fee = convertToBalance(feeAmount.accountBalances, decimals ?? 0);\n  return _feeString({ fee, unit: symbol, price });\n}\n\nfunction _stringForOtherFees({\n  feeAmount,\n  prices,\n}: {\n  feeAmount: SolanaSDK.FeeAmount;\n  prices: Record<string, number>;\n}) {\n  const others = feeAmount.others;\n  if (!others || others.length === 0) {\n    return null;\n  }\n\n  return others.map((fee, index) => (\n    <Row key={index}>\n      {_feeString({\n        fee: fee.amount,\n        unit: fee.unit,\n        price: prices[fee.unit],\n      })}\n    </Row>\n  ));\n}\n\nfunction _stringForTotalFee({\n  feeAmount,\n  price,\n  symbol,\n  decimals,\n}: {\n  feeAmount: SolanaSDK.FeeAmount;\n  price: number;\n  symbol: string;\n  decimals?: number;\n}) {\n  if (feeAmount.total.eqn(0)) {\n    return <Text>{Defaults.fiat.symbol}0</Text>;\n  }\n\n  const fee = convertToBalance(feeAmount.total, decimals ?? 0);\n  return _feeString({\n    fee,\n    unit: symbol,\n    price,\n  });\n}\n\nfunction _feeString({ fee, unit, price = 0 }: { fee: number; unit: string; price?: number }) {\n  const feeInFiat = fee * price;\n  return (\n    <Text className=\"right\">\n      <Text>\n        {numberToString(fee, { maximumFractionDigits: 9 })} {unit}\n      </Text>{' '}\n      <Text className=\"gray\">\n        (~{Defaults.fiat.symbol}\n        {numberToString(feeInFiat, { maximumFractionDigits: 2 })})\n      </Text>\n    </Text>\n  );\n}\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { ZERO } from '@orca-so/sdk';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport type { SendViewModelType } from 'new/scenes/Main/Send';\n\nconst Wrapper = styled.div`\n  padding: 16px 20px;\n\n  color: ${theme.colors.textIcon.primary};\n  font-size: 14px;\n  line-height: 160%;\n  letter-spacing: 0.01em;\n\n  background: ${theme.colors.system.warningBg};\n  border: 0.5px solid ${theme.colors.system.warningMain};\n  border-radius: 0 0 12px 12px;\n`;\n\ninterface Props {\n  viewModel: Readonly<SendViewModelType>;\n}\n\n// attentionLabel\nexport const AttentionView: FC<Props> = observer(({ viewModel }) => {\n  const attentionIsHidden = expr(() => {\n    const feeInfo = viewModel.feeInfo;\n    return (feeInfo.value?.feeAmountInSOL?.accountBalances ?? ZERO).eq(ZERO);\n  });\n\n  if (attentionIsHidden) {\n    return null;\n  }\n\n  const symbol = viewModel.wallet?.token.symbol ?? '';\n\n  return (\n    <Wrapper>\n      This address does not appear to have a {symbol} account. You have to pay a one-time fee to\n      create a {symbol} account for this address. You can choose which currency to pay in below.\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { Icon } from 'components/ui';\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport type { RecipientsListViewModel } from 'new/scenes/Main/Send/SelectAddress/Subviews/RecipientsCollectionView/RecipientsList.ViewModel';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n\n  padding: 16px 20px;\n\n  border-top: 1px solid ${theme.colors.stroke.secondary};\n`;\n\nconst IconWrapper = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n\n  background: ${theme.colors.system.errorBg};\n  border-radius: 12px;\n`;\n\nconst RoundStopIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.system.errorMain};\n`;\n\nconst Text = styled.span`\n  margin-left: 12px;\n\n  color: ${theme.colors.system.errorMain};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n`;\n\ninterface Props {\n  viewModel: RecipientsListViewModel;\n}\n\nexport const ErrorView: FC<Props> = observer(({ viewModel }) => {\n  let shouldHideErrorView = true;\n  let errorText = 'There is an error occurred. Please try again';\n  switch (viewModel.state) {\n    case SDFetcherState.initializing:\n    case SDFetcherState.loading:\n      break;\n    case SDFetcherState.loaded:\n      if (viewModel.data.length === 0 && viewModel.searchString) {\n        shouldHideErrorView = false;\n        errorText = 'Theres no address like this';\n      }\n      break;\n    case SDFetcherState.error:\n      shouldHideErrorView = false;\n      break;\n  }\n\n  if (shouldHideErrorView) {\n    return null;\n  }\n\n  return (\n    <Wrapper>\n      <IconWrapper>\n        <RoundStopIcon name=\"round-stop\" />\n      </IconWrapper>\n      <Text>{errorText}</Text>\n    </Wrapper>\n  );\n});\n","import { ZERO } from '@orca-so/sdk';\nimport { action, computed, makeObservable, observable, reaction, runInAction, when } from 'mobx';\nimport { delay, inject, Lifecycle, scoped } from 'tsyringe';\n\nimport { LoadableRelay, LoadableState } from 'new/app/models/LoadableRelay';\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport type { NetworkSelectViewModelType } from 'new/scenes/Main/Send/NetworkSelect/NetworkSelect.ViewModel';\nimport type { SelectAddressError } from 'new/scenes/Main/Send/SelectAddress/SelectAddress.ViewModel';\nimport { SelectAddressViewModel } from 'new/scenes/Main/Send/SelectAddress/SelectAddress.ViewModel';\nimport type * as FeeRelayer from 'new/sdk/FeeRelayer';\nimport type * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { convertToBalance, FeeAmount, toLamport } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { ModalService, ModalType } from 'new/services/ModalService';\nimport { PricesService } from 'new/services/PriceAPIs/PricesService';\nimport { WalletsRepository } from 'new/services/Repositories';\nimport { SendRelayMethod, SendService } from 'new/services/SendService';\nimport { ChooseWalletViewModel } from 'new/ui/components/common/ChooseWallet/ChooseWallet.ViewModel';\nimport type { ConfirmSendModalProps } from 'new/ui/modals/confirmModals/ConfirmSendModal/ConfirmSendModal';\nimport * as ProcessTransaction from 'new/ui/modals/ProcessTransactionModal/ProcessTransaction.Models';\nimport type { ProcessTransactionModalProps } from 'new/ui/modals/ProcessTransactionModal/ProcessTransactionModal';\nimport { numberToString } from 'new/utils/NumberExtensions';\nimport { bitcoinAddress, matches } from 'new/utils/RegularExpression';\n\nimport type { ChooseTokenAndAmountError } from './ChooseTokenAndAmount';\nimport { ChooseTokenAndAmountViewModel } from './ChooseTokenAndAmount';\n\nexport type Recipient = {\n  address: string;\n  name: string | null;\n  hasNoFunds: boolean;\n  hasNoInfo?: boolean; // default false\n};\n\nexport enum Network {\n  solana = 'solana',\n  bitcoin = 'bitcoin',\n}\n\nexport type FeeInfo = {\n  feeAmount: SolanaSDK.FeeAmount;\n  feeAmountInSOL: SolanaSDK.FeeAmount;\n  hasAvailableWalletToPayFee: boolean;\n};\n\nexport interface SendViewModelType {\n  relayMethod: SendRelayMethod;\n\n  // SendTokenChooseRecipientAndNetworkViewModelType\n  get getSelectedWallet(): Wallet | null;\n  getPrice(symbol: string): number;\n  getPrices(symbols: string[]): Record<string, number>;\n  get getFeeInCurrentFiat(): string;\n  getFreeTransactionFeeLimit(): Promise<FeeRelayer.UsageStatus>;\n\n  chooseWallet(wallet: Wallet): void;\n\n  readonly wallet: Wallet | null;\n  readonly amount: number;\n  readonly recipient: Recipient | null;\n  // SendTokenRecipientAndNetworkHandler\n  readonly network: Network;\n  readonly loadingState: LoadableState;\n  readonly payingWallet: Wallet | null;\n  readonly feeInfo: LoadableRelay<FeeInfo>;\n  selectRecipient(recipient: Recipient | null): void;\n  selectNetwork(network: Network): void;\n\n  chooseTokenAndAmountViewModel: ChooseTokenAndAmountViewModel;\n}\n\n@scoped(Lifecycle.ResolutionScoped)\nexport class SendViewModel\n  extends ViewModel\n  implements SendViewModelType, NetworkSelectViewModelType\n{\n  // Subject\n\n  wallet: Wallet | null;\n  amount: number;\n  recipient: Recipient | null;\n  network: Network;\n  loadingState: LoadableState;\n  payingWallet: Wallet | null;\n  feeInfo: LoadableRelay<FeeInfo>;\n  relayMethod: SendRelayMethod;\n\n  // ChooseTokenAndAmount\n  // currencyMode: CurrencyMode = CurrencyMode.token;\n\n  private _walletsLoadPromise: (Promise<void> & { cancel(): void }) | null;\n\n  constructor(\n    private _pricesService: PricesService,\n    private _sendService: SendService,\n    public walletsRepository: WalletsRepository,\n    public chooseTokenAndAmountViewModel: ChooseTokenAndAmountViewModel,\n    public choosePayingWalletViewModel: ChooseWalletViewModel,\n    @inject(delay(() => SelectAddressViewModel))\n    public selectAddressViewModel: Readonly<SelectAddressViewModel>,\n    private _modalService: ModalService,\n  ) {\n    super();\n\n    // TODO: relayMethod in constructor\n    this.relayMethod = SendRelayMethod.default;\n\n    this.wallet = null;\n    this.amount = 0;\n    this.recipient = null;\n    this.network = Network.solana;\n    this.loadingState = LoadableState.notRequested;\n    this.payingWallet = null;\n    this.feeInfo = new LoadableRelay<FeeInfo>(\n      Promise.resolve({\n        feeAmount: FeeAmount.zero(),\n        feeAmountInSOL: FeeAmount.zero(),\n        hasAvailableWalletToPayFee: false,\n      }),\n    );\n    this._walletsLoadPromise = null;\n\n    makeObservable(this, {\n      wallet: observable,\n      amount: observable,\n      recipient: observable,\n      network: observable,\n      loadingState: observable,\n      payingWallet: observable,\n      feeInfo: observable,\n      relayMethod: observable,\n\n      // currencyMode: observable,\n\n      getSelectedWallet: computed,\n\n      getFeeInCurrentFiat: computed,\n\n      getSelectableNetworks: computed,\n\n      chooseWallet: action,\n      enterAmount: action,\n\n      selectRecipient: action,\n      selectNetwork: action,\n      selectPayingWallet: action,\n\n      openConfirmModal: action,\n    });\n  }\n\n  protected override setDefaults() {\n    this.relayMethod = SendRelayMethod.default;\n\n    this.wallet = null;\n    this.amount = 0;\n    this.recipient = null;\n    this.network = Network.solana;\n    this.loadingState = LoadableState.notRequested;\n    this.payingWallet = null;\n    this.feeInfo = new LoadableRelay<FeeInfo>(\n      Promise.resolve({\n        feeAmount: FeeAmount.zero(),\n        feeAmountInSOL: FeeAmount.zero(),\n        hasAvailableWalletToPayFee: false,\n      }),\n    );\n    this._walletsLoadPromise = null;\n  }\n\n  protected override onInitialize() {\n    this.chooseTokenAndAmountViewModel.initialize();\n    this.selectAddressViewModel.initialize();\n    this.choosePayingWalletViewModel.initialize();\n\n    this._bind();\n    this.reload();\n  }\n\n  protected override afterReactionsRemoved() {\n    this.chooseTokenAndAmountViewModel.end();\n    this.selectAddressViewModel.end();\n    this.choosePayingWalletViewModel.end();\n\n    if (this._walletsLoadPromise) {\n      this._walletsLoadPromise.cancel();\n    }\n  }\n\n  private _bind(): void {\n    // Smart select fee token\n    this.addReaction(\n      reaction(\n        () => this.recipient,\n        (receiver) => {\n          (async () => {\n            const wallet = this.wallet;\n            if (!wallet || !receiver) {\n              return FeeAmount.zero();\n            }\n\n            return this._sendService\n              .getFees({\n                wallet,\n                receiver: receiver.address,\n                network: this.network,\n                payingTokenMint: wallet.mintAddress,\n              })\n              .then((fee) => {\n                if (!fee) {\n                  return FeeAmount.zero();\n                }\n\n                return this._sendService.getFeesInPayingToken({\n                  feeInSOL: fee,\n                  payingFeeWallet: wallet,\n                });\n              });\n          })()\n            .then((fee) => {\n              const amount = this.amount;\n              const wallet = this.wallet;\n              if (!amount || !wallet || !fee) {\n                return;\n              }\n\n              if (\n                toLamport(amount, wallet.token.decimals)\n                  .add(fee.total)\n                  .gt(wallet.lamports ?? ZERO)\n              ) {\n                runInAction(() => {\n                  this.payingWallet = this.walletsRepository.nativeWallet;\n                });\n              } else {\n                runInAction(() => {\n                  this.payingWallet = wallet;\n                });\n              }\n            })\n            .catch((error) => console.error(error));\n        },\n      ),\n    );\n\n    this._bindFees();\n  }\n\n  private _bindFees(): void {\n    this.addReaction(\n      reaction(\n        () => ({\n          payingWallet: this.payingWallet,\n          recipient: this.recipient,\n          network: this.network,\n          wallet: this.getSelectedWallet,\n        }),\n        ({ payingWallet, recipient, network, wallet }) => {\n          if (wallet) {\n            this.feeInfo.request = this._sendService\n              .getFees({\n                wallet,\n                receiver: recipient?.address,\n                network,\n                payingTokenMint: payingWallet?.mintAddress,\n              })\n              .then(async (_feeAmountInSol) => {\n                // if fee is nil, no need to check for available wallets to pay fee\n                const feeAmountInSOL = _feeAmountInSol ?? FeeAmount.zero();\n\n                if (feeAmountInSOL.total.eq(ZERO)) {\n                  return {\n                    feeAmount: FeeAmount.zero(),\n                    feeAmountInSOL: FeeAmount.zero(),\n                    hasAvailableWalletToPayFee: true,\n                  };\n                }\n                // else, check available wallets to pay fee\n                const payingFeeWallet = payingWallet;\n                if (!payingFeeWallet) {\n                  return {\n                    feeAmount: FeeAmount.zero(),\n                    feeAmountInSOL: FeeAmount.zero(),\n                    hasAvailableWalletToPayFee: false,\n                  };\n                }\n\n                let availableWallets: SolanaSDK.Wallet[] = [];\n                let feeInSPL: SolanaSDK.FeeAmount | null = null;\n                try {\n                  [availableWallets, feeInSPL] = await Promise.all([\n                    this._sendService.getAvailableWalletsToPayFee({ feeInSOL: feeAmountInSOL }),\n                    this._sendService.getFeesInPayingToken({\n                      feeInSOL: feeAmountInSOL,\n                      payingFeeWallet,\n                    }),\n                  ]);\n\n                  return {\n                    feeAmount: feeInSPL ?? FeeAmount.zero(),\n                    feeAmountInSOL,\n                    hasAvailableWalletToPayFee: availableWallets.length !== 0,\n                  };\n                } catch (error) {\n                  console.error(error);\n                  return {\n                    feeAmount: FeeAmount.zero(),\n                    feeAmountInSOL,\n                    hasAvailableWalletToPayFee: availableWallets.length !== 0,\n                  };\n                }\n              });\n          } else {\n            this.feeInfo.request = Promise.resolve({\n              feeAmount: FeeAmount.zero(),\n              feeAmountInSOL: FeeAmount.zero(),\n              hasAvailableWalletToPayFee: false,\n            });\n          }\n          this.feeInfo.reload();\n        },\n      ),\n    );\n  }\n\n  reload(): void {\n    this.loadingState = LoadableState.loading;\n\n    this._walletsLoadPromise = when(() => this.walletsRepository.state === SDFetcherState.loaded);\n\n    Promise.all([this._sendService.load(), this._walletsLoadPromise])\n      .then(() => {\n        runInAction(() => {\n          this.loadingState = LoadableState.loaded;\n          if (!this.wallet) {\n            this.wallet = this.walletsRepository.nativeWallet;\n          }\n          const payingWallet = this.walletsRepository\n            .getWallets()\n            .find((wallet) => wallet.mintAddress === Defaults.payingTokenMint);\n          if (payingWallet) {\n            this.payingWallet = payingWallet;\n          }\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n        runInAction(() => {\n          this.loadingState = LoadableState.error(error);\n        });\n      });\n  }\n\n  private _send() {\n    const wallet = this.wallet;\n    let amount = this.amount;\n    const receiver = this.recipient;\n    if (!wallet || !amount || !receiver) {\n      return;\n    }\n\n    // modify amount if using source wallet as paying wallet\n    const totalFee = this.feeInfo.value?.feeAmount;\n    if (totalFee && totalFee.total.gtn(0) && this.payingWallet?.pubkey === wallet.pubkey) {\n      const feeAmount = convertToBalance(totalFee.total, this.payingWallet?.token.decimals);\n      if (amount + feeAmount > wallet.amount) {\n        amount -= feeAmount;\n      }\n    }\n\n    const network = this.network;\n\n    void this._modalService.openModal<void, ProcessTransactionModalProps>(\n      ModalType.SHOW_MODAL_PROCESS_TRANSACTION,\n      {\n        transaction: new ProcessTransaction.SendTransaction({\n          sendService: this._sendService,\n          network: network,\n          sender: wallet,\n          receiver: receiver,\n          authority: this.walletsRepository.nativeWallet?.pubkey ?? null,\n          amount: toLamport(amount, wallet.token.decimals),\n          payingFeeWallet: this.payingWallet,\n          feeInSOL: this.feeInfo.value?.feeAmountInSOL.total ?? ZERO,\n          feeInToken: this.feeInfo.value?.feeAmount ?? null,\n          isSimulation: false,\n          isRenBTCViaBitcoinNetwork: network === Network.bitcoin && this._isRecipientBTCAddress(),\n        }),\n      },\n    );\n  }\n\n  // SendTokenChooseRecipientAndNetworkViewModelType\n\n  get getSelectedWallet(): Wallet | null {\n    return this.wallet;\n  }\n\n  getPrice(symbol: string): number {\n    return this._pricesService.currentPrice(symbol)?.value ?? 0;\n  }\n\n  getPrices(symbols: string[]): Record<string, number> {\n    const dict: Record<string, number> = {};\n    for (const symbol of symbols) {\n      dict[symbol] = this.getPrice(symbol);\n    }\n    return dict;\n  }\n\n  get getFeeInCurrentFiat(): string {\n    let fee = 0;\n    const feeInfo = this.feeInfo.value;\n    if (feeInfo) {\n      const feeInSol = convertToBalance(feeInfo.feeAmountInSOL.total, 9);\n      fee = feeInSol * this.getPrice('SOL');\n    }\n    return `~${Defaults.fiat.symbol}${numberToString(fee, { maximumFractionDigits: 2 })}`;\n  }\n\n  get getSelectableNetworks(): Network[] {\n    const networks: Network[] = [Network.solana];\n\n    if (this.getSelectedWallet?.token.isRenBTC) {\n      networks.push(Network.bitcoin);\n    }\n    return networks;\n  }\n\n  getFreeTransactionFeeLimit(): Promise<FeeRelayer.UsageStatus> {\n    return this._sendService.getFreeTransactionFeeLimit();\n  }\n\n  chooseWallet(wallet: Wallet): void {\n    this.wallet = wallet;\n\n    if (!wallet.token.isRenBTC && this.network === Network.bitcoin) {\n      this.selectNetwork(Network.solana);\n    }\n  }\n\n  authenticateAndSend(): void {\n    // TODO: authenticationHandler\n    this._send();\n  }\n\n  ///\n\n  enterAmount(amount: number) {\n    this.amount = amount;\n  }\n\n  // SendTokenRecipientAndNetworkHandler\n\n  selectRecipient(recipient: Recipient | null = null): void {\n    this.recipient = recipient;\n\n    if (recipient !== null) {\n      if (this._isRecipientBTCAddress()) {\n        this.network = Network.bitcoin;\n      } else {\n        this.network = Network.solana;\n      }\n    }\n  }\n\n  selectNetwork(network: Network): void {\n    this.network = network;\n\n    switch (network) {\n      case Network.solana: {\n        if (this._isRecipientBTCAddress()) {\n          this.selectAddressViewModel.clearRecipient();\n          this.selectAddressViewModel.clearSearching();\n        }\n        break;\n      }\n      case Network.bitcoin: {\n        if (!this._isRecipientBTCAddress()) {\n          this.selectAddressViewModel.clearRecipient();\n          this.selectAddressViewModel.clearSearching();\n        }\n      }\n    }\n  }\n\n  selectPayingWallet(payingWallet: Wallet): void {\n    Defaults.payingTokenMint = payingWallet.mintAddress;\n    this.payingWallet = payingWallet;\n  }\n\n  // Helpers\n\n  // TODO:\n  private _isRecipientBTCAddress(): boolean {\n    const recipient = this.recipient;\n    if (!recipient) {\n      return false;\n    }\n\n    return (\n      recipient.name === null &&\n      matches(recipient.address, [bitcoinAddress(this._sendService.isTestNet())])\n    );\n  }\n\n  // our code\n\n  openConfirmModal(): Promise<void> {\n    return this._modalService.openModal<void, ConfirmSendModalProps>(\n      ModalType.SHOW_MODAL_CONFIRM_SEND,\n      {\n        viewModel: this,\n      },\n    );\n  }\n\n  get error(): ChooseTokenAndAmountError | SelectAddressError | null {\n    return this.chooseTokenAndAmountViewModel.error || this.selectAddressViewModel.error;\n  }\n}\n","export function bitcoinAddress(isTestnet: boolean): RegExp {\n  return new RegExp(`^(${isTestnet ? 'tb1|' : ''}bc1|[13])[a-zA-HJ-NP-Z0-9]{25,39}$`);\n}\n\nexport function publickey(): RegExp {\n  return new RegExp('^[1-9A-HJ-NP-Za-km-z]{32,44}$');\n}\n\nexport function matches(text: string, regexes: RegExp[]): boolean {\n  return regexes.some((regex) => regex.test(text));\n}\n","import type { FC } from 'react';\nimport Skeleton from 'react-loading-skeleton';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { Icon } from 'components/ui';\nimport type { Recipient } from 'new/scenes/Main/Send';\nimport { AddressText } from 'new/ui/components/common/AddressText';\n\nconst Wrapper = styled.div`\n  display: flex;\n\n  cursor: pointer;\n`;\n\nconst IconWrapper = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n\n  background: ${theme.colors.bg.secondary};\n  border-radius: 12px;\n\n  &.isFocused {\n    background: ${theme.colors.bg.activePrimary};\n    border: 1px solid ${theme.colors.textIcon.active};\n  }\n\n  &.isWarning {\n    background: ${theme.colors.system.warningBg};\n  }\n\n  &.isError {\n    background: ${theme.colors.system.errorBg};\n  }\n`;\n\nconst RecipientIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.secondary};\n\n  &.isWarning {\n    color: ${theme.colors.system.warningMain};\n  }\n`;\n\nconst InfoWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  margin-left: 12px;\n`;\n\nconst Title = styled.div`\n  font-weight: 600;\n  font-size: 16px;\n`;\n\nconst Description = styled.div`\n  &.isWarning {\n    color: ${theme.colors.system.warningMain};\n  }\n`;\n\nconst ClearWrapper = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  margin-left: 12px;\n\n  background: ${theme.colors.bg.primary};\n  border: 1px solid ${theme.colors.stroke.primary};\n  border-radius: 8px;\n  cursor: pointer;\n`;\n\nconst ClearIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.active};\n`;\n\ninterface Props {\n  recipient?: Recipient;\n  isPlaceholder?: boolean;\n  onRecipientClick?: () => void;\n  onClearClick?: () => void;\n}\n\nexport const RecipientView: FC<Props> = observer(\n  ({ recipient, isPlaceholder, onRecipientClick, onClearClick }) => {\n    if (isPlaceholder) {\n      return (\n        <Wrapper>\n          <Skeleton height={44} width={44} borderRadius={12} />\n          <InfoWrapper>\n            <Title>\n              <Skeleton width={100} height={16} />\n            </Title>\n            <Description>\n              <Skeleton width={150} height={14} />\n            </Description>\n          </InfoWrapper>\n        </Wrapper>\n      );\n    }\n\n    if (!recipient) {\n      return null;\n    }\n\n    const shouldShowDescriptionLabel = recipient.hasNoFunds || recipient.hasNoInfo;\n\n    const elIcon = expr(() => {\n      if (!recipient.name && shouldShowDescriptionLabel) {\n        return (\n          <IconWrapper className={classNames({ isWarning: true })}>\n            <RecipientIcon name=\"warning\" className={classNames({ isWarning: true })} />\n          </IconWrapper>\n        );\n      }\n\n      return (\n        <IconWrapper>\n          <RecipientIcon name=\"wallet\" />\n        </IconWrapper>\n      );\n    });\n\n    const elTitle = expr(() => {\n      return (\n        <Title>{recipient.name || <AddressText address={recipient.address} small gray />}</Title>\n      );\n    });\n\n    const elDescription = expr(() => {\n      if (!recipient.name) {\n        if (shouldShowDescriptionLabel) {\n          return (\n            <Description className={classNames({ isWarning: true })}>\n              {recipient.hasNoFunds\n                ? 'Caution: this address has no funds'\n                : 'Could not retrieve account info'}\n            </Description>\n          );\n        }\n\n        return null;\n      }\n\n      return (\n        <Description>\n          <AddressText address={recipient.address} small gray />\n        </Description>\n      );\n    });\n\n    return (\n      <Wrapper onClick={onRecipientClick}>\n        {elIcon}\n        <InfoWrapper>\n          {elTitle}\n          {elDescription}\n        </InfoWrapper>\n        {onClearClick ? (\n          <ClearWrapper onClick={onClearClick}>\n            <ClearIcon name=\"cross\" />\n          </ClearWrapper>\n        ) : null}\n      </Wrapper>\n    );\n  },\n);\n","import type { FC } from 'react';\n\nimport type { Recipient } from 'new/scenes/Main/Send';\nimport { RecipientView } from 'new/scenes/Main/Send/SelectAddress/RecipientView';\n\ninterface Props {\n  recipient?: Recipient;\n  isPlaceholder?: boolean;\n  onRecipientClick?: () => void;\n  onClearClick?: () => void;\n}\n\nexport const RecipientCell: FC<Props> = ({\n  recipient,\n  isPlaceholder,\n  onRecipientClick,\n  onClearClick,\n}) => {\n  return (\n    <RecipientView\n      recipient={recipient}\n      isPlaceholder={isPlaceholder}\n      onRecipientClick={onRecipientClick}\n      onClearClick={onClearClick}\n    />\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { up } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport type { Recipient } from 'new/scenes/Main/Send';\nimport { RecipientCell } from 'new/scenes/Main/Send/SelectAddress/Subviews/RecipientsCollectionView/RecipientCell';\nimport type { RecipientsListViewModel } from 'new/scenes/Main/Send/SelectAddress/Subviews/RecipientsCollectionView/RecipientsList.ViewModel';\nimport { StaticSectionsCollectionView } from 'new/ui/components/common/StaticSectionsCollectionView';\n\nconst StaticSectionsCollectionViewStyled = styled(StaticSectionsCollectionView)`\n  display: grid;\n  grid-gap: 8px;\n\n  ${up.tablet} {\n    grid-gap: 16px;\n    margin: initial;\n  }\n`;\n\ninterface Props {\n  viewModel: Readonly<RecipientsListViewModel>;\n  onRecipientClick: (recipient: Recipient) => void;\n  className?: string;\n}\n\nexport const RecipientsCollectionView: FC<Props> = observer(\n  ({ viewModel, onRecipientClick, className }) => {\n    return (\n      <StaticSectionsCollectionViewStyled<Recipient>\n        viewModel={viewModel}\n        renderPlaceholder={(key) => <RecipientCell key={key} isPlaceholder />}\n        renderItem={(recipient: Recipient) => (\n          <RecipientCell\n            key={recipient.name || recipient.address}\n            recipient={recipient}\n            onRecipientClick={() => onRecipientClick(recipient)}\n          />\n        )}\n        className={className}\n      />\n    );\n  },\n);\n","import { flow, reaction } from 'mobx';\nimport { delay, inject, injectable } from 'tsyringe';\n\nimport { SDListViewModel } from 'new/core/viewmodels/SDListViewModel';\nimport type { Recipient } from 'new/scenes/Main/Send';\nimport { Network, SendViewModel } from 'new/scenes/Main/Send';\nimport { NameService } from 'new/services/NameService';\nimport { SendService } from 'new/services/SendService';\nimport { bitcoinAddress, matches, publickey } from 'new/utils/RegularExpression';\n\n@injectable()\nexport class RecipientsListViewModel extends SDListViewModel<Recipient> {\n  private _preSelectedNetwork: Network;\n\n  // Properties\n  searchString?: string;\n\n  get isSearchingByAddress(): boolean {\n    if (!this.searchString) {\n      return false;\n    }\n\n    return matches(this.searchString, [\n      bitcoinAddress(this._solanaAPIClient.isTestNet()),\n      publickey(),\n    ]);\n  }\n\n  constructor(\n    private _nameService: NameService,\n    private _solanaAPIClient: SendService,\n    @inject(delay(() => SendViewModel))\n    private _sendViewModel: Readonly<SendViewModel>,\n  ) {\n    super();\n\n    this._preSelectedNetwork = this._sendViewModel.network;\n  }\n\n  protected override setDefaults() {\n    this._preSelectedNetwork = this._sendViewModel.network;\n  }\n\n  protected override onInitialize() {\n    this.addReaction(\n      reaction(\n        () => this._sendViewModel.network,\n        (network) => {\n          this._preSelectedNetwork = network;\n        },\n      ),\n    );\n  }\n\n  protected override afterReactionsRemoved() {}\n\n  // Methods\n\n  override createRequest = flow<Recipient[], []>(function* (\n    this: RecipientsListViewModel,\n  ): Generator<Promise<Recipient[]>> {\n    if (!this.searchString) {\n      return yield Promise.resolve([]);\n    }\n\n    // force find by address when network is bitcoin\n    return yield this._preSelectedNetwork === Network.bitcoin || this.isSearchingByAddress\n      ? this._findRecipientBy(this.searchString)\n      : this._findRecipientsBy(this.searchString);\n  });\n\n  private _findRecipientsBy(name: string): Promise<Recipient[]> {\n    return this._nameService.getOwners(name).then((owners) => {\n      return owners.map(\n        (owner) =>\n          <Recipient>{\n            address: owner.owner,\n            name: owner.name,\n            hasNoFunds: false,\n          },\n      );\n    });\n  }\n\n  private _findRecipientBy(address: string): Promise<Recipient[]> {\n    switch (this._preSelectedNetwork) {\n      case Network.bitcoin:\n        return this._findAddressInBitcoinNetwork(address);\n      case Network.solana:\n        return this._findAddressInSolanaNetwork(address);\n      default: {\n        if (matches(address, [bitcoinAddress(this._solanaAPIClient.isTestNet())])) {\n          return this._findAddressInBitcoinNetwork(address);\n        }\n        return this._findAddressInSolanaNetwork(address);\n      }\n    }\n  }\n\n  private _findAddressInBitcoinNetwork(address: string): Promise<Recipient[]> {\n    if (matches(address, [bitcoinAddress(this._solanaAPIClient.isTestNet())])) {\n      return Promise.resolve([\n        {\n          address,\n          name: null,\n          hasNoFunds: false,\n        },\n      ]);\n    }\n    return Promise.resolve([]);\n  }\n\n  private _findAddressInSolanaNetwork(address: string): Promise<Recipient[]> {\n    return this._solanaAPIClient\n      .checkAccountValidation(address)\n      .catch(() => false)\n      .then((result) => [\n        <Recipient>{\n          address,\n          name: null,\n          hasNoFunds: !result,\n        },\n      ]);\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { action, makeObservable, observable } from 'mobx';\nimport { delay, inject, injectable } from 'tsyringe';\n\nimport { LoadableStateType } from 'new/app/models/LoadableRelay';\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport { SendRelayMethodType } from 'new/services/SendService';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport type { Recipient } from '../Send.ViewModel';\nimport { Network, SendViewModel } from '../Send.ViewModel';\nimport { RecipientsListViewModel } from './Subviews/RecipientsCollectionView';\n\nexport enum SelectAddressErrorType {\n  chooseTheRecipientToProceed = 'chooseTheRecipientToProceed',\n  chooseTheTokenToPayFees = 'chooseTheTokenToPayFees',\n  calculatingFees = 'calculatingFees',\n  pleaseChooseAnotherOne = 'pleaseChooseAnotherOne',\n  insufficientFundsToCoverFees = 'insufficientFundsToCoverFees',\n  yourAccountDoesNotHaveEnoughToCoverFeesNeedsAtLeast = 'yourAccountDoesNotHaveEnoughToCoverFeesNeedsAtLeast',\n  yourAccountDoesNotHaveEnoughToCoverFees = 'yourAccountDoesNotHaveEnoughToCoverFees',\n}\n\ntype SelectAddressErrorTypeDataType = Partial<{\n  symbol: string;\n  neededAmount: string;\n}>;\n\nexport class SelectAddressError {\n  readonly type: SelectAddressErrorType;\n  readonly data: SelectAddressErrorTypeDataType;\n\n  static get chooseTheRecipientToProceed(): SelectAddressError {\n    return new SelectAddressError(SelectAddressErrorType.chooseTheRecipientToProceed);\n  }\n  static get chooseTheTokenToPayFees(): SelectAddressError {\n    return new SelectAddressError(SelectAddressErrorType.chooseTheTokenToPayFees);\n  }\n  static get calculatingFees(): SelectAddressError {\n    return new SelectAddressError(SelectAddressErrorType.calculatingFees);\n  }\n  static get pleaseChooseAnotherOne(): SelectAddressError {\n    return new SelectAddressError(SelectAddressErrorType.pleaseChooseAnotherOne);\n  }\n  static get insufficientFundsToCoverFees(): SelectAddressError {\n    return new SelectAddressError(SelectAddressErrorType.insufficientFundsToCoverFees);\n  }\n  static yourAccountDoesNotHaveEnoughToCoverFeesNeedsAtLeast(\n    data: SelectAddressErrorTypeDataType,\n  ): SelectAddressError {\n    return new SelectAddressError(\n      SelectAddressErrorType.yourAccountDoesNotHaveEnoughToCoverFeesNeedsAtLeast,\n      data,\n    );\n  }\n  static yourAccountDoesNotHaveEnoughToCoverFees(\n    data: SelectAddressErrorTypeDataType,\n  ): SelectAddressError {\n    return new SelectAddressError(\n      SelectAddressErrorType.yourAccountDoesNotHaveEnoughToCoverFees,\n      data,\n    );\n  }\n\n  constructor(type: SelectAddressErrorType, data: SelectAddressErrorTypeDataType = {}) {\n    this.type = type;\n    this.data = data;\n  }\n\n  get buttonSuggestion(): string {\n    switch (this.type) {\n      case SelectAddressErrorType.chooseTheRecipientToProceed:\n        return 'Choose the recipient to proceed';\n      case SelectAddressErrorType.chooseTheTokenToPayFees:\n        return 'Choose the token to pay fees';\n      case SelectAddressErrorType.calculatingFees:\n        return 'Calculating fees';\n      case SelectAddressErrorType.pleaseChooseAnotherOne:\n        return 'Paying token is not valid. Please choose another one';\n      case SelectAddressErrorType.insufficientFundsToCoverFees:\n        return 'Insufficient funds to cover fees';\n      case SelectAddressErrorType.yourAccountDoesNotHaveEnoughToCoverFeesNeedsAtLeast:\n        return `Your account does not have enough ${this.data.symbol} to cover fees. Needs at least ${this.data.neededAmount} ${this.data.symbol}`;\n      case SelectAddressErrorType.yourAccountDoesNotHaveEnoughToCoverFees:\n        return `Your account does not have enough ${this.data.symbol} to cover fees`;\n    }\n  }\n}\n\nexport enum InputState {\n  searching = 'searching',\n  recipientSelected = 'recipientSelected',\n}\n\nexport interface SelectAddressViewModelType {\n  // SendTokenChooseRecipientAndNetworkSelectAddressViewModelType\n  readonly preSelectedNetwork: Network | null;\n  readonly inputState: string | null;\n  readonly searchText: string | null;\n\n  search(address?: string): void;\n  selectRecipient(recipient: Recipient | null): void;\n  clearRecipient(): void;\n}\n\n@injectable()\nexport class SelectAddressViewModel extends ViewModel implements SelectAddressViewModelType {\n  // SendTokenChooseRecipientAndNetworkSelectAddressViewModelType\n  preSelectedNetwork: Network | null;\n  inputState: InputState;\n  searchText: string | null;\n\n  constructor(\n    public recipientsListViewModel: RecipientsListViewModel,\n    @inject(delay(() => SendViewModel)) public sendViewModel: Readonly<SendViewModel>,\n  ) {\n    super();\n\n    this.preSelectedNetwork = null;\n    this.inputState = InputState.searching;\n    this.searchText = null;\n\n    makeObservable(this, {\n      inputState: observable,\n      searchText: observable,\n\n      search: action,\n      selectRecipient: action,\n      clearRecipient: action,\n    });\n  }\n\n  protected override setDefaults() {\n    this.preSelectedNetwork = null;\n    this.inputState = InputState.searching;\n    this.searchText = null;\n  }\n\n  protected override onInitialize() {\n    this.recipientsListViewModel.initialize();\n  }\n\n  protected override afterReactionsRemoved() {\n    this.recipientsListViewModel.end();\n  }\n\n  // SendTokenChooseRecipientAndNetworkSelectAddressViewModelType\n  search(address = ''): void {\n    this.searchText = address;\n    if (this.recipientsListViewModel.searchString !== address) {\n      this.recipientsListViewModel.searchString = address;\n      this.recipientsListViewModel.reload();\n    }\n  }\n\n  selectRecipient(recipient: Recipient | null = null) {\n    this.sendViewModel.selectRecipient(recipient);\n    this.inputState = InputState.recipientSelected;\n  }\n\n  clearRecipient() {\n    this.inputState = InputState.searching;\n    this.sendViewModel.selectRecipient(null);\n  }\n\n  clearSearching() {\n    this.search('');\n  }\n\n  // our code\n\n  get error() {\n    const sourceWallet = this.sendViewModel.wallet;\n    const recipient = this.sendViewModel.recipient;\n    const payingWallet = this.sendViewModel.payingWallet;\n    const feeInfo = this.sendViewModel.feeInfo;\n    const network = this.sendViewModel.network;\n\n    if (recipient === null) {\n      return SelectAddressError.chooseTheRecipientToProceed;\n    }\n\n    switch (network) {\n      case Network.solana:\n        switch (this.sendViewModel.relayMethod.type) {\n          case SendRelayMethodType.relay: {\n            switch (feeInfo.state.type) {\n              case LoadableStateType.notRequested:\n                return SelectAddressError.chooseTheTokenToPayFees;\n              case LoadableStateType.loading:\n                return SelectAddressError.calculatingFees;\n              case LoadableStateType.loaded: {\n                const value = feeInfo.value;\n                if (!value) {\n                  return SelectAddressError.pleaseChooseAnotherOne;\n                }\n\n                if (!value.hasAvailableWalletToPayFee) {\n                  return SelectAddressError.insufficientFundsToCoverFees;\n                }\n\n                if (value.feeAmount.total.gt(ZERO) && payingWallet && payingWallet.lamports) {\n                  if (payingWallet.lamports.lt(value.feeAmount.total)) {\n                    const neededAmount = numberToString(\n                      convertToBalance(value.feeAmount.total, payingWallet.token.decimals),\n                      { maximumFractionDigits: payingWallet.token.decimals },\n                    );\n\n                    return SelectAddressError.yourAccountDoesNotHaveEnoughToCoverFeesNeedsAtLeast({\n                      symbol: payingWallet.token.symbol,\n                      neededAmount,\n                    });\n                  }\n\n                  if (\n                    payingWallet.lamports.eq(value.feeAmount.total) &&\n                    sourceWallet?.pubkey === payingWallet.pubkey\n                  ) {\n                    return SelectAddressError.yourAccountDoesNotHaveEnoughToCoverFees({\n                      symbol: payingWallet.token.symbol,\n                    });\n                  }\n                }\n\n                if (value.feeAmount.total.eq(ZERO) && value.feeAmountInSOL.total.gt(ZERO)) {\n                  return SelectAddressError.pleaseChooseAnotherOne;\n                }\n                break;\n              }\n              case LoadableStateType.error:\n                return SelectAddressError.pleaseChooseAnotherOne;\n            }\n          }\n        }\n        break;\n      case Network.bitcoin:\n        break;\n    }\n\n    return null;\n  }\n}\n","import type { FC } from 'react';\nimport { useRef, useState } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { useDebouncedCallback } from 'use-debounce';\n\nimport { Icon } from 'components/ui';\nimport type { SelectAddressViewModel } from 'new/scenes/Main/Send/SelectAddress/SelectAddress.ViewModel';\n\nconst Wrapper = styled.div`\n  display: flex;\n`;\n\nconst IconWrapper = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n\n  background: ${theme.colors.bg.secondary};\n  border-radius: 12px;\n\n  &.isFocused {\n    background: ${theme.colors.bg.activePrimary};\n    border: 1px solid ${theme.colors.textIcon.active};\n  }\n`;\n\nconst SearchIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.active};\n`;\n\nconst ToInput = styled.input`\n  flex: 1;\n  margin-left: 12px;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 16px;\n  font-family: inherit;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  background: transparent;\n  border: 0;\n\n  outline: none;\n\n  appearance: none;\n\n  &.isAddressResolved {\n    height: 18px;\n\n    font-size: 16px;\n  }\n\n  &.hasError {\n    height: 18px;\n\n    font-size: 16px;\n  }\n\n  &::placeholder {\n    color: ${theme.colors.textIcon.secondary} !important;\n\n    opacity: 1;\n  }\n`;\n\nconst ClearWrapper = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n\n  background: ${theme.colors.bg.primary};\n  border: 1px solid ${theme.colors.stroke.primary};\n  border-radius: 8px;\n  cursor: pointer;\n`;\n\nconst ClearIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.active};\n`;\n\ninterface Props {\n  viewModel: Readonly<SelectAddressViewModel>;\n}\n\nexport const AddressInputView: FC<Props> = observer(({ viewModel }) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [isFocused, setIsFocused] = useState(false);\n\n  const handleChange = useDebouncedCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.trim();\n    viewModel.search(value);\n  }, 300);\n\n  const handleClear = () => {\n    viewModel.clearSearching();\n    if (inputRef.current) {\n      inputRef.current.value = '';\n    }\n  };\n\n  return (\n    <Wrapper>\n      <IconWrapper className={classNames({ isFocused })}>\n        <SearchIcon name=\"search\" />\n      </IconWrapper>\n      <ToInput\n        ref={inputRef}\n        placeholder=\"Username / SOL address\"\n        onChange={handleChange}\n        onFocus={() => setIsFocused(true)}\n        onBlur={() => setIsFocused(false)}\n        // className={classNames({\n        //   isAddressResolved: resolvedAddress,\n        //   hasError: isAddressInvalid,\n        // })}\n      />\n      <ClearWrapper onClick={handleClear}>\n        <ClearIcon name=\"cross\" />\n      </ClearWrapper>\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\nimport { useMount } from 'react-use';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport type { Recipient, SendViewModel } from 'new/scenes/Main/Send';\nimport { AttentionView } from 'new/scenes/Main/Send/SelectAddress/AttentionView';\nimport { ErrorView } from 'new/scenes/Main/Send/SelectAddress/ErrorView';\nimport { InputState } from 'new/scenes/Main/Send/SelectAddress/SelectAddress.ViewModel';\n\nimport { AddressInputView } from './AddressInputView';\nimport { RecipientView } from './RecipientView';\nimport { RecipientsCollectionView } from './Subviews/RecipientsCollectionView';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  border: 1px solid ${theme.colors.stroke.secondary};\n  border-radius: 12px;\n`;\n\nconst CommonWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 16px 20px;\n`;\n\nconst TopWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  margin-bottom: 8px;\n`;\n\nconst Title = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n`;\n\nconst RecipientsCollectionViewStyled = styled(RecipientsCollectionView)`\n  &:not(:empty) {\n    padding: 16px 20px;\n\n    border-top: 1px solid ${theme.colors.stroke.secondary};\n  }\n`;\n\ninterface Props {\n  viewModel: Readonly<SendViewModel>;\n}\n\nexport const SelectAddress: FC<Props> = observer(({ viewModel }) => {\n  const vm = viewModel.selectAddressViewModel;\n\n  useMount(() => vm.recipientsListViewModel.reload());\n\n  // input state\n  const isSearching = expr(() => vm.inputState === InputState.searching);\n\n  // searching empty state\n  const shouldHideNetwork = expr(() => {\n    if (vm.preSelectedNetwork === null) {\n      return isSearching;\n    } else {\n      // show preselected network when search is empty\n      return !(!isSearching || !vm.searchText);\n    }\n  });\n\n  const handleRecipientClick = (recipient: Recipient) => {\n    vm.selectRecipient(recipient);\n  };\n\n  const handleClearClick = () => {\n    vm.clearRecipient();\n    vm.clearSearching();\n  };\n\n  return (\n    <Wrapper>\n      <CommonWrapper>\n        <TopWrapper>\n          <Title>To</Title>\n        </TopWrapper>\n        {isSearching ? (\n          <AddressInputView viewModel={vm} />\n        ) : (\n          <RecipientView\n            recipient={viewModel.recipient ?? undefined}\n            onClearClick={handleClearClick}\n          />\n        )}\n      </CommonWrapper>\n      {/* NetworkView */}\n      <ErrorView viewModel={vm.recipientsListViewModel} />\n      <AttentionView viewModel={viewModel} />\n      {!shouldHideNetwork ? null : (\n        <RecipientsCollectionViewStyled\n          viewModel={vm.recipientsListViewModel}\n          onRecipientClick={handleRecipientClick}\n        />\n      )}\n      {/* WarningView */}\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\n\nimport { WidgetPageWithBottom } from 'components/common/WidgetPageWithBottom';\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { NetworkSelect } from 'new/scenes/Main/Send/NetworkSelect';\nimport { Layout } from 'new/ui/components/common/Layout';\n\nimport { ActionButton } from './ActionButton';\nimport { ChooseTokenAndAmount } from './ChooseTokenAndAmount';\nimport { FeesView } from './FeesView';\nimport { SelectAddress } from './SelectAddress';\nimport { SendViewModel } from './Send.ViewModel';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-gap: 16px;\n`;\n\nexport const Send: FC = observer(() => {\n  const viewModel = useViewModel(SendViewModel);\n\n  return (\n    <Layout>\n      <WidgetPageWithBottom title=\"Send\" icon=\"top\" bottom={<ActionButton viewModel={viewModel} />}>\n        <Wrapper>\n          <ChooseTokenAndAmount viewModel={viewModel} />\n          <SelectAddress viewModel={viewModel} />\n          {viewModel.getSelectedWallet?.token.isRenBTC ? (\n            <NetworkSelect viewModel={viewModel} />\n          ) : null}\n          <FeesView viewModel={viewModel} />\n        </Wrapper>\n      </WidgetPageWithBottom>\n    </Layout>\n  );\n});\n","import { action, makeObservable, observable } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { Fiat } from 'new/app/models/Fiat';\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { WalletModel } from 'new/models/WalletModel';\nimport type { Appearance } from 'new/services/Defaults';\nimport { Defaults } from 'new/services/Defaults';\nimport { LocationService } from 'new/services/LocationService';\nimport { NameService } from 'new/services/NameService';\nimport { NotificationService } from 'new/services/NotificationService';\nimport { PricesService } from 'new/services/PriceAPIs/PricesService';\nimport { SolanaService } from 'new/services/SolanaService';\n\n@singleton()\nexport class SettingsViewModel extends ViewModel {\n  username?: string;\n\n  constructor(\n    private _pricesService: PricesService,\n    private _solanaService: SolanaService,\n    private _nameService: NameService,\n    public walletModel: WalletModel,\n    public locationService: LocationService,\n    private _notificationService: NotificationService,\n  ) {\n    super();\n\n    makeObservable(this, {\n      username: observable,\n\n      setFiat: action,\n      setAppearance: action,\n      setHideZeroBalances: action,\n      setUseFreeTransactions: action,\n    });\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {\n    void this._nameService\n      .getName(this._solanaService.provider.wallet.publicKey.toBase58())\n      .then(action((name) => name && (this.username = name)));\n  }\n\n  protected override afterReactionsRemoved() {}\n\n  get pubkeyBase58(): string {\n    return this._solanaService.provider.wallet.publicKey.toBase58();\n  }\n\n  setFiat(fiat: Fiat) {\n    Defaults.fiat = new Fiat(fiat.type);\n\n    this._pricesService.clearCurrentPrices();\n    this._pricesService.fetchAllTokensPriceInWatchList();\n\n    this._notificationService.info('Currency changed');\n  }\n\n  setAppearance(appearance: Appearance): void {\n    Defaults.appearance = appearance;\n  }\n\n  setHideZeroBalances(value: boolean): void {\n    Defaults.hideZeroBalances = value;\n  }\n\n  setUseFreeTransactions(value: boolean): void {\n    Defaults.useFreeTransactions = value;\n  }\n}\n","import type { FC } from 'react';\nimport { useHistory } from 'react-router';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport { Icon, Switch } from 'components/ui';\nimport { Fiat } from 'new/app/models/Fiat';\nimport { appStorePath, playStorePath } from 'new/constants';\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport AppStoreBadge from 'new/scenes/Main/Settings/images/app-store-badge.png';\nimport GooglePlayBadge from 'new/scenes/Main/Settings/images/google-play-badge.png';\nimport { SettingsViewModel } from 'new/scenes/Main/Settings/Settings.ViewModel';\nimport { Appearance, Defaults } from 'new/services/Defaults';\nimport { isEnabled } from 'new/services/FeatureFlags';\nimport { Features } from 'new/services/FeatureFlags/features';\nimport { Layout } from 'new/ui/components/common/Layout';\nimport { Select, SelectItem } from 'new/ui/components/common/Select';\nimport { UsernameAddressWidget } from 'new/ui/components/common/UsernameAddressWidget';\nimport { WidgetPage } from 'new/ui/components/common/WidgetPage';\nimport { Accordion } from 'new/ui/components/ui/Accordion';\nimport { withNameServiceDomain } from 'new/utils/StringExtensions';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-gap: 24px;\n`;\n\nconst ItemsWrapper = styled.div`\n  margin-top: 10px;\n  padding: 20px;\n\n  border-bottom: 1px solid #f6f6f8;\n`;\n\nconst Item = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 20px;\n\n  border: 1px solid #f6f6f8;\n  border-radius: 12px;\n\n  &:not(:last-child) {\n    margin-bottom: 8px;\n  }\n`;\n\nconst ItemTitle = styled.div`\n  display: flex;\n  flex: 1 0 auto;\n\n  font-weight: 600;\n  font-size: 16px;\n`;\n\nconst ItemAction = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst LogoutWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n`;\n\nconst Logout = styled.div`\n  padding: 0 10px;\n\n  color: #f43d3d;\n  font-weight: 600;\n  font-size: 16px;\n\n  cursor: pointer;\n`;\n\nconst CurrencyItem = styled.div``;\n\nconst Symbol = styled.span`\n  padding-left: 3px;\n\n  color: #a3a5ba;\n`;\n\nconst Capitalize = styled.span`\n  text-transform: capitalize;\n`;\n\nconst Title = styled.div`\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 16px;\n\n  text-align: right;\n`;\n\nconst ChevronIcon = styled(Icon)`\n  width: 20px;\n  height: 20px;\n\n  color: #a3a5ba;\n`;\n\nconst ChevronWrapper = styled.div`\n  margin-left: 20px;\n\n  transform: rotate(270deg);\n`;\n\nconst AccordionItem = styled.div`\n  margin-bottom: 8px;\n`;\n\nconst AccordionTitle = styled.div`\n  display: flex;\n  justify-content: space-between;\n  width: 95%;\n`;\n\nconst AccordionTitlePrimary = styled.div``;\n\nconst AccordionTitleSecondary = styled.div`\n  &.warning {\n    color: #f43d3d;\n  }\n`;\n\nconst MobileButtons = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  width: 263px;\n  padding: 5px 0;\n`;\n\nconst Text = styled.div`\n  margin-bottom: 20px;\n`;\n\nconst FIATS = [Fiat.usd, Fiat.eur, Fiat.rub];\n\nexport const Settings: FC = observer(() => {\n  const viewModel = useViewModel(SettingsViewModel);\n  const history = useHistory();\n\n  const handleNetworkClick = () => {\n    history.push('/settings/network');\n  };\n\n  const handleLogoutClick = () => {\n    void viewModel.walletModel.disconnect();\n    void viewModel.locationService.reload();\n  };\n\n  return (\n    <Layout>\n      <Wrapper>\n        <WidgetPage icon=\"gear\" title=\"Settings\">\n          <ItemsWrapper>\n            {isEnabled(Features.ShowAllSettings) ? (\n              <>\n                <Item>\n                  <ItemTitle>Currency</ItemTitle>\n                  <ItemAction>\n                    <Select value={Defaults.fiat.code} mobileListTitle=\"Choose currency\">\n                      {FIATS.map((fiat) => (\n                        <SelectItem\n                          key={fiat.code}\n                          isSelected={fiat.code === Defaults.fiat.code}\n                          onItemClick={() => viewModel.setFiat(fiat)}\n                        >\n                          <CurrencyItem>\n                            {fiat.name}\n                            <Symbol>{`(${fiat.symbol})`}</Symbol>\n                          </CurrencyItem>\n                        </SelectItem>\n                      ))}\n                    </Select>\n                  </ItemAction>\n                </Item>\n                <Item>\n                  <ItemTitle>Appearance</ItemTitle>\n                  <ItemAction>\n                    <Select\n                      value={<Capitalize>{Defaults.appearance}</Capitalize>}\n                      mobileListTitle=\"Choose appearance\"\n                    >\n                      {Object.values(Appearance).map((appearance: Appearance) => (\n                        <SelectItem\n                          key={appearance}\n                          isSelected={appearance === Defaults.appearance}\n                          onItemClick={() => viewModel.setAppearance(appearance)}\n                        >\n                          <Capitalize>{appearance}</Capitalize>\n                        </SelectItem>\n                      ))}\n                    </Select>\n                  </ItemAction>\n                </Item>\n              </>\n            ) : null}\n            <AccordionItem>\n              <Accordion\n                title={\n                  <AccordionTitle>\n                    <AccordionTitlePrimary>Username</AccordionTitlePrimary>\n                    <AccordionTitleSecondary\n                      className={classNames({ warning: !viewModel.username })}\n                    >\n                      {viewModel.username\n                        ? withNameServiceDomain(viewModel.username)\n                        : 'Not yet reserved'}\n                    </AccordionTitleSecondary>\n                  </AccordionTitle>\n                }\n              >\n                {viewModel.username ? (\n                  <>\n                    <Text>\n                      Your P2P username allows you to receive any token within the Solana network\n                      even if it is not included in your wallet list.\n                    </Text>\n                    <UsernameAddressWidget\n                      address={viewModel.pubkeyBase58}\n                      username={withNameServiceDomain(viewModel.username)}\n                    />\n                  </>\n                ) : (\n                  <>\n                    <Text>\n                      You can receive and send tokens using your P2P username or link. Users who\n                      know your URL or username can also send you any token, even if you dont have\n                      it in your wallet's list.\n                    </Text>\n                    <div>You can access the feature in the app</div>\n                    <MobileButtons>\n                      <a href={playStorePath} target=\"_blank\" className=\"button\" rel=\"noreferrer\">\n                        <img\n                          src={GooglePlayBadge}\n                          height=\"40\"\n                          alt=\"Download P2P Wallet at the Google Play Store\"\n                        />\n                      </a>\n                      <a href={appStorePath} target=\"_blank\" className=\"button\" rel=\"noreferrer\">\n                        <img\n                          src={AppStoreBadge}\n                          height=\"40\"\n                          alt=\"Download P2P Wallet from the App Store\"\n                        />\n                      </a>\n                    </MobileButtons>\n                  </>\n                )}\n              </Accordion>\n            </AccordionItem>\n            <Item>\n              <ItemTitle>Network</ItemTitle>\n              <ItemAction onClick={handleNetworkClick} style={{ cursor: 'pointer' }}>\n                <Title title={Defaults.apiEndpoint.address}>{Defaults.apiEndpoint.address}</Title>\n                <ChevronWrapper onClick={handleNetworkClick}>\n                  <ChevronIcon name=\"chevron\" />\n                </ChevronWrapper>\n              </ItemAction>\n            </Item>\n            <Item>\n              <ItemTitle>Hide zero balances</ItemTitle>\n              <ItemAction>\n                <Switch\n                  checked={Defaults.hideZeroBalances}\n                  onChange={(checked) => viewModel.setHideZeroBalances(checked)}\n                />\n              </ItemAction>\n            </Item>\n            {isEnabled(Features.ShowAllSettings) ? (\n              <Item>\n                <ItemTitle>Use free transactions</ItemTitle>\n                <ItemAction>\n                  <Switch\n                    checked={Defaults.useFreeTransactions}\n                    onChange={(checked) => viewModel.setUseFreeTransactions(checked)}\n                  />\n                </ItemAction>\n              </Item>\n            ) : null}\n          </ItemsWrapper>\n          <LogoutWrapper>\n            <Logout onClick={handleLogoutClick}>Logout now</Logout>\n          </LogoutWrapper>\n        </WidgetPage>\n      </Wrapper>\n    </Layout>\n  );\n});\n","import { action, makeObservable } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport type { APIEndpoint } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { LocationService } from 'new/services/LocationService';\nimport { LockAndMintService } from 'new/services/RenVM';\n\n@singleton()\nexport class SettingsNetworkViewModel extends ViewModel {\n  constructor(\n    private _locationService: LocationService,\n    private _lockAndMintService: LockAndMintService,\n  ) {\n    super();\n\n    makeObservable(this, {\n      setAPIEndpoint: action,\n    });\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {}\n\n  protected override afterReactionsRemoved() {}\n\n  setAPIEndpoint(apiEndpoint: APIEndpoint) {\n    Defaults.apiEndpoint = apiEndpoint;\n    this._lockAndMintService.expireCurrentSession();\n    this._locationService.reload();\n  }\n}\n","import type { FunctionComponent } from 'react';\n\nimport { styled } from '@linaria/react';\n\nconst Wrapper = styled.label``;\n\nconst Label = styled.div`\n  position: relative;\n\n  padding: 0 0 0 48px;\n\n  font-weight: 600;\n  font-size: 16px;\n\n  cursor: pointer;\n\n  &::before {\n    position: absolute;\n\n    top: 3px;\n    left: 0;\n\n    width: 20px;\n    height: 20px;\n\n    background: #fff;\n\n    border: 2px solid #a3a5ba;\n    border-radius: 50%;\n\n    content: '';\n  }\n\n  &::after {\n    position: absolute;\n\n    top: 9px;\n    left: 6px;\n\n    width: 8px;\n    height: 8px;\n\n    background: #fff;\n\n    border-radius: 50%;\n\n    opacity: 0;\n\n    transition: 0.2s;\n\n    content: '';\n  }\n`;\n\nconst Radio = styled.input`\n  position: absolute;\n  z-index: -1;\n\n  opacity: 0;\n\n  &:hover + ${Label}::before {\n    border-color: #5887ff;\n  }\n\n  &:checked + ${Label}::after {\n    opacity: 1;\n  }\n\n  &:checked + ${Label}::before, &:focus + ${Label}::before {\n    background: #5887ff;\n    border-color: #5887ff;\n  }\n`;\n\ntype Props = {\n  label: string;\n  checked: boolean;\n  value: any;\n  onChange: (value: any) => void;\n  className?: string;\n};\n\nexport const RadioButton: FunctionComponent<Props> = ({\n  label,\n  checked,\n  value,\n  onChange,\n  className,\n}) => {\n  const handleChange = () => {\n    onChange(value);\n  };\n\n  return (\n    <Wrapper className={className}>\n      <Radio checked={checked} name=\"radio-button\" type=\"radio\" onChange={handleChange} />\n      <Label>{label}</Label>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\nimport { rgba } from 'polished';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { SettingsNetworkViewModel } from 'new/scenes/Main/SettingsNetwork/SettingsNetwork.ViewModel';\nimport { APIEndpoint } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { Layout } from 'new/ui/components/common/Layout';\nimport { WidgetPage } from 'new/ui/components/common/WidgetPage';\nimport { RadioButton } from 'new/ui/components/ui/RadioButton';\n\nconst RadioButtonsWrapper = styled.div`\n  position: relative;\n\n  padding: 0 10px;\n`;\n\n/* eslint-disable @typescript-eslint/no-magic-numbers */\nconst RadioButtonItem = styled.div`\n  position: relative;\n\n  margin-top: 6px;\n  margin-bottom: 12px;\n  padding: 14px 18px;\n\n  border-radius: 12px;\n  cursor: pointer;\n\n  &:hover {\n    background: ${theme.colors.bg.secondary};\n  }\n\n  &:not(:last-child)::after {\n    position: absolute;\n    right: 10px;\n    bottom: -6px;\n    left: 10px;\n\n    border-bottom: 1px solid ${rgba(0, 0, 0, 0.05)};\n\n    content: '';\n  }\n`;\n/* eslint-enable @typescript-eslint/no-magic-numbers */\n\nexport const SettingsNetwork: FC = observer(() => {\n  const viewModel = useViewModel(SettingsNetworkViewModel);\n\n  return (\n    <Layout\n      breadcrumb={{\n        currentName: 'Network',\n        backTo: { pathname: '/settings', state: { fromPage: location.pathname } },\n      }}\n    >\n      <WidgetPage icon=\"branch\" title=\"Network\">\n        <RadioButtonsWrapper>\n          {APIEndpoint.definedEndpoints.map((endpoint) => {\n            return (\n              <RadioButtonItem key={endpoint.address}>\n                <RadioButton\n                  label={endpoint.address}\n                  value={endpoint}\n                  checked={endpoint.address === Defaults.apiEndpoint.address}\n                  onChange={() => viewModel.setAPIEndpoint(endpoint)}\n                />\n              </RadioButtonItem>\n            );\n          })}\n        </RadioButtonsWrapper>\n      </WidgetPage>\n    </Layout>\n  );\n});\n","export interface SwapRouteParams {\n  publicKey?: string;\n}\n\nexport enum VerificationError {\n  swappingIsNotAvailable = 'swappingIsNotAvailable',\n  sourceWalletIsEmpty = 'sourceWalletIsEmpty',\n  destinationWalletIsEmpty = 'destinationWalletIsEmpty',\n  canNotSwapToItSelf = 'canNotSwapToItSelf',\n  tradablePoolsPairsNotLoaded = 'tradablePoolsPairsNotLoaded',\n  tradingPairNotSupported = 'tradingPairNotSupported',\n  feesIsBeingCalculated = 'feesIsBeingCalculated',\n  couldNotCalculatingFees = 'couldNotCalculatingFees',\n  inputAmountIsEmpty = 'inputAmountIsEmpty',\n  inputAmountIsNotValid = 'inputAmountIsNotValid',\n  insufficientFunds = 'insufficientFunds',\n  estimatedAmountIsNotValid = 'estimatedAmountIsNotValid',\n  bestPoolsPairsIsEmpty = 'bestPoolsPairsIsEmpty',\n  slippageIsNotValid = 'slippageIsNotValid',\n  nativeWalletNotFound = 'nativeWalletNotFound',\n  payingFeeWalletNotFound = 'payingFeeWalletNotFound',\n  notEnoughSOLToCoverFees = 'notEnoughSOLToCoverFees',\n  notEnoughBalanceToCoverFees = 'notEnoughBalanceToCoverFees',\n  unknown = 'unknown',\n}\n\nexport enum ActiveInputField {\n  source = 'source',\n  destination = 'destination',\n  none = 'none',\n}\n","import { singleton } from 'tsyringe';\n\nimport { FeeRelayerRelaySolanaClient, SwapFeeRelayer } from 'new/sdk/FeeRelayer';\nimport { OrcaSwapService } from 'new/services/OrcaSwapService';\nimport { SolanaService } from 'new/services/SolanaService';\n\n@singleton()\nexport class SwapRelayService extends SwapFeeRelayer {\n  constructor(\n    solanaAPIClient: SolanaService,\n    feeRelayerRelaySolanaClient: FeeRelayerRelaySolanaClient,\n    orcaSwap: OrcaSwapService,\n  ) {\n    super({\n      owner: solanaAPIClient.provider.wallet.publicKey,\n      solanaApiClient: feeRelayerRelaySolanaClient,\n      orcaSwap,\n    });\n  }\n}\n","import { u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\nimport { last } from 'ramda';\nimport { injectable } from 'tsyringe';\n\nimport type { PayingFeeInfo } from 'new/app/models/PayingFee';\nimport { FeeType, PayingFee } from 'new/app/models/PayingFee';\nimport type { FeeRelayerContext } from 'new/sdk/FeeRelayer';\nimport {\n  FeeRelayerAPIClient,\n  FeeRelayerConfiguration,\n  FeeRelayerRelaySolanaClient,\n  StatsInfoOperationType,\n  TokenAccount,\n} from 'new/sdk/FeeRelayer';\nimport { FeeRelayerContextManager } from 'new/sdk/FeeRelayer/relay';\nimport type { PoolsPair } from 'new/sdk/OrcaSwap';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { convertToBalance, FeeAmount, SolanaSDKPublicKey, Token } from 'new/sdk/SolanaSDK';\nimport { OrcaSwapService } from 'new/services/OrcaSwapService';\nimport { RelayService } from 'new/services/RelayService';\nimport { SolanaService } from 'new/services/SolanaService';\nimport { SwapRelayService } from 'new/services/SwapRelayService';\n\n// enum InputMode {\n//   source,\n//   target,\n// }\n\n// enum PayingTokenMode {\n//   /// Allow to use any token to pay a fee\n//   any = 'any',\n//   /// Only allow to use native sol to pay a fee\n//   onlySol = 'onlySol',\n// }\n\n// interface SwapInfo {\n//   // This property defines a mode for paying fee.\n//   payingTokenMode: PayingTokenMode;\n// }\n\ninterface FeeInfo {\n  /**\n   Get all fees categories. For example: account creation fee, network fee, etc.\n   */\n  fees: PayingFee[];\n}\n\n//  This interface describes an interface for swapping service.\n//  In general you have to call `load` method first to prepare a service.\nexport interface SwapServiceType {\n  /**\n   Prepare swap service.\n   - Returns: `Promise`.\n   */\n  load(): Promise<void>;\n\n  /**\n   Determine the all exchange route.\n   - Parameters:\n   - sourceMint: the source mint address.\n   - destinationMint: the destination mint address.\n   - Returns: Exchange route.\n   */\n  getPoolPair({\n    sourceMint,\n    destinationMint,\n  }: {\n    sourceMint: string;\n    destinationMint: string;\n  }): Promise<PoolsPair[]>;\n\n  /**\n   Process swap\n   - Parameters:\n   - sourceAddress: the source address of token in user's wallet.\n   - sourceTokenMint: the source mint address of source address.\n   - destinationAddress: the destination address of token in wallet, that user wants to swap to.\n   - destinationTokenMint: the destination mint address of destination address.\n   - payingTokenAddress: the address of token, that will be used as fee paying address.\n   - payingTokenMint: the mint address of paying token.\n   - poolsPair: the user's selected exchange route. Normally it's the best.\n   - amount: the amount of source token.\n   - slippage:\n   - Returns: The id of transaction.\n   */\n  swap({\n    sourceAddress,\n    sourceTokenMint,\n    destinationAddress,\n    destinationTokenMint,\n    payingTokenAddress,\n    payingTokenMint,\n    poolsPair,\n    amount,\n    slippage,\n  }: {\n    sourceAddress: string;\n    sourceTokenMint: string;\n    destinationAddress?: string | null;\n    destinationTokenMint: string;\n    payingTokenAddress?: string | null;\n    payingTokenMint?: string | null;\n    poolsPair: PoolsPair;\n    amount: u64;\n    slippage: number;\n  }): Promise<string[]>;\n\n  /**\n   Calculate fee for swapping\n   - Parameters:\n   - sourceMint: the source mint of token in user's wallet.\n   - destinationAddress: the destination address of token in wallet, that user wants to swap to.\n   - destinationToken: the destination token.\n   - bestPoolsPair: the user's selected exchange route\n   - inputAmount: the amount of swapping.\n   - slippage:\n   - Returns: The detailed fee information\n   - Throws:\n   */\n  getFees({\n    sourceMint,\n    destinationAddress,\n    destinationToken,\n    bestPoolsPair,\n    payingWallet,\n    inputAmount,\n    slippage,\n  }: {\n    sourceMint: string;\n    destinationAddress?: string | null;\n    destinationToken: Token;\n    bestPoolsPair?: PoolsPair | null;\n    payingWallet?: Wallet | null;\n    inputAmount?: number | null;\n    slippage: number;\n  }): Promise<FeeInfo>;\n\n  /**\n   Find all possible destination mint addresses.\n   - Parameter fromMint:\n   - Returns: The list of mint addresses\n   - Throws:\n   */\n  findPosibleDestinationMints(fromMint: string): string[];\n\n  /**\n   Calculate amount needed for paying fee in paying token\n   */\n  calculateNetworkFeeInPayingToken({\n    networkFee,\n    payingTokenMint,\n  }: {\n    networkFee: FeeAmount;\n    payingTokenMint: string;\n  }): Promise<FeeAmount | null>;\n}\n\nexport class SwapError extends Error {\n  static incompatiblePoolsPair() {\n    return new SwapError('incompatiblePoolsPair');\n  }\n  static feeRelayIsNotReady() {\n    return new SwapError('feeRelayIsNotReady');\n  }\n}\n\n@injectable()\nexport class SwapService implements SwapServiceType {\n  private _feeRelayerContextManager: FeeRelayerContextManager;\n\n  constructor(\n    private _solanaAPIClient: SolanaService,\n    private _orcaSwap: OrcaSwapService,\n    private _relayService: RelayService,\n    private _swapRelayService: SwapRelayService,\n    private _feeRelayerRelaySolanaClient: FeeRelayerRelaySolanaClient,\n  ) {\n    const feeRelayerAPIClient = new FeeRelayerAPIClient();\n    this._feeRelayerContextManager = new FeeRelayerContextManager({\n      owner: _solanaAPIClient.provider.wallet.publicKey,\n      solanaAPIClient: this._feeRelayerRelaySolanaClient,\n      feeRelayerAPIClient,\n    });\n  }\n\n  async load(): Promise<void> {\n    await this._orcaSwap.load();\n    await this._feeRelayerContextManager.update();\n  }\n\n  getPoolPair({\n    sourceMint,\n    destinationMint,\n  }: {\n    sourceMint: string;\n    destinationMint: string;\n  }): Promise<PoolsPair[]> {\n    return this._orcaSwap.getTradablePoolsPairs({\n      fromMint: sourceMint,\n      toMint: destinationMint,\n    });\n  }\n\n  async getFees({\n    sourceMint,\n    destinationAddress,\n    destinationToken,\n    bestPoolsPair,\n    payingWallet,\n    inputAmount,\n    slippage,\n  }: {\n    sourceMint: string;\n    destinationAddress?: string | null;\n    destinationToken: Token;\n    bestPoolsPair?: PoolsPair | null;\n    payingWallet?: Wallet | null;\n    inputAmount?: number | null;\n    slippage: number;\n  }): Promise<FeeInfo> {\n    // Network fees\n    let networkFees: PayingFee[];\n    if (payingWallet) {\n      // Network fee for swapping via relay program\n      networkFees = await this._getNetworkFeesForSwappingViaRelayProgram({\n        swapPools: bestPoolsPair,\n        sourceMint,\n        destinationAddress,\n        destinationToken,\n        payingWallet,\n      });\n    } else {\n      networkFees = [];\n    }\n\n    // Liquidity provider fee\n    const liquidityProviderFees = this._getLiquidityProviderFees({\n      poolsPair: bestPoolsPair,\n      destinationAddress,\n      destinationToken,\n      inputAmount,\n      slippage,\n    });\n\n    return {\n      fees: networkFees.concat(liquidityProviderFees),\n    };\n  }\n\n  findPosibleDestinationMints(fromMint: string): string[] {\n    return this._orcaSwap.findPosibleDestinationMints(fromMint);\n  }\n\n  async calculateNetworkFeeInPayingToken({\n    networkFee,\n    payingTokenMint,\n  }: {\n    networkFee: FeeAmount;\n    payingTokenMint: string;\n  }): Promise<FeeAmount | null> {\n    if (payingTokenMint === SolanaSDKPublicKey.wrappedSOLMint.toString()) {\n      return networkFee;\n    }\n    return this._relayService.feeCalculator.calculateFeeInPayingToken({\n      orcaSwap: this._orcaSwap,\n      feeInSOL: networkFee,\n      payingFeeTokenMint: new PublicKey(payingTokenMint),\n    });\n  }\n\n  swap({\n    sourceAddress,\n    sourceTokenMint,\n    destinationAddress,\n    destinationTokenMint,\n    payingTokenAddress,\n    payingTokenMint,\n    poolsPair,\n    amount,\n    slippage,\n  }: {\n    sourceAddress: string;\n    sourceTokenMint: string;\n    destinationAddress?: string;\n    destinationTokenMint: string;\n    payingTokenAddress?: string;\n    payingTokenMint?: string;\n    poolsPair: PoolsPair;\n    amount: u64;\n    slippage: number;\n  }): Promise<string[]> {\n    if (!poolsPair.length) {\n      throw SwapError.incompatiblePoolsPair();\n    }\n    const decimals = poolsPair[0]!.getTokenADecimals();\n    if (!decimals) {\n      throw SwapError.incompatiblePoolsPair();\n    }\n\n    return this._swapViaRelayProgram({\n      sourceAddress,\n      sourceTokenMint,\n      destinationAddress,\n      destinationTokenMint,\n      payingTokenAddress,\n      payingTokenMint,\n      poolsPair,\n      amount,\n      decimals,\n      slippage,\n    });\n  }\n\n  // Helpers\n\n  private _getLiquidityProviderFees({\n    poolsPair,\n    destinationAddress,\n    destinationToken,\n    inputAmount,\n    slippage,\n  }: {\n    poolsPair?: PoolsPair | null;\n    destinationAddress?: string | null;\n    destinationToken?: Token;\n    inputAmount?: number | null;\n    slippage: number;\n  }): PayingFee[] {\n    const allFees: PayingFee[] = [];\n\n    const liquidityProviderFees = this._orcaSwap.getLiquidityProviderFee({\n      bestPoolsPair: poolsPair,\n      inputAmount,\n      slippage,\n    });\n\n    if (poolsPair && destinationAddress && destinationToken) {\n      if (liquidityProviderFees.length === 1) {\n        allFees.push(\n          new PayingFee({\n            type: FeeType.liquidityProviderFee,\n            lamports: liquidityProviderFees[0]!,\n            token: destinationToken,\n          }),\n        );\n      } else if (liquidityProviderFees.length === 2) {\n        const intermediaryTokenName = poolsPair[0]!.tokenBName;\n        const decimals = poolsPair[0]!.getTokenBDecimals();\n        if (decimals) {\n          allFees.push(\n            new PayingFee({\n              type: FeeType.liquidityProviderFee,\n              lamports: liquidityProviderFees[0]!,\n              token: Token.unsupported({\n                decimals,\n                symbol: intermediaryTokenName.toString(),\n              }),\n            }),\n          );\n        }\n\n        allFees.push(\n          new PayingFee({\n            type: FeeType.liquidityProviderFee,\n            lamports: last(liquidityProviderFees)!,\n            token: destinationToken,\n          }),\n        );\n      }\n    }\n\n    return allFees;\n  }\n\n  private async _getNetworkFeesForSwappingViaRelayProgram({\n    swapPools,\n    sourceMint,\n    destinationAddress,\n    destinationToken,\n    payingWallet,\n  }: {\n    swapPools?: PoolsPair | null;\n    sourceMint: string;\n    destinationAddress?: string | null;\n    destinationToken: Token;\n    payingWallet: Wallet;\n  }): Promise<PayingFee[]> {\n    const context = await this._feeRelayerContextManager.getCurrentContext();\n\n    let networkFee = await this._swapRelayService.calculator.calculateSwappingNetworkFees({\n      context,\n      swapPools,\n      sourceTokenMint: new PublicKey(sourceMint),\n      destinationTokenMint: new PublicKey(destinationToken.address),\n      destinationAddress: destinationAddress ? new PublicKey(destinationAddress) : undefined,\n    });\n\n    // when free transaction is not available and user is paying with sol, let him do this the normal way (don't use fee relayer)\n    if (\n      this._isSwappingNatively({\n        context,\n        expectedTransactionFee: networkFee.transaction,\n        payingTokenMint: payingWallet.mintAddress,\n      })\n    ) {\n      networkFee.transaction = new u64(networkFee.transaction.sub(context.lamportsPerSignature));\n    } else {\n      // send via fee relayer\n      networkFee = this._relayService.feeCalculator.calculateNeededTopUpAmount({\n        context,\n        expectedFee: networkFee,\n        payingTokenMint: new PublicKey(payingWallet.mintAddress),\n      });\n    }\n\n    let neededTopUpAmount: FeeAmount;\n    if (payingWallet.mintAddress === SolanaSDKPublicKey.wrappedSOLMint.toString()) {\n      neededTopUpAmount = networkFee;\n    } else {\n      // @ios: TODO: Zero?\n      neededTopUpAmount =\n        (await this._relayService.feeCalculator.calculateFeeInPayingToken({\n          orcaSwap: this._orcaSwap,\n          feeInSOL: networkFee,\n          payingFeeTokenMint: new PublicKey(payingWallet.mintAddress),\n        })) ?? FeeAmount.zero();\n    }\n\n    const freeTransactionFeeLimit = context.usageStatus;\n\n    const allFees: PayingFee[] = [];\n    let isFree = false;\n    let info: PayingFeeInfo | null = null;\n\n    if (neededTopUpAmount.transaction.eqn(0)) {\n      isFree = true;\n\n      const numberOfFreeTransactionsLeft =\n        freeTransactionFeeLimit.maxUsage - freeTransactionFeeLimit.currentUsage;\n      const maxUsage = freeTransactionFeeLimit.maxUsage;\n\n      info = {\n        alertTitle: `There are ${numberOfFreeTransactionsLeft} free transactions left for today`,\n        alertDescription: `On the Solana network, the first ${maxUsage} transactions in a day are paid by P2P.org. Subsequent transactions will be charged based on the Solana blockchain gas fee.`,\n        payBy: 'Paid by p2p.org',\n      };\n    }\n\n    if (\n      this._isSwappingNatively({\n        context,\n        payingTokenMint: SolanaSDKPublicKey.wrappedSOLMint.toString(),\n      })\n    ) {\n      allFees.push(\n        new PayingFee({\n          type: FeeType.depositWillBeReturned,\n          lamports: context.minimumTokenAccountBalance,\n          token: Token.nativeSolana,\n        }),\n      );\n    }\n\n    if (neededTopUpAmount.accountBalances.gtn(0)) {\n      allFees.push(\n        new PayingFee({\n          type: FeeType.accountCreationFee(destinationToken.symbol),\n          lamports: neededTopUpAmount.accountBalances,\n          token: payingWallet.token,\n        }),\n      );\n    }\n\n    allFees.push(\n      new PayingFee({\n        type: FeeType.transactionFee,\n        lamports: neededTopUpAmount.transaction,\n        token: payingWallet.token,\n        isFree,\n        info,\n      }),\n    );\n\n    return allFees;\n  }\n\n  private async _swapViaRelayProgram({\n    sourceAddress,\n    sourceTokenMint,\n    destinationAddress,\n    destinationTokenMint,\n    payingTokenAddress,\n    payingTokenMint,\n    poolsPair,\n    amount,\n    decimals,\n    slippage,\n  }: {\n    sourceAddress: string;\n    sourceTokenMint: string;\n    destinationAddress?: string;\n    destinationTokenMint: string;\n    payingTokenAddress?: string;\n    payingTokenMint?: string;\n    poolsPair: PoolsPair;\n    amount: u64;\n    decimals: number;\n    slippage: number;\n  }): Promise<string[]> {\n    const context = await this._feeRelayerContextManager.getCurrentContext();\n\n    let payingFeeToken: TokenAccount | null = null;\n    if (payingTokenAddress && payingTokenMint) {\n      payingFeeToken = new TokenAccount({\n        address: new PublicKey(payingTokenAddress),\n        mint: new PublicKey(payingTokenMint),\n      });\n    }\n\n    if (\n      this._isSwappingNatively({\n        context,\n        payingTokenMint,\n      })\n    ) {\n      const id = await this._orcaSwap.swap({\n        owner: this._solanaAPIClient.provider.wallet.publicKey,\n        fromWalletPubkey: sourceAddress,\n        toWalletPubkey: destinationAddress,\n        bestPoolsPair: poolsPair,\n        amount: convertToBalance(amount, decimals),\n        slippage,\n        isSimulation: false,\n      });\n      return [id.transactionId];\n    }\n\n    const preparedTransactions = await this._swapRelayService.prepareSwapTransaction({\n      context,\n      sourceToken: new TokenAccount({\n        address: new PublicKey(sourceAddress),\n        mint: new PublicKey(sourceTokenMint),\n      }),\n      destinationTokenMint: new PublicKey(destinationTokenMint),\n      destinationAddress: destinationAddress ? new PublicKey(destinationAddress) : null,\n      fee: payingFeeToken,\n      swapPools: poolsPair,\n      inputAmount: amount,\n      slippage,\n    });\n\n    return this._relayService.topUpAndRelayTransactions({\n      context,\n      transactions: preparedTransactions.transactions,\n      fee: payingFeeToken,\n      config: new FeeRelayerConfiguration({\n        additionalPaybackFee: preparedTransactions.additionalPaybackFee,\n        operationType: StatsInfoOperationType.swap,\n        currency: sourceTokenMint,\n      }),\n    });\n  }\n\n  /// when free transaction is not available and user is paying with sol, let him do this the normal way (don't use fee relayer)\n  private _isSwappingNatively({\n    context,\n    expectedTransactionFee = null,\n    payingTokenMint,\n  }: {\n    context: FeeRelayerContext;\n    expectedTransactionFee?: u64 | null;\n    payingTokenMint?: string;\n  }): boolean {\n    const _expectedTransactionFee =\n      expectedTransactionFee ?? new u64(context.lamportsPerSignature.muln(2));\n    return (\n      payingTokenMint === SolanaSDKPublicKey.wrappedSOLMint.toString() &&\n      context.usageStatus.isFreeTransactionFeeAvailable({\n        transactionFee: _expectedTransactionFee,\n      }) === false\n    );\n  }\n}\n","export enum SlippageTypeType {\n  oneTenth = 'oneTenth',\n  fiveTenth = 'fiveTenth',\n  one = 'one',\n  five = 'five',\n  custom = 'custom',\n}\n\nexport class SlippageType {\n  type: SlippageTypeType;\n  private _value: number | null = null;\n\n  static allCases: SlippageType[] = [\n    SlippageType.oneTenth(),\n    SlippageType.fiveTenth(),\n    SlippageType.one(),\n    SlippageType.five(),\n  ];\n\n  static oneTenth(): SlippageType {\n    return new SlippageType(SlippageTypeType.oneTenth);\n  }\n  static fiveTenth(): SlippageType {\n    return new SlippageType(SlippageTypeType.fiveTenth);\n  }\n  static one(): SlippageType {\n    return new SlippageType(SlippageTypeType.one);\n  }\n  static five(): SlippageType {\n    return new SlippageType(SlippageTypeType.five);\n  }\n  static custom(value: number | null): SlippageType {\n    return new SlippageType(SlippageTypeType.custom, value);\n  }\n\n  static new(value: number): SlippageType {\n    switch (value) {\n      case 0.001:\n        return SlippageType.oneTenth();\n      case 0.005:\n        return SlippageType.fiveTenth();\n      case 0.01:\n        return SlippageType.one();\n      case 0.05:\n        return SlippageType.five();\n      default:\n        return SlippageType.custom(value * 100);\n    }\n  }\n\n  constructor(type: SlippageTypeType, value: number | null = null) {\n    this.type = type;\n    this._value = value;\n  }\n\n  get description(): string {\n    switch (this.type) {\n      case SlippageTypeType.oneTenth:\n        return '0.1%';\n      case SlippageTypeType.fiveTenth:\n        return '0.5%';\n      case SlippageTypeType.one:\n        return '1%';\n      case SlippageTypeType.five:\n        return '5%';\n      case SlippageTypeType.custom:\n        return 'Custom';\n    }\n  }\n\n  get value(): number | null {\n    let slippage: number | null;\n\n    switch (this.type) {\n      case SlippageTypeType.oneTenth:\n        slippage = 0.1;\n        break;\n      case SlippageTypeType.fiveTenth:\n        slippage = 0.5;\n        break;\n      case SlippageTypeType.one:\n        slippage = 1;\n        break;\n      case SlippageTypeType.five:\n        slippage = 5;\n        break;\n      case SlippageTypeType.custom:\n        slippage = this._value;\n        break;\n    }\n\n    return slippage ? slippage / 100 : null;\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\n\nimport type { PayingFee } from 'new/app/models/PayingFee';\nimport { FeeType } from 'new/app/models/PayingFee';\nimport type { Pool, PoolsPair } from 'new/sdk/OrcaSwap';\nimport { getInputAmount, getOutputAmount } from 'new/sdk/OrcaSwap';\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\n\n// Array PayingFee\n\n/**\n Get current token, that will be used as fee paying.\n */\nexport function totalToken(fees: PayingFee[]): Token | null {\n  return fees.find((fee) => fee.type === FeeType.transactionFee)?.token ?? null;\n}\n\n/**\n Get total fee amount in fee token.\n */\nexport function totalDecimal(fees: PayingFee[]): number {\n  const _totalToken = totalToken(fees);\n  if (_totalToken) {\n    const totalFees = fees.filter(\n      (fee) => fee.token.symbol === _totalToken.symbol ?? fee.type === FeeType.liquidityProviderFee,\n    );\n    const decimals = totalFees[0]?.token.decimals ?? 0;\n    return convertToBalance(\n      totalFees.reduce((acc, curr) => acc.add(curr.lamports), ZERO),\n      decimals,\n    );\n  }\n  return 0.0;\n}\n\nexport function totalLamport(fees: PayingFee[]): u64 {\n  const _totalToken = totalToken(fees);\n  if (_totalToken) {\n    const totalFees = fees.filter(\n      (fee) => fee.token.symbol === _totalToken.symbol ?? fee.type === FeeType.liquidityProviderFee,\n    );\n    return totalFees.reduce((acc, curr) => acc.add(curr.lamports), ZERO);\n  }\n  return ZERO;\n}\n\n// Array PoolsPair\n\n// Find best pool to swap from estimated amount\nexport function findBestPoolsPairForEstimatedAmount({\n  estimatedAmount,\n  poolsPairs,\n}: {\n  estimatedAmount: u64;\n  poolsPairs: PoolsPair[];\n}): PoolsPair | null {\n  if (!poolsPairs.length) {\n    return null;\n  }\n\n  let bestPools: Pool[] | null = null;\n  let bestInputAmount: u64 = new u64(2).pow(new u64(64)).subn(1); // uin64.max;\n\n  for (const pair of poolsPairs) {\n    const inputAmount = getInputAmount(pair, estimatedAmount);\n    if (!inputAmount) {\n      continue;\n    }\n\n    if (inputAmount.lt(bestInputAmount)) {\n      bestInputAmount = inputAmount;\n      bestPools = pair;\n    }\n  }\n\n  return bestPools;\n}\n\n// Find best pool to swap from input amount\nexport function findBestPoolsPairForInputAmount({\n  inputAmount,\n  poolsPairs,\n}: {\n  inputAmount: u64;\n  poolsPairs: PoolsPair[];\n}): PoolsPair | null {\n  if (!poolsPairs.length) {\n    return null;\n  }\n\n  let bestPools: PoolsPair | null = null;\n  let bestEstimatedAmount: u64 = ZERO;\n\n  for (const pair of poolsPairs) {\n    const estimatedAmount = getOutputAmount(pair, inputAmount);\n    if (!estimatedAmount) {\n      continue;\n    }\n\n    if (estimatedAmount.gt(bestEstimatedAmount)) {\n      bestEstimatedAmount = estimatedAmount;\n      bestPools = pair;\n    }\n  }\n\n  return bestPools;\n}\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\nimport { delay, inject, singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { WalletsRepository } from 'new/services/Repositories';\n\nimport { SwapViewModel } from '../Swap/Swap.ViewModel';\nimport { SlippageType, SlippageTypeType } from './model/SwapSettings.SlippageType';\n\nexport interface FeeCellContent {\n  wallet?: Wallet;\n  tokenLabelText: string;\n  isSelected: boolean;\n  onClick: () => void;\n}\n\ninterface SwapSettingsViewModelType {\n  readonly possibleSlippageTypes: SlippageType[];\n  readonly slippageType: SlippageType;\n  readonly feesContent: FeeCellContent[];\n  readonly customSlippageIsOpened: boolean;\n\n  slippageSelected(selected: SlippageType): void;\n  customSlippageChanged(value: number | null): void;\n}\n\n// @web: injectable because use inject in constructor\n@singleton()\nexport class SwapSettingsViewModel extends ViewModel implements SwapSettingsViewModelType {\n  readonly possibleSlippageTypes: SlippageType[] = SlippageType.allCases;\n  slippageType: SlippageType;\n  customSlippageIsOpened: boolean;\n  payingWallet: Wallet | null; // @web: references to swapViewModel\n\n  get feesContent(): FeeCellContent[] {\n    const feePayingToken = this.payingWallet;\n\n    const list: FeeCellContent[] = [];\n    const wallets = this._walletsRepository.getWallets().filter((_wallet) => _wallet.amount > 0);\n    for (const wallet of wallets) {\n      list.push({\n        wallet,\n        tokenLabelText: wallet.token.symbol,\n        isSelected: feePayingToken?.mintAddress === wallet.mintAddress,\n        onClick: () => {\n          this._swapViewModel.changeFeePayingToken(wallet);\n        },\n      });\n    }\n\n    return list;\n  }\n\n  constructor(\n    private _walletsRepository: WalletsRepository, // private _notificationService: NotificationService,\n    @inject(delay(() => SwapViewModel)) public _swapViewModel: Readonly<SwapViewModel>,\n  ) {\n    super();\n\n    this.slippageType = SlippageType.new(this._swapViewModel.slippage);\n    this.customSlippageIsOpened = false;\n    this.payingWallet = this._swapViewModel.payingWallet;\n\n    makeObservable(this, {\n      slippageType: observable,\n      customSlippageIsOpened: observable,\n      payingWallet: observable, // @web: references to swapViewModel\n\n      feesContent: computed,\n\n      slippageSelected: action,\n      customSlippageChanged: action,\n    });\n  }\n\n  protected override setDefaults(): void {\n    this.slippageType = SlippageType.new(this._swapViewModel.slippage);\n    this.customSlippageIsOpened = false;\n    this.payingWallet = this._swapViewModel.payingWallet;\n  }\n\n  protected override onInitialize(): void {\n    this._setCustomSlippageIsOpened(this.slippageType);\n\n    this._bind();\n  }\n\n  protected override afterReactionsRemoved(): void {}\n\n  private _bind() {\n    this.addReaction(\n      reaction(\n        () => this._swapViewModel.slippage,\n        (slippage) => {\n          this.slippageType = SlippageType.new(slippage);\n        },\n      ),\n    );\n\n    this.addReaction(\n      reaction(\n        () => this._swapViewModel.payingWallet,\n        (payingWallet) => {\n          this.payingWallet = payingWallet;\n        },\n      ),\n    );\n  }\n\n  // Actions\n\n  slippageSelected(selected: SlippageType): void {\n    this._setCustomSlippageIsOpened(selected);\n\n    const slippage = selected.value;\n    if (!slippage) {\n      return;\n    }\n\n    this._swapViewModel.setSlippage(slippage);\n    // TODO: notificationService.showInAppNotification(.done(L10n.thePriceSlippageWasSetAt(selected.description)))\n  }\n\n  customSlippageChanged(value: number | null): void {\n    const valueNew = SlippageType.custom(value).value;\n    if (this.customSlippageIsOpened) {\n      if (valueNew) {\n        this._swapViewModel.setSlippage(valueNew);\n      } else {\n        // @web: added for hide during \"blur\" Custom field\n        this.customSlippageIsOpened = false;\n      }\n    }\n  }\n\n  private _setCustomSlippageIsOpened(slippageType: SlippageType): void {\n    switch (slippageType.type) {\n      case SlippageTypeType.oneTenth:\n      case SlippageTypeType.fiveTenth:\n      case SlippageTypeType.one:\n      case SlippageTypeType.five:\n        this.customSlippageIsOpened = false;\n        break;\n      case SlippageTypeType.custom:\n        this.customSlippageIsOpened = true;\n        break;\n    }\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { action, computed, makeObservable, observable, reaction, when } from 'mobx';\nimport { delay, inject, singleton } from 'tsyringe';\n\nimport { LoadableRelay, LoadableState, LoadableStateType } from 'new/app/models/LoadableRelay';\nimport type { PayingFee } from 'new/app/models/PayingFee';\nimport { FeeType, FeeTypeEnum, networkFees, transactionFees } from 'new/app/models/PayingFee';\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { ActiveInputField, VerificationError } from 'new/scenes/Main/Swap/Swap/types';\nimport type { PoolsPair } from 'new/sdk/OrcaSwap';\nimport { getInputAmount, getMinimumAmountOut, getOutputAmount } from 'new/sdk/OrcaSwap';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { convertToBalance, toLamport } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { LocationService } from 'new/services/LocationService';\nimport { ModalService, ModalType } from 'new/services/ModalService';\nimport { PricesService } from 'new/services/PriceAPIs/PricesService';\nimport { WalletsRepository } from 'new/services/Repositories';\nimport {\n  findBestPoolsPairForEstimatedAmount,\n  findBestPoolsPairForInputAmount,\n  SwapService,\n  totalDecimal,\n  totalLamport,\n  totalToken,\n} from 'new/services/Swap';\nimport { ChooseWalletViewModel } from 'new/ui/components/common/ChooseWallet';\nimport type { ConfirmSwapModalProps } from 'new/ui/modals/confirmModals/ConfirmSwapModal';\nimport type { ProcessTransactionModalProps } from 'new/ui/modals/ProcessTransactionModal';\nimport * as ProcessTransaction from 'new/ui/modals/ProcessTransactionModal/ProcessTransaction.Models';\nimport { maxSlippage, rounded } from 'new/utils/NumberExtensions';\n\nimport { SwapSettingsViewModel } from '../SwapSettings/SwapSettings.ViewModel';\n\ninterface SwapViewModelType {\n  sourceWallet: Wallet | null;\n  destinationWallet: Wallet | null;\n  inputAmount: number | null;\n  estimatedAmount: number | null;\n\n  reload(): void;\n  swapSourceAndDestination(): void;\n  useAllBalance(): void;\n  enterInputAmount(amount: number | null): void;\n  enterEstimatedAmount(amount: number | null): void;\n  walletDidSelect(wallet: Wallet, isSelectingSourceWallet: boolean): void;\n}\n\n// for ability of resolve in SwapSettings.ViewModel\n@singleton()\nexport class SwapViewModel extends ViewModel implements SwapViewModelType {\n  isUsingAllBalance: boolean;\n\n  loadingState: LoadableState;\n  sourceWallet: Wallet | null;\n  destinationWallet: Wallet | null;\n  tradablePoolsPairs: LoadableRelay<PoolsPair[]>;\n  bestPoolsPair: PoolsPair | null;\n  availableAmount: number | null;\n  inputAmount: number | null;\n  estimatedAmount: number | null;\n  fees: LoadableRelay<PayingFee[]>;\n  slippage: number;\n  payingWallet: Wallet | null;\n\n  error: VerificationError | null;\n  activeInputField: ActiveInputField;\n\n  constructor(\n    public swapService: SwapService,\n    public chooseSourceWalletViewModel: ChooseWalletViewModel,\n    public chooseDestinationWalletViewModel: ChooseWalletViewModel,\n    @inject(delay(() => SwapSettingsViewModel)) public swapSettingsViewModel: SwapSettingsViewModel,\n    private _walletsRepository: WalletsRepository,\n    private _pricesService: PricesService,\n    private _modalService: ModalService,\n    private _locationService: LocationService,\n  ) {\n    super();\n\n    this.isUsingAllBalance = false;\n\n    this.loadingState = LoadableState.notRequested;\n    this.sourceWallet = null;\n    this.destinationWallet = null;\n    this.tradablePoolsPairs = new LoadableRelay<PoolsPair[]>(Promise.resolve([]));\n    this.bestPoolsPair = null;\n    this.availableAmount = null;\n    this.inputAmount = null;\n    this.estimatedAmount = null;\n    this.fees = new LoadableRelay<PayingFee[]>(Promise.resolve([]));\n    this.slippage = Defaults.slippage; // TODO: check maybe computed\n    this.payingWallet = null;\n\n    this.error = null;\n    this.activeInputField = ActiveInputField.none;\n\n    makeObservable(this, {\n      isUsingAllBalance: observable,\n\n      loadingState: observable,\n      sourceWallet: observable,\n      destinationWallet: observable,\n      tradablePoolsPairs: observable,\n      bestPoolsPair: observable,\n      availableAmount: observable,\n      inputAmount: observable,\n      estimatedAmount: observable,\n      fees: observable,\n      slippage: observable,\n      payingWallet: observable,\n\n      error: observable,\n      activeInputField: observable,\n\n      minimumReceiveAmount: computed,\n      isSendingMaxAmount: computed,\n      isShowingShowDetailsButton: computed,\n\n      swapSourceAndDestination: action,\n      useAllBalance: action,\n      enterInputAmount: action,\n      enterEstimatedAmount: action,\n      walletDidSelect: action,\n      changeFeePayingToken: action,\n\n      setActiveInputField: action,\n      setSlippage: action,\n\n      totalFees: computed,\n    });\n  }\n\n  protected override setDefaults(): void {\n    this.isUsingAllBalance = false;\n\n    this.loadingState = LoadableState.notRequested;\n    this.sourceWallet = null;\n    this.destinationWallet = null;\n    this.tradablePoolsPairs = new LoadableRelay<PoolsPair[]>(Promise.resolve([]));\n    this.bestPoolsPair = null;\n    this.availableAmount = null;\n    this.inputAmount = null;\n    this.estimatedAmount = null;\n    this.fees = new LoadableRelay<PayingFee[]>(Promise.resolve([]));\n    this.slippage = Defaults.slippage;\n    this.payingWallet = null;\n\n    this.error = null;\n    this.activeInputField = ActiveInputField.none;\n  }\n\n  protected override onInitialize(): void {\n    this.chooseSourceWalletViewModel.initialize();\n    this.chooseDestinationWalletViewModel.initialize();\n    this.swapSettingsViewModel.initialize();\n\n    // TODO: really wait until wallets load?\n    this.addReaction(\n      when(\n        () => this._walletsRepository.state === SDFetcherState.loaded,\n        () => {\n          this.payingWallet = this._walletsRepository.nativeWallet;\n          this.reload();\n\n          const pubkey = this._getPubkey();\n          const initialWallet = this._walletsRepository\n            .getWallets()\n            .find((wallet) => wallet.pubkey === pubkey);\n          // redirect to swap if don't found wallet with pubkey from URL\n          if (pubkey && !initialWallet) {\n            this._locationService.push('/swap');\n          }\n\n          this._bind(initialWallet ?? this._walletsRepository.nativeWallet);\n        },\n      ),\n    );\n  }\n\n  private _getPubkey(): string | undefined {\n    return this._locationService.getParams<{ publicKey?: string }>('/swap/:publicKey?').publicKey;\n  }\n\n  protected override afterReactionsRemoved(): void {\n    this.chooseSourceWalletViewModel.end();\n    this.chooseDestinationWalletViewModel.end();\n    this.swapSettingsViewModel.end();\n  }\n\n  private _bind(initialWallet: Wallet | null): void {\n    // wait until loaded and choose initial wallet\n    if (initialWallet) {\n      this.addReaction(\n        when(\n          () => this.loadingState.type === LoadableStateType.loaded,\n          () => {\n            this.sourceWallet = initialWallet;\n          },\n        ),\n      );\n    }\n\n    // update wallet after swapping\n    // TODO: check that is needed\n    // this.addReaction(\n    //   reaction(\n    //     () => this._walletsRepository.data, // TODO: should skip(1)\n    //     (wallets) => {\n    //       if (this.sourceWallet?.pubkey) {\n    //         const wallet = wallets.find((wallet) => wallet.pubkey === this.sourceWallet?.pubkey);\n    //         if (wallet) {\n    //           this.sourceWallet = wallet;\n    //         }\n    //\n    //         if (this.destinationWallet?.pubkey) {\n    //           const wallet = wallets.find(\n    //             (wallet) => wallet.pubkey === this.destinationWallet?.pubkey,\n    //           );\n    //           if (wallet) {\n    //             this.destinationWallet = wallet;\n    //           }\n    //         }\n    //       }\n    //     },\n    //   ),\n    // );\n\n    // available amount\n    this.addReaction(\n      reaction(\n        () => ({\n          sourceWallet: this.sourceWallet,\n          payingWallet: this.payingWallet,\n          fees: this.fees.value,\n        }),\n        ({ sourceWallet, payingWallet, fees }) => {\n          this.availableAmount = calculateAvailableAmount({\n            sourceWallet,\n            payingFeeWallet: payingWallet,\n            fees,\n          });\n        },\n      ),\n    );\n\n    // auto fill balance after tapping max\n    this.addReaction(\n      reaction(\n        () => this.availableAmount,\n        (availableAmount) => {\n          const inputAmount = this.inputAmount;\n          if (!this.isUsingAllBalance || !inputAmount || !availableAmount) {\n            return false;\n          }\n\n          return (\n            this.isUsingAllBalance &&\n            rounded(inputAmount, this.sourceWallet?.token.decimals) >\n              rounded(availableAmount, this.sourceWallet?.token.decimals)\n          );\n        },\n      ),\n    );\n\n    // get tradable pools pair for each token pair\n    this.addReaction(\n      reaction(\n        () => ({\n          sourceWallet: this.sourceWallet,\n          destinationWallet: this.destinationWallet,\n        }),\n        ({ sourceWallet, destinationWallet }) => {\n          if (!sourceWallet || !destinationWallet) {\n            this.tradablePoolsPairs.request = Promise.resolve([]);\n            this.tradablePoolsPairs.reload();\n            return;\n          }\n\n          this.tradablePoolsPairs.request = this.swapService.getPoolPair({\n            sourceMint: sourceWallet.token.address,\n            destinationMint: destinationWallet.token.address,\n          });\n          this.tradablePoolsPairs.reload();\n        },\n      ),\n    );\n\n    // Fill input amount and estimated amount after loaded\n    this.addReaction(\n      reaction(\n        () => this.tradablePoolsPairs.state.type === LoadableStateType.loaded,\n        () => {\n          const inputAmount = this.inputAmount;\n          const estimatedAmount = this.estimatedAmount;\n          if (inputAmount && this.activeInputField !== ActiveInputField.destination) {\n            this.enterInputAmount(inputAmount);\n          } else if (estimatedAmount) {\n            this.enterEstimatedAmount(estimatedAmount);\n          }\n        },\n      ),\n    );\n\n    // fees\n    this.addReaction(\n      reaction(\n        () => ({\n          bestPoolsPair: this.bestPoolsPair,\n          inputAmount: this.inputAmount,\n          slippage: this.slippage,\n          destinationWallet: this.destinationWallet,\n          sourceWallet: this.sourceWallet,\n          payingWallet: this.payingWallet,\n        }),\n        () => {\n          this.fees.request = this._feesRequest();\n          this.fees.reload();\n        },\n      ),\n    );\n\n    // Smart selection fee token paying\n\n    // Input wallet was changed\n    this.addReaction(\n      reaction(\n        () => this.sourceWallet,\n        (wallet) => {\n          if (!wallet) {\n            return;\n          }\n          // @web: sync url with source wallet\n          this._locationService.push(`/swap/${wallet.pubkey}`);\n\n          this.payingWallet = wallet;\n        },\n      ),\n    );\n\n    // Input amount was changed\n    this.addReaction(\n      reaction(\n        () => this.inputAmount,\n        async (input) => {\n          const availableAmount = this.availableAmount;\n          if (!input || !availableAmount) {\n            return;\n          }\n          const fees = await this._feesRequest();\n\n          // If paying token fee equals input token\n          if (\n            this.payingWallet?.pubkey === this.sourceWallet?.pubkey &&\n            !this.payingWallet?.isNativeSOL\n          ) {\n            // Selected wallet can not covert fee\n            if (\n              input + totalDecimal(fees) > availableAmount &&\n              (this._walletsRepository.nativeWallet?.amount ?? 0) > 0\n            ) {\n              const solWallet = this._walletsRepository.nativeWallet;\n              if (!solWallet) {\n                return;\n              }\n              this.changeFeePayingToken(solWallet);\n            }\n          }\n        },\n      ),\n    );\n\n    // Error\n    this.addReaction(\n      reaction(\n        () => ({\n          loadingState: this.loadingState,\n          sourceWallet: this.sourceWallet,\n          destinationWallet: this.destinationWallet,\n          tradablePoolsPairs: this.tradablePoolsPairs.state,\n          bestPoolsPair: this.bestPoolsPair,\n          fees: this.fees.value,\n          payingWallet: this.payingWallet,\n        }),\n        () => {\n          this.error = this._verify();\n        },\n      ),\n    );\n  }\n\n  // Actions\n\n  authenticateAndSwap(): void {\n    // TODO: authenticationHandler\n    this._swap();\n  }\n\n  private _swap(): void {\n    if (this._verify()) {\n      return;\n    }\n\n    const authority = this._walletsRepository.nativeWallet?.pubkey;\n    const sourceWallet = this.sourceWallet!;\n    const destinationWallet = this.destinationWallet!;\n    const bestPoolsPair = this.bestPoolsPair!;\n    const inputAmount = this.inputAmount!;\n    const estimatedAmount = this.estimatedAmount!;\n    const payingWallet = this.payingWallet;\n    const slippage = this.slippage;\n    const fees = this.fees.value?.filter((fee) => fee.type !== FeeType.liquidityProviderFee) ?? [];\n\n    const swapMAX = this.availableAmount === inputAmount;\n\n    // log\n    const receiveAmount = this.minimumReceiveAmount ?? 0;\n    const receivePricePair = destinationWallet.priceInCurrentFiat ?? 0.0;\n    const swapUSD = receiveAmount * receivePricePair;\n\n    // show processing scene\n    void this._modalService.openModal<void, ProcessTransactionModalProps>(\n      ModalType.SHOW_MODAL_PROCESS_TRANSACTION,\n      {\n        transaction: new ProcessTransaction.SwapTransaction({\n          swapService: this.swapService,\n          sourceWallet,\n          destinationWallet,\n          payingWallet,\n          authority,\n          poolsPair: bestPoolsPair,\n          amount: inputAmount,\n          estimatedAmount,\n          slippage,\n          fees,\n          metaInfo: {\n            swapMAX,\n            swapUSD,\n          },\n        }),\n      },\n    );\n  }\n\n  get minimumReceiveAmount(): number | null {\n    const poolsPair = this.bestPoolsPair;\n    const _inputAmount = this.inputAmount;\n    const slippage = this.slippage;\n    const sourceWallet = this.sourceWallet;\n    const destinationWallet = this.destinationWallet;\n\n    const sourceDecimals = sourceWallet?.token.decimals;\n    if (!_inputAmount || !sourceDecimals) {\n      return null;\n    }\n    const inputAmount = toLamport(_inputAmount, sourceDecimals);\n    const destinationDecimals = destinationWallet?.token.decimals;\n    if (!poolsPair || !inputAmount || !destinationDecimals) {\n      return null;\n    }\n\n    const minimumAmountOut = getMinimumAmountOut(poolsPair, inputAmount, slippage);\n    if (!minimumAmountOut) {\n      return null;\n    }\n    return convertToBalance(minimumAmountOut, destinationDecimals);\n  }\n\n  get exchangeRate(): number | null {\n    const inputAmount = this.inputAmount;\n    const estimatedAmount = this.estimatedAmount;\n    if (inputAmount && estimatedAmount && inputAmount > 0 && estimatedAmount > 0) {\n      return estimatedAmount / inputAmount;\n    }\n    return null;\n  }\n\n  get isSendingMaxAmount(): boolean {\n    const availableAmount = this.availableAmount;\n    const currentAmount = this.inputAmount;\n    return availableAmount === currentAmount;\n  }\n\n  get isShowingShowDetailsButton(): boolean {\n    return Boolean(this.sourceWallet) && Boolean(this.destinationWallet);\n  }\n\n  getPrice(symbol: string): number | null {\n    return this._pricesService.currentPrice(symbol)?.value ?? null;\n  }\n\n  reload(): void {\n    this.loadingState = LoadableState.loading;\n\n    this.swapService\n      .load()\n      .then(\n        action(() => {\n          this.loadingState = LoadableState.loaded;\n        }),\n      )\n      .catch(\n        action((error) => {\n          this.loadingState = LoadableState.error(error.message); // TODO: readableDescription\n        }),\n      );\n  }\n\n  swapSourceAndDestination(): void {\n    const source = this.sourceWallet;\n    this.sourceWallet = this.destinationWallet;\n    this.destinationWallet = source;\n  }\n\n  useAllBalance(): void {\n    this.isUsingAllBalance = true;\n    this.enterInputAmount(this.availableAmount);\n\n    const fees = this.fees.value;\n    if (fees && fees.length && this.availableAmount !== this.inputAmount) {\n      // TODO:  notificationsService.showInAppNotification\n      console.warn(\n        'This value is calculated by subtracting the transaction fee from your balance.',\n      );\n    }\n  }\n\n  enterInputAmount(amount: number | null): void {\n    const _amount = amount ? rounded(amount, this.sourceWallet?.token.decimals) : null;\n    this.inputAmount = _amount;\n\n    // calculate estimated amount\n    const sourceDecimals = this.sourceWallet?.token.decimals;\n    const destinationDecimals = this.destinationWallet?.token.decimals;\n    const poolsPairs = this.tradablePoolsPairs.value;\n    let inputAmount, bestPoolsPair, bestEstimatedAmountU64, bestEstimatedAmount;\n    if (\n      sourceDecimals &&\n      destinationDecimals &&\n      (inputAmount = _amount ? toLamport(_amount, sourceDecimals) : null) &&\n      poolsPairs &&\n      (bestPoolsPair = findBestPoolsPairForInputAmount({\n        poolsPairs,\n        inputAmount,\n      })) &&\n      (bestEstimatedAmountU64 = inputAmount ? getOutputAmount(bestPoolsPair, inputAmount) : null) &&\n      (bestEstimatedAmount = bestEstimatedAmountU64\n        ? rounded(\n            convertToBalance(bestEstimatedAmountU64, destinationDecimals),\n            destinationDecimals,\n          )\n        : null)\n    ) {\n      this.estimatedAmount = bestEstimatedAmount;\n      this.bestPoolsPair = bestPoolsPair;\n    } else {\n      this.estimatedAmount = null;\n      this.bestPoolsPair = null;\n    }\n  }\n\n  enterEstimatedAmount(amount: number | null): void {\n    const _amount = amount ? rounded(amount, this.destinationWallet?.token.decimals) : null;\n    this.estimatedAmount = _amount;\n\n    // calculate input amount\n    const sourceDecimals = this.sourceWallet?.token.decimals;\n    const destinationDecimals = this.destinationWallet?.token.decimals;\n    const poolsPairs = this.tradablePoolsPairs.value;\n    let estimatedAmount, bestPoolsPair, bestInputAmountU64, bestInputAmount;\n    if (\n      sourceDecimals &&\n      destinationDecimals &&\n      (estimatedAmount = _amount ? toLamport(_amount, destinationDecimals) : null) &&\n      poolsPairs &&\n      (bestPoolsPair = findBestPoolsPairForEstimatedAmount({\n        poolsPairs,\n        estimatedAmount,\n      })) &&\n      (bestInputAmountU64 = estimatedAmount\n        ? getInputAmount(bestPoolsPair, estimatedAmount)\n        : null) &&\n      (bestInputAmount = rounded(\n        convertToBalance(bestInputAmountU64, sourceDecimals),\n        sourceDecimals,\n      ))\n    ) {\n      this.inputAmount = bestInputAmount;\n      this.bestPoolsPair = bestPoolsPair;\n    } else {\n      this.inputAmount = null;\n      this.bestPoolsPair = null;\n    }\n  }\n\n  /**\n   *\n   * @param wallet\n   * @param isSelectingSourceWallet indicate if selecting source wallet or destination wallet\n   */\n  walletDidSelect(wallet: Wallet, isSelectingSourceWallet: boolean): void {\n    if (isSelectingSourceWallet) {\n      this.sourceWallet = wallet;\n    } else {\n      this.destinationWallet = wallet;\n    }\n  }\n\n  changeFeePayingToken(payingToken: Wallet): void {\n    this.payingWallet = payingToken;\n  }\n\n  setActiveInputField(value: ActiveInputField): void {\n    this.activeInputField = value;\n  }\n\n  // OrcaSwapV2.Helper\n\n  // Verify error in current context IN ORDER\n  // - Returns: String or nil if no error\n  private _verify(): VerificationError | null {\n    // loading state\n    if (this.loadingState.type !== LoadableStateType.loaded) {\n      return VerificationError.swappingIsNotAvailable;\n    }\n\n    // source wallet\n    const sourceWallet = this.sourceWallet;\n    if (!sourceWallet) {\n      return VerificationError.sourceWalletIsEmpty;\n    }\n\n    // destination wallet\n    const destinationWallet = this.destinationWallet;\n    if (!destinationWallet) {\n      return VerificationError.destinationWalletIsEmpty;\n    }\n\n    // prevent swap the same token\n    if (sourceWallet.token.address === destinationWallet.token.address) {\n      return VerificationError.canNotSwapToItSelf;\n    }\n\n    // pools pairs\n    if (this.tradablePoolsPairs.state.type !== LoadableStateType.loaded) {\n      return VerificationError.tradablePoolsPairsNotLoaded;\n    }\n\n    if (!this.tradablePoolsPairs.value || this.tradablePoolsPairs.value.length === 0) {\n      return VerificationError.tradingPairNotSupported;\n    }\n\n    // inputAmount\n    const inputAmount = this.inputAmount;\n    if (!inputAmount) {\n      return VerificationError.inputAmountIsEmpty;\n    }\n\n    if (rounded(inputAmount, sourceWallet.token.decimals) <= 0) {\n      return VerificationError.inputAmountIsNotValid;\n    }\n\n    // TODO: check \"?? 0\" right\n    // TODO: need to do it early for error on \"max amount\"\n    if (\n      rounded(inputAmount, sourceWallet.token.decimals) >\n      rounded(this.availableAmount ?? 0, sourceWallet.token.decimals)\n    ) {\n      return VerificationError.insufficientFunds;\n    }\n\n    // estimated amount\n    const estimatedAmount = this.estimatedAmount;\n    if (!estimatedAmount) {\n      return VerificationError.estimatedAmountIsNotValid;\n    }\n\n    if (rounded(estimatedAmount, destinationWallet.token.decimals) <= 0) {\n      return VerificationError.estimatedAmountIsNotValid;\n    }\n\n    // best pools pairs\n    if (!this.bestPoolsPair) {\n      return VerificationError.bestPoolsPairsIsEmpty;\n    }\n\n    // fees\n    if (this.fees.state.isError) {\n      return VerificationError.couldNotCalculatingFees;\n    }\n\n    if (this.fees.state.type !== LoadableStateType.loaded) {\n      return VerificationError.feesIsBeingCalculated;\n    }\n\n    const payingWallet = this.payingWallet;\n    if (!payingWallet) {\n      return VerificationError.payingFeeWalletNotFound;\n    }\n\n    // paying with SOL\n    if (payingWallet.isNativeSOL) {\n      const wallet = this._walletsRepository.nativeWallet;\n      if (!wallet) {\n        return VerificationError.nativeWalletNotFound;\n      }\n\n      const feeInSOL = this.fees.value ? transactionFees(this.fees.value, 'SOL') : ZERO;\n\n      if (feeInSOL.gt(wallet.lamports ?? ZERO)) {\n        return VerificationError.notEnoughSOLToCoverFees;\n      }\n    }\n\n    // paying with SPL token\n    else {\n      // TODO: - fee compensation\n      //                if (!feeCompensationPool) {\n      //                    return 'Fee compensation pool not found';\n      //                }\n      const feeTotal = this.fees.value ? totalLamport(this.fees.value) : null;\n      if (feeTotal) {\n        const feeTotalTokenSymbol = this.fees.value ? totalToken(this.fees.value)?.symbol : null;\n        if (payingWallet.token.symbol === feeTotalTokenSymbol) {\n          if (feeTotal.gt(payingWallet.lamports ?? ZERO)) {\n            return VerificationError.notEnoughBalanceToCoverFees;\n          }\n        }\n      }\n    }\n\n    // slippage\n    if (!this._isSlippageValid()) {\n      return VerificationError.slippageIsNotValid;\n    }\n\n    return null;\n  }\n\n  private _isSlippageValid(): boolean {\n    return this.slippage <= maxSlippage && this.slippage > 0;\n  }\n\n  private async _feesRequest(): Promise<PayingFee[]> {\n    const sourceWallet = this.sourceWallet;\n    const destinationWallet = this.destinationWallet;\n    if (!sourceWallet || !destinationWallet) {\n      return [];\n    }\n\n    return (\n      await this.swapService.getFees({\n        sourceMint: sourceWallet.mintAddress,\n        destinationAddress: destinationWallet.pubkey,\n        destinationToken: destinationWallet.token,\n        bestPoolsPair: this.bestPoolsPair,\n        payingWallet: this.payingWallet,\n        inputAmount: this.inputAmount,\n        slippage: this.slippage,\n      })\n    ).fees;\n  }\n\n  // own code\n\n  openConfirmModal(): Promise<void> {\n    return this._modalService.openModal<void, ConfirmSwapModalProps>(\n      ModalType.SHOW_MODAL_CONFIRM_SWAP,\n      {\n        viewModel: this,\n      },\n    );\n  }\n\n  setSlippage(slippage: number): void {\n    this.slippage = slippage;\n  }\n\n  get totalFees(): {\n    totalFeesSymbol: string;\n    decimals: number;\n    amount: number;\n    amountInFiat: number;\n  } | null {\n    const fees = this.fees.value ?? [];\n\n    const totalFeesSymbol = fees.find((fee) => fee.type.type === FeeTypeEnum.transactionFee)?.token\n      .symbol;\n    if (totalFeesSymbol) {\n      const totalFees = fees.filter(\n        (fee) =>\n          fee.token.symbol === totalFeesSymbol &&\n          fee.type.type !== FeeTypeEnum.liquidityProviderFee,\n      );\n      const decimals = totalFees[0]?.token.decimals ?? 0;\n      const amount = convertToBalance(\n        totalFees.reduce((acc, curr) => acc.add(curr.lamports), ZERO),\n        decimals,\n      );\n      const price = this.getPrice(totalFeesSymbol) ?? 0;\n      const amountInFiat = amount * price;\n\n      return {\n        totalFeesSymbol,\n        decimals,\n        amount,\n        amountInFiat,\n      };\n    }\n\n    return null;\n  }\n}\n\nfunction calculateAvailableAmount({\n  sourceWallet,\n  payingFeeWallet,\n  fees,\n}: {\n  sourceWallet?: Wallet | null;\n  payingFeeWallet?: Wallet | null;\n  fees?: PayingFee[] | null;\n}): number | null {\n  if (!sourceWallet) {\n    return null;\n  }\n\n  // subtract the fee when source wallet is the paying wallet\n  if (payingFeeWallet?.mintAddress === sourceWallet.mintAddress) {\n    const _networkFeesU64 = fees ? networkFees(fees, sourceWallet.token.symbol)?.total : null;\n    const _networkFees = _networkFeesU64\n      ? convertToBalance(_networkFeesU64, sourceWallet.token.decimals)\n      : null;\n\n    const amount = sourceWallet.amount;\n    if (_networkFees && amount) {\n      if (amount > _networkFees) {\n        return amount - _networkFees;\n      } else {\n        return 0;\n      }\n    }\n  }\n\n  return sourceWallet.amount;\n}\n","import type { FC } from 'react';\n\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { Button } from 'components/ui';\nimport { VerificationError } from 'new/scenes/Main/Swap/Swap/types';\n\nimport type { SwapViewModel } from '../Swap.ViewModel';\n\ninterface Props {\n  viewModel: Readonly<SwapViewModel>;\n}\n\nexport const ActionButton: FC<Props> = observer(({ viewModel }) => {\n  const isDisabled = Boolean(viewModel.error);\n\n  const handleClick = () => {\n    void viewModel.openConfirmModal();\n  };\n\n  // setError\n  const error = expr(() => {\n    const error = viewModel.error;\n    const feePayingTokenSymbol = viewModel.payingWallet?.token.symbol; // feePayingToken\n\n    let text: string;\n\n    switch (error) {\n      case VerificationError.swappingIsNotAvailable:\n        text = 'Swapping is currently unavailable';\n        break;\n      case VerificationError.sourceWalletIsEmpty:\n        text = 'Choose source wallet';\n        break;\n      case VerificationError.destinationWalletIsEmpty:\n        text = 'Choose destination wallet';\n        break;\n      case VerificationError.canNotSwapToItSelf:\n        text = 'Choose another destination wallet';\n        break;\n      case VerificationError.tradablePoolsPairsNotLoaded:\n        text = 'Loading';\n        break;\n      case VerificationError.tradingPairNotSupported:\n        text = 'This trading pair is not supported';\n        break;\n      case VerificationError.feesIsBeingCalculated:\n        text = 'Calculating fees';\n        break;\n      case VerificationError.couldNotCalculatingFees:\n        text = 'Could not calculating fees';\n        break;\n      case VerificationError.inputAmountIsEmpty:\n        text = 'Enter the amount';\n        break;\n      case VerificationError.inputAmountIsNotValid:\n        text = 'Input amount is not valid';\n        break;\n      case VerificationError.insufficientFunds:\n        text = 'Insufficient funds';\n        break;\n      case VerificationError.estimatedAmountIsNotValid:\n        text = 'Amount is too small';\n        break;\n      case VerificationError.bestPoolsPairsIsEmpty:\n        text = 'This trading pair is not supported';\n        break;\n      case VerificationError.slippageIsNotValid:\n        text = 'Choose another slippage';\n        break;\n      case VerificationError.nativeWalletNotFound:\n        text = 'Could not connect to wallet';\n        break;\n      case VerificationError.notEnoughSOLToCoverFees:\n        text = 'Your account does not have enough SOL to cover fee';\n        break;\n      case VerificationError.notEnoughBalanceToCoverFees:\n        text = `Your account does not have enough ${feePayingTokenSymbol ?? ''} to cover fees`;\n        break;\n      case VerificationError.unknown:\n        text = 'Unknown error';\n        break;\n      case VerificationError.payingFeeWalletNotFound:\n        // TODO: fix\n        text = 'payingFeeWalletNotFound';\n        break;\n      default:\n        text = 'Review & confirm';\n        break;\n    }\n\n    return text;\n  });\n\n  return (\n    <Button primary full disabled={isDisabled} onClick={handleClick}>\n      {error}\n    </Button>\n  );\n});\n","import type { FC } from 'react';\nimport { generatePath, useHistory, useParams } from 'react-router';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nimport { Button, Icon } from 'components/ui';\n\nimport type { SwapRouteParams } from '../types';\n\nconst ActionIcon = styled(Icon)`\n  width: 16px;\n  height: 16px;\n  margin-right: 8px;\n\n  color: ${theme.colors.textIcon.active};\n`;\n\nconst ButtonStyled = styled(Button)`\n  border: 1px solid ${theme.colors.stroke.primary};\n`;\n\nexport const SettingsButton: FC = () => {\n  const history = useHistory();\n  const { publicKey } = useParams<SwapRouteParams>();\n\n  const handleShowSettings = () => {\n    history.push(generatePath('/swap/settings/:publicKey?', { publicKey }));\n  };\n\n  return (\n    <ButtonStyled small onClick={handleShowSettings}>\n      <ActionIcon name=\"gear\" />\n      Swap settings\n    </ButtonStyled>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport type { FeeCellContent } from 'new/scenes/Main/Swap/SwapSettings/SwapSettings.ViewModel';\nimport { BaseWalletCellContent } from 'new/ui/components/common/BaseWalletCellContent';\nimport { Select, SelectItem } from 'new/ui/components/common/Select';\nimport { TokenAvatar } from 'new/ui/components/common/TokenAvatar';\n\nconst SelectorValue = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100%;\n`;\n\nconst TokenAvatarStyled = styled(TokenAvatar)`\n  margin-right: 12px;\n`;\n\nconst Fees = styled.div`\n  flex-grow: 1;\n`;\n\nconst Top = styled.div``;\n\nconst Label = styled.span`\n  margin-right: 4px;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n\n  &.primary {\n    color: ${theme.colors.textIcon.primary};\n    font-size: 16px;\n  }\n`;\n\nconst LabelWrapper = styled.div`\n  display: grid;\n  grid-row-gap: 2px;\n`;\n\ntype Props = {\n  items: FeeCellContent[];\n  flat?: boolean;\n};\n\nexport const FeesView: FC<Props> = observer(({ items, flat = false }) => {\n  const selectedItem = expr(() => items.find((item) => item.isSelected));\n\n  return (\n    <Select\n      flat={flat}\n      mobileListTitle=\"Pay swap fees with\"\n      value={\n        <SelectorValue>\n          <TokenAvatarStyled token={selectedItem?.wallet?.token} size={44} />\n          <Fees>\n            <Top>\n              <LabelWrapper>\n                <Label>Pay swap fees with</Label>\n                <Label className=\"primary\">{selectedItem?.wallet?.token.symbol}</Label>\n              </LabelWrapper>\n            </Top>\n          </Fees>\n        </SelectorValue>\n      }\n    >\n      {items.map((item) => (\n        <SelectItem\n          key={item.wallet?.pubkey}\n          onItemClick={item.onClick}\n          isSelected={item.isSelected}\n        >\n          <BaseWalletCellContent wallet={item.wallet} isMobilePopupChild />\n        </SelectItem>\n      ))}\n    </Select>\n  );\n});\n","import type { FC } from 'react';\nimport { useCallback } from 'react';\nimport { generatePath, useHistory, useParams } from 'react-router';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\nimport { Row, Text } from 'components/ui/AccordionDetails/common';\nimport type { SwapViewModel } from 'new/scenes/Main/Swap';\nimport type { SwapRouteParams } from 'new/scenes/Main/Swap/Swap/types';\n\nconst PenIcon = styled(Icon)`\n  width: 16px;\n  height: 16px;\n\n  margin: auto 0;\n\n  color: ${theme.colors.textIcon.secondary};\n\n  cursor: pointer;\n`;\n\ninterface Props {\n  viewModel: Readonly<SwapViewModel>;\n}\n\nexport const SlippageView: FC<Props> = ({ viewModel }) => {\n  const history = useHistory();\n  const { symbol } = useParams<SwapRouteParams>();\n\n  const handleShowSettings = useCallback(() => {\n    history.push(generatePath('/swap/settings/:symbol?', { symbol }));\n  }, [history, symbol]);\n\n  return (\n    <Row>\n      <Text className=\"gray\">Max price slippage</Text>\n      <Text>\n        {viewModel.slippage * 100}% <PenIcon name=\"pen\" onClick={handleShowSettings} />\n      </Text>\n    </Row>\n  );\n};\n","import type { FC } from 'react';\n\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { Accordion } from 'components/ui';\nimport { AccordionTitle } from 'components/ui/AccordionDetails/AccordionTitle';\nimport { FeesView } from 'new/scenes/Main/Swap/Subviews/FeesView';\nimport { DetailFeesView } from 'new/scenes/Main/Swap/Swap/Subviews/DetailsView/DetailFeesView';\nimport { RatesStackView } from 'new/scenes/Main/Swap/Swap/Subviews/DetailsView/RatesStackView';\nimport { SlippageView } from 'new/scenes/Main/Swap/Swap/Subviews/DetailsView/SlippageView';\nimport type { SwapViewModel } from 'new/scenes/Main/Swap/Swap/Swap.ViewModel';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\ninterface Props {\n  viewModel: Readonly<SwapViewModel>;\n}\n\nexport const DetailsView: FC<Props> = observer(({ viewModel }) => {\n  const totalFee = expr(() => {\n    const totalFees = viewModel.totalFees;\n    if (totalFees) {\n      const { amount, decimals, totalFeesSymbol } = totalFees;\n      return `${numberToString(amount, { maximumFractionDigits: decimals })} ${totalFeesSymbol}`;\n    }\n    return '';\n  });\n\n  return (\n    <Accordion\n      title={\n        <AccordionTitle\n          title=\"Swap details\"\n          titleBottomName=\"Total fee\"\n          titleBottomValue={totalFee}\n        />\n      }\n      open={true}\n      noContentPadding\n    >\n      <RatesStackView\n        exchangeRate={viewModel.exchangeRate}\n        sourceWallet={viewModel.sourceWallet}\n        destinationWallet={viewModel.destinationWallet}\n      />\n      <DetailFeesView\n        viewModel={viewModel}\n        slippageView={<SlippageView viewModel={viewModel} />}\n        feesView={<FeesView items={viewModel.swapSettingsViewModel.feesContent} flat />}\n      />\n    </Accordion>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { Defaults } from 'new/services/Defaults';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport type { SwapViewModel } from '../../../Swap.ViewModel';\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin: 0 20px 16px;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  &.isHidden {\n    visibility: hidden;\n  }\n\n  & > :first-child {\n    white-space: nowrap;\n  }\n\n  & > :last-child {\n    text-align: right;\n  }\n`;\n\nconst Black = styled.span`\n  color: ${theme.colors.textIcon.primary};\n`;\n\ninterface Props {\n  viewModel: Readonly<SwapViewModel>;\n}\n\nexport const ReceiveAtLeastView: FC<Props> = observer(({ viewModel }) => {\n  const text = expr(() => {\n    const minReceiveAmount = viewModel.minimumReceiveAmount;\n    const wallet = viewModel.destinationWallet;\n\n    if (!minReceiveAmount) {\n      return null;\n    }\n\n    const formattedReceiveAmount = numberToString(minReceiveAmount, {\n      maximumFractionDigits: 9,\n    });\n\n    const fiatPrice = wallet?.priceInCurrentFiat;\n    if (!fiatPrice) {\n      return formattedReceiveAmount;\n    }\n\n    const receiveFiatPrice = numberToString(minReceiveAmount * fiatPrice, {\n      maximumFractionDigits: 2,\n    });\n    const formattedReceiveFiatAmount = `(~${Defaults.fiat.symbol}${receiveFiatPrice})`;\n\n    return (\n      <>\n        <Black>{formattedReceiveAmount}</Black> {formattedReceiveFiatAmount}\n      </>\n    );\n  });\n\n  return (\n    <Wrapper className={classNames({ isHidden: !text })}>\n      <div>Receive at least:</div>\n      <div>{text}</div>\n    </Wrapper>\n  );\n});\n","import type { FC, HTMLAttributes } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\n\nconst Wrapper = styled.div`\n  position: relative;\n  z-index: 1;\n\n  display: flex;\n  height: 1px;\n  padding-left: 72px;\n\n  background: ${theme.colors.stroke.tertiary};\n\n  ${up.tablet} {\n    justify-content: center;\n    padding-left: 0;\n  }\n`;\n\nconst SwitchWrapper = styled.div`\n  position: absolute;\n  top: -24px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n\n  cursor: pointer;\n`;\n\nconst SwitchIcon = styled(Icon)`\n  width: 100%;\n  height: 100%;\n\n  color: ${theme.colors.textIcon.active};\n`;\n\ntype Props = HTMLAttributes<HTMLDivElement>;\n\nexport const SwitchButton: FC<Props> = ({ onClick }) => {\n  return (\n    <Wrapper>\n      <SwitchWrapper onClick={onClick}>\n        <SwitchIcon name=\"swap-bordered\" />\n      </SwitchWrapper>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { LaagTooltip } from 'components/ui';\n\nconst TooltipContent = styled.div`\n  max-width: 298px;\n  height: 65px;\n`;\n\ninterface Props {\n  className?: string;\n}\n\nexport const AccountCreationFeeTooltip: FC<Props> = ({ className }) => {\n  return (\n    <LaagTooltip\n      withClose={true}\n      elContent={\n        <TooltipContent>\n          This value is calculated by subtracting the account creation fee from your balance\n        </TooltipContent>\n      }\n      className={className}\n    />\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { Icon } from 'components/ui';\nimport type { SwapViewModel } from 'new/scenes/Main/Swap/Swap/Swap.ViewModel';\nimport { VerificationError } from 'new/scenes/Main/Swap/Swap/types';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  cursor: pointer;\n\n  &.disabled {\n    cursor: auto;\n\n    pointer-events: none;\n  }\n\n  &.error {\n    color: ${theme.colors.system.errorMain};\n  }\n\n  &.success {\n    color: ${theme.colors.system.successMain};\n  }\n`;\n\nconst Max = styled.div`\n  margin-left: 8px;\n\n  color: ${theme.colors.textIcon.active};\n  text-transform: uppercase;\n`;\n\nconst WalletBalanceIcon = styled(Icon)`\n  width: 20px;\n  height: 20px;\n  margin-right: 4px;\n`;\n\ninterface Props {\n  type: 'source' | 'destination';\n  viewModel: Readonly<SwapViewModel>;\n}\n\nexport const BalanceView: FC<Props> = observer(({ type, viewModel }) => {\n  const classNameStatus = expr(() => {\n    if (type !== 'source') {\n      return undefined;\n    }\n\n    const isErrorState =\n      viewModel.error === VerificationError.insufficientFunds ||\n      viewModel.error === VerificationError.inputAmountIsNotValid;\n    const isSendingMax = viewModel.isSendingMaxAmount;\n    if (isErrorState) {\n      return 'error';\n    } else if (isSendingMax) {\n      return 'success';\n    }\n    return undefined;\n  });\n\n  // available amount\n  const balanceText = expr(() => {\n    if (type === 'source') {\n      const wallet = viewModel.sourceWallet;\n      return numberToString(wallet?.amount ?? 0, { maximumFractionDigits: 9 });\n    }\n\n    const wallet = viewModel.destinationWallet;\n    return wallet?.amount ? numberToString(wallet.amount, { maximumFractionDigits: 9 }) : null;\n  });\n\n  const maxButtonIsHidden = expr(() => {\n    if (type === 'source') {\n      return viewModel.isSendingMaxAmount;\n    }\n    return true;\n  });\n\n  const useAllBalance = () => {\n    // TODO:  amountTextField.resignFirstResponder()\n    viewModel.useAllBalance();\n  };\n\n  return (\n    <Wrapper className={classNameStatus}>\n      {balanceText ? <WalletBalanceIcon name=\"wallet\" /> : null}\n      {balanceText}\n      {maxButtonIsHidden ? null : <Max onClick={useAllBalance}>MAX</Max>}\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { InputAmount } from 'components/ui/InputAmount';\nimport { WalletSelectorContent } from 'new/scenes/Main/Send/ChooseTokenAndAmount/WalletSelectorContent';\nimport type { SwapViewModel } from 'new/scenes/Main/Swap/Swap/Swap.ViewModel';\nimport { ActiveInputField } from 'new/scenes/Main/Swap/Swap/types';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { AccountCreationFeeTooltip } from 'new/ui/components/common/AccountCreationFeeTooltip';\nimport { ChooseWallet } from 'new/ui/components/common/ChooseWallet';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport { BalanceView } from './BalanceView';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  padding: 16px 20px;\n\n  &:first-child {\n    padding-bottom: 32px;\n\n    ${up.tablet} {\n      padding-bottom: 16px;\n    }\n  }\n`;\n\nconst TopWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  margin-bottom: 8px;\n`;\n\nconst Title = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n`;\n\nconst MainWrapper = styled.div`\n  position: relative;\n\n  display: grid;\n  grid-template-columns: min-content 1fr;\n`;\n\nconst InputWrapper = styled.div`\n  display: flex;\n`;\n\nconst AccountCreationFeeTooltipStyled = styled(AccountCreationFeeTooltip)`\n  margin-left: 4px;\n`;\n\ninterface Props {\n  type: 'source' | 'destination';\n  viewModel: Readonly<SwapViewModel>;\n}\n\nexport const WalletView: FC<Props> = observer(({ type, viewModel }) => {\n  const chooseWalletViewModel = expr(() => {\n    if (type === 'source') {\n      return viewModel.chooseSourceWalletViewModel;\n    } else {\n      return viewModel.chooseDestinationWalletViewModel;\n    }\n  });\n\n  const wallet = expr(() => {\n    if (type === 'source') {\n      return viewModel.sourceWallet;\n    } else {\n      return viewModel.destinationWallet;\n    }\n  });\n\n  const customFilterFactory = () => {\n    if (type === 'source') {\n      return (wallet: Wallet) => wallet.amount > 0;\n    } else {\n      // if destination\n      let destinationMints: string[] = [];\n      const sourceWallet = viewModel.sourceWallet;\n      if (sourceWallet) {\n        let validMints: string[] = [];\n        try {\n          validMints = viewModel.swapService.findPosibleDestinationMints(\n            sourceWallet.token.address,\n          );\n        } catch {\n          // ignore\n        }\n        if (validMints.length !== 0) {\n          destinationMints = validMints;\n        }\n      }\n\n      const validMints = new Set(destinationMints);\n      const excludedSourceWalletPubkey = sourceWallet?.pubkey;\n      return (wallet: Wallet) =>\n        wallet.pubkey !== excludedSourceWalletPubkey && validMints.has(wallet.mintAddress);\n    }\n  };\n\n  const showOtherWallets = expr(() => {\n    if (type === 'source') {\n      return false;\n    }\n    return true;\n  });\n\n  const placeholder = expr(() => {\n    return numberToString(0, { maximumFractionDigits: wallet?.token.decimals ?? 0 });\n  });\n\n  const handleWalletChange = (wallet: Wallet) => {\n    const isSelectingSourceWallet = type === 'source';\n    viewModel.walletDidSelect(wallet, isSelectingSourceWallet);\n  };\n\n  const amount = expr(() => {\n    if (type === 'source') {\n      return viewModel.inputAmount ?? undefined;\n    } else {\n      return viewModel.estimatedAmount ?? undefined;\n    }\n  });\n\n  const handleAmountChange = (value: string) => {\n    const valueNew = Number(value);\n    if (type === 'source') {\n      viewModel.enterInputAmount(valueNew);\n    } else {\n      viewModel.enterEstimatedAmount(valueNew);\n    }\n  };\n\n  const handleFocus = () => {\n    viewModel.setActiveInputField(\n      type === 'source' ? ActiveInputField.source : ActiveInputField.destination,\n    );\n  };\n\n  const handleBlur = () => {\n    viewModel.setActiveInputField(ActiveInputField.none);\n  };\n\n  return (\n    <Wrapper>\n      <TopWrapper>\n        <Title>{type === 'source' ? 'From' : 'To'}</Title>\n        <BalanceView type={type} viewModel={viewModel} />\n      </TopWrapper>\n      <MainWrapper>\n        <ChooseWallet\n          viewModel={chooseWalletViewModel}\n          selector={<WalletSelectorContent viewModel={chooseWalletViewModel} />}\n          selectedWallet={wallet}\n          customFilter={customFilterFactory()}\n          showOtherWallets={showOtherWallets}\n          onWalletChange={handleWalletChange}\n        />\n        <InputWrapper>\n          <InputAmount\n            placeholder={placeholder}\n            value={amount}\n            decimals={wallet?.token.decimals}\n            onChange={handleAmountChange}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n          />\n          {type === 'source' && viewModel.isSendingMaxAmount ? (\n            <AccountCreationFeeTooltipStyled />\n          ) : null}\n        </InputWrapper>\n      </MainWrapper>\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport type { SwapViewModel } from '../../Swap.ViewModel';\nimport { ReceiveAtLeastView } from './ReceiveAtLeastView';\nimport { SwitchButton } from './SwitchButton';\nimport { WalletView } from './WalletView';\n\nconst Wrapper = styled.div`\n  border: 1px solid ${theme.colors.stroke.tertiary};\n  border-radius: 12px;\n`;\n\ninterface Props {\n  viewModel: Readonly<SwapViewModel>;\n}\n\nexport const MainSwapView: FC<Props> = observer(({ viewModel }) => {\n  const handleSwitchClick = () => {\n    viewModel.swapSourceAndDestination();\n  };\n\n  return (\n    <Wrapper>\n      <WalletView type=\"source\" viewModel={viewModel} />\n      <SwitchButton onClick={handleSwitchClick} />\n      <WalletView type=\"destination\" viewModel={viewModel} />\n      <ReceiveAtLeastView viewModel={viewModel} />\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { useIsMobile } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { WidgetPageWithBottom } from 'components/common/WidgetPageWithBottom';\n\nimport { ActionButton } from './ActionButton';\nimport { SettingsButton } from './SettingsButton';\nimport { DetailsView } from './Subviews/DetailsView';\nimport { MainSwapView } from './Subviews/MainSwapView';\nimport type { SwapViewModel } from './Swap.ViewModel';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-gap: 16px;\n`;\n\ninterface Props {\n  viewModel: Readonly<SwapViewModel>;\n}\n\nexport const Swap: FC<Props> = observer(({ viewModel }) => {\n  const isMobile = useIsMobile();\n\n  return (\n    <WidgetPageWithBottom\n      title=\"Swap\"\n      icon=\"swap\"\n      action={!isMobile ? <SettingsButton /> : null}\n      bottom={<ActionButton viewModel={viewModel} />}\n    >\n      <Wrapper>\n        <MainSwapView viewModel={viewModel} />\n        {viewModel.isShowingShowDetailsButton ? <DetailsView viewModel={viewModel} /> : null}\n      </Wrapper>\n    </WidgetPageWithBottom>\n  );\n});\n","import { generatePath, useHistory, useParams } from 'react-router';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nimport { Button, Icon } from 'components/ui';\n\nimport type { SwapRouteParams } from '../types';\n\nconst Wrapper = styled.div``;\n\nconst ActionIcon = styled(Icon)`\n  width: 16px;\n  height: 16px;\n  margin-right: 8px;\n\n  color: ${theme.colors.textIcon.active};\n`;\n\nconst ButtonStyled = styled(Button)`\n  border: 1px solid ${theme.colors.stroke.primary};\n`;\n\nexport const GoBackButton = () => {\n  const history = useHistory();\n  const { publicKey } = useParams<SwapRouteParams>();\n\n  const handleButtonClick = () => {\n    history.push(generatePath('/swap/:publicKey?', { publicKey }));\n  };\n\n  return (\n    <Wrapper>\n      <ButtonStyled small onClick={handleButtonClick}>\n        <ActionIcon name=\"arrow-left\" />\n        Go back to swap\n      </ButtonStyled>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\n\nconst Wrapper = styled.div`\n  padding: 16px 20px 16px 8px;\n\n  background-color: ${theme.colors.bg.app};\n`;\n\nconst DescriptionList = styled.ul`\n  margin: 0;\n  padding-inline-start: 25px;\n`;\n\nconst DescriptionItem = styled.li`\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 160%;\n\n  ${up.tablet} {\n    font-size: 14px;\n  }\n\n  & strong {\n    font-weight: 500;\n  }\n\n  &:not(:last-child) {\n    margin-bottom: 25px;\n  }\n`;\n\nexport const DescriptionView: FC = () => {\n  return (\n    <Wrapper>\n      <DescriptionList>\n        {[\n          'A slippage is a difference between the expected price and the actual price at which a trade is executed',\n          'Slippage can occur at any time, but it is most prevalent during periods of <strong>higher volatility</strong>',\n          'Transactions that exceed 20% slippage tolerance may be <strong>frontrun</strong>',\n          'Slippage tolerance <strong>cannot exceed 50%</strong>',\n        ].map((item: string, idx: number) => (\n          <DescriptionItem key={idx} dangerouslySetInnerHTML={{ __html: item }} />\n        ))}\n      </DescriptionList>\n    </Wrapper>\n  );\n};\n","import { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\n\nimport { Button } from 'components/ui';\n\nexport const ButtonStyled = styled(Button)`\n  box-sizing: border-box;\n  height: 33px;\n  padding: 8px 0;\n\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 120%;\n\n  border: 1px solid ${theme.colors.stroke.primary};\n  border-radius: 8px;\n\n  ${up.tablet} {\n    height: 38px;\n\n    font-size: 16px;\n    line-height: 140%;\n  }\n\n  &.active {\n    color: ${theme.colors.textIcon.active};\n\n    font-weight: 700;\n\n    background-color: ${theme.colors.bg.activePrimary};\n    border-color: ${theme.colors.bg.buttonPrimary};\n  }\n\n  &:hover {\n    background-color: ${theme.colors.bg.activePrimary};\n  }\n`;\n","import type { FC } from 'react';\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\n\nconst Wrapper = styled.div`\n  display: flex;\n\n  color: ${theme.colors.textIcon.primary};\n`;\n\nconst Postfix = styled.span``;\n\nconst InputWrapper = styled.span``;\n\nconst InputElement = styled.input`\n  width: 100%;\n\n  font-weight: 500;\n  font-size: 14px;\n  font-style: normal;\n  letter-spacing: 0.01em;\n\n  border-width: 0;\n\n  ${up.tablet} {\n    font-size: 16px;\n  }\n\n  &:focus {\n    outline: none;\n  }\n`;\n\ntype CustomProps = {\n  defaultValue: string;\n  onChangeValue: (value: string) => void;\n  maxSlippage?: number;\n};\n\ntype Props = React.InputHTMLAttributes<HTMLInputElement> & CustomProps;\n\nexport const SlippageInput: FC<Props> = ({ defaultValue, maxSlippage = 50, onChangeValue }) => {\n  const ref = useRef<HTMLInputElement>(null);\n  const [inputValue, setInputValue] = useState(defaultValue);\n\n  useEffect(() => {\n    ref.current && ref.current.focus();\n  }, [ref.current]);\n\n  const handleValueChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    let newValue = e.target.value.replace(/,/g, '.'); // , to .\n\n    // // ability to enter dot\n    if (newValue === '.') {\n      newValue = '0.';\n    } else {\n      newValue = newValue.replace(/(\\D*)(\\d*(\\.\\d{0,2})?)(.*)/, '$2').replace(/^0(\\d+)/, '$1');\n    }\n\n    const numberValue = Number(newValue);\n    if (newValue === numberValue.toString()) {\n      if (numberValue <= maxSlippage) {\n        setInputValue(Math.min(numberValue, maxSlippage).toString());\n      } else {\n        // ignore\n      }\n    } else {\n      setInputValue(newValue);\n    }\n  };\n\n  const changeValue = (value: string) => {\n    onChangeValue(String(Math.min(Number(value), maxSlippage)));\n  };\n\n  const handleBlur = () => {\n    changeValue(inputValue);\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (['Enter', 'Escape'].includes(e.key)) {\n      changeValue(inputValue);\n    }\n  };\n\n  return (\n    <Wrapper>\n      <InputWrapper>\n        <InputElement\n          ref={ref}\n          type=\"text\"\n          inputMode=\"decimal\"\n          placeholder=\"20\"\n          value={inputValue}\n          onChange={handleValueChange}\n          onBlur={handleBlur}\n          onKeyPress={handleKeyPress}\n        />\n      </InputWrapper>\n      <Postfix>%</Postfix>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { up } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\n\nimport { ButtonStyled } from '../../common/styled';\nimport { SlippageInput } from './SlippageInput';\n\nconst CustomButtonStyled = styled(ButtonStyled)`\n  &.custom {\n    width: 69px;\n\n    ${up.tablet} {\n      width: 93px;\n    }\n\n    &.active {\n      background-color: inherit;\n    }\n  }\n\n  &.custom.active.editing {\n    padding: 0 10px;\n\n    ${up.tablet} {\n      padding: 0 20px;\n    }\n  }\n`;\n\nconst CustomButtonTitle = styled.div`\n  display: flex;\n`;\n\nconst PenIcon = styled(Icon)`\n  width: 16px;\n  height: 16px;\n\n  margin: auto 4px auto 0;\n`;\n\ninterface Props {\n  customSlippageIsOpened: boolean;\n  slippageValue: string;\n  onClick: () => void;\n  onValueChange: (value: string) => void;\n}\n\nexport const CustomSlippageButton: FC<Props> = ({\n  customSlippageIsOpened,\n  slippageValue,\n  onClick,\n  onValueChange,\n}) => {\n  const [isCustomInputShown, setIsCustomInputShown] = useState(false);\n\n  const handleClick = () => {\n    setIsCustomInputShown(true);\n    onClick();\n  };\n\n  const handleCustomInputChange = (value: string) => {\n    setIsCustomInputShown(false);\n    onValueChange(value);\n  };\n\n  return (\n    <CustomButtonStyled\n      className={classNames('custom', {\n        active: isCustomInputShown || customSlippageIsOpened,\n        editing: isCustomInputShown,\n      })}\n      onClick={handleClick}\n    >\n      {isCustomInputShown ? (\n        <SlippageInput\n          onChangeValue={handleCustomInputChange}\n          defaultValue={customSlippageIsOpened ? slippageValue : ''}\n        />\n      ) : (\n        <CustomButtonTitle>\n          {customSlippageIsOpened ? (\n            <>\n              <PenIcon name=\"pen\" />\n              {slippageValue}%\n            </>\n          ) : (\n            'Custom'\n          )}\n        </CustomButtonTitle>\n      )}\n    </CustomButtonStyled>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { SlippageType, SlippageTypeType } from '../../model/SwapSettings.SlippageType';\nimport type { SwapSettingsViewModel } from '../../SwapSettings.ViewModel';\nimport { ButtonStyled } from '../common/styled';\nimport { CustomSlippageButton } from './CustomSlippageButton';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-column-gap: 6px;\n  grid-template-columns: repeat(5, 1fr);\n`;\n\ninterface Props {\n  viewModel: Readonly<SwapSettingsViewModel>;\n}\n\n// @web: this component use strange logic at first sight, but it's done for case\n// if we will do interface like ios\nexport const SegmentedControl: FC<Props> = observer(({ viewModel }) => {\n  const items = viewModel.possibleSlippageTypes;\n  const selectedItem = viewModel.slippageType;\n  const onClick = (selectedSlippage: SlippageType) => {\n    viewModel.slippageSelected(selectedSlippage);\n  };\n  const selectedSegmentIndex = expr(() =>\n    items.findIndex((item) => item.type === selectedItem.type),\n  );\n\n  const handleCustomSlippageButtonClick = () => {\n    viewModel.slippageSelected(SlippageType.custom(null));\n  };\n  const handleCustomSlippageValueChange = (value: string) => {\n    viewModel.customSlippageChanged(Number(value));\n  };\n\n  const slippageValue = expr(() => {\n    switch (selectedItem.type) {\n      case SlippageTypeType.custom:\n        return selectedItem.value ? (selectedItem.value * 100).toString() : '';\n      default:\n        return '';\n    }\n  });\n\n  return (\n    <Wrapper>\n      {items.map((value, index) => (\n        <ButtonStyled\n          key={index}\n          className={classNames({\n            active: !viewModel.customSlippageIsOpened && selectedSegmentIndex === index,\n          })}\n          onClick={() => onClick(value)}\n        >\n          {value.description}\n        </ButtonStyled>\n      ))}\n      <CustomSlippageButton\n        customSlippageIsOpened={viewModel.customSlippageIsOpened}\n        slippageValue={slippageValue}\n        onClick={handleCustomSlippageButtonClick}\n        onValueChange={handleCustomSlippageValueChange}\n      />\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\nimport { useMemo } from 'react';\nimport { generatePath, useParams } from 'react-router';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport { observer } from 'mobx-react-lite';\n\nimport { WidgetPageWithBottom } from 'components/common/WidgetPageWithBottom';\n\nimport { FeesView } from '../Subviews/FeesView';\nimport type { SwapViewModel } from '../Swap/Swap.ViewModel';\nimport type { SwapRouteParams } from '../Swap/types';\nimport { DescriptionView } from './Subviews/DescriptionView';\nimport { SegmentedControl } from './Subviews/SegmentedControl';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-row-gap: 16px;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  & > :first-child {\n    border: 1px solid ${theme.colors.stroke.secondary};\n    border-bottom: none;\n    border-radius: 12px 12px 0 0;\n  }\n\n  & > :last-child {\n    border: 1px solid ${theme.colors.stroke.primary};\n    border-radius: 0 0 12px 12px;\n  }\n`;\n\nconst SlippageWrapper = styled.div`\n  display: grid;\n  grid-row-gap: 16px;\n  padding: 16px 16px 20px 16px;\n`;\n\nconst Title = styled.span`\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 120%;\n`;\n\n/*const CompensationWrapper = styled.div`\n  padding: 0 20px;\n`;*/\n\ninterface Props {\n  viewModel: Readonly<SwapViewModel>;\n}\n\nexport const SwapSettings: FC<Props> = observer(({ viewModel: vm }) => {\n  const viewModel = vm.swapSettingsViewModel;\n  // const viewModel = useViewModel(SwapSettingsViewModel);\n  const { symbol } = useParams<SwapRouteParams>();\n  const backToPath = useMemo(() => generatePath('/swap/:symbol?', { symbol }), [symbol]);\n\n  return (\n    <WidgetPageWithBottom title={['Swap', 'Swap settings']} backTo={backToPath}>\n      <Wrapper>\n        <Content>\n          <SlippageWrapper>\n            <Title>Max price slippage</Title>\n            <SegmentedControl viewModel={viewModel} />\n          </SlippageWrapper>\n          <DescriptionView />\n        </Content>\n        <FeesView items={viewModel.feesContent} />\n      </Wrapper>\n    </WidgetPageWithBottom>\n  );\n});\n","import type { FC } from 'react';\nimport { useMemo } from 'react';\nimport { Route, Switch } from 'react-router-dom';\n\nimport { useIsMobile } from '@p2p-wallet-web/ui';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { Layout } from 'new/ui/components/common/Layout';\n\nimport { Swap } from './Swap';\nimport { GoBackButton } from './Swap/GoBackButton';\nimport { SettingsButton } from './Swap/SettingsButton';\nimport { SwapViewModel } from './Swap/Swap.ViewModel';\nimport { SwapSettings } from './SwapSettings';\n\nexport const SwapPage: FC = () => {\n  // we initialize it here to SwapSettings be available to resolve it\n  // in its ViewModel\n  const viewModel = useViewModel(SwapViewModel);\n\n  const isMobile = useIsMobile();\n\n  const mobileHeaderButton = useMemo(() => {\n    if (!isMobile) {\n      return null;\n    }\n\n    return (\n      <Switch>\n        <Route path={`/swap/settings/:publicKey?`}>\n          <GoBackButton />\n        </Route>\n        <Route path={'/swap/:publicKey?'}>\n          <SettingsButton />\n        </Route>\n      </Switch>\n    );\n  }, [isMobile]);\n\n  return (\n    <Layout mobileAction={mobileHeaderButton}>\n      <Switch>\n        <Route path={`/swap/settings/:publicKey?`}>\n          <SwapSettings viewModel={viewModel} />\n        </Route>\n        <Route path={'/swap/:publicKey?'}>\n          <Swap viewModel={viewModel} />\n        </Route>\n      </Switch>\n    </Layout>\n  );\n};\n","import { ToastManager } from 'components/common/ToastManager';\n\n// @return Promise<boolean>\nexport const askClipboardWritePermission = async () => {\n  try {\n    // The clipboard-write permission is granted automatically to pages\n    // when they are the active tab. So it's not required, but it's more safe.\n    const { state } = await navigator.permissions.query({ name: 'clipboard-write' });\n    return state === 'granted';\n  } catch {\n    // Browser compatibility / Security error (ONLY HTTPS) ...\n    return false;\n  }\n};\n\n// @params blob - The ClipboardItem takes an object with the MIME type as key, and the actual blob as the value.\n// @return Promise<void>\nexport const setToClipboard = async (blob: Blob | null) => {\n  if (!blob) {\n    ToastManager.error(`Can't copy to clipboard`);\n    return;\n  }\n\n  try {\n    const data = [new ClipboardItem({ [blob.type]: blob })];\n    await navigator.clipboard.write(data);\n  } catch (error) {\n    ToastManager.error((error as Error).message);\n  }\n};\n","import type { FunctionComponent } from 'react';\nimport { memo, useEffect, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { useConnectionContext, useTokenAccount, useWallet } from '@p2p-wallet-web/core';\nimport { usePubkey } from '@p2p-wallet-web/sail';\nimport classNames from 'classnames';\nimport { rgba } from 'polished';\nimport QRCode from 'qrcode.react';\n\nimport { Card } from 'components/common/Card';\nimport { ToastManager } from 'components/common/ToastManager';\nimport { Button, Icon } from 'components/ui';\nimport { trackEvent } from 'utils/analytics';\nimport { askClipboardWritePermission, setToClipboard } from 'utils/clipboard';\nimport { getExplorerUrl } from 'utils/connection';\n\nconst WrapperCard = styled(Card)`\n  flex: 1;\n  padding: 0;\n`;\n\nconst HeaderWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 64px;\n  padding: 0 8px 0 20px;\n`;\n\nconst TokenWrapper = styled.div`\n  flex: 1;\n  margin-right: 7px;\n`;\n\nconst CopiedText = styled.div`\n  color: #2db533;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 21px;\n`;\n\nconst TokenName = styled.div`\n  color: #000;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 21px;\n`;\n\nconst TokenAddress = styled.div`\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 24px;\n\n  cursor: pointer;\n`;\n\nconst ExpandWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n\n  border-radius: 12px;\n\n  cursor: pointer;\n\n  &:hover {\n    background: #f6f6f8;\n  }\n`;\n\nconst ExpandIcon = styled(Icon)`\n  width: 32px;\n  height: 32px;\n\n  color: #5887ff;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  border-top: 1px solid ${rgba('#000', 0.05)};\n`;\n\nconst Text = styled.div`\n  margin-top: 20px;\n\n  color: #202020;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 24px;\n`;\n\nconst QRCodeWrapper = styled.div`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  margin: 20px 0;\n  padding: 17px;\n\n  border-radius: 12px;\n\n  &.isImageCopyAvailable:hover {\n    background: #f6f6f8;\n    cursor: pointer;\n  }\n`;\n\nconst QRCopiedWrapper = styled.div`\n  position: absolute;\n  right: 0;\n  bottom: 10px;\n  left: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst QRCopied = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 29px;\n  padding: 0 11px;\n\n  color: #5887ff;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 21px;\n\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n`;\n\nconst Details = styled.div`\n  border-top: 1px solid ${rgba('#000', 0.05)};\n`;\n\nconst DetailRow = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  padding: 20px;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ${rgba('#000', 0.05)};\n  }\n`;\n\nconst FieldGroup = styled.div``;\n\nconst FieldTitle = styled.div`\n  color: #000;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 16px;\n`;\n\nconst FieldValue = styled.div`\n  margin-top: 4px;\n\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 16px;\n\n  cursor: pointer;\n\n  &:hover {\n    color: #5887ff;\n  }\n`;\n\nexport const ShareIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: #a3a5ba;\n`;\n\nexport const ShareWrapper = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  margin-left: 20px;\n\n  background: rgba(163, 165, 186, 0.1);\n  border-radius: 8px;\n  cursor: pointer;\n\n  &:hover {\n    background: #eff3ff;\n\n    ${ShareIcon} {\n      color: #5887ff;\n    }\n  }\n`;\n\nconst Footer = styled.div`\n  padding: 20px;\n\n  color: #a3a5ba;\n  font-size: 14px;\n  line-height: 21px;\n  text-align: center;\n\n  border-top: 1px solid ${rgba('#000', 0.05)};\n`;\n\ntype Props = {\n  publicKey: string;\n  className?: string;\n};\n\nexport const QRAddressWidgetOrigin: FunctionComponent<Props> = ({ publicKey, className }) => {\n  const [copied, setCopied] = useState(false);\n  const [isExpand, setIsExpand] = useState(false);\n  const [isShowDetails, setIsShowDetails] = useState(false);\n  const [isImageCopyAvailable, setIsImageCopyAvailable] = useState(false);\n  const [isImageCopied, setIsImageCopied] = useState(false);\n  const { network } = useConnectionContext();\n  const { publicKey: solPublicKey } = useWallet();\n\n  const tokenAccount = useTokenAccount(usePubkey(publicKey));\n\n  useEffect(() => {\n    askClipboardWritePermission()\n      .then((state) => setIsImageCopyAvailable(state))\n      .catch(() => setIsImageCopyAvailable(false));\n  }, []);\n\n  if (!tokenAccount) {\n    return null;\n  }\n\n  const handleExpandClick = () => {\n    setIsExpand(!isExpand);\n\n    if (!isExpand) {\n      trackEvent('wallet_qr_click');\n    }\n  };\n\n  const handleCopyClick = (type: 'sol' | 'token' | 'mint', address: string) => () => {\n    try {\n      void navigator.clipboard.writeText(address);\n      setCopied(true);\n      ToastManager.info(`Address Copied!`);\n\n      if (type === 'sol') {\n        trackEvent('wallet_sol_address_copy');\n      } else if (type === 'token') {\n        trackEvent('wallet_token_address_copy');\n      } else if (type === 'mint') {\n        trackEvent('wallet_mint_address_copy');\n      }\n\n      // fade copied after some seconds\n      setTimeout(() => {\n        setCopied(false);\n      }, 2000);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleImageCopyClick = () => {\n    const qrElement = document.querySelector<HTMLCanvasElement>('#qrcode');\n    if (!qrElement) {\n      return;\n    }\n\n    try {\n      qrElement.toBlob((blob: Blob | null) => setToClipboard(blob));\n      setIsImageCopied(true);\n\n      // fade copied after some seconds\n      setTimeout(() => {\n        setIsImageCopied(false);\n      }, 2000);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleToggleAddressDetailsClick = () => {\n    setIsShowDetails((state) => !state);\n  };\n\n  if (!solPublicKey) {\n    return null;\n  }\n\n  return (\n    <WrapperCard className={className}>\n      <HeaderWrapper>\n        <TokenWrapper>\n          {copied ? (\n            <CopiedText>Wallet Address Copied!</CopiedText>\n          ) : (\n            <TokenName>Wallet Address</TokenName>\n          )}\n          <TokenAddress onClick={handleCopyClick('sol', solPublicKey.toBase58())}>\n            {solPublicKey.toBase58()}\n          </TokenAddress>\n        </TokenWrapper>\n        <ExpandWrapper onClick={handleExpandClick}>\n          <ExpandIcon name=\"qr\" />\n        </ExpandWrapper>\n      </HeaderWrapper>\n      {isExpand ? (\n        <>\n          <Content>\n            <Text>Scan or copy QR code</Text>\n            <QRCodeWrapper\n              className={classNames({ isImageCopyAvailable })}\n              onClick={isImageCopyAvailable ? handleImageCopyClick : undefined}\n            >\n              {isImageCopied ? (\n                <QRCopiedWrapper>\n                  <QRCopied>Copied</QRCopied>\n                </QRCopiedWrapper>\n              ) : undefined}\n              <QRCode id=\"qrcode\" value={solPublicKey.toBase58()} size={150} />\n            </QRCodeWrapper>\n          </Content>\n          {isShowDetails ? (\n            <Details>\n              <DetailRow>\n                <FieldGroup>\n                  <FieldTitle>Direct {tokenAccount.balance?.token.symbol} Address</FieldTitle>\n                  {tokenAccount.key ? (\n                    <FieldValue onClick={handleCopyClick('token', tokenAccount.key.toBase58())}>\n                      {tokenAccount.key.toBase58()}\n                    </FieldValue>\n                  ) : undefined}\n                </FieldGroup>\n                {tokenAccount.key ? (\n                  <a\n                    href={getExplorerUrl('address', tokenAccount?.key.toBase58(), network)}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer noindex\"\n                    className=\"button\"\n                  >\n                    <ShareWrapper>\n                      <ShareIcon name=\"external\" />\n                    </ShareWrapper>\n                  </a>\n                ) : undefined}\n              </DetailRow>\n              <DetailRow>\n                <FieldGroup>\n                  <FieldTitle>{tokenAccount.balance?.token.symbol} Mint Address</FieldTitle>\n                  {tokenAccount.balance ? (\n                    <FieldValue\n                      onClick={handleCopyClick('mint', tokenAccount.balance?.token.address)}\n                    >\n                      {tokenAccount.balance?.token.address}\n                    </FieldValue>\n                  ) : undefined}\n                </FieldGroup>\n                {tokenAccount.balance ? (\n                  <a\n                    href={getExplorerUrl('address', tokenAccount.balance?.token.address, network)}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer noindex\"\n                    className=\"button\"\n                  >\n                    <ShareWrapper>\n                      <ShareIcon name=\"external\" />\n                    </ShareWrapper>\n                  </a>\n                ) : undefined}\n              </DetailRow>\n            </Details>\n          ) : undefined}\n          <Footer>\n            <Button lightGray onClick={handleToggleAddressDetailsClick}>\n              {isShowDetails ? 'Hide address details' : 'Show address details'}\n            </Button>\n          </Footer>\n        </>\n      ) : undefined}\n    </WrapperCard>\n  );\n};\n\nexport const QRAddressWidget = memo(QRAddressWidgetOrigin);\n","import type { FunctionComponent } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nimport emptyActivityImg from './empty_activity.png';\nimport emptySearchImg from './empty_search.png';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  margin: 50px 0;\n`;\n\nconst EmptyImage = styled.div`\n  &.search {\n    width: 82px;\n    height: 78px;\n\n    background: url(${emptySearchImg}) no-repeat 50% 50%;\n    background-size: 82px 78px;\n  }\n\n  &.activity {\n    width: 100px;\n    height: 100px;\n\n    background: url(${emptyActivityImg}) no-repeat 50% 50%;\n    background-size: 100px 100px;\n  }\n`;\n\nconst Title = styled.div`\n  margin-top: 12px;\n\n  color: #000;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 140%;\n`;\n\nconst Description = styled.div`\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 140%;\n`;\n\ninterface Props {\n  type: 'search' | 'activity';\n  title?: string;\n  desc?: string;\n}\n\nexport const Empty: FunctionComponent<Props> = ({\n  type,\n  title = 'Nothing found',\n  desc = 'Change your search phrase and try again',\n}) => {\n  return (\n    <Wrapper>\n      <EmptyImage className={classNames({ [type]: true })} />\n      <Title>{title}</Title>\n      <Description>{desc}</Description>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { Empty } from 'components/common/Empty';\n\nconst Wrapper = styled.div``;\n\ninterface Props {\n  onClick: () => void;\n}\n\n// TODO: make new empty state design\nexport const EmptyTransactionsView: FC<Props> = ({ onClick }) => {\n  return (\n    <Wrapper onClick={onClick}>\n      <Empty\n        type=\"activity\"\n        title=\"No transactions yet\"\n        desc=\"You didnt make any transactions yet\"\n      />\n    </Wrapper>\n  );\n};\n","import dayjs from 'dayjs';\nimport { groupBy } from 'ramda';\n\nimport type { SDListViewModelType } from 'new/core/viewmodels';\nimport type { SectionInfo } from 'new/ui/components/common/NSDNewDynamicSectionsCollectionView';\n\nexport class CollectionViewMappingStrategy {\n  static byData<T>({\n    viewModel,\n    where,\n  }: {\n    viewModel: Readonly<SDListViewModelType<T>>;\n    where: (item: T) => Date;\n  }): SectionInfo<T>[] {\n    const transactions = viewModel.data;\n\n    const dictionary: [string, T[]][] = Object.entries(\n      groupBy<T, string>((item) => where(item).setHours(0, 0, 0, 0).toString(), transactions),\n    ).map((value) => [value[0], value[1]]);\n\n    return this._dateFormatter(dictionary);\n  }\n\n  private static _dateFormatter<T>(dictionary: [string, T[]][]): SectionInfo<T>[] {\n    return dictionary\n      .sort((a, b) => Number(b[0]) - Number(a[0]))\n      .map((value) => ({\n        userInfo: dayjs(Number(value[0])).format('LL'),\n        items: value[1],\n      }));\n  }\n}\n","import React, { useMemo } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\nimport { nanoid } from 'nanoid';\n\nimport type { SDListViewModelType } from 'new/core/viewmodels/SDListViewModel';\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport { InfinityScrollHelper } from 'new/ui/components/common/InfinityScrollHelper';\n\nimport { SDCollectionViewItem } from '../StaticSectionsCollectionView/models/SDCollectionViewItem';\n\nconst TitleDate = styled.div`\n  margin: 0 10px;\n\n  color: #a3a5ba;\n  font-size: 14px;\n  line-height: 30px;\n`;\n\nexport interface SectionInfo<T> {\n  userInfo: string;\n  items: T[];\n}\n\ninterface Props<T> {\n  viewModel: Readonly<SDListViewModelType<T>>;\n  mapDataToSections: (viewModel: Readonly<SDListViewModelType<T>>) => SectionInfo<T>[];\n  numberOfLoadingCells?: number;\n  renderPlaceholder: (key: string) => React.ReactNode;\n  renderItem: (item: T, index: number) => React.ReactNode;\n  renderEmpty?: (key: string) => React.ReactNode;\n  className?: string;\n}\n\nexport const NSDNewDynamicSectionsCollectionView = observer(\n  <T,>({\n    viewModel,\n    mapDataToSections,\n    numberOfLoadingCells = 2,\n    renderPlaceholder,\n    renderItem,\n    renderEmpty,\n    className,\n  }: Props<T>) => {\n    const sections = useMemo(\n      () =>\n        expr(() => {\n          const sections = mapDataToSections(viewModel);\n\n          const collectionViewSections = sections.map((section) => ({\n            userInfo: section.userInfo,\n            items: section.items.map((item) => new SDCollectionViewItem<T>({ value: item })),\n          }));\n          switch (viewModel.state) {\n            case SDFetcherState.initializing:\n            case SDFetcherState.loading: {\n              const _items = [];\n              for (let i = 0; i < numberOfLoadingCells; i++) {\n                _items.push(new SDCollectionViewItem<T>({ placeholderIndex: nanoid() }));\n              }\n              collectionViewSections.push({ userInfo: 'placeholder', items: _items });\n              break;\n            }\n            case SDFetcherState.loaded: {\n              const _items = [];\n              if (collectionViewSections.length === 0 && renderEmpty) {\n                _items.push(new SDCollectionViewItem<T>({ emptyCellIndex: nanoid() }));\n              }\n              collectionViewSections.push({ userInfo: 'placeholder', items: _items });\n              break;\n            }\n            case SDFetcherState.error:\n              break;\n          }\n\n          return collectionViewSections;\n        }),\n      [numberOfLoadingCells, renderEmpty, viewModel.data, viewModel.state],\n    );\n\n    if (sections.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className={className}>\n        <InfinityScrollHelper\n          disabled={!viewModel.isFetchable}\n          onNeedLoadMore={() => viewModel.fetchNext()}\n        >\n          {sections.map((section) => (\n            <div key={section.userInfo}>\n              {!['placeholder', 'empty'].includes(section.userInfo) ? (\n                <TitleDate>{section.userInfo}</TitleDate>\n              ) : null}\n              {section.items.map((item, index) => {\n                if (!item.isEmptyCell) {\n                  if (item.isPlaceholder) {\n                    return renderPlaceholder(item.placeholderIndex!);\n                  }\n\n                  return renderItem(item.value!, index);\n                }\n\n                if (item.isEmptyCell && renderEmpty) {\n                  return renderEmpty(item.emptyCellIndex!);\n                }\n\n                return null;\n              })}\n            </div>\n          ))}\n        </InfinityScrollHelper>\n      </div>\n    );\n  },\n);\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nconst Wrapper = styled.div``;\n\ninterface Props {\n  onClick: () => void;\n}\n\n// TDOO: error\nexport const ErrorView: FC<Props> = ({ onClick }) => {\n  return <Wrapper onClick={onClick}>ErrorView</Wrapper>;\n};\n","import type { ConfirmedSignatureInfo } from '@solana/web3.js';\nimport { PublicKey } from '@solana/web3.js';\n\nimport type { SolanaSDK, TransactionInfo } from 'new/sdk/SolanaSDK';\n\n/// The repository that works with transactions.\nexport interface HistoryTransactionRepository {\n  /// Fetches a list of signatures, that belongs to the `address`.\n  ///\n  /// - Parameters:\n  ///   - address: the account address\n  ///   - limit: the number of transactions that will be fetched.\n  ///   - before: the transaction signature, that indicates the offset of fetching.\n  /// - Returns: the list of `SignatureInfo`\n  getSignatures({\n    address,\n    limit,\n    before,\n  }: {\n    address: string;\n    limit: number;\n    before?: string;\n  }): Promise<ConfirmedSignatureInfo[]>;\n\n  /// Fetch all data of the transaction\n  ///\n  /// - Parameter signature: The transaction signature\n  /// - Returns: `TransactionInfo`, that can be parsed later.\n  getTransaction(signature: string): Promise<TransactionInfo | null>;\n}\n\nexport class SolanaTransactionRepository implements HistoryTransactionRepository {\n  private _solanaAPIClient: SolanaSDK;\n\n  constructor({ solanaAPIClient }: { solanaAPIClient: SolanaSDK }) {\n    this._solanaAPIClient = solanaAPIClient;\n  }\n\n  getSignatures({\n    address,\n    limit,\n    before,\n  }: {\n    address: string;\n    limit: number;\n    before?: string;\n  }): Promise<ConfirmedSignatureInfo[]> {\n    return this._solanaAPIClient.provider.connection.getSignaturesForAddress(\n      new PublicKey(address),\n      { limit, before },\n    );\n  }\n\n  getTransaction(signature: string): Promise<TransactionInfo | null> {\n    return this._solanaAPIClient.provider.connection.getParsedTransaction(\n      signature,\n    ) as Promise<TransactionInfo | null>;\n  }\n\n  async getTransactions(signatures: string[]): Promise<(TransactionInfo | null)[]> {\n    if (signatures.length === 0) {\n      return [];\n    }\n\n    return this._solanaAPIClient.provider.connection.getParsedTransactions(signatures) as Promise<\n      (TransactionInfo | null)[]\n    >;\n  }\n}\n\nexport class CachingTransactionRepository implements HistoryTransactionRepository {\n  delegate: HistoryTransactionRepository;\n\n  private _signaturesCache = new InMemoryCache<ConfirmedSignatureInfo[]>(50);\n  private _transactionCache = new InMemoryCache<TransactionInfo>(50);\n\n  constructor(delegate: HistoryTransactionRepository) {\n    this.delegate = delegate;\n  }\n\n  async getTransaction(signature: string): Promise<TransactionInfo | null> {\n    // Return from cache\n    let transaction: TransactionInfo | undefined | null = this._transactionCache.read(signature);\n    if (transaction) {\n      return transaction;\n    }\n\n    // Fetch and store in cache\n    transaction = await this.delegate.getTransaction(signature);\n    this._transactionCache.write(signature, transaction!); // TODO: check, i think it can be null\n\n    return transaction;\n  }\n\n  async getSignatures({\n    address,\n    limit,\n    before,\n  }: {\n    address: string;\n    limit: number;\n    before?: string;\n  }): Promise<ConfirmedSignatureInfo[]> {\n    const cacheKey = `${address}-${limit}-${before ?? null}`;\n\n    let signatures = this._signaturesCache.read(cacheKey);\n    if (signatures) {\n      return signatures;\n    }\n\n    signatures = await this.delegate.getSignatures({ address, limit, before });\n    this._signaturesCache.write(cacheKey, signatures);\n    return signatures;\n  }\n}\n","import type { ConfirmedSignatureInfo } from '@solana/web3.js';\n\nimport type { SolanaSDK, TransactionInfo } from 'new/sdk/SolanaSDK';\nimport { SolanaSDKError } from 'new/sdk/SolanaSDK';\nimport type { TransactionParserService } from 'new/sdk/TransactionParser';\nimport { ParsedTransaction, Status, TransactionParserServiceImpl } from 'new/sdk/TransactionParser';\n\ninterface HistoryTransactionParser {\n  ///  Parse transaction.\n  ///\n  /// - Parameters:\n  ///   - signatureInfo: the raw signature info\n  ///   - transactionInfo: the raw transaction info\n  ///   - account: the account that the transaction info belongs to.\n  ///   - symbol: the token symbol that the transaction has to do.\n  /// - Returns: parsed transaction\n  parse({\n    signatureInfo,\n    transactionInfo,\n    account,\n    symbol,\n  }: {\n    signatureInfo: ConfirmedSignatureInfo; // @ios: SignatureInfo\n    transactionInfo?: TransactionInfo;\n    account?: string;\n    symbol?: string;\n  }): Promise<ParsedTransaction>;\n}\n\nexport type TransactionParser = HistoryTransactionParser;\n\n/// The default transaction parser.\nexport class DefaultTransactionParser implements TransactionParser {\n  private _p2pFeePayers: string[];\n  private _parser: TransactionParserService;\n\n  constructor({\n    p2pFeePayers,\n    solanaAPIClient,\n  }: {\n    p2pFeePayers: string[];\n    solanaAPIClient: SolanaSDK;\n  }) {\n    this._p2pFeePayers = p2pFeePayers;\n    this._parser = TransactionParserServiceImpl.default({\n      apiClient: solanaAPIClient,\n    });\n  }\n\n  async parse({\n    signatureInfo,\n    transactionInfo,\n    account,\n    symbol,\n  }: {\n    signatureInfo: ConfirmedSignatureInfo;\n    transactionInfo?: TransactionInfo | null;\n    account?: string;\n    symbol?: string;\n  }): Promise<ParsedTransaction> {\n    try {\n      if (!transactionInfo) {\n        throw SolanaSDKError.other('TransactionInfo is null');\n      }\n\n      const parsedTrx = await this._parser.parse({\n        transactionInfo,\n        config: {\n          accountView: account,\n          symbolView: symbol,\n          feePayers: this._p2pFeePayers,\n        },\n      });\n\n      const time = transactionInfo.blockTime ? new Date(transactionInfo.blockTime * 1000) : null;\n\n      return new ParsedTransaction({\n        status: parsedTrx.status,\n        signature: signatureInfo.signature,\n        info: parsedTrx.info,\n        slot: transactionInfo.slot,\n        blockTime: time,\n        fee: parsedTrx.fee,\n        blockhash: parsedTrx.blockhash,\n      });\n    } catch (error) {\n      console.error(error);\n      const blockTime = signatureInfo.blockTime ? new Date(signatureInfo.blockTime * 1000) : null;\n      return new ParsedTransaction({\n        status: Status.confirmed(),\n        signature: signatureInfo.signature,\n        info: null,\n        slot: signatureInfo.slot,\n        blockTime,\n        fee: null,\n        blockhash: null,\n      });\n    }\n  }\n}\n\nexport class CachingTransactionParsing implements TransactionParser {\n  private _delegate: TransactionParser;\n  private _cache = new InMemoryCache<ParsedTransaction>(50);\n\n  constructor(delegate: TransactionParser) {\n    this._delegate = delegate;\n  }\n\n  async parse({\n    signatureInfo,\n    transactionInfo,\n    account,\n    symbol,\n  }: {\n    signatureInfo: ConfirmedSignatureInfo;\n    transactionInfo?: TransactionInfo;\n    account?: string;\n    symbol?: string;\n  }): Promise<ParsedTransaction> {\n    // Read from cache\n    let parsedTransaction = this._cache.read(signatureInfo.signature);\n    if (parsedTransaction) {\n      return parsedTransaction;\n    }\n\n    // Parse\n    parsedTransaction = await this._delegate.parse({\n      signatureInfo,\n      transactionInfo,\n      account,\n      symbol,\n    });\n    this._cache.write(signatureInfo.signature, parsedTransaction);\n    return parsedTransaction;\n  }\n}\n","import type { ParsedTransaction } from 'new/sdk/TransactionParser';\nimport type { PricesServiceType } from 'new/services/PriceAPIs/PricesService';\n\nimport type { HistoryOutput } from './History.OutputStream';\n\n/// Update apply exchange rate to transaction to show price information\nexport class PriceUpdatingOutput implements HistoryOutput {\n  private _pricesService: PricesServiceType;\n\n  constructor({ pricesService }: { pricesService: PricesServiceType }) {\n    this._pricesService = pricesService;\n  }\n\n  process(newData: ParsedTransaction[]): ParsedTransaction[] {\n    const transactions = [...newData];\n    // eslint-disable-next-line @typescript-eslint/no-for-in-array\n    for (const index in transactions) {\n      transactions[index] = this._updatedTransactionWithPrice(transactions[index]!);\n    }\n    return transactions;\n  }\n\n  private _updatedTransactionWithPrice(transaction: ParsedTransaction): ParsedTransaction {\n    const price = this._pricesService.currentPrice(transaction.symbol)?.value;\n    if (!price) {\n      return transaction;\n    }\n\n    const transactionNew = transaction;\n    const amount = transactionNew.amount;\n    transaction.amountInFiat = amount * price;\n\n    return transaction;\n  }\n}\n","import type { ParsedTransaction } from 'new/sdk/TransactionParser';\nimport { StatusType } from 'new/sdk/TransactionParser';\nimport type { TransactionHandlerType } from 'new/services/TransactionHandler';\n\nimport type { HistoryOutput } from './History.OutputStream';\n\n/// Combine final list with processing transactions.\n///\n/// Register a view model with `ProcessingTransactionRefreshTrigger` to shows new incoming transactions.\nexport class ProcessingTransactionsOutput implements HistoryOutput {\n  /// Filters processing transaction by account address.\n  accountFilter?: string;\n\n  private _repository: TransactionHandlerType;\n\n  constructor({\n    accountFilter,\n    transactionHandler,\n  }: {\n    accountFilter?: string;\n    transactionHandler: TransactionHandlerType;\n  }) {\n    this.accountFilter = accountFilter;\n    this._repository = transactionHandler;\n  }\n\n  process(newData: ParsedTransaction[]): ParsedTransaction[] {\n    let transactions: ParsedTransaction[];\n\n    // Gets new transactions\n    const accountFilter = this.accountFilter;\n    if (accountFilter) {\n      transactions = this._repository.getProcessingTransactions(accountFilter);\n    } else {\n      transactions = this._repository.getProcessingTransaction();\n    }\n\n    // Sorts by date\n    // TODO: Check sort\n    transactions.sort((left, right) => {\n      const leftTime = left.blockTime?.getTime();\n      const rightTime = right.blockTime?.getTime();\n      if (!leftTime || !rightTime) {\n        return -1;\n      }\n      return leftTime - rightTime;\n    });\n\n    /// Applies to output list\n    let data = [...newData];\n    for (const transaction of transactions.reverse()) {\n      // update if exists and is being processed\n      const index = data.findIndex((tx) => tx.signature === transaction.signature);\n      if (index) {\n        if (data[index]!.status.type !== StatusType.confirmed) {\n          data[index] = transaction;\n        }\n      }\n      // append if not\n      else {\n        if (transaction.signature) {\n          data = data.filter((tx) => tx.signature);\n        }\n        data.unshift(transaction);\n      }\n    }\n    return data;\n  }\n}\n","import type { IReactionDisposer } from 'mobx';\nimport { reaction } from 'mobx';\n\nimport type { PricesService } from 'new/services/PriceAPIs/PricesService';\n\nimport type { HistoryRefreshTrigger } from './History.RefreshTrigger';\n\n/// Updating price if exchange rate was change\nexport class PriceRefreshTrigger implements HistoryRefreshTrigger {\n  private _pricesService: PricesService;\n\n  constructor({ pricesService }: { pricesService: PricesService }) {\n    this._pricesService = pricesService;\n  }\n\n  register(cb: () => void): IReactionDisposer {\n    return reaction(() => this._pricesService.currentPrices.value, cb);\n  }\n}\n","import type { IReactionDisposer } from 'mobx';\n\nimport type { TransactionHandler } from 'new/services/TransactionHandler';\n\nimport type { HistoryRefreshTrigger } from './History.RefreshTrigger';\n\n/// Refreshing history if processing transaction appears.\n///\n/// This class have to be use with `ProcessingTransactionsOutput`\nexport class ProcessingTransactionRefreshTrigger implements HistoryRefreshTrigger {\n  private _repository: TransactionHandler;\n\n  constructor({ transactionHandler }: { transactionHandler: TransactionHandler }) {\n    this._repository = transactionHandler;\n  }\n\n  register(cb: () => void): IReactionDisposer {\n    return this._repository.observeProcessingTransactionsAll(cb);\n  }\n}\n","/// The result that contains signatureInfo, account and symbol.\nimport type { ConfirmedSignatureInfo } from '@solana/web3.js';\n\nexport type Result = { signatureInfo: ConfirmedSignatureInfo; account: string; symbol: string };\n\n/// The protocol that manages the sequential loading of transaction.\n///\n/// The ``Result`` type is temporary solution, since the caller need to know more information about transaction (account address or symbol).\n/// TODO: Make result more abstract\nexport abstract class HistoryStreamSource {\n  /// Fetches next single transaction that satisfies the configuration.\n  ///\n  /// - Parameter configuration: the fetching configuration that contains things like filtering\n  /// - Returns: A stream of parsed transactions and the error that can be occurred.\n  abstract next(configuration: FetchingConfiguration): AsyncGenerator<Result>;\n\n  /// Fetches next sequence of transactions signatures that satisfies the configuration.\n  ///\n  /// - Parameter configuration: the fetching configuration that contains things like filtering.\n  /// - Returns: A current item in stream and move cursor to next item.\n  async nextItems(configuration: FetchingConfiguration): Promise<Result[]> {\n    const sequence: Result[] = [];\n\n    const items = this.next(configuration);\n    let item: IteratorResult<Result> | null = null;\n    while (!(item = await items.next()).done) {\n      sequence.push(item.value);\n    }\n    //\n    // for await (const item of items) {\n    //   sequence.push(item);\n    // }\n\n    return sequence;\n  }\n\n  /// Current item that stream's cursor is holding at current moment.\n  ///\n  /// - Returns: parsed transaction\n  abstract currentItem(): Promise<Result | null>;\n\n  /// Resets the stream.\n  abstract reset(): Promise<void>;\n}\n\n/// The configuration that accepted by `next()` method of `StreamSource`.\nexport interface FetchingConfiguration {\n  /// Fetches transactions until this time. If the timestamp of transaction is after it, the stream will be finished.\n  timestampEnd: Date;\n}\n","import type { ConfirmedSignatureInfo } from '@solana/web3.js';\n\nimport type { HistoryTransactionRepository } from '../History.Repository';\nimport type { TransactionParser } from '../History.TransactionParser';\nimport type { FetchingConfiguration, Result } from './History.StreamSource';\nimport { HistoryStreamSource } from './History.StreamSource';\n\nexport class AccountStreamSource extends HistoryStreamSource {\n  transactionRepository: HistoryTransactionRepository;\n\n  /// The object that is responsible for parsing transactions\n  transactionParser: TransactionParser;\n\n  /// The account address\n  private readonly _account: string;\n\n  /// The account's token symbol\n  private readonly _symbol: string;\n\n  /// The most latest signature of transactions, that has been loaded.\n  /// This value will be used as pagination indicator and all next transactions after this one will be loaded.\n  private _latestFetchedSignature?: string;\n\n  /// Fixed number of transactions that will be requested each time.\n  private _batchSize = 15;\n\n  /// A stream's buffer size\n  // private _bufferSize = 15;\n\n  /// A stream's buffer\n  private _buffer: ConfirmedSignatureInfo[] = [];\n\n  /// A indicator that shows emptiness of transaction.\n  private _isEmpty = false;\n\n  constructor({\n    account,\n    symbol,\n    transactionRepository,\n    transactionParser,\n  }: {\n    account: string;\n    symbol: string;\n    transactionRepository: HistoryTransactionRepository;\n    transactionParser: TransactionParser;\n  }) {\n    super();\n    this._account = account;\n    this._symbol = symbol;\n    this.transactionRepository = transactionRepository;\n    this.transactionParser = transactionParser;\n  }\n\n  async currentItem(): Promise<Result | null> {\n    if (this._buffer.length === 0) {\n      await this._fillBuffer();\n    }\n\n    const signatureInfo = this._buffer[0];\n    if (!signatureInfo) {\n      return null;\n    }\n    return { signatureInfo, account: this._account, symbol: this._symbol };\n  }\n\n  async *next(configuration: FetchingConfiguration): AsyncGenerator<Result> {\n    // Fetch transaction signatures\n    if (this._buffer.length === 0) {\n      await this._fillBuffer();\n    }\n\n    // Fetch transaction and parse it\n    const signatureInfo = this._buffer[0];\n    if (!signatureInfo) {\n      return;\n    }\n\n    // Setup transaction timestamp\n    let transactionTime = new Date();\n    const time = signatureInfo.blockTime;\n    if (time) {\n      transactionTime = new Date(time * 1000);\n    }\n\n    // Check transaction timestamp\n    if (transactionTime >= configuration.timestampEnd) {\n      this._buffer.splice(0, 1);\n      yield { signatureInfo, account: this._account, symbol: this._symbol };\n    } else {\n      return;\n    }\n  }\n\n  /// This method fills buffer of transaction.\n  private async _fillBuffer(): Promise<void> {\n    if (this._isEmpty) {\n      return;\n    }\n\n    const newSignatures = await this.transactionRepository.getSignatures({\n      address: this._account,\n      limit: this._batchSize,\n      before: this._latestFetchedSignature,\n    });\n\n    this._isEmpty = newSignatures.length === 0;\n    this._latestFetchedSignature = newSignatures.at(-1)?.signature;\n    this._buffer.push(...newSignatures);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/require-await\n  async reset(): Promise<void> {\n    this._buffer = [];\n    this._latestFetchedSignature = undefined;\n  }\n}\n","import type { FetchingConfiguration, Result } from './History.StreamSource';\nimport { HistoryStreamSource } from './History.StreamSource';\n\nexport class EmptyStreamSource extends HistoryStreamSource {\n  // eslint-disable-next-line require-yield,@typescript-eslint/require-await\n  async *next(_: FetchingConfiguration): AsyncGenerator<Result> {\n    return null;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/require-await\n  async currentItem(): Promise<Result | null> {\n    return null;\n  }\n\n  async reset() {}\n}\n","import type { FetchingConfiguration, Result } from './History.StreamSource';\nimport { HistoryStreamSource } from './History.StreamSource';\n\n/// The class that merges many sources into one and represents as single stream of sequential transactions.\n///\n/// The items can be emits two or more times if transaction belongs to many streams.\nexport class MultipleStreamSource extends HistoryStreamSource {\n  /// The list of sources\n  private _sources: HistoryStreamSource[];\n\n  /// A stream's buffer of transactions\n  private _buffer: Result[] = [];\n\n  constructor({ sources }: { sources: HistoryStreamSource[] }) {\n    super();\n    this._sources = sources;\n  }\n\n  async currentItem(): Promise<Result | null> {\n    const items = await Promise.all(this._sources.map((source) => source.currentItem()));\n    return items.reduce((mostFirst, trx) => {\n      const t1 = trx?.signatureInfo.blockTime;\n      if (!t1) {\n        return mostFirst;\n      }\n      const t2 = mostFirst?.signatureInfo.blockTime;\n      if (!t2) {\n        return null;\n      }\n      if (t1 > t2) {\n        return trx;\n      }\n      return mostFirst;\n    }, null);\n  }\n\n  async *next(configuration: FetchingConfiguration): AsyncGenerator<Result> {\n    if (this._buffer.length === 0) {\n      await this._fillBuffer(configuration);\n    }\n\n    const item = this._buffer[0];\n    if (!item) {\n      return null;\n    }\n    this._buffer.splice(0);\n    yield item;\n  }\n\n  /// A method that fills a buffer\n  private async _fillBuffer(configuration: FetchingConfiguration): Promise<void> {\n    const group = [];\n    for (const source of this._sources) {\n      group.push(await source.nextItems(configuration));\n    }\n    const newResults: Result[] = group.reduce((acc, cur) => acc.concat(cur), []);\n\n    this._buffer.push(...newResults);\n    // TODO: check sort\n    this._buffer.sort((left, right) => {\n      const leftTime = left.signatureInfo.blockTime;\n      const rightTime = right.signatureInfo.blockTime;\n      if (!leftTime || !rightTime) {\n        return -1;\n      }\n      return leftTime - rightTime;\n    });\n  }\n\n  async reset(): Promise<void> {\n    this._buffer = [];\n    for (const source of this._sources) {\n      await source.reset();\n    }\n  }\n}\n","import { action, flow, makeObservable, when } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { SDFetcherState, SDStreamListViewModel } from 'new/core/viewmodels';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport type { ParsedTransaction } from 'new/sdk/TransactionParser';\nimport { Defaults } from 'new/services/Defaults';\nimport { NotificationService } from 'new/services/NotificationService';\nimport { PricesService } from 'new/services/PriceAPIs/PricesService';\nimport { WalletsRepository } from 'new/services/Repositories';\nimport { SolanaService } from 'new/services/SolanaService';\nimport { TransactionHandler } from 'new/services/TransactionHandler';\n\nimport { SolanaTransactionRepository } from './History.Repository';\nimport { DefaultTransactionParser } from './History.TransactionParser';\nimport type { HistoryOutput } from './Output';\nimport { PriceUpdatingOutput, ProcessingTransactionsOutput } from './Output';\nimport type { HistoryRefreshTrigger } from './RefreshTrigger';\nimport { PriceRefreshTrigger, ProcessingTransactionRefreshTrigger } from './RefreshTrigger';\nimport type { HistoryStreamSource, Result } from './SourceStream';\nimport { AccountStreamSource, EmptyStreamSource, MultipleStreamSource } from './SourceStream';\n\ntype AccountSymbol = {\n  account: string;\n  symbol: string;\n};\n\nexport enum State {\n  items = 'items',\n  empty = 'empty',\n  error = 'error',\n}\n\n@singleton()\nexport class HistoryViewModel extends SDStreamListViewModel<ParsedTransaction> {\n  transactionRepository = new SolanaTransactionRepository({\n    solanaAPIClient: this._solanaAPIClient,\n  });\n  transactionParser = new DefaultTransactionParser({\n    p2pFeePayers: Defaults.p2pFeePayerPubkeys,\n    solanaAPIClient: this._solanaAPIClient,\n  });\n\n  // Properties\n\n  /// Symbol to filter coins\n  accountSymbol?: AccountSymbol;\n\n  /// Refresh handling\n  private _refreshTriggers: HistoryRefreshTrigger[] = [\n    new PriceRefreshTrigger({ pricesService: this._pricesService }),\n    new ProcessingTransactionRefreshTrigger({ transactionHandler: this._transactionHandler }),\n  ];\n\n  /// A list of source, where data can be fetched\n  private _source: HistoryStreamSource = new EmptyStreamSource();\n\n  /// A list of output objects, that builds, forms, maps, filters and updates a final list.\n  /// This list will be delivered to UI layer.\n  private _outputs: HistoryOutput[] = [];\n\n  get stateDriver(): State {\n    const change = this.dataObservable; // TODO: check, should be \"withPrevious\"\n    const state = this.stateObservable;\n    const error = this._errorRelay;\n    if (error) {\n      return State.error;\n    }\n\n    if (state === SDFetcherState.loading || state === SDFetcherState.initializing) {\n      return State.items;\n    } else {\n      return (change?.length ?? 0) > 0 ? State.items : State.empty;\n    }\n  }\n\n  // TODO: tryAgain\n  // TODO: refreshPage\n  private _errorRelay = false;\n\n  constructor(\n    private _walletsRepository: WalletsRepository,\n    private _notificationService: NotificationService, // accountSymbol?: AccountSymbol\n    // @web: for dependencies\n    private _solanaAPIClient: SolanaService,\n    private _transactionHandler: TransactionHandler,\n    private _pricesService: PricesService,\n  ) {\n    super({ isPaginationEnabled: true, limit: 10 });\n\n    // TODO: tryAgain\n    // TODO: refreshPage\n\n    makeObservable(this, {\n      setAccountSymbol: action,\n      next: flow,\n    });\n  }\n\n  protected override setDefaults(): void {\n    // TODO:\n  }\n\n  tryAgain(): void {\n    this.reload();\n    this._errorRelay = false;\n  }\n\n  refreshPage(): void {\n    this.reload();\n  }\n\n  protected override onInitialize(): void {}\n\n  protected override afterReactionsRemoved(): void {}\n\n  // we need to\n  setAccountSymbol(wallet: Wallet): void {\n    this.end();\n\n    this.accountSymbol = {\n      account: wallet.pubkey!,\n      symbol: wallet.token.symbol,\n    };\n\n    this._outputs = [\n      new ProcessingTransactionsOutput({\n        accountFilter: this.accountSymbol?.account,\n        transactionHandler: this._transactionHandler,\n      }),\n      new PriceUpdatingOutput({ pricesService: this._pricesService }),\n    ];\n\n    // Register all refresh triggers\n    for (const trigger of this._refreshTriggers) {\n      this.addReaction(\n        trigger.register(() => {\n          this.refreshUI();\n        }),\n      );\n    }\n\n    // Build source\n    this._buildSource();\n\n    this._bind();\n\n    this.initialize();\n  }\n\n  private _buildSource(): void {\n    const cachedTransactionRepository = new SolanaTransactionRepository({\n      solanaAPIClient: this._solanaAPIClient,\n    });\n    const cachedTransactionParser = new DefaultTransactionParser({\n      p2pFeePayers: Defaults.p2pFeePayerPubkeys,\n      solanaAPIClient: this._solanaAPIClient,\n    });\n\n    const accountSymbol = this.accountSymbol;\n    if (accountSymbol) {\n      this._source = new AccountStreamSource({\n        account: accountSymbol.account,\n        symbol: accountSymbol.symbol,\n        transactionRepository: cachedTransactionRepository,\n        transactionParser: cachedTransactionParser,\n      });\n    } else {\n      const accountStreamSources = this._walletsRepository\n        .getWallets()\n        .reverse()\n        .map(\n          (wallet) =>\n            new AccountStreamSource({\n              account: wallet.pubkey ?? '',\n              symbol: wallet.token.symbol,\n              transactionRepository: cachedTransactionRepository,\n              transactionParser: cachedTransactionParser,\n            }),\n        );\n\n      this._source = new MultipleStreamSource({ sources: accountStreamSources });\n    }\n  }\n\n  private _bind(): void {\n    // Start loading when wallets are ready.\n    this.addReaction(\n      when(\n        () => (this._walletsRepository.dataObservable?.length ?? 0) > 0,\n        () => {\n          this.reload();\n        },\n      ),\n    );\n  }\n\n  override clear() {\n    // Build source\n    this._buildSource();\n\n    super.clear();\n  }\n\n  private _next = flow<Result[], []>(async function* (\n    this: HistoryViewModel,\n  ): AsyncGenerator<Result[]> {\n    const results: Result[] = [];\n    try {\n      while (true) {\n        const firstTrx = await this._source.currentItem();\n        const rawTime = firstTrx?.signatureInfo.blockTime;\n        if (!firstTrx || !rawTime) {\n          return results;\n        }\n\n        // Fetch next 1 days\n        const timeEndFilter = new Date(rawTime * 1000 - 60 * 60 * 24 * 1000); // TODO: check\n\n        const items = this._source.next({ timestampEnd: timeEndFilter });\n        let result: IteratorResult<Result> | null = null;\n        while (!(result = await items.next()).done) {\n          const { signatureInfo } = result.value;\n\n          // Skip duplicated transaction\n          if (this.data.some((tx) => tx.signature === signatureInfo.signature)) {\n            continue;\n          }\n          if (results.some((tx) => tx.signatureInfo.signature === signatureInfo.signature)) {\n            continue;\n          }\n\n          results.push(result.value);\n\n          if (results.length > 15) {\n            return results;\n          }\n        }\n      }\n    } catch (error) {\n      console.error(error);\n      yield results;\n      throw error;\n    }\n  });\n\n  override next = flow<ParsedTransaction[], []>(function* (\n    this: HistoryViewModel,\n  ): Generator<Promise<ParsedTransaction[]>> {\n    try {\n      return yield this._next().then(async (signatures: Result[]) => {\n        const transactions = await this.transactionRepository.getTransactions(\n          signatures.map((s) => s.signatureInfo.signature),\n        );\n        const parsedTransactions: ParsedTransaction[] = [];\n\n        // TODO: maybe parallel\n        for (const trxInfo of transactions) {\n          if (!trxInfo) {\n            continue;\n          }\n          const signature = signatures.find(\n            (res) => res.signatureInfo.signature === trxInfo.transaction.signatures[0],\n          );\n          if (!signature) {\n            continue;\n          }\n          const { signatureInfo, account, symbol } = signature;\n\n          parsedTransactions.push(\n            await this.transactionParser.parse({\n              signatureInfo,\n              transactionInfo: trxInfo,\n              account,\n              symbol,\n            }),\n          );\n        }\n\n        return parsedTransactions;\n      });\n    } catch (error) {\n      // TODO: check it works\n      console.error(error);\n      this._errorRelay = true;\n      this._notificationService.error((error as Error).message);\n    }\n  });\n\n  override join(newItems: ParsedTransaction[]): ParsedTransaction[] {\n    const filteredNewData: ParsedTransaction[] = [];\n    for (const trx of newItems) {\n      if (this.data.some((tx) => tx.signature === trx.signature)) {\n        continue;\n      }\n      filteredNewData.push(trx);\n    }\n    return this.data.concat(filteredNewData);\n  }\n\n  override map(newData: ParsedTransaction[]): ParsedTransaction[] {\n    // Apply output transformation\n    let data = [...newData];\n    for (const output of this._outputs) {\n      data = output.process(data);\n    }\n    return super.map(data);\n  }\n}\n","import type { FC } from 'react';\nimport Skeleton from 'react-loading-skeleton';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\nimport { rgba } from 'polished';\n\nimport type { ParsedTransaction } from 'new/sdk/TransactionParser';\nimport {\n  CloseAccountInfo,\n  CreateAccountInfo,\n  StatusType,\n  SwapInfo,\n  TransferInfo,\n  TransferType,\n} from 'new/sdk/TransactionParser';\nimport { Defaults } from 'new/services/Defaults';\nimport { numberToString } from 'new/utils/NumberExtensions';\nimport {\n  parsedTransactionIcon,\n  parsedTransactionLabel,\n} from 'new/utils/SolanaSDK.ParsedTransactionExtensions';\nimport { truncatingMiddle } from 'new/utils/StringExtensions';\n\nimport type { ImageViewType } from './TransactionImageView';\nimport { TransactionImageView, WrapperIcon } from './TransactionImageView';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  padding: 10px 0;\n\n  &:not(:last-child) {\n    &::after {\n      position: absolute;\n      right: 10px;\n      bottom: 0;\n      left: 10px;\n\n      border-bottom: 1px solid ${rgba(0, 0, 0, 0.05)};\n\n      content: '';\n    }\n  }\n`;\n\nconst TopStack = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  color: #000;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 24px;\n`;\n\nconst TransactionTypeLabel = styled.div`\n  text-transform: capitalize;\n`;\n\nconst AmountInFiatLabel = styled.div`\n  display: flex;\n  align-items: center;\n\n  &.green {\n    color: #2db533;\n  }\n`;\n\nconst TransactionImageViewStyled = styled(TransactionImageView)``;\n\nconst BottomStack = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 5px;\n\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 16px;\n`;\n\nconst Main = styled.div`\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 12px;\n  grid-template-columns: min-content 1fr;\n  align-items: center;\n  padding: 10px;\n\n  cursor: pointer;\n\n  &:hover {\n    background: #f6f6f8;\n    border-radius: 12px;\n\n    ${TransactionImageViewStyled} {\n      ${WrapperIcon} {\n        background: #fff;\n      }\n    }\n\n    ${TransactionTypeLabel} {\n      color: #5887ff;\n    }\n  }\n`;\n\ninterface Props {\n  transaction?: ParsedTransaction;\n  isPlaceholder?: boolean;\n  onTransactionClick?: () => void;\n}\n\nexport const TransactionCell: FC<Props> = observer(\n  ({ transaction, isPlaceholder = false, onTransactionClick }) => {\n    if (isPlaceholder || !transaction) {\n      return (\n        <Wrapper>\n          <Main>\n            <Skeleton width={48} height={48} borderRadius={12} />\n            <div>\n              <TopStack>\n                <TransactionTypeLabel>\n                  <Skeleton width={50} height={16} />\n                </TransactionTypeLabel>\n                <AmountInFiatLabel>\n                  <Skeleton width={50} height={16} />\n                </AmountInFiatLabel>\n              </TopStack>\n              <BottomStack>\n                <div>\n                  <Skeleton width={70} height={16} />\n                </div>\n                <div>\n                  <Skeleton width={70} height={16} />\n                </div>\n              </BottomStack>\n            </div>\n          </Main>\n        </Wrapper>\n      );\n    }\n\n    const {\n      descriptionLabel,\n      transactionTypeLabel,\n      imageView,\n      statusImage,\n      amountInFiatLabel,\n      amountInFiatLabelTextColor,\n      amountInTokenLabel,\n    } = expr(() => {\n      // clear\n      let descriptionLabel = null;\n\n      // type\n      const transactionTypeLabel = parsedTransactionLabel(transaction);\n\n      // description texts\n      let isUndefinedTransaction = false;\n      switch (transaction.info?.constructor) {\n        case CreateAccountInfo: {\n          const newWallet = (transaction.info as CreateAccountInfo).newWallet;\n          if (newWallet) {\n            descriptionLabel = `${newWallet.token.symbol} Created`;\n          }\n          break;\n        }\n        case CloseAccountInfo: {\n          const closedWallet = (transaction.info as CloseAccountInfo).closedWallet;\n          if (closedWallet) {\n            descriptionLabel = `${closedWallet.token.symbol} Closed`;\n          }\n          break;\n        }\n        case TransferInfo: {\n          switch ((transaction.info as TransferInfo).transferType) {\n            case TransferType.send: {\n              const destination = (transaction.info as TransferInfo).destination;\n              if (destination) {\n                descriptionLabel = `To ${\n                  destination.pubkey ? truncatingMiddle(destination.pubkey) : ''\n                }`;\n              }\n              break;\n            }\n            case TransferType.receive: {\n              const source = (transaction.info as TransferInfo).source;\n              if (source) {\n                descriptionLabel = `From ${source.pubkey ? truncatingMiddle(source.pubkey) : ''}`;\n              }\n              break;\n            }\n            default:\n              break;\n          }\n          break;\n        }\n        case SwapInfo: {\n          const source = (transaction.info as SwapInfo).source;\n          const destination = (transaction.info as SwapInfo).destination;\n          if (source && destination) {\n            descriptionLabel = `${source.token.symbol} to ${destination.token.symbol}`;\n          }\n          break;\n        }\n        default: {\n          const signature = transaction.signature;\n          if (signature) {\n            descriptionLabel = truncatingMiddle(signature);\n          }\n          isUndefinedTransaction = true;\n        }\n      }\n\n      // set up icon\n      let imageView: ImageViewType = null;\n      switch (transaction.info?.constructor) {\n        case SwapInfo: {\n          imageView = {\n            fromOneToOne: {\n              from: (transaction.info as SwapInfo).source?.token,\n              to: (transaction.info as SwapInfo).destination?.token,\n            },\n          };\n          break;\n        }\n        default:\n          imageView = { oneImage: parsedTransactionIcon(transaction) };\n      }\n\n      // set up status icon\n      let statusImage = null;\n      switch (transaction.status.type) {\n        case StatusType.requesting:\n        case StatusType.processing:\n          statusImage = 'clock'; // @ios: transactionIndicatorPending\n          break;\n        case StatusType.error:\n          statusImage = 'warning'; // @ios: transactionIndicatorError\n          break;\n        default:\n          break;\n      }\n\n      // amount in fiat\n      let amountInFiatLabel = null;\n      let amountInFiatLabelTextColor = undefined;\n      const amountInFiat = transaction.amountInFiat;\n      if (amountInFiat) {\n        let amountText = `${Defaults.fiat.symbol}${numberToString(amountInFiat, {\n          maximumFractionDigits: 2,\n          showMinus: false,\n        })}`;\n        if (transaction.amount < 0) {\n          amountText = `- ${amountText}`;\n        } else if (transaction.amount > 0) {\n          amountText = `+ ${amountText}`;\n          amountInFiatLabelTextColor = 'green';\n        } else {\n          amountText = '';\n        }\n        amountInFiatLabel = amountText;\n      }\n\n      // amount\n      let amountInTokenLabel = null;\n      if (!isUndefinedTransaction) {\n        if (transaction.amount !== 0) {\n          amountInTokenLabel = `${numberToString(transaction.amount, {\n            maximumFractionDigits: 9,\n            showPlus: true,\n          })} ${transaction.symbol}`;\n        }\n      } else {\n        const blockhash = transaction.blockhash;\n        if (blockhash) {\n          amountInTokenLabel = `#${truncatingMiddle(blockhash)}`;\n        }\n      }\n\n      return {\n        descriptionLabel,\n        transactionTypeLabel,\n        imageView,\n        statusImage,\n        amountInFiatLabel,\n        amountInFiatLabelTextColor,\n        amountInTokenLabel,\n      };\n    });\n\n    return (\n      <Wrapper>\n        <Main onClick={onTransactionClick}>\n          <TransactionImageViewStyled imageView={imageView} statusImage={statusImage} />\n          <div>\n            <TopStack>\n              <TransactionTypeLabel>{transactionTypeLabel}</TransactionTypeLabel>\n              <AmountInFiatLabel className={classNames(amountInFiatLabelTextColor)}>\n                {amountInFiatLabel}\n              </AmountInFiatLabel>\n            </TopStack>\n            <BottomStack>\n              <div>{descriptionLabel}</div>\n              <div>{amountInTokenLabel}</div>\n            </BottomStack>\n          </div>\n        </Main>\n      </Wrapper>\n    );\n  },\n);\n","import type { FC } from 'react';\nimport { useLayoutEffect } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { useViewModel } from 'new/core/viewmodels';\nimport { EmptyTransactionsView } from 'new/scenes/Main/WalletDetail/History/Empty';\nimport { CollectionViewMappingStrategy } from 'new/scenes/Main/WalletDetail/History/SortByDataStrategy';\nimport type { WalletDetailViewModel } from 'new/scenes/Main/WalletDetail/WalletDetail.ViewModel';\nimport type { ParsedTransaction } from 'new/sdk/TransactionParser';\nimport { NSDNewDynamicSectionsCollectionView } from 'new/ui/components/common/NSDNewDynamicSectionsCollectionView';\nimport { Widget } from 'new/ui/components/common/Widget';\n\nimport { ErrorView } from './History.ErrorView';\nimport { HistoryViewModel, State } from './History.ViewModel';\nimport { TransactionCell } from './TransactionCollectionView/TransactionCell';\n\nconst Wrapper = styled.div`\n  margin: 0 10px;\n`;\n\ninterface Props {\n  viewModel: Readonly<WalletDetailViewModel>;\n}\n\nexport const History: FC<Props> = observer(({ viewModel }) => {\n  const vm = useViewModel(HistoryViewModel);\n\n  useLayoutEffect(() => {\n    if (viewModel.wallet) {\n      vm.setAccountSymbol(viewModel.wallet);\n    }\n  }, [viewModel.wallet]);\n\n  const handleTransactionClick = (tx: ParsedTransaction) => viewModel.showTransaction(tx);\n\n  const content = expr(() => {\n    switch (vm.stateDriver) {\n      case State.items:\n        return (\n          <NSDNewDynamicSectionsCollectionView<ParsedTransaction>\n            viewModel={vm}\n            mapDataToSections={(viewModel) =>\n              CollectionViewMappingStrategy.byData({\n                viewModel,\n                where: (item) => item.blockTime ?? new Date(),\n              })\n            }\n            numberOfLoadingCells={7}\n            renderPlaceholder={(key) => <TransactionCell key={key} isPlaceholder />}\n            renderItem={(item) => (\n              <TransactionCell\n                key={item.signature}\n                transaction={item}\n                onTransactionClick={() => handleTransactionClick(item)}\n              />\n            )}\n          />\n        );\n      case State.empty:\n        return <EmptyTransactionsView onClick={() => vm.refreshPage()} />;\n      case State.error:\n        return <ErrorView onClick={() => vm.tryAgain()} />;\n    }\n  });\n\n  return (\n    <Widget title=\"Activity\">\n      <Wrapper>{content}</Wrapper>\n    </Widget>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { Defaults } from 'new/services/Defaults';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport type { WalletDetailViewModel } from '../WalletDetail.ViewModel';\n\nconst Wrapped = styled.div`\n  padding: 16px 20px;\n\n  &.isSticky {\n    padding: 0 16px;\n  }\n`;\n\nconst ValueCurrency = styled.div`\n  color: #000;\n  font-weight: bold;\n  font-size: 22px;\n  line-height: 120%;\n\n  &.isSticky {\n    font-weight: bold;\n    font-size: 16px;\n    line-height: 120%;\n  }\n`;\n\nconst BottomWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 21px;\n\n  &:not(:first-child) {\n    margin-top: 4px;\n  }\n\n  &.isSticky {\n    margin-top: 0;\n\n    font-weight: 600;\n    font-size: 14px;\n    line-height: 120%;\n  }\n`;\n\nconst ValueOriginal = styled.div``;\n\ninterface Props {\n  viewModel: Readonly<WalletDetailViewModel>;\n  isSticky?: boolean;\n}\n\nexport const BalanceView: FC<Props> = observer(({ viewModel, isSticky }) => {\n  if (!viewModel.wallet) {\n    return null;\n  }\n\n  const tokenBalance = expr(() => {\n    const wallet = viewModel.wallet;\n    if (!wallet) {\n      return '';\n    }\n    return `${numberToString(wallet.amount, { maximumFractionDigits: 9 })} ${wallet.token.symbol}`;\n  });\n\n  const fiatBalance = expr(() => {\n    const wallet = viewModel.wallet;\n    return `${Defaults.fiat.symbol} ${\n      wallet\n        ? numberToString(wallet.amountInCurrentFiat, {\n            maximumFractionDigits: 2,\n          })\n        : '0'\n    }`;\n  });\n\n  return (\n    <Wrapped className={classNames({ isSticky })}>\n      {viewModel.wallet ? (\n        <ValueCurrency className={classNames({ isSticky })}>{fiatBalance}</ValueCurrency>\n      ) : null}\n      <BottomWrapper className={classNames({ isSticky })}>\n        <ValueOriginal>{tokenBalance}</ValueOriginal>\n      </BottomWrapper>\n    </Wrapped>\n  );\n});\n","import type { FC } from 'react';\nimport { useCallback, useRef, useState } from 'react';\nimport { useEvent } from 'react-use';\n\nimport { styled } from '@linaria/react';\nimport throttle from 'lodash.throttle';\n\nimport { Widget } from 'components/common/Widget';\nimport { Button, Icon } from 'components/ui';\nimport { BalanceView } from 'new/scenes/Main/WalletDetail/BalanceView';\nimport { COLUMN_RIGHT_WIDTH } from 'new/ui/components/common/Layout';\nimport { TokenAvatar } from 'new/ui/components/common/TokenAvatar';\nimport { shortAddress } from 'utils/tokens';\n\nimport type { WalletDetailViewModel } from '../WalletDetail.ViewModel';\n\nconst Header = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst TokenInfo = styled.div`\n  max-width: 230px;\n  margin-left: 16px;\n  overflow: hidden;\n\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`;\n\nconst TokenSymbol = styled.div`\n  color: #000;\n  font-weight: 600;\n  font-size: 20px;\n  line-height: 100%;\n`;\n\nconst TokenName = styled.div`\n  margin-top: 4px;\n\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 140%;\n`;\n\nconst Buttons = styled.div`\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 16px;\n`;\n\nconst ButtonStyled = styled(Button)`\n  width: 36px;\n  padding: 0;\n\n  box-shadow: 0 4px 12px rgba(88, 135, 255, 0.25);\n`;\n\nconst ActionIcon = styled(Icon)`\n  width: 20px;\n  height: 20px;\n\n  color: #fff;\n`;\n\nconst WrapperFixed = styled.div`\n  position: fixed;\n  top: 64px;\n  z-index: 2;\n\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  width: ${COLUMN_RIGHT_WIDTH}px;\n  height: 72px;\n  padding: 0 20px;\n\n  background: #fff;\n  border-radius: 0 0 12px 12px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);\n`;\n\nconst FixedInfoWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst SCROLL_THROTTLE_VALUE = 100;\nconst WIDGET_BOTTOM_FOR_SHOW_STICKY = 150;\n\ninterface Props {\n  viewModel: Readonly<WalletDetailViewModel>;\n}\n\nexport const TopWidget: FC<Props> = ({ viewModel }) => {\n  const widgetRef = useRef<HTMLDivElement>(null);\n  const [isShowFixed, setIsShowFixed] = useState(false);\n\n  const handleScroll = useCallback(\n    () =>\n      throttle(() => {\n        if (!widgetRef.current) {\n          return;\n        }\n\n        const { bottom } = widgetRef.current.getBoundingClientRect();\n\n        if (bottom <= WIDGET_BOTTOM_FOR_SHOW_STICKY) {\n          setIsShowFixed(true);\n        } else {\n          setIsShowFixed(false);\n        }\n      }, SCROLL_THROTTLE_VALUE),\n    [],\n  );\n\n  useEvent('scroll', handleScroll);\n\n  const renderButtons = () => {\n    return (\n      <Buttons>\n        {viewModel.walletActions.map((action) => (\n          <ButtonStyled\n            key={action.text}\n            primary\n            small\n            title={action.text}\n            onClick={() => viewModel.start(action)}\n          >\n            <ActionIcon name={action.icon} />\n          </ButtonStyled>\n        ))}\n      </Buttons>\n    );\n  };\n\n  return (\n    <>\n      <Widget\n        ref={widgetRef}\n        title={\n          viewModel.wallet ? (\n            <Header>\n              <TokenAvatar token={viewModel.wallet.token} size={44} />\n              <TokenInfo>\n                <TokenSymbol>{viewModel.wallet.token.symbol}</TokenSymbol>\n                <TokenName title={viewModel.wallet.pubkey ?? undefined}>\n                  {viewModel.wallet?.token.name ||\n                    (viewModel.wallet.pubkey ? shortAddress(viewModel.wallet.pubkey) : null)}\n                </TokenName>\n              </TokenInfo>\n            </Header>\n          ) : null\n        }\n        action={renderButtons()}\n      >\n        <BalanceView viewModel={viewModel} />\n      </Widget>\n      {isShowFixed ? (\n        <WrapperFixed>\n          <FixedInfoWrapper>\n            <TokenAvatar token={viewModel.wallet?.token} size={36} />\n            <BalanceView viewModel={viewModel} isSticky={true} />\n          </FixedInfoWrapper>\n          {renderButtons()}\n        </WrapperFixed>\n      ) : null}\n    </>\n  );\n};\n","import { computed, makeObservable, observable, reaction } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport type { ParsedTransaction } from 'new/sdk/TransactionParser';\nimport { LocationService } from 'new/services/LocationService';\nimport { ModalService, ModalType } from 'new/services/ModalService';\nimport { WalletsRepository } from 'new/services/Repositories';\nimport type { TransactionModalProps } from 'new/ui/modals/TransactionModal';\n\nenum WalletActionTypeEnum {\n  // receive = 'receive',\n  // buy = 'buy',\n  send = 'send',\n  swap = 'swap',\n}\n\nclass WalletActionType {\n  type: WalletActionTypeEnum;\n\n  private constructor(type: WalletActionTypeEnum) {\n    this.type = type;\n  }\n\n  // static get receive(): WalletActionType {\n  //   return new WalletActionType(WalletActionTypeEnum.receive);\n  // }\n  // static get buy(): WalletActionType {\n  //   return new WalletActionType(WalletActionTypeEnum.buy);\n  // }\n  static get send(): WalletActionType {\n    return new WalletActionType(WalletActionTypeEnum.send);\n  }\n  static get swap(): WalletActionType {\n    return new WalletActionType(WalletActionTypeEnum.swap);\n  }\n\n  get text(): string {\n    switch (this.type) {\n      // case WalletActionTypeEnum.receive:\n      //   return 'Receive';\n      // case WalletActionTypeEnum.buy:\n      //   return 'Buy';\n      case WalletActionTypeEnum.send:\n        return 'Send';\n      case WalletActionTypeEnum.swap:\n        return 'Swap';\n    }\n  }\n\n  get icon() {\n    switch (this.type) {\n      // case WalletActionTypeEnum.receive:\n      //   return '';\n      // case WalletActionTypeEnum.buy:\n      //   return '';\n      case WalletActionTypeEnum.send:\n        return 'top';\n      case WalletActionTypeEnum.swap:\n        return 'swap';\n    }\n  }\n}\n\n// TODO: it will be great to use symbol instead of pubkey. and in all subroutes too\n@singleton()\nexport class WalletDetailViewModel extends ViewModel {\n  pubkey: string | null;\n\n  wallet: Wallet | null;\n  get walletActions(): WalletActionType[] {\n    const wallet = this.wallet;\n    if (!wallet) {\n      return [];\n    }\n\n    if (wallet.isNativeSOL || wallet.token.symbol === 'USDC') {\n      return [\n        // WalletActionType.buy,\n        // WalletActionType.receive,\n        WalletActionType.send,\n        WalletActionType.swap,\n      ];\n    }\n\n    return [\n      // WalletActionType.receive,\n      WalletActionType.send,\n      WalletActionType.swap,\n    ];\n  }\n\n  constructor(\n    private _walletsRepository: WalletsRepository,\n    private _locationService: LocationService, // private _analyticsManager: AnalyticsManager,\n    private _modalService: ModalService,\n  ) {\n    super();\n\n    this.pubkey = null;\n\n    this.wallet = null;\n\n    makeObservable(this, {\n      pubkey: observable,\n\n      wallet: observable,\n      walletActions: computed,\n    });\n  }\n\n  protected override setDefaults(): void {\n    this.pubkey = null;\n\n    this.wallet = null;\n  }\n\n  protected override onInitialize(): void {\n    this._bind();\n  }\n\n  protected override afterReactionsRemoved(): void {}\n\n  // Bind subjects\n  private _bind(): void {\n    // @web: listen to changes in url\n    this.addReaction(\n      reaction(\n        () => this._locationService.getParams<{ pubkey?: string }>('/wallet/:pubkey').pubkey,\n        (pubkey) => {\n          if (pubkey) {\n            this.pubkey = pubkey;\n          }\n        },\n        {\n          fireImmediately: true,\n        },\n      ),\n    );\n\n    this.addReaction(\n      reaction(\n        () => ({ wallets: this._walletsRepository.dataObservable, pubkey: this.pubkey }),\n        ({ wallets, pubkey }) => {\n          const wallet = wallets?.find((w) => w.pubkey === pubkey);\n          if (wallet) {\n            this.wallet = wallet;\n          }\n        },\n        {\n          fireImmediately: true,\n        },\n      ),\n    );\n  }\n\n  private _sendTokens(): void {\n    const wallet = this.wallet;\n    if (!wallet) {\n      return;\n    }\n    this._locationService.push(`/send/${wallet.pubkey}`);\n  }\n\n  // private _buyTokens(): void {\n  //   const symbol = this.wallet?.token.symbol;\n  //   let token = CryptoCurrency.sol;\n  //   if (symbol === 'SOL') {\n  //     token = CryptoCurrency.sol;\n  //   }\n  //\n  //   if (symbol === 'USDC') {\n  //     token = CryptoCurrency.usdc;\n  //   }\n  //   this._locationService.push(`/buy/${token.symbol}`);\n  // }\n  //\n  // private _receiveTokens(): void {\n  //   this._locationService.push(`/receive`);\n  // }\n\n  private _swapTokens(): void {\n    const wallet = this.wallet;\n    if (!wallet) {\n      return;\n    }\n    this._locationService.push(`/swap/${wallet.pubkey}`);\n  }\n\n  start(action: WalletActionType): void {\n    switch (action.type) {\n      // case WalletActionTypeEnum.receive:\n      //   this._receiveTokens();\n      //   break;\n      // case WalletActionTypeEnum.buy:\n      //   this._buyTokens();\n      //   break;\n      case WalletActionTypeEnum.send:\n        this._sendTokens();\n        break;\n      case WalletActionTypeEnum.swap:\n        this._swapTokens();\n        break;\n    }\n  }\n\n  showTransaction(transaction: ParsedTransaction): void {\n    this._modalService.openModal<void, TransactionModalProps>(ModalType.SHOW_MODAL_TRANSACTION, {\n      transaction,\n    });\n  }\n}\n","import type { FC } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { QRAddressWidget } from 'components/common/QRAddressWidget';\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { Layout } from 'new/ui/components/common/Layout';\nimport { shortAddress } from 'utils/tokens';\n\nimport { History } from './History';\nimport { TopWidget } from './TopWidget';\nimport { WalletDetailViewModel } from './WalletDetail.ViewModel';\n\nexport const WalletDetail: FC = observer(() => {\n  const viewModel = useViewModel(WalletDetailViewModel);\n  // TODO: temp\n  const { publicKey } = useParams<{ publicKey: string }>();\n\n  const currentName = expr(() => {\n    if (viewModel.wallet?.token.symbol) {\n      return `${viewModel.wallet.token.symbol} Wallet`;\n    }\n\n    if (viewModel.pubkey) {\n      return `${shortAddress(viewModel.pubkey)} Wallet`;\n    }\n\n    return '';\n  });\n\n  return (\n    <Layout\n      breadcrumb={{\n        currentName,\n        backTo: {\n          pathname: `/wallets`,\n          state: { fromPage: location.pathname },\n        },\n      }}\n    >\n      <TopWidget viewModel={viewModel} />\n      {/* TODO: temp */}\n      <QRAddressWidget publicKey={publicKey} />\n      <History viewModel={viewModel} />\n    </Layout>\n  );\n});\n","import { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { WalletModel } from 'new/models/WalletModel';\nimport { PricesService } from 'new/services/PriceAPIs/PricesService';\n\n@singleton()\nexport class RootViewModel extends ViewModel {\n  constructor(private _pricesService: PricesService, public walletModel: WalletModel) {\n    super();\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {\n    this._pricesService.startObserving();\n    this.walletModel.initialize();\n  }\n\n  protected override afterReactionsRemoved() {\n    this._pricesService.stopObserving();\n  }\n}\n","import type { FC } from 'react';\nimport React from 'react';\nimport { Redirect, useLocation } from 'react-router-dom';\n\nimport { observer } from 'mobx-react-lite';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\n\nimport { RootViewModel } from './Root.ViewModel';\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nexport const Root: FC<Props> = observer(({ children }) => {\n  const rootViewModel = useViewModel(RootViewModel);\n  const location = useLocation();\n  const isAuth = location.pathname === '/' || location.pathname === '/onboard';\n\n  if (!rootViewModel.walletModel.connected && !isAuth) {\n    return <Redirect to={`/onboard${location.search}`} />;\n  }\n\n  if (rootViewModel.walletModel.connected && isAuth) {\n    return <Redirect to={'/wallets'} />;\n  }\n\n  return <>{children}</>;\n});\n","import { computed, makeObservable } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport type { FeatureFlagsType } from 'new/services/FeatureFlags/defaultFlags';\nimport type { Features } from 'new/services/FeatureFlags/features';\nimport { DebugFeatureFlagsProvider } from 'new/services/FeatureFlags/providers/DebugFeatureFlagsProvider';\n\n@singleton()\nexport class DebugFeatureFlagsManagerViewModel extends ViewModel {\n  constructor() {\n    super();\n\n    makeObservable(this, {\n      isOn: computed,\n      featureFlags: computed,\n    });\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {}\n\n  protected override afterReactionsRemoved() {}\n\n  get isOn(): boolean {\n    return DebugFeatureFlagsProvider.isOn;\n  }\n\n  get featureFlags(): FeatureFlagsType {\n    return DebugFeatureFlagsProvider.featureFlags;\n  }\n\n  setDebugFeatureFlagsOn(value: boolean): void {\n    DebugFeatureFlagsProvider.setIsOn(value);\n  }\n\n  setDebugFeatureFlag(feature: Features, value: boolean): void {\n    DebugFeatureFlagsProvider.setFeatureFlag(feature, value);\n  }\n}\n","import type { FC } from 'react';\nimport { useEffect, useRef, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { Features } from 'new/services/FeatureFlags/features';\n\nimport { DebugFeatureFlagsManagerViewModel } from './DebugFeatureFlagsManager.ViewModel';\n\nconst Wrapper = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 5px;\n\n  z-index: 9999;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 300px;\n  height: 300px;\n\n  overflow-y: scroll;\n\n  background-color: ${theme.colors.stroke.secondary};\n\n  border: 1px solid ${theme.colors.bg.buttonDisabled};\n  border-radius: 20px;\n\n  opacity: 0.95;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  padding: 15px 15px;\n\n  cursor: pointer;\n\n  &.delimited {\n    border-bottom: 1px solid ${theme.colors.stroke.primary};\n  }\n\n  & * {\n    cursor: pointer;\n  }\n\n  &.disabled,\n  &.disabled * {\n    cursor: default;\n  }\n\n  & label {\n    margin: auto 0;\n\n    font-size: 18px;\n  }\n\n  &.disabled label {\n    color: ${theme.colors.stroke.primary};\n  }\n\n  & input {\n    width: 18px;\n    height: 18px;\n    margin: auto 0;\n  }\n\n  &.italic label {\n    font-style: italic;\n  }\n\n  &.bold label {\n    font-weight: bold;\n  }\n`;\n\nconst FlagRow = ({\n  label,\n  checked,\n  onClick,\n  disabled,\n  className = '',\n}: {\n  label: string;\n  checked: boolean;\n  onClick: () => void;\n  disabled?: boolean;\n  className?: string;\n}) => {\n  return (\n    <Row onClick={onClick} className={classNames({ disabled, [className]: true })}>\n      <label>{label}</label>\n      <input id={label} type=\"checkbox\" checked={checked} disabled={disabled} readOnly={true} />\n    </Row>\n  );\n};\n\nexport const DebugFeatureFlagsManager: FC = observer(() => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const [isShown, setIsShown] = useState(false);\n  const viewModel = useViewModel(DebugFeatureFlagsManagerViewModel);\n\n  const handleAwayClick = (e: MouseEvent) => {\n    if (!wrapperRef.current?.contains(e.target as HTMLDivElement)) {\n      setIsShown(false);\n    }\n  };\n\n  const handleKeyUp = (e: KeyboardEvent) => {\n    // Ctrl + I\n    if (e.ctrlKey && e.which === 73) {\n      setIsShown((shown) => !shown);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('click', handleAwayClick);\n    document.addEventListener('keyup', handleKeyUp);\n\n    return () => {\n      window.removeEventListener('click', handleAwayClick);\n      document.removeEventListener('keyup', handleKeyUp);\n    };\n  }, []);\n\n  const handleDebugFeatureFlagsOn = () => {\n    viewModel.setDebugFeatureFlagsOn(!viewModel.isOn);\n  };\n\n  const handleFeatureClick = (feature: Features) => {\n    viewModel.setDebugFeatureFlag(feature, !viewModel.featureFlags[feature]);\n  };\n\n  if (!isShown) {\n    return null;\n  }\n\n  return (\n    <Wrapper ref={wrapperRef}>\n      <FlagRow\n        label={'Turn on Debug flags'}\n        checked={viewModel.isOn}\n        onClick={handleDebugFeatureFlagsOn}\n        className={'bold delimited'}\n      />\n      {Object.entries(Features).map(([key, value]) => (\n        <FlagRow\n          key={key}\n          label={key}\n          checked={viewModel.featureFlags[value as Features]}\n          onClick={() => handleFeatureClick(value)}\n          disabled={!viewModel.isOn}\n        />\n      ))}\n    </Wrapper>\n  );\n});\n","import type { History } from 'history';\nimport { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { LocationService } from 'new/services/LocationService';\n\n@singleton()\nexport class LocationManagerViewModel extends ViewModel {\n  constructor(private _locationService: LocationService) {\n    super();\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {}\n\n  protected override afterReactionsRemoved() {}\n\n  setHistory(history: History): void {\n    this._locationService.setHistory(history);\n  }\n}\n","import { useLayoutEffect } from 'react';\nimport { useHistory } from 'react-router';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\n\nimport { LocationManagerViewModel } from './LocationManager.ViewModel';\n\nexport const LocationManager = () => {\n  const viewModel = useViewModel(LocationManagerViewModel);\n\n  const history = useHistory();\n\n  useLayoutEffect(() => viewModel.setHistory(history), [history]);\n\n  return null;\n};\n","import { computed, makeObservable } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport type { ModalServiceType, ModalType } from 'new/services/ModalService';\nimport { ModalService } from 'new/services/ModalService';\n\nexport type ModalManagerViewModelType = ModalServiceType;\n\n@singleton()\nexport class ModalManagerViewModel extends ViewModel implements ModalManagerViewModelType {\n  constructor(private _modalService: ModalService) {\n    super();\n\n    makeObservable(this, {\n      modals: computed,\n    });\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {}\n\n  protected override afterReactionsRemoved() {}\n\n  get modals() {\n    return this._modalService.modals;\n  }\n\n  openModal<T, S extends {}>(modalType: ModalType, props?: S): Promise<T | void> {\n    return this._modalService.openModal<T, S>(modalType, props);\n  }\n\n  closeModal<T>(modalId: number, result?: T): T | void {\n    return this._modalService.closeModal<T>(modalId, result);\n  }\n\n  closeTopModal() {\n    this._modalService.closeTopModal();\n  }\n}\n","import type { FC, LazyExoticComponent } from 'react';\nimport { lazy, Suspense, useCallback } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { zIndexes } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { useViewModel } from 'new/core/viewmodels';\nimport { ModalType } from 'new/services/ModalService';\nimport { ScrollFix } from 'new/ui/components/common/ScollFix';\n\nimport { ModalManagerViewModel } from './ModalManager.ViewModel';\nimport type { ModalPropsType } from './types';\n\nconst Wrapper = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: ${zIndexes.modal};\n\n  background-color: rgba(0, 0, 0, 0.6);\n\n  user-select: none;\n\n  &.nav {\n    bottom: 57px;\n  }\n`;\n\nconst ModalContainer = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n\n  overflow-y: auto;\n  overscroll-behavior: none;\n\n  &:last-child {\n    z-index: 3;\n  }\n`;\n\nconst ModalWrapper = styled(ScrollFix)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 100%;\n`;\n\ntype GetPresetFn = (modal?: ModalType) => Preset;\ntype Preset = 'nav' | 'regular';\n\nconst getPreset: GetPresetFn = (modal) => {\n  switch (modal) {\n    case ModalType.SHOW_MODAL_ACTIONS_MOBILE:\n      return 'nav';\n    default:\n      return 'regular';\n  }\n};\n\nconst modalsMap = new Map<ModalType, LazyExoticComponent<ModalPropsType & any>>([\n  [ModalType.SHOW_MODAL_ACTIONS_MOBILE, lazy(() => import('../../modals/ActionsMobileModal'))],\n  [ModalType.SHOW_MODAL_RECEIVE_BITCOIN, lazy(() => import('../../modals/ReceiveBitcoinModal'))],\n  [\n    ModalType.SHOW_MODAL_CONFIRM_SEND,\n    lazy(() => import('../../modals/confirmModals/ConfirmSendModal')),\n  ],\n  [\n    ModalType.SHOW_MODAL_CONFIRM_SWAP,\n    lazy(() => import('../../modals/confirmModals/ConfirmSwapModal')),\n  ],\n  [ModalType.SHOW_MODAL_TRANSACTION, lazy(() => import('../../modals/TransactionModal'))],\n  [\n    ModalType.SHOW_MODAL_PROCESS_TRANSACTION,\n    lazy(() => import('../../modals/ProcessTransactionModal')),\n  ],\n  [\n    ModalType.SHOW_MODAL_TRANSACTION_DETAILS,\n    lazy(() => import('components/modals/TransactionInfoModals/TransactionDetailsModal')),\n  ],\n  [\n    ModalType.SHOW_MODAL_CHOOSE_BUY_TOKEN_MOBILE,\n    lazy(() => import('../../modals/ChooseBuyTokenMobileModal')),\n  ],\n  [\n    ModalType.SHOW_MODAL_SELECT_LIST_MOBILE,\n    lazy(() => import('../../modals/SelectListMobileModal')),\n  ],\n  [ModalType.SHOW_MODAL_ERROR, lazy(() => import('components/modals/ErrorModal'))],\n]);\n\nexport const ModalManager: FC = observer(() => {\n  const vm = useViewModel(ModalManagerViewModel);\n\n  const handleWrapperClick = useCallback(\n    (e: React.MouseEvent<HTMLDivElement>) => {\n      // handle click only on element\n      if (e.target !== e.currentTarget) {\n        return;\n      }\n\n      vm.closeTopModal();\n    },\n    [vm],\n  );\n\n  const preparedModals = expr(() => {\n    return vm.modals.map((modal) => {\n      const ModalComponent = modalsMap.get(modal.modalType);\n\n      if (!ModalComponent) {\n        return null;\n      }\n\n      return (\n        <Suspense fallback={null} key={modal.modalId}>\n          <ModalContainer>\n            <ModalWrapper onMouseDown={handleWrapperClick}>\n              <ModalComponent\n                {...modal.props}\n                key={modal.modalId}\n                close={(result?: unknown) => vm.closeModal(modal.modalId, result)}\n              />\n            </ModalWrapper>\n          </ModalContainer>\n        </Suspense>\n      );\n    });\n  });\n\n  if (preparedModals.length === 0) {\n    return null;\n  }\n\n  const preset = getPreset(vm.modals.at(-1)?.modalType);\n  return <Wrapper className={classNames(preset)}>{preparedModals}</Wrapper>;\n});\n","import type { RefObject } from 'react';\nimport { createRef } from 'react';\n\nimport { computed, makeObservable, observable, reaction, runInAction } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport type { CurrentToastParams } from 'new/services/NotificationService';\nimport { NotificationService } from 'new/services/NotificationService';\n\ntype SizeType = Record<string, number>;\ntype ToastRefType = RefObject<HTMLDivElement>;\n\nexport type CurrentToastForRenderParams = CurrentToastParams & {\n  bottomOffset: number;\n  ref: ToastRefType;\n};\n\n@singleton()\nexport class NotificationManagerViewModel extends ViewModel {\n  private _heights: SizeType;\n  private _toastsRefs: Record<string, RefObject<HTMLDivElement>>;\n\n  _bottomOffsets: SizeType;\n\n  constructor(private _notificationService: NotificationService) {\n    super();\n\n    this._heights = {};\n    this._bottomOffsets = {};\n    this._toastsRefs = {};\n\n    makeObservable(this, {\n      _bottomOffsets: observable,\n\n      currentToasts: computed,\n    });\n\n    setTimeout(() => this._checkHeights(this._notificationService.currentToasts), 0);\n  }\n\n  protected override setDefaults() {\n    this._heights = {};\n    this._toastsRefs = {};\n    this._bottomOffsets = {};\n  }\n\n  protected override onInitialize() {\n    this.addReaction(\n      reaction(\n        () => this._notificationService.currentToasts,\n        (currentToasts) => {\n          this._cleanRefs(currentToasts);\n          setTimeout(() => this._checkHeights(currentToasts), 0);\n        },\n      ),\n    );\n  }\n\n  protected override afterReactionsRemoved() {\n    this._notificationService.eraseData();\n  }\n\n  private _cleanRefs(currentToasts: CurrentToastParams[]): void {\n    Object.keys(this._toastsRefs)\n      .filter((toastId) => !currentToasts.some((toast) => toast.id === Number(toastId)))\n      .forEach((toastId) => delete this._toastsRefs[toastId]);\n  }\n\n  private _checkHeights(currentToasts: CurrentToastParams[]): void {\n    const newHeights: SizeType = {};\n    let heightsUpdated = false;\n\n    currentToasts.forEach(({ id, isHiding }) => {\n      const ref = this._toastsRefs[id];\n\n      if (ref?.current) {\n        const height = isHiding ? 0 : ref.current.clientHeight;\n\n        newHeights[id] = height;\n\n        if (this._heights[id] === undefined || this._heights[id] !== height) {\n          heightsUpdated = true;\n        }\n      }\n    });\n\n    if (heightsUpdated) {\n      this._heights = newHeights;\n      this._calcOffsets();\n    }\n  }\n\n  private _calcOffsets(): void {\n    const newBottomOffsets: SizeType = {};\n    let totalOffset = 0;\n\n    for (let i = this._notificationService.currentToasts.length - 1; i >= 0; i--) {\n      const { id, isHiding } = this._notificationService.currentToasts[i] as CurrentToastParams;\n\n      if (isHiding) {\n        newBottomOffsets[id] = this._bottomOffsets[id] as number;\n      } else {\n        const height = this._heights[id];\n        let bottomOffset;\n\n        if (height) {\n          bottomOffset = totalOffset;\n          totalOffset += height;\n        } else {\n          bottomOffset = 0;\n        }\n\n        newBottomOffsets[id] = bottomOffset;\n      }\n    }\n\n    runInAction(() => (this._bottomOffsets = newBottomOffsets));\n  }\n\n  get currentToasts(): CurrentToastForRenderParams[] {\n    return this._notificationService.currentToasts.map((toast) => {\n      this._toastsRefs[toast.id] = this._toastsRefs[toast.id] || createRef();\n\n      return {\n        ...toast,\n        bottomOffset: this._bottomOffsets[toast.id] as number,\n        ref: this._toastsRefs[toast.id] as ToastRefType,\n      };\n    });\n  }\n\n  hideToast(id: number): void {\n    this._notificationService.startToastsHiding(id);\n  }\n\n  disableDeferredHiding(): void {\n    this._notificationService.disableDeferredHiding();\n  }\n\n  enableDeferredHiding(): void {\n    this._notificationService.enableDeferredHiding();\n  }\n}\n","import type { FC, ReactNode } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { NotifyToast } from 'new/ui/components/common/NotifyToast';\nimport { NotificationManagerViewModel } from 'new/ui/managers/NotificationManager/NotificationManager.ViewModel';\n\nconst IS_RIGHT = false;\n\nconst Wrapper = styled.div`\n  position: fixed;\n  right: 16px;\n  bottom: 8px;\n  left: 16px;\n  z-index: 9999;\n\n  @media (min-width: 500px) {\n    right: 30px;\n    bottom: 22px;\n    left: 30px;\n  }\n`;\n\nconst ToastContainer = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n\n  max-width: 100%;\n  padding-bottom: 8px;\n\n  transition: transform 0.3s ease-out;\n\n  &.isRight {\n    right: 0;\n    left: unset;\n  }\n\n  &.isInvisible {\n    visibility: hidden;\n  }\n`;\n\nconst ToastWrapper = styled.div`\n  &.isAppearing {\n    animation: fromBottomAnimation 0.4s ease-out;\n  }\n\n  &.isHiding {\n    animation: toLeftAnimation 0.3s ease-in forwards;\n\n    &.isRight {\n      animation: toRightAnimation 0.3s ease-in forwards;\n    }\n  }\n\n  @keyframes fromBottomAnimation {\n    from {\n      transform: translate(0, 1000px);\n    }\n    to {\n      transform: translate(0, 0);\n    }\n  }\n\n  @keyframes toLeftAnimation {\n    from {\n      transform: translate(0, 0);\n    }\n    to {\n      transform: translate(-500px, 0);\n    }\n  }\n\n  @keyframes toRightAnimation {\n    from {\n      transform: translate(0, 0);\n    }\n    to {\n      transform: translate(500px, 0);\n    }\n  }\n`;\n\nexport type RendererParams = {\n  type: string;\n  header?: string;\n  text?: string;\n  onClose?: () => void;\n};\n\nexport type RendererType = (params: RendererParams) => ReactNode;\n\nconst DefaultRenderer = (props: RendererParams) => <NotifyToast {...props} />;\n\nexport const NotificationManager: FC = observer(() => {\n  const viewModel = useViewModel(NotificationManagerViewModel);\n\n  const renderedToasts = expr(() => {\n    const { currentToasts } = viewModel;\n\n    return currentToasts.map(\n      ({ id, type, header, text, renderer, isHiding, bottomOffset, ref }) => {\n        const isOffsetCalculated = bottomOffset !== undefined;\n\n        const render = renderer || DefaultRenderer;\n        const onCloseClick = (hideId: number) => viewModel.hideToast(hideId);\n\n        return (\n          <ToastContainer\n            key={id}\n            ref={ref}\n            style={{\n              transform: `translate(0, -${bottomOffset}px)`,\n            }}\n            className={classNames({ isInvisible: !isOffsetCalculated, isRight: IS_RIGHT })}\n          >\n            <ToastWrapper\n              className={classNames({\n                isRight: IS_RIGHT,\n                isAppearing: isOffsetCalculated,\n                isHiding,\n              })}\n            >\n              {render({\n                type,\n                header,\n                text,\n                onClose: () => {\n                  onCloseClick(id);\n                },\n              })}\n            </ToastWrapper>\n          </ToastContainer>\n        );\n      },\n    );\n  });\n  return (\n    <Wrapper\n      onMouseEnter={() => {\n        viewModel.disableDeferredHiding();\n      }}\n      onMouseLeave={() => {\n        viewModel.enableDeferredHiding();\n      }}\n    >\n      {renderedToasts}\n    </Wrapper>\n  );\n});\n","import { u64 } from '@solana/spl-token';\nimport { Connection, PublicKey } from '@solana/web3.js';\nimport { flow, reaction } from 'mobx';\nimport { injectable } from 'tsyringe';\n\nimport { SDListViewModel } from 'new/core/viewmodels/SDListViewModel';\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport type { GetWalletsConfig } from 'new/scenes/Main/Auth/typings';\nimport { derivePublicKeyFromSeed } from 'new/scenes/Main/Auth/utils';\nimport { Wallet } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { PricesService } from 'new/services/PriceAPIs/PricesService';\n\n@injectable()\nexport class WalletsListViewModel extends SDListViewModel<Wallet> {\n  private _connection: Connection;\n  private _requestConfig: GetWalletsConfig | null = null;\n  private static _derivableAccountsNumber = 5;\n\n  constructor(private _pricesService: PricesService) {\n    super();\n\n    this._connection = new Connection(Defaults.apiEndpoint.getURL());\n  }\n\n  protected override setDefaults() {}\n\n  protected override onInitialize() {\n    // observe prices\n    this.addReaction(\n      reaction(\n        () => this._pricesService.currentPrices.state.type, // TODO: check\n        () => {\n          this._updatePrices();\n        },\n      ),\n    );\n  }\n\n  protected override afterReactionsRemoved() {}\n\n  private _updatePrices(): void {\n    if (this.state !== SDFetcherState.loaded) {\n      return;\n    }\n\n    let wallets = this._mapPrices(this.data);\n    wallets = wallets.sort(Wallet.defaultSorter);\n    this.overrideData(wallets);\n  }\n\n  private _mapPrices(wallets: Wallet[]): Wallet[] {\n    const walletsNew = wallets;\n    for (const wallet of walletsNew) {\n      wallet.price = this._pricesService.currentPrice(wallet.token.symbol);\n    }\n\n    return walletsNew;\n  }\n\n  override createRequest = flow<Wallet[], []>(function* (\n    this: WalletsListViewModel,\n  ): Generator<Promise<Array<Wallet | null>>> {\n    const { seed, derivationPathValue } = this._requestConfig as GetWalletsConfig;\n\n    const derivableTokenAccountPublicKeys = new Array(WalletsListViewModel._derivableAccountsNumber)\n      .fill(null)\n      .map((_, idx) => {\n        const pubKey = derivePublicKeyFromSeed(seed, idx, derivationPathValue);\n        return new PublicKey(pubKey);\n      });\n\n    return yield this._connection\n      .getMultipleAccountsInfo(derivableTokenAccountPublicKeys)\n      .then((accounts) => {\n        return accounts.map((acc, idx) => {\n          if (acc) {\n            return Wallet.nativeSolana({\n              lamports: new u64(acc?.lamports),\n              pubkey: derivableTokenAccountPublicKeys[idx]?.toString(),\n            });\n          }\n\n          return Wallet.nativeSolana({\n            lamports: new u64(0),\n            pubkey: derivableTokenAccountPublicKeys[idx]?.toString(),\n          });\n        });\n      })\n      .then((wallets) => {\n        const newTokens = wallets\n          .map((wallet) => wallet.token)\n          .filter((token) => !this._pricesService.getWatchList().has(token));\n\n        this._pricesService.addToWatchList(newTokens);\n        this._pricesService.fetchPrices(newTokens);\n\n        return wallets;\n      });\n  });\n\n  fetchWallets(config: GetWalletsConfig) {\n    this._requestConfig = config;\n\n    this.reload();\n  }\n}\n","import type { ReactElement, ReactNode } from 'react';\n\nimport type { Signer } from '@solana/web3.js';\n\nexport enum WizardSteps {\n  CREATE_START = 'CREATE_START',\n  CREATE_CONFIRM_MNEMONIC = 'CREATE_CONFIRM_MNEMONIC',\n  CREATE_SET_PASSWORD = 'CREATE_SET_PASSWORD',\n  RESTORE_START = 'RESTORE_START',\n  RESTORE_PASSWORD = 'RESTORE_PASSWORD',\n  RESTORE_ACCOUNTS = 'RESTORE_ACCOUNTS',\n  FINAL = 'FINAL',\n}\n\nexport type AuthInfo = {\n  mnemonic: string;\n  derivationPath: DerivationPathOption;\n  password: string;\n};\n\nexport type AuthState = {\n  step: WizardSteps;\n  authInfo: AuthInfo;\n  initialCreateMnemonic: string;\n  initialRestoreMnemonic: string;\n};\n\nexport type DerivationPathOption = {\n  value: string;\n  label: ReactNode;\n};\n\nexport type GetWalletsConfig = {\n  seed: string;\n  derivationPathValue: string;\n};\n\nexport type ViewMap = {\n  [K in WizardSteps]: ReactElement;\n};\n\nexport type ConnectConfig = SignInConnectConfig | RecurringConnectConfig;\n\ntype SignInConnectConfig = {\n  type: 'sign';\n  derivationPath: string;\n  storageInfo: StorageInfo;\n};\n\ntype RecurringConnectConfig = {\n  type: 'recur';\n  signer: Signer;\n};\n\nexport type StorageInfo = {\n  mnemonic: string;\n  seed: string;\n  password: string;\n};\n\nexport type ExpiryDataType<T> = {\n  value: T;\n  expiry: number;\n};\n\nexport type ValueOf<T> = T[keyof T];\n","import * as bip39 from 'bip39';\nimport { action, computed, makeObservable, observable, reaction, when } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { isDev, localMnemonic } from 'config/constants';\nimport { ViewModel } from 'new/core/viewmodels/ViewModel';\nimport { WalletModel } from 'new/models/WalletModel';\nimport { MnemonicAdapter, MnemonicAdapterName } from 'new/scenes/Main/Auth/MnemonicAdapter';\nimport { WalletsListViewModel } from 'new/scenes/Main/Auth/Subviews/Wallets.ViewModel';\n\nimport type { AuthInfo, AuthState, DerivationPathOption } from './typings';\nimport { WizardSteps } from './typings';\nimport { DERIVATION_PATH, mnemonicToSeed } from './utils';\n\nconst createList = [\n  WizardSteps.CREATE_START,\n  WizardSteps.CREATE_CONFIRM_MNEMONIC,\n  WizardSteps.CREATE_SET_PASSWORD,\n];\nconst restoreList = [\n  WizardSteps.RESTORE_START,\n  WizardSteps.RESTORE_PASSWORD,\n  WizardSteps.RESTORE_ACCOUNTS,\n];\n\n@singleton()\nexport class AuthViewModel extends ViewModel {\n  step: WizardSteps;\n  authInfo: AuthInfo;\n  initialCreateMnemonic: string;\n  initialRestoreMnemonic: string;\n\n  static defaultState: AuthState = {\n    step: WizardSteps.RESTORE_START,\n    initialCreateMnemonic: bip39.generateMnemonic(MnemonicAdapter.mnemonicStrength),\n    initialRestoreMnemonic: isDev ? (localMnemonic as string) : '',\n    authInfo: observable<AuthInfo>({\n      mnemonic: localMnemonic as string,\n      derivationPath: {\n        label: `m/44'/501'/0'/0'`,\n        value: DERIVATION_PATH.Bip44Change,\n      },\n      password: '',\n    }),\n  };\n\n  constructor(\n    public walletListsViewModel: WalletsListViewModel,\n    private _walletModel: WalletModel,\n  ) {\n    super();\n\n    this.step = AuthViewModel.defaultState.step;\n    this.authInfo = AuthViewModel.defaultState.authInfo;\n    this.initialCreateMnemonic = AuthViewModel.defaultState.initialCreateMnemonic;\n    this.initialRestoreMnemonic = AuthViewModel.defaultState.initialRestoreMnemonic;\n\n    makeObservable(this, {\n      step: observable,\n      authInfo: observable,\n      isRestore: computed,\n      isCreate: computed,\n      showBackButton: computed,\n      seed: computed,\n      connecting: computed,\n      setCreateStart: action.bound,\n      setRestoreStart: action.bound,\n      previousStep: action.bound,\n      nextStep: action.bound,\n      setPassword: action.bound,\n      setDerivationPath: action.bound,\n    });\n  }\n\n  protected override onInitialize(): void {\n    this.walletListsViewModel.initialize();\n\n    this.addReaction(\n      reaction(\n        () => this.authInfo.derivationPath.value,\n        async () => this._fetchWallets(),\n      ),\n    );\n    this.addReaction(\n      when(\n        () => this.step === WizardSteps.RESTORE_ACCOUNTS,\n        async () => this._fetchWallets(),\n      ),\n    );\n  }\n\n  protected override afterReactionsRemoved() {\n    this.walletListsViewModel.end();\n  }\n\n  protected override setDefaults(): void {\n    this.step = AuthViewModel.defaultState.step;\n    this.authInfo = AuthViewModel.defaultState.authInfo;\n    this.initialCreateMnemonic = AuthViewModel.defaultState.initialCreateMnemonic;\n    this.initialRestoreMnemonic = AuthViewModel.defaultState.initialRestoreMnemonic;\n  }\n\n  setCreateStart(): void {\n    this.step = WizardSteps.CREATE_START;\n  }\n\n  setRestoreStart(): void {\n    this.step = WizardSteps.RESTORE_START;\n  }\n\n  nextStep(): void {\n    const currentIdx = this._getCurrent();\n    const list = this._getList();\n\n    switch (true) {\n      case currentIdx === list.length - 1: {\n        this.step = WizardSteps.FINAL;\n        break;\n      }\n      case currentIdx === -1: {\n        this.step = list[0] as WizardSteps;\n        break;\n      }\n      default: {\n        this.step = list[currentIdx + 1] as WizardSteps;\n      }\n    }\n  }\n\n  previousStep(): void {\n    const currentIdx = this._getCurrent();\n    const list = this._getList();\n\n    switch (true) {\n      case currentIdx === 0: {\n        break;\n      }\n      case currentIdx === -1: {\n        this.step = list[0] as WizardSteps;\n        break;\n      }\n      default: {\n        this.step = list[currentIdx - 1] as WizardSteps;\n      }\n    }\n  }\n\n  setPassword(value: string): void {\n    this.authInfo.password = value;\n  }\n\n  async finalize() {\n    const seed = await this.seed;\n\n    const storageInfo = {\n      mnemonic: this.authInfo.mnemonic,\n      password: this.authInfo.password,\n      seed,\n    };\n\n    await this._walletModel.connectAdaptor(MnemonicAdapterName, {\n      type: 'sign',\n      derivationPath: this.authInfo.derivationPath.value,\n      storageInfo,\n    });\n  }\n\n  async connectExtension(adaptorName: string) {\n    await this._walletModel.connectAdaptor(adaptorName);\n  }\n\n  setMnemonic(value: string): void {\n    this.authInfo.mnemonic = value;\n  }\n\n  setDerivationPath(value: DerivationPathOption): void {\n    this.authInfo.derivationPath = value;\n  }\n\n  get seed(): Promise<string> {\n    return mnemonicToSeed(this.authInfo.mnemonic);\n  }\n\n  get isRestore(): boolean {\n    return this.step.startsWith('RESTORE');\n  }\n\n  get isCreate(): boolean {\n    return this.step.startsWith('CREATE');\n  }\n\n  get showBackButton(): boolean {\n    return this.step !== WizardSteps.CREATE_START && this.step !== WizardSteps.RESTORE_START;\n  }\n\n  get connecting(): boolean {\n    return this._walletModel.connecting;\n  }\n\n  private _getList(): Array<WizardSteps> {\n    return this.isCreate ? createList : restoreList;\n  }\n\n  private _getCurrent(): number {\n    const list = this._getList();\n\n    return list.indexOf(this.step);\n  }\n\n  private async _fetchWallets() {\n    this.walletListsViewModel.fetchWallets({\n      seed: await this.seed,\n      derivationPathValue: this.authInfo.derivationPath.value,\n    });\n  }\n}\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { Loader } from 'components/common/Loader';\n\nconst Wrapper = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  background: rgba(255, 255, 255, 0.9);\n`;\n\nconst LoaderStyled = styled(Loader)`\n  width: 64px;\n  height: 64px;\n\n  &::after {\n    width: 88%;\n    height: 88%;\n  }\n`;\n\nconst Logo = styled.div`\n  position: absolute;\n\n  width: 44px;\n  height: 44px;\n\n  background: url('logo-loader.svg') no-repeat 50%;\n  background-size: 44px 44px;\n`;\n\nexport const LoaderWide: FC = () => {\n  return (\n    <Wrapper>\n      <LoaderStyled />\n      <Logo />\n    </Wrapper>\n  );\n};\n","import type { FC, HTMLAttributes } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { Icon } from 'components/ui';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n\n  background: #fff;\n  border: 1px solid #161616;\n  border-radius: 12px;\n  cursor: pointer;\n`;\n\nconst BackIcon = styled(Icon)`\n  width: 12px;\n  height: 12px;\n\n  color: #161616;\n`;\n\nexport const Back: FC<HTMLAttributes<HTMLDivElement>> = ({ onClick, className }) => {\n  return (\n    <Wrapper onClick={onClick} className={className}>\n      <BackIcon name=\"arrow\" />\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { useIsDesktop } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport { LoaderWide } from 'components/common/LoaderWide';\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\n\nimport { AuthViewModel } from '../../Auth.ViewModel';\nimport app from './assets/app.png';\nimport logo from './assets/logo.svg';\nimport { Back } from './Back';\n\nconst Wrapper = styled.div`\n  display: flex;\n  min-height: 100%;\n`;\n\nconst Left = styled.div`\n  position: relative;\n\n  flex: 1;\n  padding: 20px 50px 50px;\n  overflow: hidden;\n\n  background: #f5f7fe;\n`;\n\nconst Logo = styled.div`\n  width: 32px;\n  height: 24px;\n\n  background: url(${logo}) no-repeat 50%;\n`;\n\nconst Title = styled.span`\n  display: inline-block;\n  margin-top: 67px;\n\n  color: #161616;\n  font-size: 32px;\n  font-family: 'GT Super Ds Trial', sans-serif;\n  line-height: 40px;\n`;\n\nconst WalletTitle = styled.span`\n  position: relative;\n\n  color: #161616;\n  font-weight: 700;\n  font-size: 26px;\n  font-family: 'GT Super Ds Trial', sans-serif;\n  line-height: 32px;\n  text-align: center;\n`;\n\nconst BackStyled = styled(Back)`\n  position: absolute;\n  left: 0;\n`;\n\nconst TitleBold = styled.strong`\n  display: block;\n\n  font-weight: 900;\n`;\n\nconst AppImg = styled.img`\n  position: absolute;\n  z-index: 0;\n\n  display: block;\n\n  width: 110%;\n  min-width: 820px;\n  margin-top: 50px;\n\n  filter: drop-shadow(-34px 42px 100px rgba(0, 0, 0, 0.05));\n`;\n\nconst TabButton = styled.button`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  min-width: 180px;\n  height: 50px;\n\n  color: #1616164c;\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 24px;\n  white-space: nowrap;\n  text-align: center;\n  text-decoration: none;\n\n  background: transparent;\n\n  cursor: pointer;\n\n  &.isActive {\n    color: #161616cc;\n\n    &::after {\n      position: absolute;\n      right: 0;\n      bottom: -1px;\n      left: 0;\n\n      height: 1px;\n\n      background: #161616;\n\n      content: '';\n    }\n  }\n`;\n\nconst Navigate = styled.div`\n  display: flex;\n  margin-bottom: 70px;\n\n  border-bottom: 1px solid #16161626;\n`;\n\nconst MenuContainer = styled.div`\n  position: relative;\n  z-index: 1;\n\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  align-items: center;\n\n  padding-bottom: 20px;\n\n  background: #fff;\n`;\n\nconst ContentContainer = styled.div`\n  position: relative;\n\n  display: flex;\n  flex-direction: column;\n\n  width: 360px;\n`;\n\ntype Props = {\n  showNavigation?: boolean;\n};\n\nconst defaultProps = {\n  showNavigation: true,\n};\n\nexport const CommonLayout: FC<Props> = observer(({ showNavigation, children }) => {\n  const isDesktop = useIsDesktop();\n  const viewModel = useViewModel(AuthViewModel);\n\n  const elBanner = isDesktop && (\n    <Left>\n      <Logo />\n      <Title>\n        Your crypto <TitleBold>is starting here</TitleBold>\n      </Title>\n      <AppImg src={app} />\n    </Left>\n  );\n\n  const elNavigation = showNavigation && (\n    <Navigate>\n      <TabButton\n        className={classNames({ isActive: viewModel.isCreate })}\n        onClick={viewModel.setCreateStart}\n      >\n        Create new wallet\n      </TabButton>\n      <TabButton\n        className={classNames({ isActive: viewModel.isRestore })}\n        onClick={viewModel.setRestoreStart}\n      >\n        I already have wallet\n      </TabButton>\n    </Navigate>\n  );\n\n  const elHead = showNavigation && (\n    <WalletTitle>\n      {viewModel.showBackButton && <BackStyled onClick={viewModel.previousStep} />}\n      {viewModel.isCreate ? 'New wallet' : 'Log in to your wallet'}\n    </WalletTitle>\n  );\n\n  return (\n    <Wrapper>\n      {elBanner}\n      <MenuContainer>\n        {elNavigation}\n        <ContentContainer>\n          {elHead}\n          {children}\n        </ContentContainer>\n        {viewModel.connecting && <LoaderWide />}\n      </MenuContainer>\n    </Wrapper>\n  );\n});\n\nCommonLayout.defaultProps = defaultProps;\n","import { styled } from '@linaria/react';\nimport { rgba } from 'polished';\n\nexport const Button = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 54px;\n  padding: 0 15px;\n\n  color: #f9f9f9;\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 18px;\n\n  background: #161616;\n  border: 1px solid transparent;\n  border-radius: 12px;\n  outline: none;\n  cursor: pointer;\n\n  appearance: none;\n\n  &.hollow {\n    color: #161616;\n\n    background: #fff;\n    border: 1px solid ${rgba('#161616', 0.15)};\n  }\n\n  &:disabled {\n    background: #c0c1cb;\n  }\n`;\n","import type { FunctionComponent } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { rgba } from 'polished';\n\nimport { Button } from 'components/ui';\n\nconst Background = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n\n  background: rgba(255, 255, 255, 0.8);\n`;\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 504px;\n\n  overflow: hidden;\n\n  background: #fff;\n  border-radius: 15px;\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);\n`;\n\nconst Header = styled.div`\n  margin: 30px 20px 0;\n\n  color: #161616;\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 24px;\n`;\n\nconst Description = styled.div`\n  margin-top: 12px;\n  padding: 0 20px 24px;\n\n  color: ${rgba('#161616', 0.8)};\n  font-size: 14px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 20px;\n\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n`;\n\nconst Buttons = styled.div`\n  padding: 24px 20px;\n`;\n\nconst ButtonClose = styled(Button)`\n  margin-right: 16px;\n\n  color: #f43d3d;\n\n  border: 1px solid #f43d3d;\n\n  &:disabled {\n    background: #f77;\n    border: none;\n    opacity: 0.5;\n  }\n`;\n\ntype Props = {\n  close: (isSave: boolean) => void;\n};\n\nexport const OffPasswordModal: FunctionComponent<Props> = ({ close }) => {\n  const handleTurnOffClick = () => {\n    close(false);\n  };\n\n  const handleCloseClick = () => {\n    close(true);\n  };\n\n  return (\n    <Background>\n      <Wrapper>\n        <Header>Do you really want to turn off login with password?</Header>\n        <Description>\n          The seed phrase will not be saved on your device in future. On every login youll need to\n          enter your private seed phrase. You can manage this function in settings.\n        </Description>\n        <Buttons>\n          <ButtonClose onClick={handleTurnOffClick}>Yes, turn off</ButtonClose>\n          <Button dark onClick={handleCloseClick}>\n            No, keep login with password\n          </Button>\n        </Buttons>\n      </Wrapper>\n    </Background>\n  );\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\n\nimport LogoImg from 'assets/images/big-logo.png';\nimport { ToastManager } from 'components/common/ToastManager';\nimport { Switch } from 'components/ui';\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\n\nimport { AuthViewModel } from '../../Auth.ViewModel';\nimport { Button } from './Button';\nimport { OffPasswordModal } from './Modal';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  width: 360px;\n  margin-top: 200px;\n`;\n\nconst TopWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Logo = styled.div`\n  width: 64px;\n  height: 64px;\n\n  background: url('${LogoImg}') no-repeat 50% 50%;\n  background-size: 64px 64px;\n`;\n\nconst Title = styled.span`\n  display: inline-block;\n  margin-top: 32px;\n\n  color: #161616;\n  font-weight: bold;\n  font-size: 26px;\n  font-family: 'GT Super Ds Trial', sans-serif;\n  line-height: 32px;\n`;\n\nconst Desc = styled.span`\n  margin-top: 8px;\n\n  color: #161616;\n  font-size: 14px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 18px;\n  text-align: center;\n`;\n\nconst SwitcherLabel = styled.label`\n  display: flex;\n  align-items: center;\n\n  height: 52px;\n  margin: 20px 0 32px;\n  padding: 0 20px;\n\n  background: #f6f6f8;\n  border-radius: 12px;\n\n  cursor: pointer;\n`;\n\nconst SwitcherText = styled.span`\n  margin-left: 20px;\n\n  color: #161616;\n  font-size: 14px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 18px;\n`;\n\nexport const Final: FC = observer(() => {\n  const viewModel = useViewModel(AuthViewModel);\n\n  const [isSave, setIsSave] = useState(true);\n  const [isShowModal, setIsShowModal] = useState(false);\n\n  const handleCloseModal = (nextIsSave: boolean) => {\n    setIsShowModal(false);\n    setIsSave(nextIsSave);\n  };\n\n  const handleIsSaveChange = (nextIsSave: boolean) => {\n    if (nextIsSave) {\n      setIsSave(nextIsSave);\n      return;\n    }\n\n    setIsShowModal(true);\n  };\n\n  const handleFinishClick = () => {\n    try {\n      void viewModel.finalize();\n    } catch (error) {\n      ToastManager.error((error as Error).message);\n    }\n  };\n\n  return (\n    <Wrapper>\n      {isShowModal ? <OffPasswordModal close={handleCloseModal} /> : undefined}\n\n      <TopWrapper>\n        <Logo />\n        <Title>{viewModel.isRestore ? 'Welcome back!' : 'Your wallet is ready!'}</Title>\n        <Desc>\n          You can turn on a quick enter via password. Only you have access to your keys, not the\n          government, not us, not anyone else. Its 100% stored on your devices.\n        </Desc>\n      </TopWrapper>\n      <SwitcherLabel>\n        <Switch checked={isSave} onChange={handleIsSaveChange} />\n        <SwitcherText>Use fast enter with password</SwitcherText>\n      </SwitcherLabel>\n      <Button onClick={handleFinishClick}>Finish setup</Button>\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { Icon } from 'components/ui';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 8px;\n\n  color: #f43d3d;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 24px;\n`;\n\nconst WarningIcon = styled(Icon)`\n  width: 16px;\n  height: 16px;\n  margin-right: 12px;\n\n  color: #f43d3d;\n`;\n\ninterface Props {\n  error: string;\n  noIcon?: boolean;\n}\n\nexport const ErrorHint: FC<Props> = ({ error, noIcon }) => {\n  return (\n    <Wrapper>\n      {!noIcon ? <WarningIcon name=\"warning\" /> : undefined}\n      {error}\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\n\nconst WrapperLabel = styled.label`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  height: 54px;\n  padding: 0 15px;\n\n  border: 1px solid ${theme.colors.stroke.primary};\n  border-radius: 12px;\n  cursor: text;\n\n  &.isFocused {\n    background: ${theme.colors.bg.primary};\n    border-color: ${theme.colors.textIcon.active};\n    caret-color: ${theme.colors.textIcon.active};\n  }\n\n  &.isError {\n    border-color: ${theme.colors.system.errorMain};\n  }\n`;\n\nconst Input = styled.input`\n  flex: 1;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Inter', sans-serif;\n  line-height: 22px;\n\n  background: transparent;\n  border: 0;\n  outline: none;\n\n  appearance: none;\n\n  &::placeholder {\n    color: ${theme.colors.textIcon.tertiary};\n\n    font-weight: 500;\n    font-size: 16px;\n    font-family: 'Inter', sans-serif;\n    font-style: normal;\n    line-height: 140%;\n  }\n`;\n\nconst EyeWrapper = styled.div`\n  cursor: pointer;\n`;\n\nconst EyeIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.buttonSecondary};\n`;\n\nconst REGEX_PASSWORD = /[^\\w!\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~-]+/g;\n\ntype Props = {\n  onChange: (password: string) => void;\n  isError: boolean;\n};\n\nexport const PasswordInput: FC<\n  Props & Omit<React.InputHTMLAttributes<HTMLInputElement>, 'type' | 'onChange'>\n> = ({ onChange, onFocus, onBlur, className, isError, ...props }) => {\n  const [isShowPassword, setIsShowPassword] = useState(false);\n  const [isFocused, setIsFocused] = useState(false);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(REGEX_PASSWORD, '');\n    onChange(value);\n  };\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    setIsFocused(true);\n\n    if (onFocus) {\n      onFocus(e);\n    }\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    setIsFocused(false);\n\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n\n  const handleToggleShowPassword = () => {\n    setIsShowPassword((state) => !state);\n  };\n\n  return (\n    <WrapperLabel className={classNames(className, { isFocused, isError })}>\n      <Input\n        type={isShowPassword ? 'input' : 'password'}\n        {...props}\n        placeholder={'Password'}\n        onChange={handleChange}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n      />\n      <EyeWrapper onClick={handleToggleShowPassword}>\n        <EyeIcon name={isShowPassword ? 'eye' : 'eye-hide'} />\n      </EyeWrapper>\n    </WrapperLabel>\n  );\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport { ErrorHint } from 'components/common/ErrorHint';\nimport { PasswordInput } from 'components/common/PasswordInput';\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\n\nimport { AuthViewModel } from '../../Auth.ViewModel';\nimport { validatePassword } from '../../utils';\nimport { Button } from './Button';\n\n// @TODO rewrite all hex colors to palette\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  margin-top: 32px;\n`;\n\nconst SubTitle = styled.span`\n  color: #161616;\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 24px;\n`;\n\nconst CreatePassword = styled(SubTitle)`\n  margin-bottom: 8px;\n`;\n\nconst CreatePasswordHint = styled.span`\n  margin-bottom: 20px;\n\n  color: #161616;\n  font-size: 14px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 18px;\n`;\n\nconst RulesWrapper = styled.div``;\n\nconst StepsWrappers = styled.div`\n  display: flex;\n  margin: 12px 0;\n`;\n\nconst Step = styled.div`\n  flex: 1;\n  height: 3px;\n\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 2px;\n\n  &.red {\n    background: #f43d3d;\n    opacity: 0.8;\n  }\n\n  &.orange {\n    background: #ffa631;\n    opacity: 0.8;\n  }\n\n  &.green {\n    background: #77db7c;\n    opacity: 0.8;\n  }\n\n  &.blue {\n    background: #5887ff;\n  }\n\n  &:not(:last-child) {\n    margin-right: 8px;\n  }\n`;\n\nconst RulesList = styled.ul`\n  margin: 0;\n  padding-left: 22px;\n`;\n\nconst Rule = styled.li`\n  color: #161616;\n  font-size: 14px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 18px;\n\n  opacity: 0.3;\n\n  &.done {\n    text-decoration: line-through;\n  }\n\n  &:not(:last-child) {\n    margin-bottom: 12px;\n  }\n`;\n\nconst RepeatPassword = styled(SubTitle)`\n  margin: 20px 0 12px;\n`;\n\nconst ButtonStyled = styled(Button)`\n  margin-top: 32px;\n`;\n\nexport const Password: FC = observer(() => {\n  const viewModel = useViewModel(AuthViewModel);\n  const [passwordRepeat, setPasswordRepeat] = useState('');\n  const [hasPasswordRepeatError, setHasPasswordRepeatError] = useState(false);\n\n  const { isLowerCase, isUpperCase, isNumber, isMinLength } = validatePassword(\n    viewModel.authInfo.password,\n  );\n\n  const handlePasswordRepeatChange = (value: string) => {\n    setPasswordRepeat(value);\n\n    if (hasPasswordRepeatError) {\n      setHasPasswordRepeatError(viewModel.authInfo.password !== value);\n    }\n  };\n\n  const handlePasswordRepeatBlur = () => {\n    setHasPasswordRepeatError(viewModel.authInfo.password !== passwordRepeat);\n  };\n\n  const elRules = () => {\n    if (!viewModel.authInfo.password) {\n      return;\n    }\n\n    const counter = [isLowerCase, isUpperCase, isNumber, isMinLength].reduce(\n      (prev, curr) => (curr ? prev + 1 : prev),\n      0,\n    );\n\n    return (\n      <RulesWrapper>\n        <StepsWrappers>\n          {new Array(counter).fill(null).map((_, index) => {\n            return (\n              <Step\n                key={index}\n                className={classNames({\n                  red: counter === 1,\n                  orange: counter === 2,\n                  green: counter === 3,\n                  blue: counter === 4,\n                })}\n              />\n            );\n          })}\n          {new Array(4 - counter).fill(null).map((_, index) => (\n            <Step key={index} />\n          ))}\n        </StepsWrappers>\n        <RulesList>\n          <Rule className={classNames({ done: isUpperCase })}>One uppercase letter</Rule>\n          <Rule className={classNames({ done: isLowerCase })}>One lowercase letter</Rule>\n          <Rule className={classNames({ done: isNumber })}>One number</Rule>\n          <Rule className={classNames({ done: isMinLength })}>8+ characters</Rule>\n        </RulesList>\n      </RulesWrapper>\n    );\n  };\n\n  const disabled =\n    !viewModel.authInfo.password ||\n    !isLowerCase ||\n    !isUpperCase ||\n    !isNumber ||\n    !isMinLength ||\n    viewModel.authInfo.password !== passwordRepeat;\n\n  return (\n    <Wrapper>\n      <CreatePassword>Create password</CreatePassword>\n      <CreatePasswordHint>\n        Create a password to protect your wallet. It will be used for security actions,\n        confirmations and for editing your profile info.\n      </CreatePasswordHint>\n      <PasswordInput\n        placeholder=\"Create new password\"\n        value={viewModel.authInfo.password}\n        onChange={viewModel.setPassword}\n        isError={false}\n      />\n      {elRules()}\n      <RepeatPassword>Repeat password</RepeatPassword>\n      <PasswordInput\n        placeholder=\"Repeat new password\"\n        value={passwordRepeat}\n        onChange={handlePasswordRepeatChange}\n        onBlur={handlePasswordRepeatBlur}\n        className={classNames({ error: hasPasswordRepeatError })}\n        isError={false}\n      />\n      {hasPasswordRepeatError ? <ErrorHint error=\"Passwords doesnt match\" /> : undefined}\n      <ButtonStyled disabled={disabled} onClick={viewModel.nextStep}>\n        Continue\n      </ButtonStyled>\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\nimport { useState } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport { ErrorHint } from 'components/common/ErrorHint';\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\n\nimport { AuthViewModel } from '../../Auth.ViewModel';\nimport { Button } from '../components/Button';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst PasteMnemonic = styled.span`\n  margin: 32px 0 8px;\n\n  color: #161616;\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 24px;\n`;\n\nconst PasteMnemonicHint = styled.span`\n  color: #161616;\n  font-size: 14px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 18px;\n`;\n\nconst MnemonicWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: 20px 0 32px;\n`;\n\nconst MnemonicTextarea = styled.textarea`\n  position: relative;\n\n  width: 100%;\n  height: 100%;\n  min-height: 130px;\n  padding: 15px;\n\n  color: #161616;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 24px;\n\n  background: #f6f6f8;\n  border: 1px solid transparent;\n  border-radius: 12px;\n  outline: 0;\n\n  &:focus {\n    background: #fff;\n    border-color: #5887ff;\n  }\n\n  &::placeholder {\n    color: #1616164c;\n  }\n\n  &.hasError {\n    border-color: #f43d3d;\n  }\n`;\n\nexport const ConfirmMnemonic: FC = observer(() => {\n  const viewModel = useViewModel(AuthViewModel);\n  const [userMnemonic, setUserMnemonic] = useState('');\n  const [hasError, setHasError] = useState(false);\n\n  const validateMnemonic = (value: string) => {\n    setHasError(value !== viewModel.authInfo.mnemonic);\n  };\n\n  const handleMnemonicInput = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setUserMnemonic(e.target.value);\n\n    validateMnemonic(e.target.value.trim());\n  };\n\n  const handleMnemonicBlur = (e: React.FocusEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value.trim();\n    setUserMnemonic(value);\n    validateMnemonic(value);\n  };\n\n  const isNextDisabled = userMnemonic.trim() !== viewModel.authInfo.mnemonic || hasError;\n\n  return (\n    <Wrapper>\n      <PasteMnemonic>Paste your seed phrase</PasteMnemonic>\n      <PasteMnemonicHint>\n        Paste or enter your seed phrase to confirm that youve stored it safely. If you lose it you\n        will lost access to your wallet.\n      </PasteMnemonicHint>\n      <MnemonicWrapper>\n        <MnemonicTextarea\n          placeholder=\"Seed phrase\"\n          value={userMnemonic}\n          onInput={handleMnemonicInput}\n          onBlur={handleMnemonicBlur}\n          className={classNames({ hasError })}\n        />\n        {hasError ? <ErrorHint error=\"Incorrect seed phrase\" /> : undefined}\n      </MnemonicWrapper>\n      <Button disabled={isNextDisabled} onClick={viewModel.nextStep}>\n        Continue\n      </Button>\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nconst WrapperLabel = styled.label`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n\n  color: #161616;\n  font-weight: 500;\n  font-size: 14px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 18px;\n\n  cursor: pointer;\n`;\n\nconst Input = styled.input`\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  width: 20px;\n  height: 20px;\n\n  opacity: 0;\n\n  appearance: none;\n\n  &:disabled {\n    cursor: not-allowed;\n  }\n`;\n\nconst CheckboxIcon = styled.div`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 20px;\n  height: 20px;\n  margin-right: 10px;\n\n  background: url('./assets/checkbox.svg') no-repeat 50%;\n\n  &.checked {\n    &::before {\n      position: absolute;\n\n      width: 16px;\n      height: 16px;\n\n      background: url('./assets/checkmark.svg') no-repeat 50%;\n\n      content: '';\n    }\n  }\n`;\n\ntype Props = {\n  checked: boolean;\n  label: string;\n  onChange: (checked: boolean) => void;\n};\n\nexport const Checkbox: FC<Props> = ({ checked, label, onChange }) => {\n  return (\n    <WrapperLabel>\n      <Input type=\"checkbox\" checked={checked} onChange={(e) => onChange(e.target.checked)} />\n      <CheckboxIcon className={classNames({ checked })} />\n      {label}\n    </WrapperLabel>\n  );\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { observer } from 'mobx-react-lite';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\n\nimport { AuthViewModel } from '../../Auth.ViewModel';\nimport { Button } from '../components/Button';\nimport { Checkbox } from '../components/Checkbox';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst PleaseText = styled.span`\n  position: relative;\n\n  margin: 42px 0 48px;\n\n  font-size: 14px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 18px;\n  text-align: center;\n\n  background-image: linear-gradient(180deg, #ff7438 0%, #7636ff 100%);\n\n  /* Use the text as a mask for the background.\n  This will show the gradient as a text color rather than element bg. */\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  -webkit-box-decoration-break: clone;\n  opacity: 0.8;\n\n  &::before {\n    position: absolute;\n    top: -28px;\n    left: -32px;\n\n    width: 421px;\n    height: 98px;\n\n    background: url('../components/assets/circle.svg') no-repeat 50%;\n\n    content: '';\n  }\n`;\n\nconst SecurityKey = styled.span`\n  margin-bottom: 12px;\n\n  color: #161616;\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 24px;\n`;\n\nconst SecurityKeyHint = styled.span`\n  margin-bottom: 20px;\n\n  color: #161616;\n  font-size: 14px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 18px;\n`;\n\nconst MnemonicWrapper = styled.div`\n  position: relative;\n\n  &::before {\n    position: absolute;\n    top: -148px;\n    right: -40px;\n\n    width: 47px;\n    height: 147px;\n\n    background: url('../components/assets/line-seed.svg') no-repeat 50%;\n\n    content: '';\n  }\n`;\n\nexport const MnemonicTextarea = styled.textarea`\n  position: relative;\n\n  flex-shrink: 0;\n  width: 100%;\n  height: 100%;\n  min-height: 125px;\n  padding: 15px;\n\n  color: #161616;\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 24px;\n\n  background-image: linear-gradient(white, white), linear-gradient(180deg, #ff7438 0%, #7636ff 100%);\n  background-clip: padding-box, border-box;\n  background-origin: border-box;\n  border: solid 2px transparent;\n  border-radius: 12px;\n  outline: 0;\n  filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.1));\n\n  resize: none;\n\n  &::placeholder {\n    color: #1616164c;\n  }\n`;\n\nconst CheckboxWrapper = styled.div`\n  position: relative;\n\n  margin: 34px 0 26px;\n\n  &::before {\n    position: absolute;\n    top: -35px;\n    left: -17px;\n\n    width: 16px;\n    height: 39px;\n\n    background: url('../components/assets/line-saved.svg') no-repeat 50%;\n\n    content: '';\n  }\n`;\n\nexport const Mnemonic: FC = observer(() => {\n  const [checked, setChecked] = useState(false);\n  const viewModel = useViewModel(AuthViewModel);\n\n  const handleCheckChange = (nextChecked: boolean) => {\n    setChecked(nextChecked);\n  };\n\n  const nextStep = () => {\n    viewModel.setMnemonic(viewModel.initialCreateMnemonic);\n    viewModel.nextStep();\n  };\n\n  return (\n    <Wrapper>\n      <PleaseText>\n        Please write down the following twelve words <br /> and keep them in a safe place.\n      </PleaseText>\n      <SecurityKey>Your security key</SecurityKey>\n      <SecurityKeyHint>\n        Your private keys are only stored on your current computer or device. You will need these\n        words to restore your wallet if your browsers storage is cleared or your device is damaged\n        or lost.\n      </SecurityKeyHint>\n      <MnemonicWrapper>\n        <MnemonicTextarea\n          placeholder=\"Seed phrase\"\n          value={viewModel.initialCreateMnemonic}\n          readOnly\n        />\n      </MnemonicWrapper>\n      <CheckboxWrapper>\n        <Checkbox\n          checked={checked}\n          label=\"I have saved these words in a safe place.\"\n          onChange={handleCheckChange}\n        />\n      </CheckboxWrapper>\n      <Button disabled={!checked} onClick={nextStep}>\n        Continue\n      </Button>\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\nimport { useState } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport type { WalletName } from '@solana/wallet-adapter-base';\nimport { PhantomWalletName } from '@solana/wallet-adapter-phantom';\nimport { SolletExtensionWalletName, SolletWalletName } from '@solana/wallet-adapter-sollet';\nimport * as bip39 from 'bip39';\nimport classNames from 'classnames';\nimport throttle from 'lodash.throttle';\nimport { observer } from 'mobx-react-lite';\n\nimport { ErrorHint } from 'components/common/ErrorHint';\nimport { ToastManager } from 'components/common/ToastManager';\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { AuthViewModel } from 'new/scenes/Main/Auth/Auth.ViewModel';\n\nimport { Button } from '../components/Button';\nimport { MnemonicTextarea as MnemonicInput } from '../Create/MnemonicInput';\n\nconst Wrapper = styled.div`\n  margin-top: 32px;\n`;\n\nconst ButtonsWrapper = styled.div``;\n\nconst SocialButton = styled.button`\n  display: flex;\n  align-items: center;\n\n  width: 100%;\n  height: 54px;\n  padding: 0 16px 0 24px;\n\n  color: #161616;\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 18px;\n\n  background: #fff;\n  border: 1px solid rgba(22, 22, 22, 0.15);\n  border-radius: 32px;\n  outline: none;\n  cursor: pointer;\n\n  appearance: none;\n\n  &:not(:last-child) {\n    margin-bottom: 12px;\n  }\n`;\n\nconst WalletIcon = styled.div`\n  width: 30px;\n  height: 30px;\n  margin-right: 16px;\n\n  &.sollet {\n    background: url('../components/assets/sollet.svg') no-repeat 50%;\n  }\n\n  &.phantom {\n    background: url('../components/assets/phantom.png') no-repeat 50%;\n  }\n`;\n\nconst ArrowIcon = styled.div`\n  flex: 1;\n  width: 20px;\n  height: 20px;\n\n  background: url('../components/assets/arrow-right.svg') no-repeat 100% 50%;\n  opacity: 0.15;\n`;\n\nconst Delimiter = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 22px;\n  margin: 32px 0;\n\n  &::before {\n    position: absolute;\n\n    width: 100%;\n    height: 1px;\n\n    background: #161616;\n    opacity: 0.15;\n\n    content: '';\n  }\n`;\n\nconst DelimiterText = styled.div`\n  z-index: 1;\n\n  padding: 0 10px;\n\n  color: #161616;\n  font-weight: 500;\n  font-size: 14px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 20px;\n\n  background: #fff;\n`;\n\nconst SecurityWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  margin-bottom: 32px;\n`;\n\nconst SecurityKey = styled.span`\n  margin-bottom: 8px;\n\n  color: #161616;\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 24px;\n`;\n\nconst MnemonicTextarea = styled(MnemonicInput)`\n  height: 132px;\n  &.hasError {\n    border-color: #f43d3d;\n  }\n`;\n\nconst VALIDATE_MNEMONIC_THROTTLE_TIMEOUTE = 100;\n\nexport const RestoreOptions: FC = observer(() => {\n  const viewModel = useViewModel(AuthViewModel);\n  const [mnemonic, setMnemonic] = useState(viewModel.initialRestoreMnemonic);\n  const [hasError, setHasError] = useState(false);\n  const handleConnectByClick = (extensionName: WalletName) => () => {\n    try {\n      void viewModel.connectExtension(extensionName);\n    } catch (error) {\n      ToastManager.error((error as Error).message);\n    }\n  };\n\n  const validateMnemonic = throttle(\n    (nextMnemonic) => {\n      if (bip39.validateMnemonic(nextMnemonic)) {\n        setHasError(false);\n      } else if (!hasError) {\n        setHasError(true);\n      }\n    },\n    VALIDATE_MNEMONIC_THROTTLE_TIMEOUTE,\n    { leading: false, trailing: true },\n  );\n\n  const handleMnemonicInput = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const { value } = e.target;\n    const valueTrimmed = value.trim();\n\n    if (bip39.validateMnemonic(valueTrimmed)) {\n      setMnemonic(valueTrimmed);\n    } else {\n      setMnemonic(value);\n    }\n    validateMnemonic(valueTrimmed);\n  };\n\n  const handleMnemonicBlur = (e: React.FocusEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value.trim();\n    setMnemonic(value);\n    validateMnemonic(value);\n  };\n\n  const isDisabled = !mnemonic || hasError;\n\n  const goNext = () => {\n    viewModel.setMnemonic(mnemonic);\n    viewModel.nextStep();\n  };\n\n  return (\n    <Wrapper>\n      <ButtonsWrapper>\n        <SocialButton onClick={handleConnectByClick(SolletWalletName)}>\n          <WalletIcon className=\"sollet\" />\n          Sollet.io\n          <ArrowIcon />\n        </SocialButton>\n        <SocialButton onClick={handleConnectByClick(SolletExtensionWalletName)}>\n          <WalletIcon className=\"sollet\" />\n          Sollet Extension\n          <ArrowIcon />\n        </SocialButton>\n        <SocialButton onClick={handleConnectByClick(PhantomWalletName)}>\n          <WalletIcon className=\"phantom\" />\n          Phantom\n          <ArrowIcon />\n        </SocialButton>\n      </ButtonsWrapper>\n      <Delimiter>\n        <DelimiterText>Or use your seed...</DelimiterText>\n      </Delimiter>\n      <SecurityWrapper>\n        <SecurityKey>Enter security key</SecurityKey>\n        <MnemonicTextarea\n          placeholder=\"Seed phrase\"\n          value={mnemonic}\n          onInput={handleMnemonicInput}\n          onBlur={handleMnemonicBlur}\n          className={classNames({ hasError })}\n        />\n        {hasError ? <ErrorHint error=\"Incorrect seed phrase\" /> : undefined}\n      </SecurityWrapper>\n      <Button disabled={isDisabled} onClick={goNext}>\n        Continue\n      </Button>\n    </Wrapper>\n  );\n});\n","import type { FC } from 'react';\nimport { useHistory } from 'react-router';\nimport { useLocation } from 'react-router-dom';\n\nimport { observer } from 'mobx-react-lite';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { AuthViewModel } from 'new/scenes/Main/Auth/Auth.ViewModel';\n\nimport type { ViewMap } from '../typings';\nimport { WizardSteps } from '../typings';\nimport { CommonLayout } from './components/CommonLayout';\nimport { Final } from './components/Final';\nimport { Password } from './components/Password';\nimport { ConfirmMnemonic } from './Create/ConfirmMnemonic';\nimport { Mnemonic } from './Create/MnemonicInput';\nimport { DerivableAccounts } from './Restore/DerivableAccounts';\nimport { RestoreOptions } from './Restore/RestoreOptions';\n\nexport const Wizard: FC = observer(() => {\n  const location = useLocation();\n  const history = useHistory();\n  const viewModel = useViewModel(AuthViewModel);\n\n  // @FIXME remove and replace with react-router\n  if (location.search === '?restore') {\n    viewModel.setRestoreStart();\n    history.replace({});\n  }\n\n  if (location.search === '?create') {\n    viewModel.setCreateStart();\n    history.replace({});\n  }\n\n  const VIEW_MAP: ViewMap = {\n    [WizardSteps.CREATE_START]: (\n      <CommonLayout>\n        <Mnemonic />\n      </CommonLayout>\n    ),\n    [WizardSteps.CREATE_CONFIRM_MNEMONIC]: (\n      <CommonLayout>\n        <ConfirmMnemonic />\n      </CommonLayout>\n    ),\n    [WizardSteps.CREATE_SET_PASSWORD]: (\n      <CommonLayout>\n        <Password />\n      </CommonLayout>\n    ),\n    [WizardSteps.RESTORE_START]: (\n      <CommonLayout>\n        <RestoreOptions />\n      </CommonLayout>\n    ),\n    [WizardSteps.RESTORE_PASSWORD]: (\n      <CommonLayout>\n        <Password />\n      </CommonLayout>\n    ),\n    [WizardSteps.RESTORE_ACCOUNTS]: (\n      <CommonLayout>\n        <DerivableAccounts />\n      </CommonLayout>\n    ),\n    [WizardSteps.FINAL]: (\n      <CommonLayout showNavigation={false}>\n        <Final />\n      </CommonLayout>\n    ),\n  };\n\n  const elView = VIEW_MAP[viewModel.step];\n\n  return elView;\n});\n\nexport default Wizard;\n","import type { FC } from 'react';\n\nimport { observer } from 'mobx-react-lite';\n\nimport { Wizard } from './Subviews/Wizard';\n\nexport const Auth: FC = observer(() => {\n  return <Wizard />;\n});\n","import { useEffect, useState } from 'react';\n\nconst breakpoints: { [type: string]: number } = {\n  widedesktop: 1440,\n  desktop: 1440,\n  tablet: 1024,\n  mobileLandscape: 568,\n  mobile: 320,\n};\n\nexport const between = (breakStart: string, breakEnd: string) =>\n  `@media (min-width: ${breakpoints[breakStart]}) and (max-width: ${breakpoints[breakEnd]})`;\n\nexport const down = {\n  mobileLandscape: `@media (max-width: ${breakpoints.mobileLandscape}px)`,\n  mobile: `@media (max-width: ${breakpoints.mobile}px)`,\n};\n\nexport const up = {\n  widedesktop: `@media (min-width: ${breakpoints.widedesktop}px)`,\n  desktop: `@media (min-width: ${breakpoints.desktop}px)`,\n  tablet: `@media (min-width: ${breakpoints.tablet}px)`,\n  mobileLandscape: `@media (min-width: ${breakpoints.mobileLandscape}px)`,\n};\n\n// based on https://github.com/mg901/styled-breakpoints/blob/master/hooks/use-breakpoint.js\nexport const useBreakpoint = (breakpoint: string) => {\n  // Get the media query to match\n  const query = breakpoint.replace(/^@media\\s*/, '');\n  const [isBreak, setIsBreak] = useState<boolean | null>(null);\n\n  useEffect(() => {\n    const mq = window.matchMedia(query);\n    const handleChange = (event: MediaQueryListEvent) => {\n      setIsBreak(event.matches);\n    };\n\n    setIsBreak(mq.matches);\n\n    // Safari < 14 can't use addEventListener on a MediaQueryList\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList#Browser_compatibility\n    if (!mq.addEventListener) {\n      // Update the state whenever the media query match state changes\n      mq.addListener(handleChange);\n\n      // Clean up on unmount and if the query changes\n      return () => {\n        mq.removeListener(handleChange);\n      };\n    }\n    mq.addEventListener('change', handleChange);\n\n    return () => {\n      mq.removeEventListener('change', handleChange);\n    };\n  }, [query]);\n\n  return isBreak;\n};\n","import type { FC } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { styled } from '@linaria/react';\n\nimport { up, useBreakpoint } from 'components/pages/landing/styles/breakpoints';\n\nconst Wrapper = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 30;\n\n  width: 100vw;\n  height: 100vh;\n`;\n\nconst DrawerBg = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 2;\n\n  background: rgba(0, 0, 0, 0.5);\n  cursor: pointer;\n`;\n\nconst CloseIcon = styled.div`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n\n  width: 44px;\n  height: 44px;\n\n  background: url('./close.svg') no-repeat 50%;\n  background-size: 22px 22px;\n`;\n\nconst DrawerMenu = styled.div`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 2;\n\n  display: flex;\n  flex-direction: column;\n  width: 66.6%;\n  overflow-y: auto;\n\n  background: #161616;\n`;\n\nconst Logo = styled.div`\n  margin: 15px 0 32px 24px;\n\n  color: #fff;\n  font-size: 24px;\n  font-family: 'GT Super Txt Trial', sans-serif;\n  line-height: 140%;\n`;\n\nconst MenuLink = styled(Link)`\n  min-width: 250px;\n  padding: 24px 18px;\n\n  color: #f9f9f9;\n  font-size: 20px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 140%;\n  text-decoration: none;\n\n  &.green {\n    color: #bcff4e;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.05);\n  }\n`;\n\ntype Props = {\n  isOpen: boolean;\n  onDrawerClose: () => void;\n};\n\nexport const Drawer: FC<Props> = ({ isOpen, onDrawerClose }) => {\n  const isDesktop = useBreakpoint(up.desktop);\n\n  if (isDesktop || !isOpen) {\n    return null;\n  }\n\n  const handleCloseClick = () => {\n    onDrawerClose();\n  };\n\n  return (\n    <>\n      <Wrapper>\n        <DrawerBg onClick={handleCloseClick}>\n          <CloseIcon />\n        </DrawerBg>\n        <DrawerMenu>\n          <Logo>Wallet</Logo>\n          <MenuLink to=\"/onboard\">I have a wallet</MenuLink>\n          <MenuLink to=\"/onboard\" className=\"green\">\n            Create new wallet\n          </MenuLink>\n        </DrawerMenu>\n      </Wrapper>\n    </>\n  );\n};\n","import type { FC, HTMLAttributes } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nimport { appStorePath, playStorePath } from 'config/constants';\n\nexport const ButtonLink = styled(Link)`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 226px;\n  height: 61px;\n  padding: 0 24px;\n\n  color: #000;\n  font-weight: 500;\n  font-size: 18px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 140%;\n  text-decoration: none;\n\n  background-color: #fff;\n  border-radius: 32px;\n  cursor: pointer;\n\n  transition: background-color 0.1s;\n\n  &:hover {\n    background-color: #71e6ff;\n  }\n\n  &.green {\n    background-color: #bcff4e;\n\n    &:hover {\n      background-color: #e3ff74;\n    }\n  }\n\n  &.glow {\n    &::before {\n      position: absolute;\n      right: 10px;\n      bottom: 0;\n      left: 10px;\n\n      height: 50px;\n\n      background: linear-gradient(90deg, #fff 0%, #fff 100%);\n      border-radius: 32px;\n      opacity: 0.3;\n      filter: blur(30px);\n\n      content: '';\n    }\n\n    &.green {\n      /* stylelint-disable-next-line max-nesting-depth */\n      &::before {\n        background: linear-gradient(90deg, #bcff4e 0%, #bcff4e 100%);\n      }\n    }\n  }\n`;\n\nexport const ButtonA = styled.a`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 226px;\n  height: 61px;\n  padding: 0 24px;\n\n  color: #000;\n  font-weight: 500;\n  font-size: 18px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 140%;\n  text-decoration: none;\n\n  background-color: #fff;\n  border-radius: 32px;\n  cursor: pointer;\n\n  transition: background-color 0.1s;\n\n  &:hover {\n    background-color: #71e6ff;\n  }\n\n  &.green {\n    background-color: #bcff4e;\n\n    &:hover {\n      background-color: #e3ff74;\n    }\n  }\n\n  &.glow {\n    &::before {\n      position: absolute;\n      right: 10px;\n      bottom: 0;\n      left: 10px;\n\n      height: 50px;\n\n      background: linear-gradient(90deg, #fff 0%, #fff 100%);\n      border-radius: 32px;\n      opacity: 0.3;\n      filter: blur(30px);\n\n      content: '';\n    }\n\n    &.green {\n      /* stylelint-disable-next-line max-nesting-depth */\n      &::before {\n        background: linear-gradient(90deg, #bcff4e 0%, #bcff4e 100%);\n      }\n    }\n  }\n`;\n\nconst Text = styled.div`\n  &.web,\n  &.ios {\n    padding-left: 33px;\n\n    background-repeat: no-repeat;\n    background-position: 0 50%;\n    background-size: 25px;\n  }\n\n  &.web {\n    background-image: url('./web.png');\n  }\n\n  &.ios {\n    background-image: url('./ios.png');\n  }\n`;\n\ntype ButtonProps = {\n  glow?: boolean;\n  green?: boolean;\n};\n\nexport const ButtonWeb: FC<ButtonProps & HTMLAttributes<HTMLElement>> = ({\n  glow,\n  green,\n  className,\n  ...props\n}) => {\n  return (\n    <ButtonLink to=\"/signup\" className={classNames(className, { glow, green })} {...props}>\n      <Text className=\"web\">Go to web wallet</Text>\n    </ButtonLink>\n  );\n};\n\nexport const ButtonIOS: FC<ButtonProps & HTMLAttributes<HTMLElement>> = ({\n  glow,\n  className,\n  ...props\n}) => {\n  return (\n    <ButtonA\n      href={appStorePath}\n      target=\"_blank\"\n      className={classNames(className, { glow, green: true })}\n      {...props}\n    >\n      <Text className=\"ios\">Download for iOS</Text>\n    </ButtonA>\n  );\n};\n\nexport const ButtonAndroid: FC<ButtonProps & HTMLAttributes<HTMLElement>> = ({\n  glow,\n  className,\n  ...props\n}) => {\n  return (\n    <ButtonA\n      href={playStorePath}\n      target=\"_blank\"\n      className={classNames(className, { glow, green: true })}\n      {...props}\n    >\n      <Text className=\"android\">Download for Android</Text>\n    </ButtonA>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { ButtonIOS, ButtonWeb } from 'components/pages/landing/common/Button/Button';\nimport { trackEvent } from 'utils/analytics';\n\nimport { up, useBreakpoint } from '../styles/breakpoints';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 80px;\n  margin-bottom: 137px;\n\n  ${up.mobileLandscape} {\n    margin-top: 130px;\n    margin-bottom: 134px;\n  }\n\n  ${up.tablet} {\n    margin-top: 120px;\n    margin-bottom: 152px;\n  }\n\n  ${up.desktop} {\n    margin-top: 223px;\n    margin-bottom: 126px;\n  }\n`;\n\nconst Title = styled.div`\n  max-width: 295px;\n\n  color: #f9f9f9;\n  font-weight: 900;\n  font-size: 32px;\n  font-family: 'GT Super Ds Trial', sans-serif;\n  line-height: 44px;\n  text-align: center;\n\n  ${up.mobileLandscape} {\n    max-width: 488px;\n\n    font-size: 48px;\n    line-height: 64px;\n  }\n\n  ${up.tablet} {\n    max-width: 864px;\n\n    font-size: 48px;\n    line-height: 64px;\n  }\n\n  ${up.desktop} {\n    max-width: 933px;\n\n    font-size: 56px;\n    line-height: 64px;\n  }\n`;\n\nconst GradientWrapper = styled.div`\n  max-width: 335px;\n  margin: 56px 20px 0;\n  padding: 2px;\n\n  background: linear-gradient(125deg, #fff738 0%, #36f3ff 50%, #1f50ff 100%);\n  border-radius: 16px;\n\n  ${up.mobileLandscape} {\n    max-width: 488px;\n    margin-top: 44px;\n  }\n\n  ${up.tablet} {\n    max-width: 864px;\n    margin-top: 72px;\n  }\n\n  ${up.desktop} {\n    max-width: 1068px;\n    margin-top: 109px;\n  }\n`;\n\nconst FeaturesWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 40px 20px 48px;\n\n  background: #161616;\n  border-radius: 16px;\n\n  ${up.mobileLandscape} {\n    padding: 50px;\n  }\n\n  ${up.tablet} {\n    flex-direction: row;\n    padding: 56px 34px 72px 44px;\n  }\n\n  ${up.desktop} {\n    padding: 64px 98px 64px;\n  }\n`;\n\nconst FeaturesColumn = styled.div`\n  flex: 1;\n  margin-bottom: 32px;\n\n  ${up.tablet} {\n    &:not(:last-child) {\n      margin-right: 78px;\n    }\n    margin-bottom: 0;\n  }\n\n  ${up.desktop} {\n    &:not(:last-child) {\n      margin-right: 164px;\n    }\n  }\n`;\n\nconst Feature = styled.div`\n  &:not(:last-child) {\n    margin-bottom: 32px;\n  }\n`;\n\nconst FeatureTitle = styled.div`\n  color: #f9f9f9;\n  font-size: 20px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 26px;\n\n  ${up.mobileLandscape} {\n    font-size: 28px;\n    line-height: 32px;\n  }\n\n  ${up.tablet} {\n    font-size: 24px;\n    line-height: 26px;\n  }\n`;\n\nconst FeatureDescription = styled.div`\n  margin-top: 16px;\n\n  color: #f9f9f9;\n  font-size: 18px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 24px;\n\n  opacity: 0.5;\n\n  ${up.mobileLandscape} {\n    font-size: 16px;\n  }\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 40px;\n\n  ${up.tablet} {\n    align-items: flex-start;\n    margin-top: 60px;\n  }\n\n  & > :not(:last-child) {\n    margin-bottom: 20px;\n  }\n`;\n\nexport const Features: FC = () => {\n  const isTablet = useBreakpoint(up.tablet);\n\n  return (\n    <Wrapper>\n      <Title>Store, receive, transfer your money with all those great features</Title>\n      <GradientWrapper>\n        <FeaturesWrapper>\n          <FeaturesColumn>\n            <Feature>\n              <FeatureTitle>Its cross-platform</FeatureTitle>\n              <FeatureDescription>\n                You can use your P2P Wallet everywhere. iOs, Web, Android (soon). Yes, yes, we know,\n                it shouldnt be a feature, but the market shows different...\n              </FeatureDescription>\n            </Feature>\n            <Feature>\n              <FeatureTitle>Its protected</FeatureTitle>\n              <FeatureDescription>\n                Your device  your keys. We dont have any access to your private info. Use\n                fingerprint or face scanning to access your wallet.\n              </FeatureDescription>\n            </Feature>\n            <Feature>\n              <FeatureTitle>Its fast as a rocket</FeatureTitle>\n              <FeatureDescription\n                dangerouslySetInnerHTML={{\n                  __html: 'Fastest decentralized swap with full transparency in < 1s.',\n                }}\n              />\n            </Feature>\n          </FeaturesColumn>\n          <FeaturesColumn>\n            <Feature>\n              <FeatureTitle>Its designed for people</FeatureTitle>\n              <FeatureDescription>\n                Its simple with an intuitive interface inside. Everything under your fingertips.\n              </FeatureDescription>\n            </Feature>\n            <Feature>\n              <FeatureTitle>No registration or account setup...</FeatureTitle>\n              <FeatureDescription>\n                ...actually, its up to you. There can be some cool experiences with that\n                functionality.\n              </FeatureDescription>\n            </Feature>\n            <ButtonWrapper>\n              <ButtonWeb glow onClick={() => trackEvent('landing_go_to_web_wallet_2_click')} />\n              <ButtonIOS glow onClick={() => trackEvent('landing_download_for_ios_2_click')} />\n            </ButtonWrapper>\n          </FeaturesColumn>\n        </FeaturesWrapper>\n      </GradientWrapper>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport LogoImg from 'assets/images/big-logo.png';\nimport { ButtonIOS, ButtonWeb } from 'components/pages/landing/common/Button/Button';\nimport { trackEvent } from 'utils/analytics';\n\nimport { up } from '../styles/breakpoints';\nimport LogoP2PImg from './logo.png';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n\n  background-image: url('./ellipse.svg');\n  background-repeat: no-repeat;\n  background-position: 50% 0;\n  background-size: 101% 100%;\n`;\n\nconst FooterWrapper = styled.div`\n  position: relative;\n  z-index: 1;\n\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Top = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 56px 40px 80px;\n\n  ${up.mobileLandscape} {\n    padding: 80px 40px;\n  }\n\n  ${up.tablet} {\n    padding: 80px 40px 72px;\n  }\n\n  ${up.desktop} {\n    padding: 55px 40px 80px;\n  }\n`;\n\nconst Logo = styled.div`\n  width: 64px;\n  height: 64px;\n\n  background: url('${LogoImg}') no-repeat 50% 50%;\n  background-size: 64px 64px;\n`;\n\nconst Title = styled.div`\n  margin-top: 56px;\n\n  color: #f9f9f9;\n  font-weight: 900;\n  font-size: 32px;\n  font-family: 'GT Super Ds Trial', sans-serif;\n  line-height: 36px;\n  text-align: center;\n\n  ${up.mobileLandscape} {\n    max-width: 488px;\n    margin-top: 80px;\n\n    font-size: 44px;\n    line-height: 56px;\n  }\n\n  ${up.tablet} {\n    max-width: 886px;\n    margin-top: 64px;\n\n    font-size: 48px;\n    line-height: 56px;\n  }\n\n  ${up.desktop} {\n    max-width: 1067px;\n    margin-top: 56px;\n  }\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 56px;\n\n  & > :not(:last-child) {\n    margin-bottom: 20px;\n  }\n\n  ${up.mobileLandscape} {\n    margin-top: 80px;\n\n    & > * {\n      width: 388px;\n    }\n  }\n\n  ${up.tablet} {\n    flex-direction: row;\n    margin-top: 64px;\n\n    & > * {\n      width: inherit;\n      margin-bottom: 0 !important;\n    }\n\n    & > :not(:last-child) {\n      margin-right: 20px;\n    }\n  }\n`;\n\nconst BackgroundBlack = styled.div`\n  width: 100%;\n\n  /* TODO: need to be here */\n  background: #161616;\n`;\n\nconst DelimiterSection = styled.div`\n  width: 100%;\n  height: 1px;\n\n  background: #2d2d2d;\n`;\n\nconst Middle = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n`;\n\nconst MiddleContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 32px 50px;\n\n  ${up.mobileLandscape} {\n    padding: 56px 103px 78px;\n  }\n\n  ${up.tablet} {\n    flex-direction: row;\n    align-items: initial;\n    padding: 80px 88px;\n  }\n\n  ${up.desktop} {\n    max-width: 1442px;\n    padding: 68px 47px;\n  }\n`;\n\nconst LogoWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 34px;\n`;\n\nconst LogoP2P = styled.div`\n  width: 80px;\n  height: 18px;\n\n  background: url('${LogoP2PImg}') no-repeat 50% 50%;\n  background-size: 80px 18px;\n`;\n\nconst DelimiterLogo = styled.div`\n  width: 1px;\n  height: 34px;\n  margin: 0 24px 0 31px;\n\n  background: rgba(255, 255, 255, 0.2);\n`;\n\nconst Wallet = styled.div`\n  color: #fff;\n  font-weight: bold;\n  font-size: 24px;\n  font-family: 'GT Super Txt Trial', sans-serif;\n  line-height: 140%;\n`;\n\n// const ColumnsWrapper = styled.div`\n//   display: flex;\n//   margin-top: 56px;\n//\n//   ${up.mobileLandscape} {\n//     flex-direction: column;\n//     align-items: center;\n//\n//     margin-top: 20px;\n//   }\n//\n//   ${up.tablet} {\n//     flex-direction: row;\n//     align-items: initial;\n//\n//     margin-top: 0;\n//   }\n// `;\n//\n// const Column = styled.div`\n//   display: flex;\n//   flex-direction: column;\n//   align-items: center;\n//\n//   & > :not(:last-child) {\n//     margin-bottom: 30px;\n//   }\n//\n//   ${up.mobileLandscape} {\n//     margin-top: 100px;\n//   }\n//\n//   ${up.tablet} {\n//     align-items: initial;\n//\n//     margin-top: 0;\n//\n//     &:not(:last-child) {\n//       margin-right: 143px;\n//     }\n//   }\n// `;\n\n// const AdditionalColumn = styled.div`\n//   display: flex;\n//   flex-direction: column;\n//   align-items: center;\n//   width: 100%;\n//   padding: 39px 0;\n//\n//   & > :not(:last-child) {\n//     margin-bottom: 30px;\n//   }\n//\n//   ${up.mobileLandscape} {\n//     padding: 61px 0;\n//\n//     & > :not(:last-child) {\n//       margin-bottom: 43px;\n//     }\n//   }\n// `;\n\n// const ColumnLink = styled.a`\n//   display: flex;\n//   align-items: center;\n//   height: 22px;\n//\n//   color: #fff;\n//   font-weight: 500;\n//   font-size: 20px;\n//   font-family: 'Aktiv Grotesk Corp', sans-serif;\n//   line-height: 140%;\n//   text-decoration: none;\n//\n//   ${up.mobileLandscape} {\n//     font-size: 24px;\n//     line-height: 140%;\n//   }\n//\n//   ${up.tablet} {\n//     font-size: 16px;\n//     line-height: 140%;\n//   }\n//\n//   &.gray {\n//     color: rgba(255, 255, 255, 0.3);\n//   }\n//\n//   &.twitter {\n//     height: 34px;\n//     padding-left: 40px;\n//\n//     background: url('./twitter.png') no-repeat 0 50%;\n//     background-size: 24px;\n//   }\n//\n//   &.github {\n//     height: 34px;\n//     padding-left: 40px;\n//\n//     background: url('./github.png') no-repeat 0 50%;\n//     background-size: 24px;\n//   }\n// `;\n\nconst Bottom = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  padding: 32px 40px;\n\n  color: rgba(255, 255, 255, 0.3);\n  font-weight: 500;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n\n  ${up.mobileLandscape} {\n    padding: 25px 40px;\n\n    font-size: 20px;\n    line-height: 140%;\n  }\n\n  ${up.tablet} {\n    padding: 20px 40px;\n\n    font-size: 16px;\n    line-height: 140%;\n  }\n\n  ${up.desktop} {\n    padding: 15px 40px;\n  }\n`;\n\nexport const Footer: FC = () => {\n  return (\n    <Wrapper>\n      <FooterWrapper>\n        <Top>\n          <Logo />\n          <Title>Carefully crafted for people from people in and around the world</Title>\n          <ButtonWrapper>\n            <ButtonWeb glow onClick={() => trackEvent('landing_go_to_web_wallet_3_click')} />\n            <ButtonIOS glow onClick={() => trackEvent('landing_download_for_ios_4_click')} />\n          </ButtonWrapper>\n        </Top>\n        <BackgroundBlack>\n          <DelimiterSection />\n          <Middle>\n            <MiddleContainer>\n              <LogoWrapper>\n                <LogoP2P />\n                <DelimiterLogo />\n                <Wallet>Wallet</Wallet>\n              </LogoWrapper>\n              {/* <ColumnsWrapper> */}\n              {/* <Column> */}\n              {/*  <ColumnLink href=\"#\">Explore</ColumnLink> */}\n              {/*  <ColumnLink href=\"#\">About</ColumnLink> */}\n              {/*  <ColumnLink href=\"#\">Recent Updates</ColumnLink> */}\n              {/*  <ColumnLink href=\"#\">FAQ</ColumnLink> */}\n              {/* </Column> */}\n              {/* {isDesktop ? ( */}\n              {/*  <Column> */}\n              {/*    <ColumnLink href=\"#\" className=\"gray\"> */}\n              {/*      wallet@p2p.org */}\n              {/*    </ColumnLink> */}\n              {/*    <ColumnLink href=\"#\" className=\"gray\"> */}\n              {/*      t.me/p2p.org */}\n              {/*    </ColumnLink> */}\n              {/*  </Column> */}\n              {/* ) : undefined} */}\n              {/* {isMobileLandscape ? ( */}\n              {/*  <Column> */}\n              {/*    <ColumnLink href=\"#\" className=\"gray twitter\"> */}\n              {/*      @p2pwallet */}\n              {/*    </ColumnLink> */}\n              {/*    <ColumnLink href=\"#\" className=\"gray github\"> */}\n              {/*      @p2pwallet */}\n              {/*    </ColumnLink> */}\n              {/*    {!isDesktop && isTablet ? ( */}\n              {/*      <> */}\n              {/*        <ColumnLink href=\"#\" className=\"gray\"> */}\n              {/*          wallet@p2p.org */}\n              {/*        </ColumnLink> */}\n              {/*        <ColumnLink href=\"#\" className=\"gray\"> */}\n              {/*          t.me/p2p.org */}\n              {/*        </ColumnLink> */}\n              {/*      </> */}\n              {/*    ) : undefined} */}\n              {/*  </Column> */}\n              {/* ) : undefined} */}\n              {/* </ColumnsWrapper> */}\n            </MiddleContainer>\n          </Middle>\n          {/* {!isMobileLandscape ? ( */}\n          {/*  <> */}\n          {/*    <DelimiterSection /> */}\n          {/*    <AdditionalColumn> */}\n          {/*      <ColumnLink href=\"#\" className=\"gray twitter\"> */}\n          {/*        @p2pwallet */}\n          {/*      </ColumnLink> */}\n          {/*      <ColumnLink href=\"#\" className=\"gray github\"> */}\n          {/*        @p2pwallet */}\n          {/*      </ColumnLink> */}\n          {/*    </AdditionalColumn> */}\n          {/*  </> */}\n          {/* ) : undefined} */}\n          {/* {!isTablet ? ( */}\n          {/*  <> */}\n          {/*    <DelimiterSection /> */}\n          {/*    <AdditionalColumn> */}\n          {/*      <ColumnLink href=\"#\" className=\"gray\"> */}\n          {/*        wallet@p2p.org */}\n          {/*      </ColumnLink> */}\n          {/*      <ColumnLink href=\"#\" className=\"gray\"> */}\n          {/*        t.me/p2p.org */}\n          {/*      </ColumnLink> */}\n          {/*    </AdditionalColumn> */}\n          {/*  </> */}\n          {/* ) : undefined} */}\n          <DelimiterSection />\n          <Bottom>\n            There shoud be something about privacy policy and terms of services, but you can use it\n            anonymously\n          </Bottom>\n        </BackgroundBlack>\n      </FooterWrapper>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nimport { down, up, useBreakpoint } from '../styles/breakpoints';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n\n  height: 1389px;\n  margin-top: 187px;\n\n  ${down.mobileLandscape} {\n    &::after {\n      position: absolute;\n\n      top: -100px;\n      left: 50%;\n\n      width: 30px;\n      height: 30px;\n      margin-left: -15px;\n\n      background: url('./arrow-down-mobile.png') no-repeat 50%;\n      background-size: 30px;\n\n      content: '';\n    }\n  }\n\n  ${up.mobileLandscape} {\n    height: 1348px;\n    margin-top: 130px;\n  }\n\n  ${up.tablet} {\n    height: 1177px;\n    margin-top: 119px;\n  }\n\n  ${up.desktop} {\n    height: 854px;\n    margin-top: 110px;\n  }\n`;\n\nconst HackathonWrapper = styled.div`\n  position: absolute;\n  z-index: 1;\n\n  ${up.tablet} {\n    top: -40px;\n    right: -161px;\n\n    width: 305px;\n    height: 159px;\n\n    &::before {\n      position: absolute;\n\n      top: 0;\n      left: 0;\n\n      width: 128px;\n      height: 128px;\n\n      background: url('./hackathon-second.svg') no-repeat 50% 50%;\n\n      content: '';\n    }\n\n    &::after {\n      position: absolute;\n\n      right: 0;\n      bottom: 0;\n\n      width: 128px;\n      height: 128px;\n\n      background: url('./hackathon-third.svg') no-repeat 50% 50%;\n\n      content: '';\n    }\n  }\n\n  ${up.desktop} {\n    top: -110px;\n    right: -48px;\n\n    width: 300px;\n    height: 150px;\n\n    &::before {\n      top: initial;\n      bottom: 0;\n      left: 0;\n    }\n\n    &::after {\n      top: 0;\n      right: 0;\n      bottom: initial;\n    }\n  }\n`;\n\nconst Container = styled.div`\n  position: relative;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  max-width: 1178px;\n\n  &::before {\n    position: absolute;\n    top: -291px;\n\n    width: 1896px;\n    height: 2027px;\n\n    background: url('./gradient.png') no-repeat 50%;\n    background-size: 1896px 2027px;\n\n    content: '';\n  }\n\n  &::after {\n    position: absolute;\n    top: 0;\n\n    width: 926px;\n    height: 1389px;\n\n    background: url('./ellipse-functions.svg') no-repeat 50%;\n    background-size: 926px 1389px;\n\n    content: '';\n  }\n\n  ${up.mobileLandscape} {\n    &::before {\n      width: 1798px;\n      height: 1923px;\n\n      background-size: 1798px 1923px;\n    }\n\n    &::after {\n      width: 1250px;\n      height: 1348px;\n\n      background-size: 1250px 1348px;\n    }\n  }\n\n  ${up.tablet} {\n    &::before {\n      top: -259px;\n\n      width: 1674px;\n      height: 1791px;\n\n      background-size: 1674px 1791px;\n    }\n\n    &::after {\n      width: 1250px;\n      height: 1177px;\n\n      background-size: 1250px 1177px;\n    }\n  }\n\n  ${up.desktop} {\n    flex-direction: row;\n\n    &::before {\n      top: -257px;\n\n      display: none;\n\n      width: 1506px;\n      height: 1311px;\n\n      background-size: 1506px 1311px;\n    }\n\n    &::after {\n      display: none;\n\n      width: 1458px;\n      height: 854px;\n\n      background-size: 1458px 854px;\n    }\n  }\n`;\n\nconst Curves = styled.div`\n  position: absolute;\n  bottom: -151px;\n  left: -1021px;\n\n  width: 3204px;\n  height: 1647px;\n\n  background: url('./curves-functions.svg') no-repeat 50%;\n  background-size: 3204px 1647px;\n\n  content: '';\n\n  ${up.mobileLandscape} {\n    bottom: -78px;\n    left: -685px;\n\n    width: 2959px;\n    height: 1521px;\n\n    background-size: 2959px 1521px;\n  }\n\n  ${up.tablet} {\n    bottom: 18px;\n    left: -295px;\n\n    width: 2759px;\n    height: 1418px;\n\n    background-size: 2759px 1418px;\n  }\n\n  ${up.desktop} {\n    bottom: -363px;\n    left: -144px;\n\n    width: 2759px;\n    height: 1418px;\n\n    background-size: 2759px 1418px;\n  }\n`;\n\nconst CarouselWrapper = styled.div`\n  position: relative;\n  z-index: 1;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-end;\n  height: 854px;\n\n  ${up.tablet} {\n    flex-direction: row;\n    height: 545px;\n  }\n\n  ${up.desktop} {\n    padding-right: 94px;\n\n    &::before {\n      position: absolute;\n      right: -298px;\n\n      width: 1506px;\n      height: 1311px;\n\n      background: url('./gradient.png') no-repeat 50%;\n      background-size: 1506px 1311px;\n\n      content: '';\n    }\n\n    &::after {\n      position: absolute;\n\n      right: 0;\n\n      width: 1458px;\n      height: 854px;\n\n      background: url('./ellipse-functions.svg') no-repeat 50%;\n      background-size: 1458px 854px;\n\n      content: '';\n    }\n  }\n\n  ${up.widedesktop} {\n    &::after {\n      background-position: 100% 50%;\n      background-size: 854px 854px;\n    }\n  }\n`;\n\nconst Carousel = styled.div`\n  position: relative;\n  z-index: 1;\n\n  width: 286px;\n  height: 504px;\n`;\n\nconst Selectors = styled.div`\n  z-index: 1;\n\n  display: flex;\n\n  margin-top: 71px;\n\n  ${up.mobileLandscape} {\n    margin-top: 90px;\n  }\n\n  ${up.tablet} {\n    flex-direction: column;\n    margin-top: 0;\n    margin-left: 100px;\n  }\n`;\n\nconst Icon = styled.div`\n  width: 48px;\n  height: 48px;\n\n  background-color: rgba(255, 255, 255, 0.05);\n  background-repeat: no-repeat;\n  background-position: 50%;\n  border-radius: 18px;\n\n  &.send {\n    background-image: url('./selector-send.svg');\n    background-size: 16px 13px;\n  }\n\n  &.store {\n    background-image: url('./selector-store.svg');\n    background-size: 16px 16px;\n  }\n\n  &.swap {\n    background-image: url('./selector-swap.svg');\n    background-size: 28px 28px;\n  }\n`;\n\nconst Selector = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n\n  cursor: pointer;\n\n  &.active,\n  &:hover {\n    background: url('./selector-bg.svg') no-repeat 50% 50%;\n    background-size: contain;\n\n    ${Icon} {\n      background-color: #fff;\n    }\n  }\n\n  &:not(:last-child) {\n    margin-right: 20px;\n  }\n\n  ${up.mobileLandscape} {\n    &:not(:last-child) {\n      margin-right: 32px;\n    }\n  }\n\n  ${up.tablet} {\n    &:not(:last-child) {\n      margin-right: 0;\n      margin-bottom: 20px;\n    }\n  }\n`;\n\nconst SelectorName = styled.div`\n  margin-top: 12px;\n\n  color: #fff;\n  font-weight: bold;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 140%;\n  white-space: nowrap;\n  text-align: center;\n`;\n\nconst SlideImage = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n\n  background-repeat: no-repeat;\n  background-position: center;\n\n  transition: top 0.2s, bottom 0.2s, right 0.2s, left 0.2s;\n\n  &:first-child {\n    top: 0;\n    right: 0;\n    z-index: 1;\n\n    width: 232px;\n    height: 502px;\n\n    background-size: 232px 502px;\n    filter: drop-shadow(0 32px 56px rgba(0, 0, 0, 0.5));\n  }\n\n  &:nth-child(2) {\n    top: initial;\n    bottom: 0;\n    left: 0;\n\n    width: 208px;\n    height: 452px;\n\n    background-size: 208px 452px;\n    transform: rotate(-10deg);\n  }\n\n  &.send {\n    background-image: url('./screen-1-desktop.png');\n  }\n\n  &.store {\n    background-image: url('./screen-2-desktop.png');\n  }\n\n  &.swap {\n    background-image: url('./screen-3-desktop.png');\n  }\n`;\n\nconst TextWrapper = styled.div`\n  z-index: 1;\n\n  margin-top: 71px;\n  padding: 0 40px;\n\n  ${up.mobileLandscape} {\n    margin-top: 80px;\n  }\n\n  ${up.tablet} {\n    margin-top: 100px;\n  }\n\n  ${up.desktop} {\n    min-height: 419px;\n    margin-top: 0;\n    margin-left: 88px;\n    padding: 0;\n  }\n`;\n\nconst TextContent = styled.div`\n  max-width: 456px;\n`;\n\nconst Title = styled.div`\n  color: #f9f9f9;\n  font-size: 24px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 32px;\n\n  ${up.desktop} {\n    font-size: 32px;\n    line-height: 48px;\n  }\n`;\n\nconst TitleBold = styled.span`\n  font-weight: 900;\n  font-family: 'GT Super Ds Trial', sans-serif;\n`;\n\nconst Description = styled.div`\n  margin-top: 32px;\n\n  color: #f9f9f9;\n  font-size: 20px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 30px;\n\n  opacity: 0.3;\n\n  ${up.desktop} {\n    font-size: 24px;\n    line-height: 36px;\n  }\n`;\n\nexport const Functions: FC = () => {\n  const isTablet = useBreakpoint(up.tablet);\n  const [activeSlide, setActiveSlide] = useState('send');\n  const [slides, setSlides] = useState(['send', 'store', 'swap']);\n\n  const handleClick = (nextSlide: string) => () => {\n    const newSlides = slides.filter((slide) => slide !== nextSlide);\n    setActiveSlide(nextSlide);\n    setSlides([nextSlide, ...newSlides]);\n  };\n\n  return (\n    <Wrapper>\n      <Container>\n        <Curves />\n        {isTablet ? <HackathonWrapper /> : undefined}\n        <CarouselWrapper>\n          <Carousel>\n            {slides.map((slide) => (\n              <SlideImage key={slide} className={slide} />\n            ))}\n          </Carousel>\n          <Selectors>\n            <Selector\n              className={classNames({ active: activeSlide === 'send' })}\n              onClick={handleClick('send')}\n            >\n              <Icon className=\"send\" />\n              <SelectorName>Send</SelectorName>\n            </Selector>\n            <Selector\n              className={classNames({ active: activeSlide === 'store' })}\n              onClick={handleClick('store')}\n            >\n              <Icon className=\"store\" />\n              <SelectorName>Store</SelectorName>\n            </Selector>\n            <Selector\n              className={classNames({ active: activeSlide === 'swap' })}\n              onClick={handleClick('swap')}\n            >\n              <Icon className=\"swap\" />\n              <SelectorName>Swap</SelectorName>\n            </Selector>\n          </Selectors>\n        </CarouselWrapper>\n        <TextWrapper>\n          {activeSlide === 'send' ? (\n            <TextContent>\n              <Title>\n                Send <TitleBold>USDC</TitleBold>, <TitleBold>BTC</TitleBold>,{' '}\n                <TitleBold>ETH</TitleBold>, and other tokens <TitleBold>in a seconds</TitleBold>{' '}\n                with <TitleBold>no fees</TitleBold>. Use QR code or address right in your app or web\n                wallet.\n              </Title>\n              <Description>\n                Solana has 400ms blocks and extremely low fees by design. Every transaction takes\n                less than a minute. All the fees are on us.\n              </Description>\n            </TextContent>\n          ) : undefined}\n          {activeSlide === 'store' ? (\n            <TextContent>\n              <Title>\n                Full control of your cryptos and your keys.{' '}\n                <TitleBold>Only you can access your assets.</TitleBold> <br /> Not government. Not\n                us. Not anyone else. Easily manage 30+ coins.\n              </Title>\n              <Description>\n                Easily import your existing wallet with a 12/24-word recovery phrase.\n              </Description>\n            </TextContent>\n          ) : undefined}\n          {activeSlide === 'swap' ? (\n            <TextContent>\n              <Title>\n                Exchange crypto using the advantages of DeFi Solutions with a{' '}\n                <TitleBold>high speed</TitleBold> of centralized exchanges.{' '}\n                <TitleBold>No signup required.</TitleBold> Exchange in a few seconds. Sophisticated\n                UI/UX.\n              </Title>\n            </TextContent>\n          ) : undefined}\n        </TextWrapper>\n      </Container>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { styled } from '@linaria/react';\n\nimport { up, useBreakpoint } from '../styles/breakpoints';\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 64px;\n  padding: 0 20px 0 10px;\n`;\n\nconst Left = styled.div`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nconst HamburgerIcon = styled.div`\n  width: 44px;\n  height: 44px;\n  margin-right: 10px;\n\n  background: url('./hamburger.svg') no-repeat 50% 50%;\n  background-size: 24px 24px;\n  cursor: pointer;\n`;\n\nconst LogoWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst Logo = styled.div`\n  width: 80px;\n  height: 18px;\n  margin-left: 10px;\n\n  background: url('./logo.svg') no-repeat 50% 50%;\n  background-size: 80px 18px;\n`;\n\nconst Delimiter = styled.div`\n  width: 1px;\n  height: 34px;\n  margin: 0 24px 0 31px;\n\n  background: rgba(255, 255, 255, 0.2);\n`;\n\nconst Wallet = styled.div`\n  color: #fff;\n  font-weight: bold;\n  font-size: 24px;\n  font-family: 'GT Super Txt Trial', sans-serif;\n  line-height: 140%;\n`;\n\n// const Center = styled.div`\n//   display: flex;\n//   flex: 1;\n//   align-items: center;\n//   justify-content: center;\n// `;\n//\n// const NavLink = styled.a`\n//   color: #fff;\n//   font-weight: 500;\n//   font-size: 16px;\n//   font-family: 'Aktiv Grotesk Corp', sans-serif;\n//   line-height: 140%;\n//   text-decoration: none;\n//\n//   &:not(:last-child) {\n//     margin-right: 44px;\n//   }\n// `;\n\nconst Right = styled.div`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nconst Button = styled(Link)`\n  display: flex;\n  align-items: center;\n  height: 40px;\n  padding: 0 36px;\n\n  color: #fff;\n  font-weight: 500;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 140%;\n  text-decoration: none;\n\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 32px;\n\n  transition: color 0.1s, background 0.1s;\n\n  &.white {\n    color: #000;\n\n    background: #fff;\n\n    &:hover {\n      color: #000;\n\n      background: #bcff4e;\n    }\n  }\n\n  &:not(:last-child) {\n    margin-right: 16px;\n  }\n\n  &:hover {\n    color: #000;\n\n    background: #fff;\n  }\n`;\n\ntype Props = {\n  onDrawerToggle: () => void;\n};\n\nexport const Header: FC<Props> = ({ onDrawerToggle }) => {\n  const isTablet = useBreakpoint(up.tablet);\n\n  const handleHamburgerClick = () => {\n    onDrawerToggle();\n  };\n\n  return (\n    <Wrapper>\n      <Left>\n        {isTablet ? <HamburgerIcon onClick={handleHamburgerClick} /> : undefined}\n        <LogoWrapper>\n          <Logo />\n          <Delimiter />\n          <Wallet>Wallet</Wallet>\n        </LogoWrapper>\n      </Left>\n      {isTablet ? (\n        <Right>\n          <Button to=\"/onboard?restore\">I have a wallet</Button>\n          <Button to=\"/onboard?create\" className=\"white\">\n            Create wallet\n          </Button>\n        </Right>\n      ) : undefined}\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport LogoImg from 'assets/images/big-logo.png';\nimport { ButtonIOS, ButtonWeb } from 'components/pages/landing/common/Button/Button';\nimport { trackEvent } from 'utils/analytics';\n\nimport { up } from '../styles/breakpoints';\n\nconst Wrapper = styled.div`\n  z-index: 2;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  margin-top: 56px;\n\n  ${up.mobileLandscape} {\n    margin-top: 120px;\n  }\n\n  ${up.tablet} {\n    margin-top: 124px;\n  }\n\n  ${up.desktop} {\n    margin-top: 94px;\n  }\n`;\n\nconst Logo = styled.div`\n  width: 64px;\n  height: 64px;\n\n  background: url('${LogoImg}') no-repeat 50% 50%;\n  background-size: 64px 64px;\n`;\n\nconst Title = styled.span`\n  display: inline-block;\n\n  max-width: 330px;\n  margin-top: 56px;\n\n  color: #f9f9f9;\n  font-weight: bold;\n  font-size: 46px;\n  font-family: 'GT Super Ds Trial', sans-serif;\n  line-height: 52px;\n  text-align: center;\n\n  ${up.mobileLandscape} {\n    max-width: 470px;\n    margin-top: 64px;\n\n    font-size: 64px;\n    line-height: 64px;\n  }\n\n  ${up.tablet} {\n    max-width: 818px;\n    margin-top: 56px;\n  }\n\n  ${up.desktop} {\n    max-width: 999px;\n    margin-top: 72px;\n\n    font-size: 84px;\n    line-height: 84px;\n  }\n`;\n\nconst TitleGreen = styled.span`\n  color: #bcff4e;\n\n  text-shadow: 0 0 #0000;\n\n  background-image: linear-gradient(180deg, #e6ff4e 0%, #bcff4e 100%);\n\n  /* Use the text as a mask for the background.\n  This will show the gradient as a text color rather than element bg. */\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  -webkit-box-decoration-break: clone;\n`;\n\nconst Description = styled.span`\n  display: none;\n\n  ${up.tablet} {\n    display: initial;\n    max-width: 587px;\n    margin-top: 20px;\n\n    color: #f9f9f9;\n    font-size: 20px;\n    font-family: 'Aktiv Grotesk Corp', sans-serif;\n    line-height: 140%;\n    text-align: center;\n\n    &.line-through {\n      color: #4e4e4e;\n      text-decoration: line-through;\n    }\n  }\n\n  ${up.desktop} {\n    font-size: 24px;\n  }\n`;\n\nconst ButtonsWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 56px;\n  padding: 0 40px;\n\n  & > :not(:last-child) {\n    margin-bottom: 20px;\n  }\n\n  ${up.mobileLandscape} {\n    flex-direction: row;\n    margin-top: 72px;\n\n    & > :not(:last-child) {\n      margin-right: 20px;\n      margin-bottom: 0;\n    }\n  }\n\n  ${up.tablet} {\n    margin-top: 76px;\n  }\n\n  ${up.desktop} {\n    margin-top: 50px;\n  }\n`;\n\nexport const Top: FC = () => {\n  return (\n    <Wrapper>\n      <Logo />\n      <Title>\n        A wallet with super-speed and <TitleGreen>free transactions</TitleGreen>\n      </Title>\n      <Description>\n        <Description className=\"line-through\">One more</Description> The first ever wallet where you\n        can send money with free transactions and without hidden fees.{' '}\n      </Description>\n      <ButtonsWrapper>\n        <ButtonWeb glow onClick={() => trackEvent('landing_go_to_web_wallet_1_click')} />\n        <ButtonIOS glow onClick={() => trackEvent('landing_download_for_ios_1_click')} />\n      </ButtonsWrapper>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\nimport { useEffect, useRef, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nimport { up } from 'components/pages/landing/styles/breakpoints';\n\nconst Wrapper = styled.div``;\n\nconst Carousel = styled.div`\n  position: relative;\n  z-index: 1;\n\n  display: flex;\n  padding: 0 40px;\n\n  overflow-x: auto;\n\n  filter: drop-shadow(0 40px 100px rgba(0, 0, 0, 0.15));\n\n  ${up.tablet} {\n    padding: 0 80px;\n  }\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: none;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: none;\n  }\n`;\n\nconst Container = styled.div`\n  display: flex;\n  padding-right: 50px;\n`;\n\nconst SlideImage = styled.div`\n  width: 263px;\n  height: 570px;\n\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 263px 570px;\n\n  &:not(:last-child) {\n    margin-right: 16px;\n  }\n\n  ${up.mobileLandscape} {\n    width: 313.75px;\n    height: 680px;\n\n    background-size: 313.75px 680px;\n\n    &:not(:last-child) {\n      margin-right: 20px;\n    }\n  }\n\n  ${up.tablet} {\n    width: 864px;\n    height: 554px;\n\n    background-size: 864px 554px;\n\n    &:not(:last-child) {\n      margin-right: 0;\n    }\n  }\n\n  ${up.desktop} {\n    width: 1136px;\n    height: 730px;\n\n    background-size: 1136px 730px;\n  }\n\n  &.one {\n    background-image: url('./screen-1-mobile.png');\n  }\n\n  &.two {\n    background-image: url('./screen-2-mobile.png');\n  }\n\n  &.three {\n    background-image: url('./screen-3-mobile.png');\n  }\n`;\n\nconst Navigation = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  margin-top: 32px;\n\n  ${up.mobileLandscape} {\n    margin-top: 48px;\n  }\n`;\n\nconst Nav = styled.div`\n  width: 14px;\n  height: 14px;\n\n  background: #161616;\n  border-radius: 50%;\n  opacity: 0.2;\n\n  &.active {\n    opacity: 0.7;\n  }\n\n  &:not(:last-child) {\n    margin-right: 10px;\n  }\n`;\n\nexport const CarouselMobile: FC = () => {\n  const carouselRef = useRef<HTMLDivElement>(null);\n  const [scrollProgress, setScrollProgress] = useState(0);\n\n  useEffect(() => {\n    const element = carouselRef.current;\n\n    const scrollListener = () => {\n      if (!element) {\n        return;\n      }\n\n      const windowScroll = element.scrollLeft; // Distance of the scrollbar from the leftmost point\n      const totalWidth = element.scrollWidth - element.clientWidth; // Total width the scrollbar can traverse\n\n      if (windowScroll === 0) {\n        return setScrollProgress(0);\n      }\n\n      if (windowScroll > totalWidth) {\n        return setScrollProgress(100);\n      }\n\n      setScrollProgress((windowScroll / totalWidth) * 100);\n    };\n\n    if (element) {\n      element.addEventListener('scroll', scrollListener);\n    }\n\n    return () => {\n      if (element) {\n        element.removeEventListener('scroll', scrollListener);\n      }\n    };\n  }, []);\n\n  const renderNavs = (count: number) => {\n    const selectedDotValue = (scrollProgress * count) / 100;\n\n    return [...new Array(count).keys()].map((index: number) => (\n      <Nav\n        key={index}\n        onClick={() => {\n          if (!carouselRef.current) {\n            return;\n          }\n\n          const element = carouselRef.current;\n          // const windowScroll = element.scrollLeft; // Distance of the scrollbar from the leftmost point\n          const totalWidth = element.scrollWidth - element.clientWidth; // Total width the scrollbar can traverse\n\n          carouselRef.current.scrollTo({\n            left: (totalWidth / count) * (index ? index + 1 : index),\n            behavior: 'smooth',\n          });\n        }}\n        className={classNames({\n          active: selectedDotValue >= index && selectedDotValue <= index + 1,\n        })}\n      />\n    ));\n  };\n\n  return (\n    <Wrapper>\n      <Carousel ref={carouselRef}>\n        <Container>\n          <SlideImage className=\"one\" />\n          <SlideImage className=\"two\" />\n          <SlideImage className=\"three\" />\n        </Container>\n      </Carousel>\n      <Navigation>{renderNavs(3)}</Navigation>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nconst Wrapper = styled.div`\n  position: absolute;\n\n  display: inline-block;\n  max-width: 1136px;\n  margin: 0 30px;\n\n  transform: translateY(0) scale(0.82);\n\n  cursor: pointer;\n\n  transition: opacity 0.3s, transform 0.5s;\n\n  &.level-2,\n  &.level-1 {\n    z-index: 1;\n\n    opacity: 0.75;\n  }\n\n  &.level-2 {\n    transform: translateY(0) scale(0.92);\n  }\n\n  &.level-1 {\n    transform: translateY(0) scale(0.92);\n\n    &:hover {\n      transform: translateY(0) scale(0.94);\n      opacity: 0.9;\n    }\n  }\n\n  &.level0 {\n    position: relative;\n    z-index: 3;\n\n    transform: translateY(0) scale(1);\n    opacity: 1;\n  }\n\n  &.level1,\n  &.level2 {\n    z-index: 1;\n\n    opacity: 0.75;\n  }\n\n  &.level1 {\n    transform: translateY(35px) scale(0.95);\n\n    &:hover {\n      transform: translateY(35px) scale(0.97);\n      opacity: 0.9;\n    }\n  }\n\n  &.level2 {\n    transform: translateY(0) scale(0.92);\n  }\n`;\n\ninterface Props {\n  level: number;\n  className?: string;\n}\n\nexport const Item: FC<Props> = ({ level, children, className }) => {\n  return <Wrapper className={`${className || ''} level${level}`}>{children}</Wrapper>;\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\n\nimport { up } from '../../styles/breakpoints';\nimport { Item } from './Item';\nimport oneImg from './screen-1-desktop.png';\nimport twoImg from './screen-2-desktop.png';\nimport threeImg from './screen-3-desktop.png';\nimport fourImg from './screen-4-desktop.png';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  max-width: 1136px;\n\n  user-select: none;\n`;\n\nconst ItemWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n\n  border-radius: 10px;\n  box-shadow: -34px 42px 100px rgba(0, 0, 0, 0.05);\n\n  ${up.tablet} {\n    & > img {\n      width: 864px;\n      height: 554px;\n    }\n  }\n\n  ${up.desktop} {\n    & > img {\n      width: 1136px;\n      height: 728px;\n    }\n  }\n`;\n\nconst ArrowIconWrapper = styled.div`\n  position: absolute;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n\n  background: #fff;\n  border-radius: 18px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.03);\n  cursor: pointer;\n\n  &:hover,\n  &:active {\n    background: #fafafa;\n  }\n\n  &.top {\n    top: 0;\n  }\n\n  &.bottom {\n    bottom: 0;\n\n    transform: rotate(180deg);\n  }\n`;\n\nconst ChevronIcon = styled(Icon)`\n  width: 16px;\n  height: 13px;\n\n  color: #000;\n`;\n\nconst Navigation = styled.div`\n  position: relative;\n  right: -17px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 181px;\n\n  ${up.desktop} {\n    right: -50px;\n  }\n`;\n\nconst Dots = styled.div``;\n\nconst Dot = styled.div`\n  width: 15px;\n  height: 10px;\n\n  background: #161616;\n  border-radius: 18px;\n  opacity: 0.05;\n\n  &.active {\n    opacity: 0.3;\n  }\n\n  &:not(:last-child) {\n    margin-bottom: 5px;\n  }\n`;\n\nconst ITEMS = [\n  {\n    src: oneImg,\n  },\n  {\n    src: twoImg,\n  },\n  {\n    src: threeImg,\n  },\n  {\n    src: fourImg,\n  },\n];\n\nexport const CarouselDesktop: FC = () => {\n  const [activeIndex, setActiveIndex] = useState(0);\n\n  const handleSelectToken = (index: number) => () => {\n    setActiveIndex(index);\n  };\n\n  const handleNext = () => {\n    setActiveIndex((state) => state + 1);\n  };\n\n  const handlePrev = () => {\n    setActiveIndex((state) => state - 1);\n  };\n\n  const prepareItems = () => {\n    return ITEMS.map((item, index) => (\n      <ItemWrapper key={item.src} onClick={handleSelectToken(index)}>\n        {/* eslint-disable-next-line jsx-a11y/alt-text */}\n        <img src={item.src} />\n      </ItemWrapper>\n    ));\n  };\n\n  const renderItems = () => {\n    const items = prepareItems();\n\n    const newItems = [];\n\n    for (let i = 0; i < items.length; i++) {\n      let index = i;\n\n      if (i < 0) {\n        index = items.length + i;\n      }\n\n      newItems.push(\n        <Item key={i} className={`${i}`} level={i - activeIndex}>\n          {items[index]}\n        </Item>,\n      );\n    }\n\n    return newItems;\n  };\n\n  return (\n    <Wrapper>\n      {renderItems()}\n      <Navigation>\n        {activeIndex !== 0 ? (\n          <ArrowIconWrapper className=\"top\" onClick={handlePrev}>\n            <ChevronIcon name=\"chevron-rounded\" />\n          </ArrowIconWrapper>\n        ) : null}\n        <Dots>\n          {ITEMS.map((_, index) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <Dot key={index} className={classNames({ active: index === activeIndex })} />\n          ))}\n        </Dots>\n        {activeIndex !== ITEMS.length - 1 ? (\n          <ArrowIconWrapper className=\"bottom\" onClick={handleNext}>\n            <ChevronIcon name=\"chevron-rounded\" />\n          </ArrowIconWrapper>\n        ) : null}\n      </Navigation>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { ButtonIOS, ButtonWeb } from 'components/pages/landing/common/Button/Button';\nimport { CarouselMobile } from 'components/pages/landing/Under/CarouselMobile';\nimport { trackEvent } from 'utils/analytics';\n\nimport { up, useBreakpoint } from '../styles/breakpoints';\nimport { CarouselDesktop } from './CarouselDesktop';\n\nconst Wrapper = styled.div`\n  position: relative;\n  z-index: 1;\n\n  margin: 80px 0 100px;\n\n  ${up.mobileLandscape} {\n    margin: 120px 0 100px;\n  }\n\n  ${up.tablet} {\n    margin: 140px 0 154px;\n  }\n\n  ${up.desktop} {\n    margin: 230px 0 175px;\n  }\n`;\n\nconst Top = styled.div`\n  display: flex;\n  justify-content: center;\n  padding: 0 40px;\n`;\n\nconst Title = styled.div`\n  max-width: 295px;\n\n  color: #161616;\n  font-size: 36px;\n  font-family: 'GT Super Ds Trial', sans-serif;\n  line-height: 44px;\n  text-align: center;\n\n  ${up.mobileLandscape} {\n    max-width: 488px;\n\n    font-size: 48px;\n    line-height: 54px;\n  }\n\n  ${up.tablet} {\n    max-width: 750px;\n\n    font-size: 48px;\n    line-height: 56px;\n  }\n\n  ${up.desktop} {\n    max-width: 1067px;\n\n    font-size: 60px;\n    line-height: 64px;\n  }\n`;\n\nconst Bold = styled.span`\n  position: relative;\n\n  display: inline-block;\n\n  font-weight: 900;\n\n  ${up.tablet} {\n    &::after {\n      position: absolute;\n      right: -50px;\n      bottom: -60px;\n\n      width: 37px;\n      height: 81px;\n\n      background: url('./top-curve.png') no-repeat 50% 50%;\n      background-size: 37px 81px;\n\n      content: '';\n    }\n  }\n`;\n\nconst CarouselWrapper = styled.div`\n  padding: 64px 0;\n\n  ${up.mobileLandscape} {\n    padding: 80px 0 53px;\n  }\n\n  ${up.tablet} {\n    display: flex;\n    justify-content: center;\n    padding: 77px 0 80px;\n  }\n\n  ${up.desktop} {\n    padding: 77px 0 100px;\n  }\n`;\n\nconst Bottom = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 40px;\n`;\n\nconst Hint = styled.div`\n  margin-top: 24px;\n\n  color: #161616;\n  font-size: 16px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 140%;\n\n  opacity: 0.3;\n\n  ${up.tablet} {\n    margin-top: 20px;\n\n    font-size: 14px;\n  }\n`;\n\nexport const Under: FC = () => {\n  const isTablet = useBreakpoint(up.tablet);\n\n  return (\n    <Wrapper>\n      <Top>\n        <Title>\n          Heres a sneak peek of what we have <Bold>under the hood</Bold>\n        </Title>\n      </Top>\n      <CarouselWrapper>{isTablet ? <CarouselDesktop /> : <CarouselMobile />}</CarouselWrapper>\n      <Bottom>\n        {isTablet ? (\n          <ButtonWeb green />\n        ) : (\n          <ButtonIOS onClick={() => trackEvent('landing_download_for_ios_3_click')} />\n        )}\n        <Hint>Will take less than a 2 min.</Hint>\n      </Bottom>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { up, useBreakpoint } from '../styles/breakpoints';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  background-image: url('./bg-youcan.svg');\n  background-repeat: no-repeat;\n  background-position: 50% 0;\n  background-size: 101% 25%;\n`;\n\nconst Top = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 100px 0 96px;\n\n  ${up.mobileLandscape} {\n    padding: 100px 0 110px;\n  }\n\n  ${up.tablet} {\n    padding: 120px 0 70px;\n  }\n\n  ${up.desktop} {\n    padding: 168px 0 90px;\n  }\n`;\n\nconst Title = styled.div`\n  max-width: 295px;\n\n  color: #161616;\n  font-weight: 900;\n  font-size: 40px;\n  font-family: 'GT Super Ds Trial', sans-serif;\n  line-height: 50px;\n  text-align: center;\n\n  ${up.mobileLandscape} {\n    max-width: 488px;\n\n    font-size: 48px;\n    line-height: 56px;\n  }\n\n  ${up.tablet} {\n    max-width: 864px;\n\n    font-size: 48px;\n    line-height: 56px;\n  }\n\n  ${up.desktop} {\n    max-width: 1068px;\n\n    font-size: 60px;\n    line-height: 64px;\n  }\n`;\n\nconst Hint = styled.div`\n  position: relative;\n\n  max-width: 296px;\n  margin-top: 95px;\n\n  color: #161616;\n  font-size: 20px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 24px;\n  text-align: center;\n\n  &::after {\n    position: absolute;\n\n    top: -55px;\n    left: -30px;\n\n    width: 352px;\n    height: 170px;\n\n    background: url('./circle.svg') no-repeat 50%;\n    background-size: 352px 170px;\n\n    content: '';\n  }\n\n  ${up.mobileLandscape} {\n    max-width: initial;\n\n    margin-top: 101px;\n\n    line-height: 44px;\n\n    &::after {\n      top: -73px;\n      left: -60px;\n\n      width: 516px;\n      height: 184px;\n\n      background-size: 516px 184px;\n    }\n  }\n\n  ${up.tablet} {\n    margin-top: 105px;\n\n    font-size: 20px;\n    line-height: 44px;\n\n    &::after {\n      width: 516px;\n      height: 184px;\n\n      background-size: 516px 184px;\n    }\n  }\n\n  ${up.desktop} {\n    margin-top: 120px;\n\n    font-size: 24px;\n    line-height: 44px;\n\n    &::after {\n      top: -98px;\n      left: -50px;\n\n      width: 592px;\n      height: 211px;\n\n      background-size: 592px 211px;\n    }\n  }\n`;\n\nconst TitleBold = styled.span`\n  font-weight: 700;\n`;\n\nconst Middle = styled.div`\n  display: flex;\n  justify-content: center;\n\n  background: #f9f9f9;\n`;\n\nconst MiddleContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  padding: 0 40px;\n\n  ${up.mobileLandscape} {\n    padding: 0 56px;\n  }\n\n  ${up.tablet} {\n    flex-direction: row;\n    max-width: 864px;\n    padding: 0;\n  }\n\n  ${up.desktop} {\n    max-width: 1204px;\n  }\n`;\n\nconst TextWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  width: 100%;\n  max-width: 456px;\n\n  ${up.mobileLandscape} {\n    align-items: center;\n  }\n`;\n\nconst TextContent = styled.div`\n  ${up.mobileLandscape} {\n    max-width: 456px;\n  }\n\n  ${up.desktop} {\n    max-width: 450px;\n  }\n`;\n\nconst TextTitle = styled.div`\n  color: #161616;\n  font-size: 40px;\n  font-family: 'GT Super Ds Trial', sans-serif;\n  line-height: 40px;\n\n  ${up.mobileLandscape} {\n    font-size: 36px;\n  }\n\n  ${up.desktop} {\n    font-size: 48px;\n    line-height: 50px;\n  }\n`;\n\nconst TextTitleBold = styled.span`\n  font-weight: 900;\n`;\n\nconst Text = styled.div`\n  margin-top: 48px;\n\n  color: #161616;\n  font-size: 18px;\n  font-family: 'Aktiv Grotesk Corp', sans-serif;\n  line-height: 32px;\n\n  ${up.mobileLandscape} {\n    font-size: 24px;\n    line-height: 32px;\n  }\n\n  ${up.tablet} {\n    font-size: 20px;\n    line-height: 30px;\n  }\n\n  ${up.desktop} {\n    margin-top: 50px;\n\n    font-size: 24px;\n    line-height: 34px;\n  }\n`;\n\nconst TextBold = styled.span`\n  color: #50d5ff;\n  font-weight: 900;\n`;\n\n// const LearnMoreLink = styled.a`\n//   display: flex;\n//   align-items: center;\n//   margin-top: 48px;\n//\n//   color: #161616;\n//   font-weight: 500;\n//   font-size: 18px;\n//   font-family: 'Aktiv Grotesk Corp', sans-serif;\n//   line-height: 34px;\n//\n//   ${up.mobileLandscape} {\n//     font-size: 24px;\n//     text-decoration: none;\n//   }\n//\n//   ${up.tablet} {\n//     margin-top: 40px;\n//\n//     font-size: 20px;\n//   }\n//\n//   ${up.desktop} {\n//     margin-top: 56px;\n//\n//     font-size: 24px;\n//   }\n// `;\n//\n// const Arrow = styled.div`\n//   width: 13px;\n//   height: 16px;\n//   margin-left: 23px;\n//\n//   background: url('./arrow.svg') no-repeat 50%;\n//   background-size: 13px 16px;\n// `;\n\nconst Window = styled.div`\n  position: relative;\n\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: 453px;\n  margin-top: 121px;\n\n  &::before {\n    position: absolute;\n\n    width: 802px;\n    height: 453px;\n\n    background-image: url('./ellipse-youcan.svg');\n    background-repeat: no-repeat;\n    background-position: 100% 50%;\n    background-size: 802px 453px;\n\n    content: '';\n  }\n\n  &::after {\n    position: absolute;\n    left: 65px;\n\n    width: 526px;\n    height: 431px;\n\n    background-image: url('./window-youcan.svg');\n    background-repeat: no-repeat;\n    background-position: 100% 50%;\n    background-size: 552px 431px;\n    filter: drop-shadow(-34px 42px 100px rgba(0, 0, 0, 0.15));\n\n    content: '';\n  }\n\n  ${up.mobileLandscape} {\n    height: 668px;\n\n    &::before {\n      width: 1183px;\n      height: 668px;\n\n      background-size: 1183px 668px;\n    }\n\n    &::after {\n      left: 30px;\n\n      width: 913px;\n      height: 714px;\n\n      background-size: 913px 714px;\n    }\n  }\n\n  ${up.tablet} {\n    flex: 1;\n    margin-top: 0;\n    margin-left: 34px;\n  }\n\n  ${up.desktop} {\n    flex: initial;\n    width: 846px;\n    height: 873px;\n    margin-left: 20px;\n\n    &::before {\n      width: 1426px;\n      height: 873px;\n\n      background-size: 1426px 873px;\n    }\n\n    &::after {\n      left: 90px;\n\n      width: 796px;\n      height: 836px;\n\n      background-size: 796px 836px;\n    }\n  }\n`;\n\nconst Bottom = styled.div`\n  background: #f9f9f9;\n`;\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nexport const YouCan: FC<Props> = ({ children }) => {\n  const isDesktop = useBreakpoint(up.desktop);\n  // const isMobileLandscape = useBreakpoint(up.mobileLandscape);\n\n  return (\n    <Wrapper>\n      <Top>\n        <Title>Imagine if you can send USD, BTC or ETH without fees in just a few seconds?</Title>\n        <Hint>\n          We have it! <TitleBold>BTC</TitleBold>, <TitleBold>ETH</TitleBold> and{' '}\n          <TitleBold>30+</TitleBold> another tokens*\n        </Hint>\n      </Top>\n      <Middle>\n        <MiddleContainer>\n          <TextWrapper>\n            <TextContent>\n              <TextTitle>\n                You can send a <TextTitleBold>lot of tokens</TextTitleBold> fast and with no fees\n              </TextTitle>\n              <Text>\n                Doesnt matter what token you want to send. {!isDesktop ? <br /> : undefined}\n                <TextBold>The speed is stable for all of them!</TextBold>\n                <br />\n                <br />\n                Solana blockchain contains many tokens. Its native and wrapped by different\n                technologies such as FTX, Sollet etc. It allows us to keep the speed and no-fees in\n                front of others.\n              </Text>\n              {/* <LearnMoreLink> */}\n              {/*  Learn more about Wrapped Tokens {isMobileLandscape ? <Arrow /> : undefined} */}\n              {/* </LearnMoreLink> */}\n            </TextContent>\n          </TextWrapper>\n          <Window />\n        </MiddleContainer>\n      </Middle>\n      <Bottom>{children}</Bottom>\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\nimport { Helmet } from 'react-helmet';\n\nimport { css } from '@linaria/core';\nimport { styled } from '@linaria/react';\n\nimport { Drawer } from 'components/pages/landing/common/Drawer';\nimport { Features } from 'components/pages/landing/Features';\nimport { Footer } from 'components/pages/landing/Footer';\nimport { Functions } from 'components/pages/landing/Functions';\nimport { Header } from 'components/pages/landing/Header';\nimport { fonts } from 'components/pages/landing/styles/fonts';\nimport { Top } from 'components/pages/landing/Top';\nimport { Under } from 'components/pages/landing/Under';\nimport { YouCan } from 'components/pages/landing/YouCan/YouCan';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  overflow-x: hidden;\n`;\n\nexport const global = css`\n  :global() {\n    body.landing {\n      background: #161616;\n\n      ${fonts}\n    }\n  }\n`;\n\nexport const Landing: FC = () => {\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n\n  const handleDrawerToggle = () => {\n    setIsDrawerOpen(!isDrawerOpen);\n  };\n\n  return (\n    <>\n      <Helmet>\n        <body className=\"landing\" />\n      </Helmet>\n      <Wrapper>\n        <Drawer isOpen={isDrawerOpen} onDrawerClose={handleDrawerToggle} />\n        <Header onDrawerToggle={handleDrawerToggle} />\n        <Top />\n        <Functions />\n        <Features />\n        <YouCan>\n          <Under />\n          {/* <Updates /> */}\n          <Footer />\n        </YouCan>\n      </Wrapper>\n    </>\n  );\n};\n","import type { FunctionComponent } from 'react';\nimport type { RouteProps } from 'react-router';\nimport { Redirect, Route, useLocation } from 'react-router-dom';\n\nimport { useViewModel } from 'new/core/viewmodels/useViewModel';\nimport { RootViewModel } from 'new/scenes/Root/Root.ViewModel';\n\nexport const ProtectedRoute: FunctionComponent<\n  {\n    allow: boolean;\n    redirect: string;\n  } & RouteProps\n> = ({ allow, redirect, ...props }) => {\n  const location = useLocation();\n\n  if (allow) {\n    return <Route {...props} />;\n  }\n\n  return (\n    <Redirect\n      to={{\n        pathname: redirect,\n        state: { fromPage: location.pathname !== '/' ? location.pathname : undefined },\n      }}\n      from={location.pathname}\n    />\n  );\n};\n\n// ProtectedRoute is used to create specific types.ts of protected routes like this...\nexport const AuthRequiredRoute: FunctionComponent<RouteProps> = ({ ...props }) => {\n  const rootViewModel = useViewModel(RootViewModel);\n\n  return (\n    <ProtectedRoute allow={rootViewModel.walletModel.connected} redirect=\"/login\" {...props} />\n  );\n};\n","import type { FC } from 'react';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { IntercomProvider } from 'react-use-intercom';\n\nimport type { ConnectedWallet } from '@p2p-wallet-web/core';\nimport {\n  NETWORK_CONFIGS,\n  SeedProvider,\n  SolanaProvider,\n  TokenAccountsProvider,\n  TokensProvider,\n} from '@p2p-wallet-web/core';\nimport { SailProvider } from '@p2p-wallet-web/sail';\nimport assert from 'ts-invariant';\n\nimport { ToastManager } from 'components/common/ToastManager';\n\nconst PUBLIC_KEY_LENGTH_FOR_TRIMMING = 20;\n\nconst onConnect = (wallet: ConnectedWallet) => {\n  const walletPublicKey = wallet.publicKey.toBase58();\n  const keyToDisplay =\n    walletPublicKey.length > PUBLIC_KEY_LENGTH_FOR_TRIMMING\n      ? // eslint-disable-next-line @typescript-eslint/no-magic-numbers\n        `${walletPublicKey.substring(0, 7)}.....${walletPublicKey.substring(\n          // eslint-disable-next-line @typescript-eslint/no-magic-numbers\n          walletPublicKey.length - 7,\n          walletPublicKey.length,\n        )}`\n      : walletPublicKey;\n\n  ToastManager.info('Wallet update', 'Connected to wallet ' + keyToDisplay);\n};\n\nconst onDisconnect = () => {\n  ToastManager.info('Wallet disconnected');\n};\n\nconst CoreProviders: FC = ({ children }) => {\n  return (\n    <SeedProvider>\n      <SolanaProvider\n        onConnect={onConnect}\n        onDisconnect={onDisconnect}\n        networkConfigs={NETWORK_CONFIGS}\n      >\n        <SailProvider initialState={{ waitForConfirmation: true }}>\n          <TokensProvider>\n            <TokenAccountsProvider>{children}</TokenAccountsProvider>\n          </TokensProvider>\n        </SailProvider>\n      </SolanaProvider>\n    </SeedProvider>\n  );\n};\n\nconst queryClient = new QueryClient();\n\nexport const Providers: FC = ({ children }) => {\n  assert(\n    process.env.REACT_APP_INTERCOM_APP_ID,\n    \"REACT_APP_INTERCOM_APP_ID doesn't set in environment\",\n  );\n\n  return (\n    <IntercomProvider\n      appId={process.env.REACT_APP_INTERCOM_APP_ID}\n      autoBoot\n      autoBootProps={{ hideDefaultLauncher: true }}\n    >\n      <QueryClientProvider client={queryClient}>\n        <CoreProviders>{children}</CoreProviders>\n      </QueryClientProvider>\n    </IntercomProvider>\n  );\n};\n","import * as React from 'react';\nimport { BrowserRouter, HashRouter, Route, Switch } from 'react-router-dom';\n\nimport * as Sentry from '@sentry/react';\nimport dayjs from 'dayjs';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\nimport { observer } from 'mobx-react-lite';\n\nimport { Intercom } from 'components/common/Intercom';\nimport { NotifyToast } from 'components/common/NotifyToast';\nimport { ToastManager } from 'components/common/ToastManager';\nimport {\n  Buy,\n  Home,\n  Main,\n  Receive,\n  Send,\n  Settings,\n  SettingsNetwork,\n  SwapPage,\n  WalletDetail,\n} from 'new/scenes/Main';\nimport { Root } from 'new/scenes/Root';\nimport {\n  DebugFeatureFlagsManager,\n  LocationManager,\n  ModalManager,\n  NotificationManager,\n} from 'new/ui/managers';\nimport { Auth as AuthTrial } from 'new/scenes/Main/Auth';\nimport { Landing } from 'pages/Landing';\nimport { AuthRequiredRoute } from 'utils/routes/UserRequiredRoute';\n\nimport { Providers } from './Providers';\n\ndayjs.extend(localizedFormat);\n\nconst App: React.FC = observer(() => {\n  const Router: React.ElementType = process.env.REACT_APP_STAGING ? HashRouter : BrowserRouter;\n\n  return (\n    <>\n      <Sentry.ErrorBoundary>\n        <Router basename={process.env.REACT_APP_BASENAME}>\n          <Providers>\n            <Root>\n              <LocationManager />\n              <Switch>\n                <Route path=\"/\" exact component={Landing} />\n                <Route path=\"/onboard\" exact component={AuthTrial} />\n                <Main>\n                  <AuthRequiredRoute path=\"/wallets\" component={Home} />\n                  <AuthRequiredRoute path=\"/wallet/:publicKey\" exact component={WalletDetail} />\n                  <AuthRequiredRoute path=\"/buy/:symbol?\" component={Buy} />\n                  <AuthRequiredRoute path=\"/receive/(tokens)?\" component={Receive} />\n                  <AuthRequiredRoute path=\"/send/:publicKey/:status(result)\" component={Send} />\n                  <AuthRequiredRoute path=\"/send/:publicKey?\" component={Send} />\n                  <AuthRequiredRoute path=\"/swap/(settings)?/:publicKey?\" component={SwapPage} />\n                  <AuthRequiredRoute path=\"/settings/network\" component={SettingsNetwork} />\n                  <AuthRequiredRoute path=\"/settings\" component={Settings} exact />\n                  <ModalManager />\n                </Main>\n              </Switch>\n              <Intercom />\n              <ToastManager anchor=\"left\" renderToast={(props) => <NotifyToast {...props} />} />\n              <NotificationManager />\n              {__DEVELOPMENT__ || process.env.REACT_APP_STAGING ? (\n                <DebugFeatureFlagsManager />\n              ) : null}\n            </Root>\n          </Providers>\n        </Router>\n      </Sentry.ErrorBoundary>\n    </>\n  );\n});\n\n// eslint-disable-next-line import/no-default-export\nexport default App;\n","import type { FC } from 'react';\nimport JazziconSolana, { jsNumberForAddress } from 'react-solana-jazzicon';\n\nimport { styled } from '@linaria/react';\n\nconst Wrapper = styled.div<{ size: Props['size'] }>`\n  width: ${({ size }) => (size ? `${size}px` : 'auto')};\n  height: ${({ size }) => (size ? `${size}px` : 'auto')};\n`;\n\nconst IconStyled = styled.div`\n  & div {\n    border-radius: 12px !important;\n  }\n`;\n\ninterface Props {\n  address: string;\n  size?: number;\n  className?: string;\n}\n\nexport const Jazzicon: FC<Props> = ({ address, size, className }) => {\n  return (\n    <Wrapper size={size} className={className}>\n      <IconStyled>\n        <JazziconSolana seed={jsNumberForAddress(address)} diameter={size} />\n      </IconStyled>\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent, HTMLAttributes } from 'react';\nimport { useEffect, useMemo, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { useTokensContext } from '@p2p-wallet-web/core';\nimport type { Token } from '@saberhq/token-utils';\nimport classNames from 'classnames';\n\nimport { Jazzicon } from 'components/common/TokenAvatar/Jazzicon';\nimport { Avatar } from 'components/ui';\n\nimport wrappedImage from './images/wrapped.svg';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  border-radius: 12px;\n\n  &.isNotExists {\n    background: #f6f6f8;\n  }\n`;\n\nconst WrappedBy = styled.div`\n  position: absolute;\n  right: 0;\n  bottom: 0;\n\n  width: 16px;\n  height: 16px;\n\n  background: #000;\n  border: 1px solid #464646;\n  border-radius: 4px;\n  filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.25));\n\n  &.isWrapped {\n    background-image: url(${wrappedImage});\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: 16px 16px;\n  }\n`;\n\ntype Props = {\n  size?: number;\n  token?: Token;\n  symbol?: string; // TODO: remove\n  address?: string; // TODO: remove\n};\n\nexport const TokenAvatar: FunctionComponent<Props & HTMLAttributes<HTMLDivElement>> = ({\n  token: inputToken,\n  symbol,\n  address,\n  className,\n  ...props\n}) => {\n  const { tokenMap, tokens } = useTokensContext();\n  const [isDead, setIsDead] = useState<boolean>(false);\n\n  useEffect(() => {\n    setIsDead(false);\n  }, [inputToken?.icon]);\n\n  // TODO: remove\n  const foundToken = useMemo(() => {\n    if (inputToken) {\n      return null;\n    }\n\n    return (\n      (address && tokenMap[address]) ||\n      tokens.find((token: Token) => token.symbol === symbol || token.address === address)\n    );\n  }, [address, symbol, inputToken, tokenMap, tokens]); // TODO: remove\n\n  const isWrapped = useMemo(() => {\n    const token = inputToken || foundToken;\n\n    const wrappedTags = ['wrapped', 'wormhole', 'wrapped-sollet'];\n\n    if (token) {\n      if (token.symbol !== 'SOL') {\n        if (\n          wrappedTags.some((tag) => token.tags?.includes(tag)) ||\n          token.name.toLowerCase().includes('wrapped')\n        ) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }, [inputToken, foundToken]);\n\n  const elAvatar = () => {\n    const commonAttr = {\n      onError: () => setIsDead(true),\n    };\n\n    if (inputToken && !isDead) {\n      return <Avatar src={inputToken.icon} {...props} {...commonAttr} />;\n    }\n\n    if (inputToken && isDead) {\n      return <Jazzicon address={inputToken.address} size={props.size} />;\n    }\n\n    if ((!foundToken || !foundToken.icon) && address) {\n      return <Jazzicon address={address} size={props.size} />;\n    }\n\n    return <Avatar src={foundToken?.icon || undefined} {...props} {...commonAttr} />;\n  };\n\n  return (\n    <Wrapper className={classNames(className, { isNotExists: !foundToken || !inputToken })}>\n      {elAvatar()}\n      {isWrapped ? (\n        <WrappedBy\n          className={classNames({\n            isWrapped,\n          })}\n        />\n      ) : undefined}\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\nimport { useState } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  width: 100%;\n\n  border: 1px solid ${theme.colors.stroke.secondary};\n  border-radius: 12px;\n`;\n\nconst TitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n\n  padding: 12px 20px;\n\n  cursor: pointer;\n\n  &.isOpen {\n    border-bottom: 1px solid ${theme.colors.stroke.secondary};\n  }\n`;\n\nconst Title = styled.div`\n  display: flex;\n  flex: 1;\n  align-content: space-between;\n\n  font-weight: 600;\n  font-size: 16px;\n`;\n\nconst Left = styled.div`\n  display: flex;\n  flex-grow: 1;\n`;\n\nconst Right = styled.div`\n  margin-right: 12px;\n`;\n\nconst ChevronIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.secondary};\n\n  &.isOpen {\n    transform: rotate(180deg);\n  }\n`;\n\nconst Content = styled.div`\n  &:not(.noContentPadding) {\n    padding: 16px 20px;\n  }\n`;\n\ntype Props = {\n  title: string | React.ReactNode;\n  right?: string | React.ReactNode;\n  open?: boolean;\n  hideRightIfOpen?: boolean;\n  noContentPadding?: boolean;\n  onToggle?: (isOpen: boolean) => void;\n  className?: string;\n};\n\nexport const Accordion: FC<Props> = ({\n  title,\n  right,\n  open = false,\n  hideRightIfOpen,\n  noContentPadding,\n  onToggle,\n  children,\n  className,\n}) => {\n  const [isOpen, setIsOpen] = useState(open);\n\n  const handleToggle = () => {\n    setIsOpen(!isOpen);\n\n    if (onToggle) {\n      onToggle(!isOpen);\n    }\n  };\n\n  return (\n    <Wrapper className={className}>\n      <TitleWrapper onClick={handleToggle} className={classNames({ isOpen })}>\n        <Title>\n          <Left>{title}</Left>\n          {right ? hideRightIfOpen && isOpen ? undefined : <Right>{right}</Right> : undefined}\n        </Title>\n        <ChevronIcon name=\"chevron\" className={classNames({ isOpen })} />\n      </TitleWrapper>\n      {isOpen ? (\n        <Content className={classNames({ noContentPadding })}>{children}</Content>\n      ) : undefined}\n    </Wrapper>\n  );\n};\n","import type { FC, ReactElement } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nconst AccordionTitleWrapper = styled.div`\n  display: grid;\n  grid-gap: 4px;\n\n  font-weight: 500;\n  letter-spacing: 0.01em;\n`;\n\nconst AccordionTitlePrimary = styled.div`\n  color: ${theme.colors.textIcon.primary};\n  font-size: 16px;\n  line-height: 140%;\n`;\n\nconst AccordionTitleSecondary = styled.div`\n  display: flex;\n\n  color: ${theme.colors.textIcon.secondary};\n  font-size: 14px;\n  line-height: 120%;\n`;\n\nconst AccordionTitleSecondaryValue = styled.div`\n  margin-left: 4px;\n\n  color: ${theme.colors.textIcon.primary};\n`;\n\nconst titleBottomNameEl = (\n  titleBottomName: string | ReactElement,\n  titleBottomValue?: string | ReactElement,\n) => (\n  <>\n    {titleBottomName}\n    {titleBottomValue ? ':' : null}\n  </>\n);\n\nconst titleBottomValueEl = (titleBottomValue: string | ReactElement) =>\n  titleBottomValue ? (\n    <AccordionTitleSecondaryValue>{titleBottomValue}</AccordionTitleSecondaryValue>\n  ) : null;\n\ninterface Props {\n  title: string;\n  titleBottomName: string | ReactElement;\n  titleBottomValue: string | ReactElement;\n}\n\nexport const AccordionTitle: FC<Props> = ({ title, titleBottomName, titleBottomValue }) => {\n  return (\n    <AccordionTitleWrapper>\n      <AccordionTitlePrimary>{title}</AccordionTitlePrimary>\n      <AccordionTitleSecondary>\n        {titleBottomNameEl(titleBottomName, titleBottomValue)}\n        {titleBottomValueEl(titleBottomValue)}\n      </AccordionTitleSecondary>\n    </AccordionTitleWrapper>\n  );\n};\n","import { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nexport const ListWrapper = styled.div`\n  display: grid;\n  grid-gap: 8px;\n  padding: 20px;\n\n  &.flat {\n    padding: 0 20px;\n  }\n\n  &.total {\n    padding: 23px 20px;\n  }\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ${theme.colors.stroke.secondary};\n  }\n`;\n\nexport const AccordionList = styled.div`\n  display: grid;\n  grid-gap: 4px;\n  padding: 16px 20px;\n\n  &.total {\n    padding: 26px 20px;\n  }\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ${theme.colors.stroke.secondary};\n  }\n`;\n\nexport const Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nexport const Text = styled.div`\n  display: inline-block;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  &.inline-flex {\n    display: inline-flex;\n  }\n\n  &.flex-end {\n    justify-content: flex-end;\n  }\n\n  &.nowrap {\n    white-space: nowrap;\n  }\n\n  &.right {\n    text-align: right;\n  }\n\n  &.big {\n    font-weight: 700;\n  }\n\n  &.grid {\n    display: grid;\n    flex-shrink: 0;\n  }\n\n  &.gray {\n    color: ${theme.colors.textIcon.secondary};\n  }\n\n  &.green {\n    color: ${theme.colors.system.successMain};\n  }\n`;\n","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"arrow-icon\",\n  \"use\": \"arrow-icon-usage\",\n  \"viewBox\": \"0 0 14 14\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 14 14\\\" id=\\\"arrow-icon\\\"><path d=\\\"M12.834 7H1.167M7 12.834 1.167 7 7 1.167\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"arrow-triangle-icon\",\n  \"use\": \"arrow-triangle-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"arrow-triangle-icon\\\"><g clip-path=\\\"url(#arrow-triangle-icon_a)\\\"><path d=\\\"M17 8.507a.417.417 0 0 0-.209-.367c-.14-.09-.33-.135-.57-.135L7.773 8c-.237 0-.425.046-.564.138A.419.419 0 0 0 7 8.502c0 .082.02.159.06.231.04.072.088.154.143.246l4.084 6.563c.106.168.215.286.327.355.112.069.24.103.383.103a.712.712 0 0 0 .386-.103c.11-.07.22-.187.33-.355L16.79 8.98c.06-.088.109-.169.149-.241.04-.072.06-.15.06-.231Z\\\" fill=\\\"currentColor\\\" /></g><defs><clipPath id=\\\"arrow-triangle-icon_a\\\"><path fill=\\\"#fff\\\" transform=\\\"translate(7 8)\\\" d=\\\"M0 0h10v8H0z\\\" /></clipPath></defs></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"attention-icon\",\n  \"use\": \"attention-icon-usage\",\n  \"viewBox\": \"0 0 24 23\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 23\\\" id=\\\"attention-icon\\\"><path style=\\\"fill:#fff;fill-opacity:0;pointer-events:none\\\" fill=\\\"none\\\" d=\\\"M0 0h24v23H0z\\\" /><path d=\\\"M21.95 22.195H2.394c-.438 0-.841-.247-1.06-.647a1.35 1.35 0 0 1 .005-1.291l9.778-18.043c.218-.395.62-.639 1.055-.639.435 0 .837.244 1.056.64l9.778 18.042c.22.399.222.891.004 1.291-.217.4-.623.647-1.06.647Z\\\" fill=\\\"#FFC107\\\" /><path d=\\\"M10.95 18.42c0-.173.028-.331.087-.48a1.106 1.106 0 0 1 .628-.635c.149-.06.316-.09.503-.09s.356.03.506.09a1.09 1.09 0 0 1 .633.635c.059.149.087.307.087.48 0 .174-.028.333-.087.477-.058.145-.14.27-.246.38-.105.106-.234.19-.387.252a1.37 1.37 0 0 1-.506.089c-.187 0-.354-.03-.503-.09a1.116 1.116 0 0 1-.628-.631 1.252 1.252 0 0 1-.087-.477Zm2.126-2.669H11.26l-.258-7.732h2.331l-.257 7.732Z\\\" fill=\\\"#5D4037\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"branch-icon\",\n  \"use\": \"branch-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"branch-icon\\\"><path d=\\\"M16.8 4.8c-1.765 0-3.2 1.413-3.2 3.15 0 1.399.937 2.573 2.222 2.984-.134.838-.5 1.53-1.125 2.09-1.78 1.596-5.053 1.742-6.583 1.717V9.152C9.431 8.763 10.4 7.572 10.4 6.15 10.4 4.413 8.965 3 7.2 3 5.435 3 4 4.413 4 6.15c0 1.422.97 2.613 2.286 3.003v5.694C4.969 15.237 4 16.428 4 17.85 4 19.587 5.435 21 7.2 21c1.765 0 3.2-1.413 3.2-3.15 0-.496-.128-.959-.335-1.376 1.883-.168 4.257-.681 5.86-2.115 1.002-.897 1.582-2.038 1.74-3.391C19.008 10.594 20 9.39 20 7.95c0-1.737-1.435-3.15-3.2-3.15ZM5.829 6.15c0-.744.615-1.35 1.371-1.35s1.371.606 1.371 1.35c0 .744-.615 1.35-1.371 1.35a1.363 1.363 0 0 1-1.371-1.35ZM7.2 19.2a1.363 1.363 0 0 1-1.371-1.35c0-.739.607-1.34 1.355-1.348l.118.009c.709.052 1.27.629 1.27 1.339 0 .744-.616 1.35-1.372 1.35Zm9.6-9.9a1.362 1.362 0 0 1-1.371-1.35c0-.744.615-1.35 1.371-1.35s1.371.606 1.371 1.35c0 .744-.615 1.35-1.371 1.35Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"bucket-icon\",\n  \"use\": \"bucket-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"bucket-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M20.287 5.243c.39 0 .713.323.713.734v.38a.73.73 0 0 1-.713.734H3.714A.73.73 0 0 1 3 6.357v-.38c0-.411.324-.734.714-.734H6.63c.592 0 1.107-.421 1.24-1.015l.153-.682C8.261 2.617 9.041 2 9.935 2h4.13c.884 0 1.674.617 1.902 1.497l.163.73a1.28 1.28 0 0 0 1.241 1.016h2.916Zm-1.481 13.891c.304-2.837.837-9.577.837-9.645a.746.746 0 0 0-.18-.558.726.726 0 0 0-.524-.234H5.07c-.2 0-.391.087-.524.234a.79.79 0 0 0-.19.558l.053.647c.142 1.763.537 6.674.793 8.998.18 1.712 1.304 2.788 2.931 2.827 1.256.029 2.55.039 3.872.039 1.246 0 2.51-.01 3.805-.039 1.684-.029 2.806-1.086 2.997-2.827Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"card-icon\",\n  \"use\": \"card-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"card-icon\\\"><path d=\\\"M3 16.773c0 .59.237 1.157.659 1.575.422.417.994.652 1.591.652h13.5c.597 0 1.169-.235 1.591-.652.422-.418.659-.985.659-1.575v-6.125H3v6.125Zm2.652-3.023c0-.316.127-.62.353-.844.226-.224.532-.35.852-.35h1.929c.32 0 .626.127.852.35.226.224.353.527.353.844v.796c0 .316-.127.62-.353.843-.226.224-.533.35-.852.35H6.857c-.32 0-.626-.126-.852-.35a1.187 1.187 0 0 1-.353-.843v-.796ZM18.75 5H5.25c-.597 0-1.169.235-1.591.652A2.216 2.216 0 0 0 3 7.227v1.034h18V7.227c0-.59-.237-1.157-.659-1.575A2.262 2.262 0 0 0 18.75 5Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"chain-icon\",\n  \"use\": \"chain-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"chain-icon\\\"><path d=\\\"M10.667 12.666a3.335 3.335 0 0 0 5.027.36l2-2a3.333 3.333 0 0 0-4.714-4.713l-1.146 1.14\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /><path d=\\\"M13.334 11.333a3.334 3.334 0 0 0-5.027-.36l-2 2a3.333 3.333 0 0 0 4.713 4.714l1.14-1.14\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"change-icon\",\n  \"use\": \"change-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"change-icon\\\"><path d=\\\"M6.037 10.838c.676.037 1.013-.263 1.013-.863s-.412-1.012-1.013-1.012H3.525c1.2-4.088 4.875-6.975 9.188-6.975 4.387 0 8.175 3 9.262 7.274.112.488.712.9 1.2.713.488-.112.9-.713.712-1.2C22.462 3.6 17.887 0 12.6 0 7.912 0 3.825 2.888 1.875 7.162V4.987c0-.524-.225-1.012-.825-1.012S.038 4.388 0 4.987v4.688c.037.712.6 1.2 1.35 1.162h4.688ZM22.65 13.838h-4.388c-.3 0-.638.075-.863.262-.262.188-.45.488-.45.863 0 .487.45.75 1.013.75h2.475c-1.388 3.825-4.875 6.225-8.775 6.225-4.088 0-7.65-2.588-8.963-6.563-.187-.488-.712-.787-1.312-.6-.488.188-.788.713-.6 1.312C2.437 20.813 6.712 24 11.699 24c4.388 0 8.25-2.475 10.425-6.375v2.288c.038.562.225 1.012.825 1.012s1.013-.413 1.05-1.012v-4.688c-.037-.675-.637-1.275-1.35-1.387Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"checkmark-icon\",\n  \"use\": \"checkmark-icon-usage\",\n  \"viewBox\": \"0 0 20 20\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" id=\\\"checkmark-icon\\\"><path d=\\\"M9.022 14.167c.251 0 .446-.106.584-.317l4.42-7.019c.047-.077.082-.15.106-.218a.641.641 0 0 0 .035-.209.557.557 0 0 0-.16-.41.552.552 0 0 0-.409-.16.56.56 0 0 0-.296.071.709.709 0 0 0-.221.24l-4.077 6.597-2.093-2.74c-.135-.176-.3-.264-.494-.264a.565.565 0 0 0-.583.58.637.637 0 0 0 .174.442l2.436 3.1c.16.204.353.307.578.307Z\\\" fill=\\\"currentColor\\\" stroke=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"chevron-1-icon\",\n  \"use\": \"chevron-1-icon-usage\",\n  \"viewBox\": \"0 0 15 15\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 15 15\\\" id=\\\"chevron-1-icon\\\"><path d=\\\"m3.75 5.625 3.75 3.75 3.75-3.75\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"chevron-rounded-icon\",\n  \"use\": \"chevron-rounded-icon-usage\",\n  \"viewBox\": \"0 0 17 15\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 17 15\\\" id=\\\"chevron-rounded-icon\\\"><path d=\\\"M10.37 1.135c.08.077.418.367.695.638 1.747 1.586 4.606 5.724 5.479 7.89.14.33.437 1.16.456 1.605 0 .426-.098.832-.297 1.219-.278.483-.715.87-1.23 1.082-.359.137-1.43.35-1.45.35-1.171.211-3.076.328-5.181.328-2.006 0-3.833-.117-5.023-.29-.019-.02-1.35-.232-1.806-.465-.834-.425-1.35-1.257-1.35-2.147v-.077c.02-.58.537-1.798.556-1.798.874-2.05 3.593-6.092 5.4-7.717 0 0 .464-.458.754-.657.416-.31.933-.464 1.449-.464.575 0 1.112.174 1.549.503Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"clock-send-icon\",\n  \"use\": \"clock-send-icon-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"clock-send-icon\\\"><path d=\\\"M16 9.333V16l4 4m8-4c0 6.627-5.373 12-12 12S4 22.627 4 16 9.373 4 16 4s12 5.373 12 12Z\\\" stroke=\\\"#fff\\\" stroke-width=\\\"2.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"close-icon\",\n  \"use\": \"close-icon-usage\",\n  \"viewBox\": \"0 0 17 17\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 17 17\\\" id=\\\"close-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M15.757.462c.47.47.47 1.23 0 1.7L2.161 15.758a1.202 1.202 0 0 1-1.7-1.7L14.058.463c.47-.469 1.23-.469 1.7 0Z\\\" fill=\\\"currentColor\\\" /><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M.461.462c.47-.469 1.23-.469 1.7 0L15.757 14.06a1.202 1.202 0 0 1-1.7 1.7L.462 2.161c-.469-.47-.469-1.23 0-1.7Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"currency-icon\",\n  \"use\": \"currency-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"currency-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M21 8a1 1 0 0 1 1 1v8a3 3 0 0 1-3 3H7a1 1 0 1 1 0-2h12a1 1 0 0 0 1-1V9a1 1 0 0 1 1-1Z\\\" fill=\\\"currentColor\\\" /><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M5.286 5h11.428C17.977 5 19 6.075 19 7.4v7.2c0 1.325-1.023 2.4-2.286 2.4H5.286C4.023 17 3 15.925 3 14.6V7.4C3 6.075 4.023 5 5.286 5ZM14 11a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"db-icon\",\n  \"use\": \"db-icon-usage\",\n  \"viewBox\": \"0 0 26 26\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 26 26\\\" id=\\\"db-icon\\\"><g clip-path=\\\"url(#db-icon_a)\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"><path d=\\\"M13 9.75c4.039 0 7.313-1.091 7.313-2.438 0-1.346-3.274-2.437-7.313-2.437S5.687 5.966 5.687 7.313C5.688 8.659 8.962 9.75 13 9.75ZM20.313 13c0 1.349-3.25 2.438-7.313 2.438S5.687 14.348 5.687 13\\\" /><path d=\\\"M5.688 7.313v11.375c0 1.348 3.25 2.437 7.312 2.437 4.063 0 7.313-1.089 7.313-2.438V7.313\\\" /></g><defs><clipPath id=\\\"db-icon_a\\\"><path fill=\\\"#fff\\\" transform=\\\"translate(3.25 3.25)\\\" d=\\\"M0 0h19.5v19.5H0z\\\" /></clipPath></defs></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"error-icon\",\n  \"use\": \"error-icon-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 16 16\\\" id=\\\"error-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M4.536 0h6.936C14.184 0 16 1.903 16 4.735v6.536c0 2.825-1.816 4.73-4.528 4.73H4.536C1.824 16 0 14.095 0 11.27V4.735C0 1.903 1.824 0 4.536 0ZM4.23 5.486a.889.889 0 0 1 1.257-1.257L8 6.743l2.514-2.514a.889.889 0 0 1 1.257 1.257L9.257 8l2.514 2.514a.889.889 0 0 1-1.257 1.257L8 9.257l-2.514 2.514a.889.889 0 0 1-1.257-1.257L6.743 8 4.229 5.486Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"error-send-icon\",\n  \"use\": \"error-send-icon-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"error-send-icon\\\"><path d=\\\"M16 28c6.627 0 12-5.373 12-12S22.627 4 16 4 4 9.373 4 16s5.373 12 12 12Z\\\" stroke=\\\"#fff\\\" stroke-width=\\\"2.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /><path d=\\\"m8 8 16 16\\\" stroke=\\\"#fff\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"free-tx-icon\",\n  \"use\": \"free-tx-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"free-tx-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M12.74 2.811a1 1 0 0 0-1.48 0L9.93 4.273l-1.884-.6a1 1 0 0 0-1.28.739l-.423 1.931-1.931.423a1 1 0 0 0-.74 1.28l.6 1.884-1.46 1.33a1 1 0 0 0 0 1.48l1.46 1.33-.6 1.884a1 1 0 0 0 .74 1.28l1.931.423.423 1.931a1 1 0 0 0 1.28.74l1.883-.6 1.332 1.46a1 1 0 0 0 1.478 0l1.332-1.46 1.883.6a1 1 0 0 0 1.28-.74l.423-1.931 1.931-.422a1 1 0 0 0 .74-1.28l-.6-1.884 1.46-1.332a1 1 0 0 0 0-1.478l-1.46-1.331.6-1.884a1 1 0 0 0-.74-1.28l-1.931-.423-.422-1.931a1 1 0 0 0-1.28-.74l-1.884.6-1.332-1.46Zm.262 4.745-2.944 8.597.914.292 2.945-8.573-.915-.316Zm-2.832.328c-1.002 0-1.503.592-1.503 1.775 0 1.176.5 1.763 1.503 1.763s1.504-.587 1.504-1.763c0-1.183-.501-1.775-1.504-1.775Zm-.275 1.763c0-.292.016-.494.05-.608.042-.121.117-.182.225-.182.109 0 .18.06.213.182.042.114.063.316.063.608s-.02.499-.063.62c-.033.122-.104.183-.213.183-.108 0-.183-.061-.225-.183-.034-.121-.05-.328-.05-.62Zm3.935 3.016c-1.003 0-1.504.591-1.504 1.775 0 1.176.501 1.763 1.504 1.763 1.002 0 1.503-.587 1.503-1.763 0-1.184-.5-1.775-1.503-1.775Zm-.276 1.763c0-.292.017-.495.05-.608.042-.122.117-.182.226-.182.108 0 .18.06.213.182.041.113.062.316.062.608s-.02.498-.062.62c-.034.122-.105.183-.213.183-.109 0-.184-.061-.226-.183-.033-.121-.05-.328-.05-.62Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"lock-icon\",\n  \"use\": \"lock-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"lock-icon\\\"><path d=\\\"M12 2C9.243 2 7 4.243 7 7v3H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-1V7c0-2.757-2.243-5-5-5ZM9 7c0-1.654 1.346-3 3-3s3 1.346 3 3v3H9V7Zm4 10.723V19a1 1 0 1 1-2 0v-1.277a1.993 1.993 0 0 1 .567-3.677A2.001 2.001 0 0 1 14 16a1.99 1.99 0 0 1-1 1.723Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"logout-icon\",\n  \"use\": \"logout-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"logout-icon\\\"><path d=\\\"M13 4.009a1 1 0 1 0-2 0l-.003 8.003a1 1 0 0 0 2 0L13 4.01Z\\\" fill=\\\"currentColor\\\" /><path d=\\\"M4 12.992c0-2.21.895-4.21 2.343-5.657l1.414 1.414a6 6 0 1 0 8.485 0l1.415-1.414A8 8 0 1 1 4 12.992Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"more-icon\",\n  \"use\": \"more-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"more-icon\\\"><path d=\\\"M12 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM19 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM5 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"app-store-icon\",\n  \"use\": \"app-store-icon-usage\",\n  \"viewBox\": \"0 0 20 20\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" id=\\\"app-store-icon\\\"><path d=\\\"M7.5 5.833c-2.5 0-3.333 2.5-3.333 4.584 0 2.5 1.666 6.25 3.333 6.25.907-.039 1.4-.417 2.5-.417 1.093 0 1.25.417 2.5.417s3.333-2.5 3.333-4.167c-.023-.008-2.06-.336-2.083-2.5-.016-1.808 2.013-2.462 2.083-2.5-.852-1.243-2.459-1.636-2.916-1.667-1.194-.092-2.359.834-2.917.834-.567 0-1.583-.834-2.5-.834ZM10 3.333a1.667 1.667 0 0 0 1.667-1.666A1.666 1.666 0 0 0 10 3.333Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"arrow-down-icon\",\n  \"use\": \"arrow-down-icon-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 16 16\\\" id=\\\"arrow-down-icon\\\"><path d=\\\"M8 12.667V3.333m0 9.334L10.666 10M8 12.667 5.333 10\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"arrow-left-icon\",\n  \"use\": \"arrow-left-icon-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 16 16\\\" id=\\\"arrow-left-icon\\\"><path d=\\\"M3.333 8h9.333M3.333 8 6 10.667M3.333 8 6 5.333\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"arrow-swap-icon\",\n  \"use\": \"arrow-swap-icon-usage\",\n  \"viewBox\": \"0 0 20 20\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" id=\\\"arrow-swap-icon\\\"><path d=\\\"M4.08 5.603a.678.678 0 0 0 0 .999l3.24 3.164c.125.125.32.207.489.207.396 0 .665-.276.665-.666a.607.607 0 0 0-.194-.464L6.936 7.55l-.954-.83 1.331.051h8.149a.65.65 0 0 0 .672-.672c0-.389-.283-.665-.672-.665H7.313l-1.33.044.953-.823L8.28 3.362a.62.62 0 0 0 .194-.47c0-.384-.27-.66-.665-.66a.735.735 0 0 0-.49.207L4.08 5.603Zm11.834 8.312a.678.678 0 0 0 0-.998L12.68 9.753a.763.763 0 0 0-.496-.207c-.39 0-.66.276-.66.665 0 .182.063.34.189.465l1.343 1.293.955.823-1.331-.044H4.532a.653.653 0 0 0-.672.671c0 .383.289.666.672.666h8.149l1.33-.044-.954.822-1.343 1.294a.634.634 0 0 0-.189.464c0 .39.27.666.66.666.17 0 .364-.082.496-.208l3.233-3.164Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"bottom-icon\",\n  \"use\": \"bottom-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"bottom-icon\\\"><path d=\\\"M4 20h16m-8-6V4m0 10 4-4m-4 4-4-4\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"caret-icon\",\n  \"use\": \"caret-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"caret-icon\\\"><path d=\\\"M11.576 15.322a.5.5 0 0 0 .848 0l4.098-6.557A.5.5 0 0 0 16.098 8H7.902a.5.5 0 0 0-.424.765l4.098 6.557Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"check-icon\",\n  \"use\": \"check-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"check-icon\\\"><path d=\\\"m5 12 5 5L20 7\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"chevron-icon\",\n  \"use\": \"chevron-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"chevron-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M13.207 16.207a1 1 0 0 1-1.414 0l-5-5a1 1 0 0 1 1.414-1.414l4.293 4.293 4.293-4.293a1 1 0 1 1 1.414 1.414l-5 5Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"clock-icon\",\n  \"use\": \"clock-icon-usage\",\n  \"viewBox\": \"0 0 28 28\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 28 28\\\" id=\\\"clock-icon\\\"><path d=\\\"M14 7.333V14l4 4m8-4c0 6.627-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2s12 5.373 12 12Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"copy-icon\",\n  \"use\": \"copy-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"copy-icon\\\"><path d=\\\"M16 8V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2m2-8h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"cross-icon\",\n  \"use\": \"cross-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"cross-icon\\\"><path d=\\\"M18 6 6 18M6 6l12 12\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"external-icon\",\n  \"use\": \"external-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"external-icon\\\"><path d=\\\"M11 7H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-5m-7 1L20 4m0 0h-5m5 0v5\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"eye-hide-icon\",\n  \"use\": \"eye-hide-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"eye-hide-icon\\\"><path d=\\\"M14.12 14.12a3 3 0 1 1-4.24-4.24M1 1l22 22m-5.06-5.06A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94l11.88 11.88ZM9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.498 18.498 0 0 1-2.16 3.19L9.9 4.24Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"eye-icon\",\n  \"use\": \"eye-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"eye-icon\\\"><path d=\\\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /><path d=\\\"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"gear-icon\",\n  \"use\": \"gear-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"gear-icon\\\"><path d=\\\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 0 0-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 0 0-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.723 1.723 0 0 0-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 0 0-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 0 0 1.066-2.573c-.94-1.543.826-3.31 2.37-2.37 1 .608 2.296.07 2.572-1.065Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /><path d=\\\"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"google-play-icon\",\n  \"use\": \"google-play-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"google-play-icon\\\"><path d=\\\"M15 9 4.5 20.5m0-17L15 15M4 3.71v16.58a.7.7 0 0 0 1.05.606l14.622-8.42a.55.55 0 0 0 0-.953L5.05 3.104A.7.7 0 0 0 4 3.71Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"info-icon\",\n  \"use\": \"info-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"info-icon\\\"><path d=\\\"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3ZM9 3 5 6.99h3V14h2V6.99h3L9 3Zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3ZM9 3 5 6.99h3V14h2V6.99h3L9 3Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"kebab-icon\",\n  \"use\": \"kebab-icon-usage\",\n  \"viewBox\": \"0 0 20 20\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" id=\\\"kebab-icon\\\"><path d=\\\"M10.833 15.833a.833.833 0 1 0-1.666 0 .833.833 0 0 0 1.666 0ZM10.833 10a.833.833 0 1 0-1.666 0 .833.833 0 0 0 1.666 0ZM10.833 4.167a.833.833 0 1 0-1.666 0 .833.833 0 0 0 1.666 0Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"pen-icon\",\n  \"use\": \"pen-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"pen-icon\\\"><path d=\\\"M12 19h8M16 4.544a1.9 1.9 0 0 1 2.055-.403 1.888 1.888 0 0 1 1.02 1.006 1.835 1.835 0 0 1-.408 2.026L7.556 18.123 4 19l.889-3.504L16 4.544Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"plus-icon\",\n  \"use\": \"plus-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"plus-icon\\\"><path d=\\\"M12 3.515V12m0 0v8.485M12 12H3.515M12 12h8.485\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"qr-icon\",\n  \"use\": \"qr-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"qr-icon\\\"><path d=\\\"M7 17v.01M7 7v.01M17 7v.01M17 14h-3v3m6-3v.01M14 20h3m0-3h3v3M5 4h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1Zm10 0h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1ZM5 14h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"question-icon\",\n  \"use\": \"question-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"question-icon\\\"><path d=\\\"M12 15.857v.013m-1.466-7.05A1.928 1.928 0 1 1 12 12v1m9-1a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"rocket-icon\",\n  \"use\": \"rocket-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"rocket-icon\\\"><path d=\\\"M7 14a6 6 0 0 0-3 6 6 6 0 0 0 6-3m-6-4a8 8 0 0 1 7 7 6 6 0 0 0 3-5 9 9 0 0 0 6-8 3 3 0 0 0-3-3 9 9 0 0 0-8 6 6 6 0 0 0-5 3Zm12-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"round-stop-icon\",\n  \"use\": \"round-stop-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"round-stop-icon\\\"><path d=\\\"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18ZM6 6l12 12\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"search-icon\",\n  \"use\": \"search-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"search-icon\\\"><path d=\\\"m20 20-5.333-5.333m1.777-4.445a6.222 6.222 0 1 1-12.444 0 6.222 6.222 0 0 1 12.444 0Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"send-message-icon\",\n  \"use\": \"send-message-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"send-message-icon\\\"><path d=\\\"M10 14 21 3M10 14l3.5 7a.55.55 0 0 0 1 0L21 3M10 14l-7-3.5a.55.55 0 0 1 0-1L21 3\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"store-icon\",\n  \"use\": \"store-icon-usage\",\n  \"viewBox\": \"0 0 20 20\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" id=\\\"store-icon\\\"><path d=\\\"M9.167 5.833H5A1.667 1.667 0 0 0 3.333 7.5V15A1.667 1.667 0 0 0 5 16.667h7.5A1.667 1.667 0 0 0 14.167 15v-4.167m-5.834.834 8.334-8.334m0 0H12.5m4.167 0V7.5\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"swap-bordered-icon\",\n  \"use\": \"swap-bordered-icon-usage\",\n  \"viewBox\": \"0 0 48 48\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 48 48\\\" id=\\\"swap-bordered-icon\\\"><path d=\\\"M.5 24c0-8.972 1.502-14.795 5.104-18.396C9.205 2.002 15.028.5 24 .5c8.972 0 14.795 1.502 18.396 5.104C45.998 9.205 47.5 15.028 47.5 24c0 8.972-1.502 14.795-5.104 18.396C38.795 45.998 32.972 47.5 24 47.5c-8.972 0-14.795-1.502-18.396-5.104C2.002 38.795.5 32.972.5 24Z\\\" fill=\\\"#fff\\\" stroke=\\\"currentColor\\\" /><path d=\\\"M19 15v18m0-18 3 3m-3-3-3 3m16 12-3 3m0 0-3-3m3 3V15\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"swap-icon\",\n  \"use\": \"swap-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"swap-icon\\\"><path d=\\\"M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4m-4 4a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"top-icon\",\n  \"use\": \"top-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"top-icon\\\"><path d=\\\"M12 4v10m0-10 4 4m-4-4L8 8M4 20h16\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"wallet-icon\",\n  \"use\": \"wallet-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"wallet-icon\\\"><path d=\\\"M17 8V5a1 1 0 0 0-1-1H6a2 2 0 0 0-2 2m0 0a2 2 0 0 0 2 2h12a1 1 0 0 1 1 1v3M4 6v12a2 2 0 0 0 2 2h12a1 1 0 0 0 1-1v-3m1-4v4h-4a2 2 0 0 1 0-4h4Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"warning-icon\",\n  \"use\": \"warning-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"warning-icon\\\"><path d=\\\"M12 9v2m0 4v.01M5 19h14a2 2 0 0 0 1.84-2.75L13.74 4a2 2 0 0 0-3.5 0l-7.1 12.25A2 2 0 0 0 4.89 19\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"opposite-arrows-icon\",\n  \"use\": \"opposite-arrows-icon-usage\",\n  \"viewBox\": \"0 0 14 14\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 14 14\\\" id=\\\"opposite-arrows-icon\\\"><path d=\\\"M3.667 1v12m0-12 2 2m-2-2-2 2m10.666 8-2 2m0 0-2-2m2 2V1\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"plug-icon\",\n  \"use\": \"plug-icon-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 16 16\\\" id=\\\"plug-icon\\\"><path d=\\\"M2.908 5.137c0 .316.257.572.573.572h.559v2.864c0 1.263 1.014 2.29 2.262 2.29h1.131v2.299a.566.566 0 1 0 1.132 0v-2.298h1.131c1.248 0 2.263-1.028 2.263-2.291V5.709h.558a.573.573 0 0 0 0-1.145H3.481a.573.573 0 0 0-.573.573Zm2.263-2.298a.566.566 0 1 1 1.131 0V3.99H5.171V2.84Zm4.525 0a.566.566 0 1 1 1.131 0V3.99h-1.13V2.84Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"question-circle-icon\",\n  \"use\": \"question-circle-icon-usage\",\n  \"viewBox\": \"0 0 20 20\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" id=\\\"question-circle-icon\\\"><g clip-path=\\\"url(#question-circle-icon_a)\\\"><path d=\\\"M10 20a9.592 9.592 0 0 0 3.858-.784 10.264 10.264 0 0 0 3.191-2.162 10.148 10.148 0 0 0 2.167-3.191A9.627 9.627 0 0 0 20 10a9.592 9.592 0 0 0-.784-3.858 10.222 10.222 0 0 0-2.167-3.191A10.205 10.205 0 0 0 13.853.784 9.627 9.627 0 0 0 9.99 0a9.592 9.592 0 0 0-3.858.784A10.264 10.264 0 0 0 .784 6.142 9.592 9.592 0 0 0 0 10c0 1.366.261 2.654.784 3.863a10.148 10.148 0 0 0 2.167 3.19 10.264 10.264 0 0 0 3.191 2.163A9.592 9.592 0 0 0 10 20Zm-.186-7.873c-.55 0-.824-.268-.824-.804v-.137c0-.503.123-.91.368-1.22.245-.31.55-.593.916-.848.458-.308.796-.576 1.015-.804.22-.23.329-.52.329-.873 0-.385-.14-.7-.422-.941-.281-.242-.657-.363-1.127-.363-.347 0-.647.08-.902.24a1.8 1.8 0 0 0-.618.662 38.76 38.76 0 0 0-.407.495c-.108.134-.309.201-.603.201-.17 0-.33-.06-.48-.181-.15-.121-.226-.296-.226-.525a1.674 1.674 0 0 1 .079-.51c.13-.477.479-.892 1.044-1.245.565-.352 1.29-.529 2.171-.529.589 0 1.131.1 1.628.3.497.198.895.493 1.196.881.3.39.451.868.451 1.437 0 .62-.16 1.108-.48 1.46-.32.353-.73.7-1.226 1.04-.36.242-.626.465-.799.671-.173.206-.26.453-.26.74v.128a.685.685 0 0 1-.22.515c-.147.14-.348.21-.603.21Zm.03 2.951c-.282 0-.535-.1-.76-.299a.97.97 0 0 1-.339-.76c0-.3.113-.552.338-.754.226-.203.48-.304.76-.304.288 0 .544.1.77.299a.97.97 0 0 1 .338.76.966.966 0 0 1-.338.764 1.14 1.14 0 0 1-.77.294Z\\\" fill=\\\"currentColor\\\" /></g><defs><clipPath id=\\\"question-circle-icon_a\\\"><path fill=\\\"#fff\\\" d=\\\"M0 0h20v20H0z\\\" /></clipPath></defs></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"reload-icon\",\n  \"use\": \"reload-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"reload-icon\\\"><path d=\\\"M12 2.25c-5.376 0-9.75 4.374-9.75 9.75 0 5.384 4.366 9.75 9.75 9.75 5.376 0 9.75-4.374 9.75-9.75 0-5.385-4.366-9.75-9.75-9.75Zm4.406 10.266A4.407 4.407 0 1 1 12 8.109h.197l-.66-.66a.656.656 0 1 1 .927-.929l1.632 1.632a1 1 0 0 1 0 1.414l-1.632 1.632a.656.656 0 0 1-.928-.928l.845-.844c-.113-.004-.24-.004-.381-.004a3.094 3.094 0 1 0 3.094 3.094.656.656 0 0 1 1.312 0Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"search-icon\",\n  \"use\": \"search-icon-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"search-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M8.398 14.327c0-3.294 2.636-5.927 5.843-5.927a5.8 5.8 0 0 1 4.123 1.729 5.97 5.97 0 0 1 1.72 4.198c0 3.293-2.637 5.927-5.843 5.927-3.207 0-5.843-2.634-5.843-5.927ZM14.241 6.4c-4.331 0-7.843 3.55-7.843 7.927 0 4.378 3.512 7.927 7.843 7.927 4.331 0 7.842-3.55 7.842-7.927a7.97 7.97 0 0 0-2.297-5.605A7.8 7.8 0 0 0 14.241 6.4Zm7.712 14.313 2.336 1.885h.04a1.232 1.232 0 0 1 0 1.73 1.2 1.2 0 0 1-1.71 0l-1.939-2.222a.99.99 0 0 1 0-1.393.901.901 0 0 1 1.273 0Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"settings-icon\",\n  \"use\": \"settings-icon-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"settings-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M8.889 7.111c.49 0 .889.398.889.889v16A.889.889 0 0 1 8 24V8c0-.491.398-.889.889-.889ZM23.11 7.111c.492 0 .89.398.89.889v16a.889.889 0 0 1-1.778 0V8c0-.491.398-.889.889-.889Z\\\" fill=\\\"currentColor\\\" /><rect x=\\\"21.443\\\" y=\\\"14.333\\\" width=\\\"3.333\\\" height=\\\"3.333\\\" rx=\\\"1.667\\\" fill=\\\"#F6F6F8\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" /><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M16 7.111c.49 0 .888.398.888.889v16a.889.889 0 1 1-1.778 0V8c0-.491.398-.889.89-.889Z\\\" fill=\\\"currentColor\\\" /><rect x=\\\"14.333\\\" y=\\\"17.889\\\" width=\\\"3.333\\\" height=\\\"3.333\\\" rx=\\\"1.667\\\" fill=\\\"#F6F6F8\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" /><rect x=\\\"7.222\\\" y=\\\"10.778\\\" width=\\\"3.333\\\" height=\\\"3.333\\\" rx=\\\"1.667\\\" fill=\\\"#F6F6F8\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"success-icon\",\n  \"use\": \"success-icon-usage\",\n  \"viewBox\": \"0 0 16 16\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 16 16\\\" id=\\\"success-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M4.536 0h6.936C14.184 0 16 1.903 16 4.735v6.536c0 2.825-1.816 4.73-4.528 4.73H4.536C1.824 16 0 14.095 0 11.27V4.735C0 1.903 1.824 0 4.536 0Zm2.99 12.62a.79.79 0 0 1-.7.38c-.27 0-.502-.123-.694-.368l-2.923-3.72A.765.765 0 0 1 3 8.383a.677.677 0 0 1 .7-.696c.233 0 .43.106.592.317l2.512 3.287 4.892-7.916a.852.852 0 0 1 .265-.288.671.671 0 0 1 .356-.086c.2 0 .363.064.491.193a.668.668 0 0 1 .192.492.77.77 0 0 1-.042.25c-.029.083-.071.17-.127.263L7.526 12.62Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"success-send-icon\",\n  \"use\": \"success-send-icon-usage\",\n  \"viewBox\": \"0 0 28 28\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 28 28\\\" id=\\\"success-send-icon\\\"><path d=\\\"m8 14 4 4 8-8m6 4c0 6.627-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2s12 5.373 12 12Z\\\" stroke=\\\"#fff\\\" stroke-width=\\\"2.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"sun-icon\",\n  \"use\": \"sun-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"sun-icon\\\"><path d=\\\"M12.64 2.268a.87.87 0 0 1 .274.644v1.816c0 .25-.091.464-.273.64A.893.893 0 0 1 12 5.63a.893.893 0 0 1-.64-.263.856.856 0 0 1-.274-.64V2.912a.87.87 0 0 1 .273-.644A.885.885 0 0 1 12 2c.245 0 .459.09.64.268ZM12.64 18.632c.183.176.274.39.274.64v1.816a.87.87 0 0 1-.273.644A.885.885 0 0 1 12 22a.885.885 0 0 1-.64-.268.87.87 0 0 1-.274-.644v-1.816c0-.25.091-.464.273-.64a.893.893 0 0 1 .641-.264c.245 0 .459.088.64.264ZM21.731 12.64a.888.888 0 0 1-.645.263h-1.81a.878.878 0 0 1-.636-.264.863.863 0 0 1-.269-.639c0-.245.09-.456.269-.635a.87.87 0 0 1 .636-.268h1.81c.25 0 .466.089.645.268.18.179.269.39.269.635 0 .25-.09.464-.269.64ZM2.269 11.365a.87.87 0 0 1 .636-.268h1.819c.245 0 .458.089.64.268a.86.86 0 0 1 .274.635c0 .25-.091.464-.273.64a.893.893 0 0 1-.641.263H2.905a.878.878 0 0 1-.636-.264A.863.863 0 0 1 2 12c0-.245.09-.456.269-.635ZM6.848 7.778a.862.862 0 0 1-.645-.268l-1.29-1.297a.822.822 0 0 1-.247-.63.894.894 0 0 1 .264-.65.87.87 0 0 1 .65-.25.889.889 0 0 1 .631.26l1.29 1.297a.859.859 0 0 1 .256.644.845.845 0 0 1-.273.635.847.847 0 0 1-.636.26ZM16.238 6.88c0-.254.087-.467.26-.64l1.3-1.297a.882.882 0 0 1 .636-.264.85.85 0 0 1 .636.255c.173.173.261.389.264.648a.835.835 0 0 1-.255.64l-1.29 1.288a.886.886 0 0 1-.65.268.871.871 0 0 1-.64-.26.868.868 0 0 1-.26-.639ZM17.139 16.23c.254 0 .467.087.64.26l1.3 1.288c.173.173.26.386.26.64a.868.868 0 0 1-.26.64.882.882 0 0 1-.636.263.85.85 0 0 1-.637-.255l-1.308-1.288a.869.869 0 0 1-.26-.64c0-.253.087-.466.26-.639a.857.857 0 0 1 .64-.268ZM4.652 18.409c0-.254.09-.467.27-.64l1.29-1.279a.877.877 0 0 1 .645-.26c.256 0 .472.09.645.27a.853.853 0 0 1 .255.639.869.869 0 0 1-.273.64l-1.29 1.287a.878.878 0 0 1-.646.246.893.893 0 0 1-.645-.264.884.884 0 0 1-.25-.64ZM10.172 7.657A4.523 4.523 0 0 1 12 7.287c.64 0 1.244.123 1.815.37a4.87 4.87 0 0 1 1.505 1.016c.433.429.773.93 1.021 1.502.248.573.372 1.181.372 1.825 0 .644-.124 1.252-.372 1.825a4.808 4.808 0 0 1-2.527 2.527 4.51 4.51 0 0 1-1.814.37c-.651 0-1.26-.123-1.828-.37a4.902 4.902 0 0 1-1.505-1.02 4.71 4.71 0 0 1-1.022-1.507A4.59 4.59 0 0 1 7.278 12a4.658 4.658 0 0 1 1.389-3.327c.436-.43.938-.768 1.505-1.016Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"timer-icon\",\n  \"use\": \"timer-icon-usage\",\n  \"viewBox\": \"0 0 38 38\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 38 38\\\" id=\\\"timer-icon\\\"><path d=\\\"M20.629 6.667c0-.857.694-1.552 1.55-1.552h3.103a1.551 1.551 0 1 1 0 3.103H22.18a1.551 1.551 0 0 1-1.551-1.551ZM5.116 14.423c0-.857.694-1.551 1.551-1.551H9.77a1.551 1.551 0 0 1 0 3.102H6.667a1.551 1.551 0 0 1-1.551-1.551Zm0 12.41c0-.857.694-1.551 1.551-1.551H9.77a1.551 1.551 0 1 1 0 3.102H6.667a1.551 1.551 0 0 1-1.551-1.55Zm-1.552-6.205c0-.857.695-1.551 1.552-1.551h3.087a1.551 1.551 0 1 1 0 3.102H5.116a1.551 1.551 0 0 1-1.552-1.55Zm29.475-8.665a1.551 1.551 0 0 0-2.194-2.194l-.446.446c-.65.65-1.65.755-2.497.398a10.71 10.71 0 0 0-4.17-.844c-5.987 0-10.86 4.873-10.86 10.86 0 5.985 4.873 10.858 10.86 10.858 5.986 0 10.858-4.872 10.858-10.859 0-2.228-.681-4.297-1.84-6.021-.523-.779-.514-1.84.149-2.503l.14-.141Zm-7.757 8.665a1.551 1.551 0 0 1-3.102 0V15.91a1.551 1.551 0 0 1 3.102 0v4.72Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../../../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../../../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"wallet-icon\",\n  \"use\": \"wallet-icon-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" id=\\\"wallet-icon\\\"><path d=\\\"M20 7H5.6C4.4 7 4 6.4 4 6l16-1.5V3c0-.6-.6-1.1-1.2-1L3.7 4.7c-1 .2-1.7 1-1.7 2V20c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2Zm-1.5 9c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Z\\\" fill=\\\"currentColor\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import type { FC, HTMLAttributes } from 'react';\n\nimport isPropValid from '@emotion/is-prop-valid';\nimport type { CSSProperties } from '@linaria/core';\n\nimport arrow from './assets/arrow-icon.svg';\nimport arrowTriangle from './assets/arrow-triangle-icon.svg';\nimport attention from './assets/attention-icon.svg';\nimport branch from './assets/branch-icon.svg';\nimport bucket from './assets/bucket-icon.svg';\nimport card from './assets/card-icon.svg';\nimport chain from './assets/chain-icon.svg';\nimport change from './assets/change-icon.svg';\nimport checkmark from './assets/checkmark-icon.svg';\nimport chevron1 from './assets/chevron-1-icon.svg';\nimport chevronRounded from './assets/chevron-rounded-icon.svg';\nimport clockSend from './assets/clock-send-icon.svg';\nimport close from './assets/close-icon.svg';\nimport currency from './assets/currency-icon.svg';\nimport db from './assets/db-icon.svg';\nimport error from './assets/error-icon.svg';\nimport errorSend from './assets/error-send-icon.svg';\nimport freeTx from './assets/free-tx-icon.svg';\nimport lock from './assets/lock-icon.svg';\nimport logout from './assets/logout-icon.svg';\nimport more from './assets/more-icon.svg';\nimport appStore from './assets/new/app-store-icon.svg';\nimport arrowDown from './assets/new/arrow-down-icon.svg';\nimport arrowLeft from './assets/new/arrow-left-icon.svg';\nimport arrowSwap from './assets/new/arrow-swap-icon.svg';\nimport bottom from './assets/new/bottom-icon.svg';\nimport caret from './assets/new/caret-icon.svg';\nimport check from './assets/new/check-icon.svg';\nimport chevron from './assets/new/chevron-icon.svg';\nimport clock from './assets/new/clock-icon.svg';\nimport copy from './assets/new/copy-icon.svg';\nimport cross from './assets/new/cross-icon.svg';\nimport external from './assets/new/external-icon.svg';\nimport eyeHide from './assets/new/eye-hide-icon.svg';\nimport eye from './assets/new/eye-icon.svg';\nimport gear from './assets/new/gear-icon.svg';\nimport googlePlay from './assets/new/google-play-icon.svg';\nimport info from './assets/new/info-icon.svg';\nimport kebab from './assets/new/kebab-icon.svg';\nimport pen from './assets/new/pen-icon.svg';\nimport plus from './assets/new/plus-icon.svg';\nimport qr from './assets/new/qr-icon.svg';\nimport question from './assets/new/question-icon.svg';\nimport rocket from './assets/new/rocket-icon.svg';\nimport roundStop from './assets/new/round-stop-icon.svg';\nimport search from './assets/new/search-icon.svg';\nimport sendMessage from './assets/new/send-message-icon.svg';\nimport storeIcon from './assets/new/store-icon.svg';\nimport swapBordered from './assets/new/swap-bordered-icon.svg';\nimport swap from './assets/new/swap-icon.svg';\nimport top from './assets/new/top-icon.svg';\nimport wallet from './assets/new/wallet-icon.svg';\nimport warning from './assets/new/warning-icon.svg';\nimport oppositeArrows from './assets/opposite-arrows-icon.svg';\nimport plug from './assets/plug-icon.svg';\nimport questionCircle from './assets/question-circle-icon.svg';\nimport reload from './assets/reload-icon.svg';\nimport searchOld from './assets/search-icon.svg';\nimport settings from './assets/settings-icon.svg';\nimport success from './assets/success-icon.svg';\nimport successSend from './assets/success-send-icon.svg';\nimport sun from './assets/sun-icon.svg';\nimport timer from './assets/timer-icon.svg';\nimport walletOld from './assets/wallet-icon.svg';\n\nconst iconsMap = new Map<string, string>([\n  ['arrow', arrow],\n  ['app-store', appStore],\n  ['arrow-triangle', arrowTriangle],\n  ['bottom', bottom],\n  ['caret', caret],\n  ['check', check],\n  ['branch', branch],\n  ['card', card],\n  ['chain', chain],\n  ['change', change],\n  ['checkmark', checkmark],\n  ['chevron-1', chevron1],\n  ['chevron', chevron],\n  ['chevron-rounded', chevronRounded],\n  ['close', close],\n  ['copy', copy],\n  ['cross', cross],\n  ['currency', currency],\n  ['db', db],\n  ['bucket', bucket],\n  ['gear', gear],\n  ['google-play', googlePlay],\n  ['info', info],\n  ['more', more],\n  ['arrow-down', arrowDown],\n  ['arrow-left', arrowLeft],\n  ['eye-hide', eyeHide],\n  ['eye', eye],\n  ['external', external],\n  ['search', search],\n  ['send-message', sendMessage],\n  ['search-old', searchOld],\n  ['settings', settings],\n  ['success', success],\n  ['sun', sun],\n  ['swap', swap],\n  ['swap-bordered', swapBordered],\n  ['timer', timer],\n  ['wallet', wallet],\n  ['lock', lock],\n  ['logout', logout],\n  ['pen', pen],\n  ['plug', plug],\n  ['plus', plus],\n  ['qr', qr],\n  ['question', question],\n  ['round-stop', roundStop],\n  ['question-circle', questionCircle],\n  ['reload', reload],\n  ['top', top],\n  ['wallet-old', walletOld],\n  ['warning', warning],\n  ['error', error],\n  ['attention', attention],\n  ['clock', clock],\n  ['free-tx', freeTx],\n  ['kebab', kebab],\n  ['opposite-arrows', oppositeArrows],\n  ['store-icon', storeIcon],\n  ['arrow-swap', arrowSwap],\n  ['clock-send', clockSend],\n  ['success-send', successSend],\n  ['error-send', errorSend],\n  ['rocket', rocket],\n]);\n\nexport interface IconProps extends HTMLAttributes<HTMLOrSVGElement> {\n  name: string;\n  size?: string | number;\n  height?: string | number;\n  width?: string | number;\n  style?: CSSProperties;\n  className?: string;\n}\n\nexport const Icon: FC<IconProps> = ({ name, size, height, width, ...props }) => {\n  const validProps: {\n    [prop: string]: never;\n  } = {};\n\n  Object.keys(props).forEach((prop) => {\n    if (isPropValid(prop)) {\n      // @ts-ignore\n      validProps[prop] = props[prop];\n    }\n  });\n\n  const icon = iconsMap.get(name) as BrowserSpriteSymbol | undefined;\n\n  if (!icon) {\n    return null;\n  }\n\n  return (\n    <svg {...validProps} viewBox={icon.viewBox} height={size || height} width={size || width}>\n      <use xlinkHref={`#${icon.id}`} />\n    </svg>\n  );\n};\n","import type { FunctionComponent } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { rgba } from 'polished';\n\nconst Wrapper = styled.button`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 56px;\n  padding: 0 15px;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: bold;\n  font-size: 16px;\n  font-family: unset;\n  line-height: 140%;\n  letter-spacing: 0.04em;\n  white-space: initial;\n  text-decoration: none;\n\n  background: ${theme.colors.bg.primary};\n  border: 0;\n  border-radius: 12px;\n\n  outline: none;\n  cursor: pointer;\n\n  appearance: none;\n\n  &.primary {\n    color: ${theme.colors.textIcon.buttonPrimary};\n\n    background: ${theme.colors.bg.buttonPrimary};\n\n    &:hover {\n      background: #82a5ff;\n    }\n  }\n\n  &.secondary {\n    color: #fff;\n\n    background: #a3a5ba;\n  }\n\n  &.dark {\n    color: #fff;\n\n    background: #000;\n  }\n\n  &.light {\n    color: #5887ff;\n\n    background: #eff3ff;\n  }\n\n  &.gray {\n    color: #000;\n\n    background: #f3f3f3;\n  }\n\n  &.lightGray {\n    color: #a3a5ba;\n\n    background: #f6f6f8;\n  }\n\n  &.lightBlue {\n    color: #5887ff;\n\n    background: #f6f6f8;\n  }\n\n  &.hollow {\n    background: ${theme.colors.bg.primary};\n    border: 1px solid ${theme.colors.stroke.primary};\n  }\n\n  &.link {\n    height: auto;\n    padding: 0;\n\n    color: ${rgba('#000', 0.5)};\n    text-decoration: underline;\n\n    background: transparent;\n  }\n\n  &.error {\n    color: ${theme.colors.system.errorMain};\n\n    &:hover {\n      color: ${theme.colors.system.errorMain};\n    }\n  }\n\n  &.small {\n    height: 36px;\n\n    font-weight: 500;\n    font-size: 14px;\n    letter-spacing: 0.01em;\n\n    border-radius: 8px;\n  }\n\n  &.medium {\n    height: 46px;\n\n    font-weight: 500;\n    letter-spacing: 0.01em;\n\n    border-radius: 8px;\n  }\n\n  &.big {\n    height: 58px;\n  }\n\n  &.full {\n    width: 100%;\n  }\n\n  &:disabled {\n    color: ${theme.colors.textIcon.buttonPrimary};\n\n    background: ${theme.colors.bg.buttonDisabled};\n    cursor: not-allowed;\n\n    &:hover {\n      background: ${theme.colors.bg.buttonDisabled};\n    }\n  }\n`;\n\ntype Props = {\n  primary?: boolean;\n  secondary?: boolean;\n  dark?: boolean;\n  light?: boolean;\n  gray?: boolean;\n  lightGray?: boolean;\n  lightBlue?: boolean;\n  hollow?: boolean;\n  link?: boolean;\n  error?: boolean;\n  small?: boolean;\n  medium?: boolean;\n  big?: boolean;\n  full?: boolean;\n};\n\nexport const Button: FunctionComponent<Props & React.ButtonHTMLAttributes<HTMLButtonElement>> = ({\n  type = 'button',\n  primary,\n  secondary,\n  dark,\n  light,\n  gray,\n  lightGray,\n  lightBlue,\n  link,\n  error,\n  hollow,\n  small,\n  medium,\n  big,\n  full,\n  children,\n  style,\n  className,\n  ...props\n}) => {\n  return (\n    <Wrapper\n      type={type}\n      {...props}\n      style={style}\n      className={classNames(className, {\n        primary,\n        secondary,\n        light,\n        dark,\n        gray,\n        lightGray,\n        lightBlue,\n        link,\n        error,\n        hollow,\n        small,\n        medium,\n        big,\n        full,\n      })}\n    >\n      {children}\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent, HTMLAttributes } from 'react';\n\nimport { styled } from '@linaria/react';\n\nconst Wrapper = styled.img<{ size: string | number | undefined }>`\n  width: ${({ size }) => (size ? `${size}px` : 'auto')};\n  height: ${({ size }) => (size ? `${size}px` : 'auto')};\n\n  border-radius: 12px;\n\n  /* transparent pixel for not showing border if no src */\n  &:not([src]) {\n    content: url('data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==');\n  }\n`;\n\ntype Props = {\n  src?: string;\n  size?: string | number;\n};\n\nexport const Avatar: FunctionComponent<Props & HTMLAttributes<HTMLDivElement>> = ({\n  src,\n  size,\n  ...props\n}) => {\n  return <Wrapper src={src} size={size} {...props} />;\n};\n","import type { FunctionComponent } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nconst Wrapper = styled.label`\n  display: inline-block;\n  flex-shrink: 0;\n  width: 36px;\n  height: 20px;\n\n  background-color: #a3a5ba;\n  border: 1px solid #a3a5ba;\n  border-radius: 15px;\n\n  cursor: pointer;\n\n  transition: background-color 0.13s;\n\n  &.checked {\n    background-color: #34c759;\n    border-color: #34c759;\n  }\n`;\n\nconst Toggler = styled.div`\n  position: relative;\n  top: 1px;\n  left: 1px;\n\n  width: 16px;\n  height: 16px;\n\n  background-color: #fff;\n  border-radius: 50%;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.14),\n    0 2px 1px -1px rgba(0, 0, 0, 0.12);\n\n  transition: left 0.13s, background-color 0.13s;\n\n  &.checked {\n    left: 17px;\n\n    background-color: #fff;\n  }\n`;\n\nconst CheckboxHidden = styled.input`\n  position: absolute;\n\n  width: 1px;\n  height: 1px;\n\n  margin: -1px;\n  padding: 0;\n\n  overflow: hidden;\n\n  white-space: nowrap;\n\n  border: 0;\n\n  clip: rect(0 0 0 0);\n\n  clip-path: inset(100%);\n`;\n\ntype Props = {\n  checked: boolean;\n  onChange: (checked: boolean) => void;\n};\n\nexport const Switch: FunctionComponent<Props> = ({ checked, onChange }) => {\n  const handleTogglerClick = () => {\n    onChange(!checked);\n  };\n\n  return (\n    <Wrapper className={classNames({ checked })}>\n      <Toggler className={classNames({ checked })} />\n      <CheckboxHidden type=\"checkbox\" checked={checked} onChange={handleTogglerClick} />\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent, HTMLAttributes } from 'react';\nimport { Children, cloneElement, isValidElement, useEffect, useRef, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { borders, shadows, theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  color: ${theme.colors.textIcon.tertiary};\n`;\n\nconst MoreIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n`;\n\nconst MoreIconWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 32px;\n  height: 32px;\n\n  border: 1px solid transparent;\n  border-radius: 4px;\n  cursor: pointer;\n\n  &.isOpen,\n  &:hover {\n    ${MoreIcon} {\n      color: ${theme.colors.textIcon.active};\n    }\n\n    ${borders.linksRGBA}\n  }\n\n  &.vertical {\n    transform: rotate(90deg);\n  }\n`;\n\nconst DropDownList = styled.div`\n  position: absolute;\n  right: 0;\n  z-index: 1;\n\n  min-width: 170px;\n  margin-top: 4px;\n  padding: 8px;\n\n  background: ${theme.colors.bg.primary};\n  border-radius: 8px;\n  ${shadows.notification}\n`;\n\ninterface Props extends HTMLAttributes<HTMLDivElement> {\n  vertical?: boolean;\n}\n\nexport const Menu: FunctionComponent<Props> = ({ children, vertical, className }) => {\n  const selectorRef = useRef<HTMLDivElement>(null);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleAwayClick = (e: MouseEvent) => {\n    if (!selectorRef.current?.contains(e.target as HTMLDivElement)) {\n      setIsOpen(false);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('click', handleAwayClick);\n\n    return () => {\n      window.removeEventListener('click', handleAwayClick);\n    };\n  }, []);\n\n  const handleMenuClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    e?.preventDefault();\n\n    setIsOpen(!isOpen);\n  };\n\n  const items = Children.map(children, (child) => {\n    if (isValidElement(child)) {\n      return cloneElement(child, { close: handleMenuClick });\n    }\n    return child;\n  });\n\n  return (\n    <Wrapper ref={selectorRef} className={className}>\n      <MoreIconWrapper onClick={handleMenuClick} className={classNames({ isOpen, vertical })}>\n        <MoreIcon name=\"more\" />\n      </MoreIconWrapper>\n      {isOpen ? <DropDownList>{items}</DropDownList> : undefined}\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { borders, theme } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\n\nconst IconStyled = styled(Icon)`\n  width: 16px;\n  height: 16px;\n\n  color: ${theme.colors.textIcon.secondary};\n`;\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 36px;\n  padding: 8px;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 140%;\n  letter-spacing: 0.01em;\n\n  border: 1px solid transparent;\n  border-radius: 4px;\n  cursor: pointer;\n\n  &:hover {\n    background: ${theme.colors.bg.activePrimary};\n    ${borders.linksRGBA}\n  }\n`;\n\nconst IconWrapper = styled.div`\n  margin-right: 8px;\n`;\n\ntype Props = {\n  icon?: string;\n  onItemClick: () => void;\n  close?: () => void;\n};\n\nexport const MenuItem: FunctionComponent<Props> = ({\n  icon,\n  children,\n  onItemClick,\n  close = () => {},\n}) => {\n  const handleItemClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    e.preventDefault();\n\n    onItemClick();\n    close();\n  };\n\n  return (\n    <Wrapper onClick={handleItemClick}>\n      {icon ? (\n        <IconWrapper>\n          <IconStyled name={icon} />\n        </IconWrapper>\n      ) : undefined}\n      {children}\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent, ReactElement } from 'react';\nimport { useEffect } from 'react';\nimport type { Placement, UseHoverOptions, UseLayerOptions } from 'react-laag';\nimport { Arrow, useHover, useLayer } from 'react-laag';\n\nimport { css } from '@linaria/core';\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\n\nimport { Icon } from 'components/ui';\n\nconst TooltipContent = styled.div`\n  display: grid;\n  grid-gap: 8px;\n  grid-template-columns: 1fr minmax(0, max-content);\n  padding: 12px;\n\n  color: ${theme.colors.textIcon.buttonPrimary};\n  font-weight: 400;\n  font-size: 15px;\n  line-height: 22px;\n\n  background: rgba(44, 44, 46, 0.9);\n  border-radius: 8px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);\n  backdrop-filter: blur(10px);\n`;\n\nconst QuestionIcon = styled(Icon)<AnchorProps>`\n  width: 24px;\n  height: 24px;\n\n  color: ${(props) => props.iconColor || theme.colors.textIcon.secondary};\n`;\n\nconst Anchor = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst CloseButton = styled.button`\n  width: 32px;\n  height: 32px;\n\n  color: ${theme.colors.textIcon.buttonPrimary};\n\n  background: #686868;\n  border-radius: 8px;\n`;\n\nexport const globals = css`\n  :global() {\n    #layers {\n      z-index: 1;\n    }\n  }\n`;\n\nconst defaultProps = {\n  placement: 'top-end' as Placement,\n  withClose: false,\n  hideOnScroll: false,\n  auto: true,\n};\n\nconst TOOLTIP_ARROW_OFFSET = 15;\nconst TOOLTIP_TRIGGER_OFFSET = 10;\nconst CLOSE_BUTTON_SIZE = 12;\nconst TOOLTIP_ARROW_SIZE = 10;\nconst TOOLTIP_ARROW_ANGLE = 35;\n\ninterface TooltipProps {\n  elContent: string | ReactElement;\n  elAnchor?: string | ReactElement;\n  withClose?: boolean;\n  className?: string;\n}\n\ntype LaagProps = Pick<UseLayerOptions, 'auto' | 'snap' | 'possiblePlacements' | 'placement'> &\n  Pick<UseHoverOptions, 'hideOnScroll'>;\n\ntype AnchorProps = {\n  iconColor?: string;\n  onChange?: (isOver: boolean) => void;\n};\n\ntype OuterProps = LaagProps & AnchorProps & TooltipProps;\n\nexport const LaagTooltip: FunctionComponent<OuterProps> = ({\n  placement,\n  withClose,\n  possiblePlacements,\n  snap,\n  auto,\n  hideOnScroll,\n  iconColor,\n  elContent,\n  elAnchor,\n  onChange,\n  className,\n}) => {\n  const [isOver, hoverProps, close] = useHover({ hideOnScroll: hideOnScroll });\n  const { onMouseEnter, onTouchEnd, onTouchStart } = hoverProps;\n  const anchorProps = withClose ? { onMouseEnter, onTouchEnd, onTouchStart } : hoverProps;\n\n  useEffect(() => {\n    if (onChange) {\n      onChange(isOver);\n    }\n  }, [isOver]);\n\n  const { triggerProps, layerProps, arrowProps, renderLayer } = useLayer({\n    isOpen: isOver,\n    placement: placement,\n    overflowContainer: false,\n    possiblePlacements: possiblePlacements,\n    snap: snap,\n    auto: auto,\n    arrowOffset: TOOLTIP_ARROW_OFFSET,\n    triggerOffset: TOOLTIP_TRIGGER_OFFSET,\n    onOutsideClick: close,\n  });\n\n  const elTooltipAnchor = elAnchor ?? <QuestionIcon name={'question'} iconColor={iconColor} />;\n\n  const elClose = (\n    <CloseButton onClick={close}>\n      <Icon width={CLOSE_BUTTON_SIZE} height={CLOSE_BUTTON_SIZE} name={'close'} />\n    </CloseButton>\n  );\n\n  return (\n    <>\n      <Anchor {...triggerProps} {...anchorProps} className={className}>\n        {elTooltipAnchor}\n      </Anchor>\n      {isOver &&\n        renderLayer(\n          <TooltipContent className=\"tooltip\" {...layerProps}>\n            {elContent}\n            {withClose && elClose}\n            <Arrow\n              {...arrowProps}\n              backgroundColor={'rgba(44, 44, 46, 0.9'}\n              angle={TOOLTIP_ARROW_ANGLE}\n              size={TOOLTIP_ARROW_SIZE}\n            />\n          </TooltipContent>,\n        )}\n    </>\n  );\n};\n\nLaagTooltip.defaultProps = defaultProps;\n","import '@abraham/reflection';\nimport 'sanitize.css';\nimport './new/ui/css/nprogress.css';\nimport 'react-loading-skeleton/dist/skeleton.css';\n\nimport * as React from 'react';\nimport { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { globalCss } from '@p2p-wallet-web/ui';\nimport * as Sentry from '@sentry/react';\nimport { BrowserTracing } from '@sentry/tracing';\n\nimport {\n  SENTRY_DSN_ENDPOINT,\n  SENTRY_ENVIRONMENT,\n  SENTRY_RELEASE,\n  SENTRY_TRACES_SAMPLE_RATE,\n} from 'new/constants';\nimport { initAmplitude } from 'utils/analytics';\n\ninitAmplitude();\n\nexport const global = globalCss;\n\nif (!__DEVELOPMENT__) {\n  Sentry.init({\n    dsn: SENTRY_DSN_ENDPOINT,\n    integrations: [new BrowserTracing()],\n    environment: SENTRY_ENVIRONMENT,\n    release: SENTRY_RELEASE,\n\n    tracesSampleRate: Number(SENTRY_TRACES_SAMPLE_RATE),\n  });\n}\n\nconst render = () => {\n  // Load the app dynamically, which allows for hot-reloading in development mode.\n  const App = require('./App').default as React.FC;\n\n  ReactDOM.render(\n    <StrictMode>\n      <App />\n    </StrictMode>,\n    document.querySelector('#root'),\n  );\n};\n\nrender();\n\n// Allow the hot-reloading of the App in development mode\n// @TODO Fix typing resolution\nif (__DEVELOPMENT__ && module.hot) {\n  module.hot.accept('./App', render);\n}\n","export enum FiatType {\n  usd = 'usd',\n  eur = 'eur',\n  cny = 'cny',\n  vnd = 'vnd',\n  rub = 'rub',\n  gbp = 'gbp',\n}\n\nexport class Fiat {\n  type: FiatType = FiatType.usd;\n\n  static get usd(): Fiat {\n    return new Fiat(FiatType.usd);\n  }\n  static get eur(): Fiat {\n    return new Fiat(FiatType.eur);\n  }\n  static get cny(): Fiat {\n    return new Fiat(FiatType.cny);\n  }\n  static get vnd(): Fiat {\n    return new Fiat(FiatType.vnd);\n  }\n  static get rub(): Fiat {\n    return new Fiat(FiatType.rub);\n  }\n  static get gbp(): Fiat {\n    return new Fiat(FiatType.gbp);\n  }\n\n  constructor(type: FiatType) {\n    this.type = type;\n  }\n\n  get code(): string {\n    return this.type.toUpperCase();\n  }\n\n  get symbol(): string {\n    switch (this.type) {\n      case FiatType.usd:\n        return '$';\n      case FiatType.eur:\n        return '';\n      case FiatType.cny:\n        return '';\n      case FiatType.vnd:\n        return '';\n      case FiatType.rub:\n        return '';\n      case FiatType.gbp:\n        return '';\n    }\n  }\n\n  get name(): string {\n    switch (this.type) {\n      case FiatType.usd:\n        return 'United States Dollar';\n      case FiatType.eur:\n        return 'Euro';\n      case FiatType.cny:\n        return 'Chinese Yuan';\n      case FiatType.vnd:\n        return 'Vietnamese Dong';\n      case FiatType.rub:\n        return 'Russian Ruble';\n      case FiatType.gbp:\n        return 'British Pound sterling';\n    }\n  }\n}\n","import { action, flow, makeObservable, observable } from 'mobx';\nimport type { CancellablePromise } from 'mobx/dist/api/flow';\n\nexport enum LoadableStateType {\n  notRequested = 'notRequested',\n  loading = 'loading',\n  loaded = 'loaded',\n  error = 'error',\n}\n\nexport class LoadableState {\n  readonly type: LoadableStateType;\n  readonly message: string | null;\n\n  static get notRequested(): LoadableState {\n    return new LoadableState(LoadableStateType.notRequested);\n  }\n  static get loading(): LoadableState {\n    return new LoadableState(LoadableStateType.loading);\n  }\n  static get loaded(): LoadableState {\n    return new LoadableState(LoadableStateType.loaded);\n  }\n  static error(message: string): LoadableState {\n    return new LoadableState(LoadableStateType.error, message);\n  }\n\n  constructor(type: LoadableStateType, message: string | null = null) {\n    this.type = type;\n    this.message = message;\n  }\n\n  get isLoading(): boolean {\n    return this.type === LoadableStateType.loading;\n  }\n\n  get isError(): boolean {\n    if (this.type === LoadableStateType.error) {\n      return true;\n    }\n\n    return false;\n  }\n}\n\nexport class LoadableRelay<T> {\n  request: Promise<T>;\n  value: T | null = null;\n  state: LoadableState = new LoadableState(LoadableStateType.notRequested);\n\n  disposable?: CancellablePromise<T>;\n\n  constructor(request: Promise<T>) {\n    this.request = request;\n\n    makeObservable(this, {\n      request: observable,\n      state: observable,\n      value: observable,\n\n      flush: action,\n      reload: action,\n      createRequest: flow,\n      refresh: action,\n      accept: action,\n    });\n  }\n\n  // Action\n\n  // Flush result\n  flush(): void {\n    this.cancelRequest();\n    this.value = null;\n    this.state = LoadableState.notRequested;\n  }\n\n  // Flush result and refresh\n  reload(): void {\n    this.flush();\n    this.refresh();\n  }\n\n  createRequest = flow<T, []>(function* (this: LoadableRelay<T>): Generator<Promise<T>> {\n    return yield this.request;\n  });\n\n  // Reload request\n  refresh(): void {\n    // Cancel previous request\n    this.cancelRequest();\n\n    // Mark as loading\n    this.state = LoadableState.loading;\n\n    // Load request\n    this.disposable = this.createRequest();\n    this.disposable\n      .then(\n        action((data) => {\n          this.value = this.map(this.value, data);\n          this.state = LoadableState.loaded;\n        }),\n      )\n      .catch(\n        action((error) => {\n          console.error(error);\n          this.state = LoadableState.error(error);\n        }),\n      );\n  }\n\n  // Mapping\n  map(_oldData: T | null, newData: T): T {\n    return newData;\n  }\n\n  // Cancel current request\n  cancelRequest(): void {\n    this.disposable?.cancel();\n  }\n\n  // Override value by a given value and set state to loaded\n  accept(value: T | null, state: LoadableState): void {\n    this.cancelRequest();\n    this.value = value;\n    this.state = state;\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\n\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\n\nexport enum FeeTypeEnum {\n  liquidityProviderFee,\n  accountCreationFee,\n  orderCreationFee,\n  transactionFee,\n  depositWillBeReturned,\n}\n\nexport class FeeType {\n  type: FeeTypeEnum;\n  private readonly _token?: string;\n\n  constructor({ type, token }: { type: FeeTypeEnum; token?: string }) {\n    this.type = type;\n    this._token = token;\n  }\n\n  static get liquidityProviderFee(): FeeType {\n    return new FeeType({ type: FeeTypeEnum.liquidityProviderFee });\n  }\n\n  static accountCreationFee(token?: string): FeeType {\n    return new FeeType({ type: FeeTypeEnum.accountCreationFee, token });\n  }\n\n  static get orderCreationFee(): FeeType {\n    return new FeeType({ type: FeeTypeEnum.orderCreationFee });\n  }\n\n  static get transactionFee(): FeeType {\n    return new FeeType({ type: FeeTypeEnum.transactionFee });\n  }\n\n  static get depositWillBeReturned(): FeeType {\n    return new FeeType({ type: FeeTypeEnum.depositWillBeReturned });\n  }\n\n  get headerString(): string {\n    switch (this.type) {\n      case FeeTypeEnum.liquidityProviderFee:\n        return 'Liquidity provider fee';\n      case FeeTypeEnum.accountCreationFee: {\n        if (this._token) {\n          return `${this._token} Account Creation`;\n        } else {\n          return 'Account creation fee';\n        }\n      }\n      case FeeTypeEnum.orderCreationFee:\n        return 'Serum order creation (paid once per pair)';\n      case FeeTypeEnum.transactionFee:\n        return 'Network fee';\n      case FeeTypeEnum.depositWillBeReturned:\n        return 'Deposit (will be returned)';\n    }\n  }\n}\n\nexport class PayingFee {\n  type: FeeType;\n  lamports: SolanaSDK.Lamports;\n  token: SolanaSDK.Token;\n\n  isFree: boolean;\n  info?: PayingFeeInfo | null;\n\n  constructor({\n    type,\n    lamports,\n    token,\n    isFree = false,\n    info = null,\n  }: {\n    type: FeeType;\n    lamports: SolanaSDK.Lamports;\n    token: SolanaSDK.Token;\n    isFree?: boolean;\n    info?: PayingFeeInfo | null;\n  }) {\n    this.type = type;\n    this.lamports = lamports;\n    this.token = token;\n    this.isFree = isFree;\n    this.info = info;\n  }\n}\n\nexport interface PayingFeeInfo {\n  alertTitle: string;\n  alertDescription: string;\n  payBy?: string;\n}\n\nexport function networkFeesAll(fees: PayingFee[]): SolanaSDK.FeeAmount | null {\n  let transactionFee: u64 | null = null;\n  let accountCreationFee: u64 | null = null;\n  let depositFee: u64 | null = null;\n\n  for (const fee of fees) {\n    switch (fee.type.type) {\n      case FeeTypeEnum.transactionFee:\n        transactionFee = fee.lamports;\n        break;\n      case FeeTypeEnum.accountCreationFee:\n        accountCreationFee = fee.lamports;\n        break;\n      case FeeTypeEnum.depositWillBeReturned:\n        depositFee = fee.lamports;\n        break;\n      default:\n        break;\n    }\n  }\n\n  return new SolanaSDK.FeeAmount({\n    transaction: transactionFee ?? ZERO,\n    accountBalances: accountCreationFee ?? ZERO,\n    deposit: depositFee ?? ZERO,\n  });\n}\n\nexport function networkFees(fees: PayingFee[], token: string): SolanaSDK.FeeAmount | null {\n  const _fees = fees.filter((fee) => fee.token.symbol === token);\n\n  let transactionFee: u64 | null = null;\n  let accountCreationFee: u64 | null = null;\n  let depositFee: u64 | null = null;\n\n  for (const fee of _fees) {\n    switch (fee.type.type) {\n      case FeeTypeEnum.transactionFee:\n        transactionFee = fee.lamports;\n        break;\n      case FeeTypeEnum.accountCreationFee:\n        accountCreationFee = fee.lamports;\n        break;\n      case FeeTypeEnum.depositWillBeReturned:\n        depositFee = fee.lamports;\n        break;\n      default:\n        break;\n    }\n  }\n\n  return new SolanaSDK.FeeAmount({\n    transaction: transactionFee ?? ZERO,\n    accountBalances: accountCreationFee ?? ZERO,\n    deposit: depositFee ?? ZERO,\n  });\n}\n\nexport function transactionFees(fees: PayingFee[], token: string): SolanaSDK.Lamports {\n  return fees\n    .filter((fee) => fee.type.type === FeeTypeEnum.transactionFee && fee.token.symbol === token)\n    .reduce((acc, curr) => acc.add(curr.lamports), new u64(0));\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { PublicKey } from '@solana/web3.js';\nimport { makeAutoObservable } from 'mobx';\n\nimport { networkFeesAll } from 'new/app/models/PayingFee';\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport {\n  convertToBalance,\n  getAssociatedTokenAddressSync,\n  SolanaSDKPublicKey,\n} from 'new/sdk/SolanaSDK';\nimport type { ParsedTransactionInfoType } from 'new/sdk/TransactionParser';\nimport { ParsedTransaction, Status, SwapInfo, TransferInfo } from 'new/sdk/TransactionParser';\nimport type { PricesServiceType } from 'new/services/PriceAPIs/PricesService';\nimport type { RawTransactionType } from 'new/ui/modals/ProcessTransactionModal';\nimport * as ProcessTransaction from 'new/ui/modals/ProcessTransactionModal/ProcessTransaction.Models';\n\nexport enum TransactionStatusType {\n  sending = 'sending',\n  confirmed = 'confirmed',\n  finalized = 'finalized',\n  error = 'error',\n}\n\nexport class TransactionStatus {\n  type: TransactionStatusType;\n  private readonly _numberOfConfirmed: number | null;\n  private readonly _error: Error | null;\n\n  static maxConfirmed = 31;\n\n  private constructor({\n    type,\n    numberOfConfirmed = null,\n    error = null,\n  }: {\n    type: TransactionStatusType;\n    numberOfConfirmed?: number | null;\n    error?: Error | null;\n  }) {\n    this.type = type;\n    this._numberOfConfirmed = numberOfConfirmed;\n    this._error = error;\n  }\n\n  // enum\n\n  static sending(): TransactionStatus {\n    return new TransactionStatus({\n      type: TransactionStatusType.sending,\n    });\n  }\n\n  static confirmed(numberOfConfirmed: number): TransactionStatus {\n    return new TransactionStatus({\n      type: TransactionStatusType.confirmed,\n      numberOfConfirmed,\n    });\n  }\n\n  static finalized(): TransactionStatus {\n    return new TransactionStatus({\n      type: TransactionStatusType.finalized,\n    });\n  }\n\n  static error(error: Error): TransactionStatus {\n    return new TransactionStatus({\n      type: TransactionStatusType.error,\n      error,\n    });\n  }\n\n  // getters\n\n  get numberOfConfirmations(): number | null {\n    switch (this.type) {\n      case TransactionStatusType.confirmed:\n        return this._numberOfConfirmed;\n      default:\n        return null;\n    }\n  }\n\n  get isProcessing(): boolean {\n    switch (this.type) {\n      case TransactionStatusType.sending:\n      case TransactionStatusType.confirmed:\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  get progress(): number {\n    switch (this.type) {\n      case TransactionStatusType.sending:\n        return 0;\n      case TransactionStatusType.confirmed: {\n        // treat all number of confirmed as unfinalized\n        let numberOfConfirmations = this.numberOfConfirmations!;\n        if (numberOfConfirmations >= TransactionStatus.maxConfirmed) {\n          numberOfConfirmations = TransactionStatus.maxConfirmed - 1;\n        }\n        return numberOfConfirmations / TransactionStatus.maxConfirmed;\n      }\n      case TransactionStatusType.finalized:\n      case TransactionStatusType.error:\n        return 1;\n    }\n  }\n\n  get error(): Error | null {\n    switch (this.type) {\n      case TransactionStatusType.error:\n        return this._error;\n      default:\n        return null;\n    }\n  }\n\n  get rawValue(): string {\n    switch (this.type) {\n      case TransactionStatusType.sending:\n        return 'sending';\n      case TransactionStatusType.confirmed:\n        return `processing(${this._numberOfConfirmed!})`;\n      case TransactionStatusType.finalized:\n        return 'finalized';\n      case TransactionStatusType.error:\n        return 'error';\n    }\n  }\n}\n\nexport class PendingTransaction {\n  transactionId: SolanaSDK.TransactionID | null;\n  sentAt: Date;\n  writtenToRepository: boolean;\n  rawTransaction: RawTransactionType;\n  status: TransactionStatus;\n  slot: number;\n\n  constructor({\n    transactionId,\n    sentAt,\n    writtenToRepository = false,\n    rawTransaction,\n    status,\n    slot = 0,\n  }: {\n    transactionId: SolanaSDK.TransactionID | null;\n    sentAt: Date;\n    writtenToRepository?: boolean;\n    rawTransaction: RawTransactionType;\n    status: TransactionStatus;\n    slot?: number;\n  }) {\n    this.transactionId = transactionId;\n    this.sentAt = sentAt;\n    this.writtenToRepository = writtenToRepository;\n    this.rawTransaction = rawTransaction;\n    this.status = status;\n    this.slot = slot;\n\n    makeAutoObservable(this);\n  }\n\n  parse({\n    pricesService,\n    authority = null,\n  }: {\n    pricesService: PricesServiceType;\n    authority?: string | null;\n  }): ParsedTransaction | null {\n    // status\n    let status: Status;\n\n    switch (this.status.type) {\n      case TransactionStatusType.sending:\n        status = Status.requesting();\n        break;\n      case TransactionStatusType.confirmed:\n        status = Status.processing(0);\n        break;\n      case TransactionStatusType.finalized:\n        status = Status.confirmed();\n        break;\n      case TransactionStatusType.error:\n        status = Status.error(this.status.error?.message);\n        break;\n    }\n\n    const signature = this.transactionId;\n\n    let value: ParsedTransactionInfoType | null;\n    let amountInFiat: number | null;\n    let fee: SolanaSDK.FeeAmount | null;\n\n    const transaction = this.rawTransaction;\n    switch (transaction.constructor) {\n      case ProcessTransaction.SendTransaction: {\n        const amount = convertToBalance(\n          (transaction as ProcessTransaction.SendTransaction).amount,\n          (transaction as ProcessTransaction.SendTransaction).sender.token.decimals,\n        );\n        value = new TransferInfo({\n          source: (transaction as ProcessTransaction.SendTransaction).sender,\n          destination: new SolanaSDK.Wallet({\n            pubkey: (transaction as ProcessTransaction.SendTransaction).receiver.address,\n            lamports: ZERO,\n            token: (transaction as ProcessTransaction.SendTransaction).sender.token,\n          }),\n          authority,\n          destinationAuthority: null,\n          rawAmount: amount,\n          account: (transaction as ProcessTransaction.SendTransaction).sender.pubkey,\n        });\n        amountInFiat =\n          amount *\n          (pricesService.currentPrice(\n            (transaction as ProcessTransaction.SendTransaction).sender.token.symbol,\n          )?.value ?? 0);\n        fee = (transaction as ProcessTransaction.SendTransaction).feeInToken;\n        break;\n      }\n      case ProcessTransaction.SwapTransaction: {\n        const destinationWallet = (transaction as ProcessTransaction.SwapTransaction)\n          .destinationWallet;\n        const mintAddress = new PublicKey(destinationWallet.mintAddress);\n        if (authority && mintAddress) {\n          const _authority = new PublicKey(authority);\n          // TODO: use getAssociatedTokenAddressSync from spl-token when it will be published\n          destinationWallet.pubkey = getAssociatedTokenAddressSync(\n            mintAddress,\n            _authority,\n            false,\n            SolanaSDKPublicKey.splAssociatedTokenAccountProgramId,\n            SolanaSDKPublicKey.tokenProgramId,\n          ).toString();\n        }\n\n        value = new SwapInfo({\n          source: (transaction as ProcessTransaction.SwapTransaction).sourceWallet,\n          sourceAmount: (transaction as ProcessTransaction.SwapTransaction).amount,\n          destination: destinationWallet,\n          destinationAmount: (transaction as ProcessTransaction.SwapTransaction).estimatedAmount,\n          accountSymbol: null,\n        });\n        amountInFiat =\n          (transaction as ProcessTransaction.SwapTransaction).amount *\n          (pricesService.currentPrice(\n            (transaction as ProcessTransaction.SwapTransaction).sourceWallet.token.symbol,\n          )?.value ?? 0);\n        fee = networkFeesAll((transaction as ProcessTransaction.SwapTransaction).fees);\n        break;\n      }\n      default:\n        return null;\n    }\n\n    return new ParsedTransaction({\n      status,\n      signature,\n      info: value,\n      amountInFiat,\n      slot: this.slot,\n      blockTime: this.sentAt,\n      fee,\n      blockhash: null,\n    });\n  }\n}\n","export const appStorePath = 'https://apps.apple.com/vn/app/p2p-wallet/id1605603333';\nexport const playStorePath = 'https://play.google.com/store/apps/details?id=org.p2p.wallet';\n\nexport const SENTRY_DSN_ENDPOINT = process.env.REACT_APP_SENTRY_DSN_ENDPOINT;\nexport const SENTRY_ENVIRONMENT = process.env.SENTRY_ENVIRONMENT;\nexport const SENTRY_TRACES_SAMPLE_RATE = process.env.REACT_APP_SENTRY_TRACES_SAMPLE_RATE;\nexport const SENTRY_RELEASE = process.env.REACT_APP_SENTRY_RELEASE;\n","import { pullAt } from 'lodash';\nimport type { IReactionDisposer, IReactionOptions, IReactionPublic } from 'mobx';\nimport { reaction, runInAction } from 'mobx';\n\nimport { LifeCycleObject } from './LifeCycleObject';\n\n/**\n * Object which helps manage reacting to Observable reactions, should be the base class for items that deal with Mobx\n * reactions and autorun code.\n *\n * This is primarily to reduce memory leaks by having Mobx object reaction code keeping an object alive after is should\n * be removed.\n *\n * An example:\n *  View Model Observer which uses a reaction then forgets to call the disposer\n *\n *  export class WalletViewModel {\n *      const { connected, getBalances } = useDependency<WalletModel>(WalletModel);\n *\n *      onInitialize() {\n *       // HERE IS THE BUG\n *          reaction(\n *            ()=>connected,\n *            ()=> {\n *                if(connected) getBalances();\n *            })\n *      }\n *  }\n *\n *  In the above code, even after the WalletViewModel is no longer used by the React View, Mobx will hold a pointer to\n *  it via the reaction() method call.  The JavaScript GC will be able to trace, through Mobx, to this object and will\n *  not GC it.  Also, anytime wallet changes, this object will execute the effect code and might cause all kinds of\n *  issues down the road.\n *\n *  This object resolves this by keeping track of IReactionDisposers and then making sure the are executed, which\n *  frees up the reference in Mobx.\n */\nexport abstract class ObservableReactionContainer extends LifeCycleObject {\n  protected reactions: Array<IReactionDisposer>;\n\n  constructor() {\n    super();\n    this.reactions = [];\n  }\n\n  protected onEnd() {\n    this.removeAllReactions();\n    this.afterReactionsRemoved();\n  }\n\n  protected abstract afterReactionsRemoved(): void;\n\n  // this returns an index that can be used to clear a reaction later\n  // via the removeReaction function.\n  addReaction(reaction: IReactionDisposer): number {\n    return this.reactions.push(reaction) - 1;\n  }\n\n  removeReaction(idx: number): void {\n    if (idx > -1 && idx < this.reactions.length) {\n      const disposer = this.reactions[idx];\n      disposer && disposer();\n      pullAt(this.reactions, idx);\n    }\n  }\n\n  removeAllReactions(): void {\n    for (const reactionDisposer of this.reactions) {\n      reactionDisposer();\n    }\n    this.reactions = [];\n  }\n\n  get reactionsCount(): number {\n    return this.reactions.length;\n  }\n}\n\n/**\n * Some helper functions for dealing with Mobx\n */\nexport function delayedAction(expression: () => void, delayInMs: number): void {\n  setTimeout(() => {\n    runInAction(() => {\n      expression();\n    });\n  }, delayInMs);\n}\n\nexport async function awaitReaction<T>(\n  expression: (r: IReactionPublic) => T,\n  effect: (arg: T, prev: T, r: IReactionPublic) => void,\n  opts: IReactionOptions<T, false> | undefined = {},\n): Promise<T> {\n  return new Promise((resolve) => {\n    const disposer = reaction(\n      expression,\n      (arg, prev, r) => {\n        effect(arg, prev, r);\n        disposer();\n        resolve(arg);\n      },\n      opts,\n    );\n  });\n}\n","/**\n * Object which helps manage life cycle calls, should be the base class for items that deal with life cycles, such\n * as React view life cycle, or network life cycle class.\n */\n\nexport abstract class LifeCycleObject {\n  protected initGuard = 0;\n\n  initialize(): void {\n    ++this.initGuard;\n\n    if (this.initGuard > 1) {\n      return;\n    }\n\n    this.onInitialize();\n  }\n\n  end(): void {\n    --this.initGuard;\n\n    if (this.initGuard > 0) {\n      return;\n    }\n    this.initGuard = 0;\n    this.onEnd();\n  }\n\n  protected abstract onInitialize(): void;\n  protected abstract onEnd(): void;\n}\n","import { nanoid } from 'nanoid';\n\nimport { ObservableReactionContainer } from '../ObservableReactionContainer';\n\nexport abstract class Model extends ObservableReactionContainer {\n  protected id = nanoid(10);\n}\n","import { action, makeObservable, observable } from 'mobx';\n\nimport type { SDFetcherState } from './SDViewModel';\nimport { SDViewModel } from './SDViewModel';\n\nexport interface SDListViewModelType<T> {\n  readonly state: SDFetcherState;\n  readonly isPaginationEnabled: boolean;\n\n  reload(): void;\n  fetchNext(): void;\n\n  getCurrentPage(): number | null;\n\n  data: T[];\n\n  // own\n  readonly isFetchable: boolean;\n}\n\nexport abstract class SDListViewModel<T>\n  extends SDViewModel<T[]>\n  implements SDListViewModelType<T>\n{\n  // Properties\n\n  isPaginationEnabled: boolean;\n  customFilter?(item: T): boolean;\n  customSorter?(a: T, b: T): number;\n\n  // For pagination\n\n  limit: number;\n  offset: number;\n  private _isLastPageLoaded = false;\n\n  protected constructor({\n    initialData = [],\n    isPaginationEnabled = false,\n    limit = 10,\n    offset = 0,\n  }: { initialData?: T[]; isPaginationEnabled?: boolean; limit?: number; offset?: number } = {}) {\n    super({ initialData });\n    this.isPaginationEnabled = isPaginationEnabled;\n    this.limit = limit;\n    this.offset = offset;\n\n    makeObservable(this, {\n      isPaginationEnabled: observable,\n\n      limit: observable,\n      offset: observable,\n\n      fetchNext: action,\n      join: action,\n      overrideData: action,\n      map: action,\n      updateItem: action,\n    });\n  }\n\n  // Actions\n\n  override flush(): void {\n    this.offset = 0;\n    this._isLastPageLoaded = false;\n    super.flush();\n  }\n\n  // Asynchronous request handler\n  override get isFetchable(): boolean {\n    // @ts-ignore\n    return super.isFetchable && !this._isLastPageLoaded;\n  }\n\n  fetchNext(): void {\n    super.request();\n  }\n\n  override handleNewData(newItems: T[]): void {\n    const _newData = this.join(newItems);\n\n    // resign state\n    if (!this.isPaginationEnabled || newItems.length < this.limit) {\n      this._isLastPageLoaded = true;\n    }\n\n    // map\n    const mappedData = this.map(_newData);\n    super.handleNewData(mappedData);\n\n    // get next offset\n    this.offset += this.limit;\n  }\n\n  join(newItems: T[]): T[] {\n    if (!this.isPaginationEnabled) {\n      return newItems;\n    }\n    // TODO: right includes check\n    return this.data.concat(newItems.filter((item) => !this.data.includes(item)));\n  }\n\n  overrideData(newData: T[]): void {\n    const _newData = this.map(newData);\n    // TODO: check equality!\n    if (_newData !== this.data) {\n      super.handleNewData(_newData);\n    }\n  }\n\n  map(newData: T[]): T[] {\n    let _newData = newData;\n    if (this.customFilter) {\n      _newData = _newData.filter(this.customFilter);\n    }\n    if (this.customSorter) {\n      _newData = _newData.sort(this.customSorter);\n    }\n    return _newData;\n  }\n\n  getCurrentPage(): number | null {\n    if (!this.isPaginationEnabled || this.limit === 0) {\n      return null;\n    }\n    return this.offset / this.limit;\n  }\n\n  // Helper\n\n  updateItem(predicate: (item: T) => boolean, transform: (item: T) => T): boolean {\n    // modify items\n    let itemsChanged = false;\n    const index = this.data.findIndex(predicate);\n    const item = transform(this.data[index]!);\n    // TODO: check comparison works right\n    if (item !== this.data[index]) {\n      itemsChanged = true;\n      const data = this.data;\n      data[index] = item;\n      this.overrideData(data);\n    }\n\n    return itemsChanged;\n  }\n}\n","import { action, computed, flow, makeObservable, observable } from 'mobx';\nimport type { CancellablePromise } from 'mobx/dist/api/flow';\n\nimport { ViewModel } from './ViewModel';\n\nexport enum SDFetcherState {\n  initializing = 'initializing',\n  loading = 'loading',\n  loaded = 'loaded',\n  error = 'error',\n}\n\nexport abstract class SDViewModel<T> extends ViewModel {\n  readonly initialData: T;\n  requestDisposable?: CancellablePromise<T>;\n\n  data: T;\n  error: Error | null = null;\n\n  // Subject\n\n  state: SDFetcherState;\n\n  constructor({ initialData }: { initialData: T }) {\n    super();\n    this.initialData = initialData;\n    this.data = initialData;\n    this.state = SDFetcherState.initializing;\n\n    makeObservable(this, {\n      data: observable,\n      error: observable,\n      state: observable,\n\n      flush: action,\n      reload: action,\n      cancelRequest: action,\n      // createRequest: flow,\n      isFetchable: computed,\n      request: action,\n      handleNewData: action,\n      handleError: action,\n      dataObservable: computed,\n    });\n  }\n\n  // Actions\n\n  flush(): void {\n    this.data = this.initialData;\n  }\n\n  reload(): void {\n    this.flush();\n    this.request(true);\n  }\n\n  cancelRequest(): void {\n    this.requestDisposable?.cancel();\n  }\n\n  // Asynchronous request handler\n  createRequest = flow<T, []>(function* (this: SDViewModel<T>): Generator<Promise<T>> {\n    // delay for simulating loading, MUST OVERRIDE\n    return yield Promise.resolve<T>(this.data);\n  });\n\n  get isFetchable(): boolean {\n    return this.state !== SDFetcherState.loading;\n  }\n\n  request(reload = false): void {\n    if (reload) {\n      this.cancelRequest();\n    } else if (!this.isFetchable) {\n      // there is an running operation\n      return;\n    }\n    this.state = SDFetcherState.loading;\n    this.requestDisposable = this.createRequest();\n    this.requestDisposable\n      .then((newData) => {\n        this.handleNewData(newData);\n      })\n      .catch((error) => {\n        this.handleError(error);\n      });\n  }\n\n  handleNewData(newData: T): void {\n    this.data = newData;\n    this.error = null;\n    this.state = SDFetcherState.loaded;\n  }\n\n  handleError(error: Error): void {\n    this.error = error;\n    this.state = SDFetcherState.error;\n  }\n\n  get dataObservable(): T | null {\n    switch (this.state) {\n      case SDFetcherState.loaded:\n        return this.data;\n      default:\n        return null;\n    }\n  }\n}\n","import { action, makeObservable } from 'mobx';\n\nimport { ObservableReactionContainer } from '../ObservableReactionContainer';\n\nexport abstract class ViewModel extends ObservableReactionContainer {\n  constructor() {\n    super();\n\n    makeObservable<ViewModel, 'setDefaults'>(this, {\n      setDefaults: action,\n    });\n  }\n\n  protected override onEnd() {\n    super.onEnd();\n\n    this.setDefaults();\n  }\n\n  protected abstract setDefaults(): void;\n}\n","import { action, computed, flow, makeObservable, observable } from 'mobx';\nimport type { CancellablePromise } from 'mobx/dist/api/flow';\n\nimport { SDFetcherState } from './SDViewModel';\nimport { ViewModel } from './ViewModel';\n\nexport abstract class SDStreamViewModel<T> extends ViewModel {\n  // Properties\n\n  readonly initialData: T;\n\n  /// Current request\n  task?: CancellablePromise<T>;\n\n  /// Current data\n  data: T;\n\n  /// Last occurred error\n  error: Error | null = null;\n\n  // Subject\n\n  state: SDFetcherState = SDFetcherState.initializing;\n\n  constructor({ initialData }: { initialData: T }) {\n    super();\n    this.initialData = initialData;\n    this.data = initialData;\n\n    makeObservable(this, {\n      data: observable,\n      error: observable,\n      state: observable,\n\n      clear: action,\n      reload: action,\n      cancelRequest: action,\n      // next: flow,\n      isFetchable: computed,\n      fetch: action,\n      handleData: action,\n      handleError: action,\n      dataObservable: computed,\n    });\n  }\n\n  // Actions\n\n  clear() {\n    this.data = this.initialData;\n    this.state = SDFetcherState.initializing;\n  }\n\n  reload() {\n    this.clear();\n    this.fetch(true);\n  }\n\n  cancelRequest(): void {\n    this.task?.cancel();\n  }\n\n  // Asynchronous request handler\n  get isFetchable(): boolean {\n    return this.state !== SDFetcherState.loading;\n  }\n\n  /// Fetch next item\n  next = flow<T, []>(function* (this: SDStreamViewModel<T>): Generator<Promise<T>> {\n    // delay for simulating loading, MUST OVERRIDE\n    return yield Promise.reject<T>(new Error());\n  });\n\n  fetch(force = false): void {\n    if (force) {\n      // cancel previous request\n      this.cancelRequest();\n    } else if (!this.isFetchable) {\n      // there is an running operation\n      return;\n    }\n\n    this.state = SDFetcherState.loading;\n    this.task = this.next();\n    this.task\n      .then((newData) => {\n        this.handleData(newData);\n      })\n      .catch((error) => {\n        this.handleError(error);\n      })\n      .finally(() => {\n        this.state = SDFetcherState.loaded;\n      });\n  }\n\n  /// processes incoming data\n  handleData(newData: T): void {\n    this.data = newData;\n    this.error = null;\n  }\n\n  /// handles occurred error\n  handleError(error: Error): void {\n    console.error(error);\n    this.error = error;\n    this.state = SDFetcherState.error;\n  }\n\n  get dataObservable(): T | null {\n    switch (this.state) {\n      case SDFetcherState.loaded:\n        return this.data;\n      default:\n        return null;\n    }\n  }\n\n  get stateObservable(): SDFetcherState {\n    return this.state;\n  }\n}\n","import { action, makeObservable, observable } from 'mobx';\n\nimport type { SDListViewModelType } from './SDListViewModel';\nimport { SDStreamViewModel } from './SDStreamViewModel';\nimport { SDFetcherState } from './SDViewModel';\n\nexport abstract class SDStreamListViewModel<T>\n  extends SDStreamViewModel<T[]>\n  implements SDListViewModelType<T>\n{\n  // Properties\n\n  isPaginationEnabled: boolean;\n  customFilter?(item: T): boolean;\n  customSorter?(a: T, b: T): number;\n  get isEmpty(): boolean {\n    return this._isLastPageLoaded && this.data.length === 0;\n  }\n\n  // For pagination\n  limit: number;\n  offset: number;\n  private _cache: T[] = [];\n  private _isLastPageLoaded = false;\n\n  protected constructor({\n    initialData = [],\n    isPaginationEnabled = false,\n    limit = 10,\n    offset = 0,\n  }: { initialData?: T[]; isPaginationEnabled?: boolean; limit?: number; offset?: number } = {}) {\n    super({ initialData });\n\n    this.isPaginationEnabled = isPaginationEnabled;\n    this.limit = limit;\n    this.offset = offset;\n\n    makeObservable(this, {\n      isPaginationEnabled: observable,\n\n      limit: observable,\n      offset: observable,\n\n      fetchNext: action,\n      join: action,\n      overrideData: action,\n      map: action,\n      updateItem: action,\n    });\n  }\n\n  // Actions\n\n  override clear(): void {\n    this.offset = 0;\n    this._isLastPageLoaded = false;\n    super.clear();\n  }\n\n  // Asynchronous request handler\n\n  override get isFetchable(): boolean {\n    // @ts-ignore\n    return super.isFetchable && !this._isLastPageLoaded;\n  }\n\n  fetchNext(): void {\n    this.fetch();\n  }\n\n  override fetch(force = false): void {\n    if (force) {\n      this.cancelRequest();\n    } else if (!this.isFetchable) {\n      // there is an running operation\n      return;\n    }\n\n    this.state = SDFetcherState.loading;\n    this._cache = [];\n\n    this.task = this.next();\n    this.task\n      .then((newData) => {\n        this.handleData(newData);\n        if (!this.isPaginationEnabled || this._cache.length < this.limit) {\n          this._isLastPageLoaded = true;\n        }\n        this.offset += this.limit;\n        this.state = SDFetcherState.loaded;\n      })\n      .catch((error) => {\n        this.handleError(error);\n      });\n\n    // this.task = flow<T, []>(function* (\n    //   this: SDStreamListViewModel<T>,\n    // ): Generator<Promise<T[]>> {\n    //   try {\n    //     // TODO: check cancellation\n    //     const stream = await this.next();\n    //     for (const newData of stream) {\n    //       // TODO: check cancellation\n    //       this.handleData(newData);\n    //     }\n    //     if (!this.isPaginationEnabled || this._cache.length < this.limit) {\n    //       this._isLastPageLoaded = true;\n    //     }\n    //     this.offset += this.limit;\n    //     this.state = SDFetcherState.loaded;\n    //   } catch (error) {\n    //     if (errorr instanceof Cancellation) {\n    //       return;\n    //     }\n    //     this.handleError(error);\n    //   }\n    // };\n  }\n\n  override handleData(newItems: T[]): void {\n    this._cache.push(...newItems);\n    const newData = this.join(newItems);\n\n    // map\n    const mappedData = this.map(newData);\n    super.handleData(mappedData);\n\n    this.state = SDFetcherState.loading;\n  }\n\n  join(newItems: T[]): T[] {\n    if (!this.isPaginationEnabled) {\n      return newItems;\n    }\n    // TODO: right includes check\n    return this.data.concat(newItems.filter((item) => !this.data.includes(item)));\n  }\n\n  overrideData(newData: T[]) {\n    const _newData = this.map(newData);\n    // TODO: check equality!\n    if (_newData !== this.data) {\n      super.handleData(_newData);\n    }\n  }\n\n  map(newData: T[]): T[] {\n    let _newData = newData; // TODO: check new reference need\n    if (this.customFilter) {\n      _newData = _newData.filter(this.customFilter);\n    }\n    if (this.customSorter) {\n      _newData = _newData.sort(this.customSorter);\n    }\n    return _newData;\n  }\n\n  setState(state: SDFetcherState, data?: T[]): void {\n    this.state = state;\n    if (data) {\n      this.overrideData(data);\n    }\n  }\n\n  refreshUI(): void {\n    this.overrideData(this.data);\n    // TODO: override state\n  }\n\n  getCurrentPage(): number | null {\n    if (!(this.isPaginationEnabled && this.limit === 0)) {\n      return null;\n    }\n    return this.offset / this.limit;\n  }\n\n  // Helper\n\n  updateItem(predicate: (item: T) => boolean, transform: (item: T) => T): boolean {\n    // modify items\n    let itemsChanged = false;\n    const index = this.data.findIndex(predicate);\n    const item = transform(this.data[index]!);\n    // TODO: check comparison works right\n    if (item !== this.data[index]) {\n      itemsChanged = true;\n      const data = this.data;\n      data[index] = item;\n      this.overrideData(data);\n    }\n\n    return itemsChanged;\n  }\n}\n","/**\n * Perhaps taking Single Responsibility to far, this object encapsulates the logic of\n * creating or retrieving an object that is attached to a \"Global Context\", which is Window or\n * globalThis depending on the environment\n */\nimport { get, keys, set } from 'lodash';\nimport { nanoid } from 'nanoid';\n\nexport interface Injectable<T> {\n  new (): T;\n}\n\nexport interface InjectableWithArgs<T> {\n  new (...args: any[]): T;\n}\n\nexport type InjectCtor<T> = Injectable<T> | InjectableWithArgs<T>;\n\nexport interface Contextable {\n  isSSR: boolean;\n}\n\nexport class GlobalContextService implements Contextable {\n  isSSR = false;\n\n  globalContext: any;\n\n  private static _instance: GlobalContextService;\n\n  static readonly STATIC_CONTEXT_ID = nanoid(5);\n  static readonly GLOBAL_CONTEXTS_ID = '__S_a_GlobalContextStore';\n\n  objectsStored = new Array<string>();\n\n  constructor() {\n    const isWindowDefined = typeof window !== 'undefined';\n    const isGlobalDefined = typeof global !== 'undefined';\n\n    if (!isGlobalDefined && !isWindowDefined) {\n      throw new Error(\n        `${GlobalContextService.STATIC_CONTEXT_ID}; Unknown environment: Global is undefined and Window is undefined `,\n      );\n    }\n\n    this.globalContext = isWindowDefined ? window : global;\n    // TODO: @todo: for production, we should use STATIC_CONTEXT_ID\n    // but it's nice to have ta standard one in dev so we can easily get find it\n    // in the debugger\n    set(this.globalContext, GlobalContextService.GLOBAL_CONTEXTS_ID, this);\n    this.isSSR = !isWindowDefined;\n  }\n\n  static Get(): GlobalContextService {\n    if (!GlobalContextService._instance) {\n      const gcs = GlobalContextService.Find<GlobalContextService>(\n        GlobalContextService.GLOBAL_CONTEXTS_ID,\n      );\n      GlobalContextService._instance = gcs ?? new GlobalContextService();\n    }\n    return GlobalContextService._instance;\n  }\n\n  static SetDebug(val: boolean): void {\n    GlobalContextService.PutInGlobal('__RK_DEBUG', val);\n  }\n\n  static GetDebug(): boolean {\n    return GlobalContextService.FindInGlobal('__RK_DEBUG') ?? false;\n  }\n\n  protected static Find<T>(key: string): T {\n    const isWindowDefined = typeof window !== 'undefined';\n    const isGlobalDefined = typeof global !== 'undefined';\n    if (isWindowDefined) {\n      return get(window, key);\n    }\n    if (isGlobalDefined) {\n      return get(global, key);\n    }\n\n    throw new Error('Environment does not provide a valid global context');\n  }\n\n  static FindInGlobal<T>(key: string): T | null {\n    const globalContextStore = GlobalContextService.Get();\n    return get(globalContextStore.globalContext, key);\n  }\n\n  static PutInGlobal<T>(key: string, obj: T): T {\n    const globalContextStore = GlobalContextService.Get();\n    set(globalContextStore.globalContext, key, obj);\n    globalContextStore.objectsStored.push(key);\n    if (obj && keys(obj).includes('isSSR')) {\n      set(obj as any, 'isSSR', globalContextStore.isSSR);\n    }\n    if (obj && keys(obj).includes('context')) {\n      const { context = '' } = obj as any;\n      set(globalContextStore.globalContext, `${key}_${context}`, obj);\n    }\n    return obj;\n  }\n\n  static RemoveFromGlobal(key: string): void {\n    const globalContextStore = GlobalContextService.Get();\n    set(globalContextStore.globalContext, key, null);\n  }\n\n  static RemoveAllFromGlobal(): void {\n    const globalContextStore = GlobalContextService.Get();\n    globalContextStore.objectsStored.forEach((objectName) => {\n      GlobalContextService.RemoveFromGlobal(objectName);\n    });\n    globalContextStore.objectsStored = new Array<string>();\n  }\n}\n\nexport function FindOrCreateInGlobal<T extends Contextable>(\n  key: string,\n  creator: Injectable<T>,\n): T {\n  const { FindInGlobal, PutInGlobal } = GlobalContextService;\n  const instance = FindInGlobal<T>(key) ?? PutInGlobal(key, new creator());\n  return instance;\n}\n\nexport function GetDebug(): boolean {\n  return GlobalContextService.GetDebug();\n}\n","/* eslint-disable no-console */\nimport '@abraham/reflection';\n\nimport { get, hasIn, isFunction, isString, memoize, set } from 'lodash';\nimport type { DependencyContainer, InjectionToken } from 'tsyringe';\nimport { container, Lifecycle } from 'tsyringe';\nimport type constructor from 'tsyringe/dist/typings/types/constructor';\n\nimport { GlobalContextService } from './GlobalContextService';\n\n// TODO: deal with server vs client side context here\n\nfunction getContainer(): DependencyContainer {\n  let globalContainer = GlobalContextService.FindInGlobal(\n    '__RK_Global_Container',\n  ) as DependencyContainer;\n  if (!globalContainer) {\n    globalContainer = container;\n    GlobalContextService.PutInGlobal('__RK_Global_Container', globalContainer);\n  }\n  return globalContainer;\n}\n\nconst globalContainer = memoize(getContainer);\n\nconst _container = globalContainer();\n\nfunction debugPrintContainer(): void {\n  const map = get(_container, '_registry._registryMap') as Map<any, any>;\n  map.forEach((value) => {\n    console.log('obj: ', get(value[0], 'instance'));\n  });\n}\n\nif (!GlobalContextService.Get().isSSR) {\n  set(window, '__RK_printContainer', debugPrintContainer);\n}\n\nexport class DependencyService {\n  static registerValue<T>(token: InjectionToken<T>, value: T): DependencyContainer {\n    return _container.register(token, { useValue: value });\n  }\n\n  static registerSingleton<T>(token: InjectionToken<T>): DependencyContainer {\n    if (!isFunction(token)) {\n      throw new Error(`{token} must be a function`);\n    }\n    return _container.registerSingleton(token as unknown as constructor<T>);\n  }\n\n  static registerAsSingleton<T>(from: InjectionToken<T>, to: InjectionToken<T>): DependencyService {\n    return _container.registerSingleton(from, to);\n  }\n\n  static registerClass<T>(token: constructor<T>): DependencyContainer {\n    return _container.register(token, { useClass: token }, { lifecycle: Lifecycle.Transient });\n  }\n\n  static resolve<T>(token: InjectionToken<T>): T {\n    const t = _container.resolve(token);\n    if (GlobalContextService.GetDebug() && hasIn(t, 'id')) {\n      const name = isString(token) ? token : token.toString().substring(0, 25);\n      console.log(`~~~~ Resolving: ${name} with id: ${get(t, 'id')}`);\n    }\n    return t;\n  }\n\n  static resolveSafe<T>(token: InjectionToken<T>): T | null {\n    if (isFunction(token)) {\n      return DependencyService.resolve(token);\n    }\n\n    return _container.isRegistered(token) ? DependencyService.resolve(token) : null;\n  }\n\n  static container(): DependencyContainer {\n    return _container;\n  }\n\n  static isRegistered<T>(token: InjectionToken<T>): boolean {\n    return _container.isRegistered(token);\n  }\n}\n\nexport const useDependency = <T>(token: InjectionToken<T>): T | null => {\n  return DependencyService.resolveSafe(token);\n};\n\nexport default DependencyService;\n","import { useEffect, useState } from 'react';\n\nimport { clone, get, hasIn, isEmpty, set } from 'lodash';\nimport { nanoid } from 'nanoid';\nimport type { DependencyContainer } from 'tsyringe';\nimport { instanceCachingFactory } from 'tsyringe';\nimport type constructor from 'tsyringe/dist/typings/types/constructor';\n\nimport DependencyService from 'new/services/injection/DependencyService';\n\nimport type { ViewModel } from './ViewModel';\n\nconst mountCountKey = '__RK_mountCount';\nconst reactInitKey = '__RK_initKey';\n\nexport const hasReactInitKey = (vm: ViewModel): boolean => {\n  return hasIn(vm, reactInitKey) && !isEmpty(get(vm, reactInitKey));\n};\n\nexport const getReactInitKey = (vm: ViewModel) => {\n  const val = get(vm, reactInitKey);\n  return val ? clone(val) : null;\n};\n\nexport const setReactInitKey = (vm: ViewModel) => {\n  set(vm, reactInitKey, nanoid());\n};\n\nexport const removeReactInitKey = (vm: ViewModel) => {\n  set(vm, reactInitKey, null);\n};\n\nexport const getMountCount = (obj: ViewModel): number => {\n  return hasIn(obj, mountCountKey) ? get(obj, mountCountKey) : 0;\n};\n\nexport const setMountCount = (obj: ViewModel, val: number): void => {\n  set(obj, mountCountKey, val);\n};\n\nexport const incrementMountCount = (obj: ViewModel): number => {\n  let mountCount = getMountCount(obj);\n  ++mountCount;\n  setMountCount(obj, mountCount);\n  return mountCount;\n};\n\nexport const decrementMountCount = (obj: ViewModel): number => {\n  let mountCount = getMountCount(obj);\n  // limit mount count at zero\n  mountCount = Math.max(0, mountCount - 1);\n  setMountCount(obj, mountCount);\n  return mountCount;\n};\n\nexport const useViewModel = <T extends ViewModel>(token: constructor<T>) => {\n  let vm = DependencyService.resolveSafe(token) as T;\n  if (!vm) {\n    DependencyService.container().register(token, {\n      useFactory: instanceCachingFactory((_dependencyContainer: DependencyContainer) => {\n        return new token();\n      }),\n    });\n    vm = DependencyService.resolve(token);\n  }\n\n  const [viewModel] = useState(vm);\n\n  /**\n   * Yes, this does have side effects if the initialization code does things\n   * like fetch data, or spawn web workers.\n   *\n   * However, the ease of use in the component outweighed the side effect to me.\n   *\n   * @todo consider adding a 'onMountOnce' and 'onUnmountOnce' method to\n   * ViewModels to allow for better handling of side effects.\n   */\n  if (!hasReactInitKey(viewModel)) {\n    setReactInitKey(viewModel);\n    viewModel.initialize();\n  }\n\n  useEffect(() => {\n    incrementMountCount(viewModel);\n    return () => {\n      decrementMountCount(viewModel);\n      if (getMountCount(viewModel) === 0) {\n        viewModel.end();\n        removeReactInitKey(viewModel);\n      }\n    };\n  }, []);\n\n  return viewModel;\n};\n","import { Provider } from '@project-serum/anchor';\nimport { Connection } from '@solana/web3.js';\nimport { singleton } from 'tsyringe';\n\nimport { WalletModel } from 'new/models/WalletModel';\nimport { Defaults } from 'new/services/Defaults';\n\nimport { Model } from '../../core/models/Model';\n\n@singleton()\nexport class SolanaModel extends Model {\n  protected _provider: Provider | null = null;\n  protected _connection: Connection | null = null;\n\n  constructor(private _walletModel: WalletModel) {\n    super();\n  }\n\n  protected onInitialize(): void {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    this.setUpConnection();\n    this.setUpProvider();\n  }\n\n  protected afterReactionsRemoved() {\n    this._provider = null;\n    this._connection = null;\n  }\n\n  protected setUpConnection() {\n    this._connection = new Connection(Defaults.apiEndpoint.getURL());\n  }\n\n  protected setUpProvider() {\n    const connection = this.connection;\n    const solana = this._walletModel.signer;\n\n    if (!solana) {\n      throw new Error('~~~ No Signer object was provided');\n    }\n\n    if (!connection) {\n      throw new Error('~~~ No Connection');\n    }\n\n    if (!this._provider) {\n      this._provider = new Provider(connection, solana, Provider.defaultOptions());\n    }\n  }\n\n  get connection(): Connection {\n    if (!this._connection) {\n      this.setUpConnection();\n    }\n\n    return this._connection as Connection;\n  }\n\n  get provider(): Provider {\n    if (!this._provider) {\n      this.setUpProvider();\n    }\n\n    return this._provider as Provider;\n  }\n}\n","import '@abraham/reflection';\n\nimport type { Adapter, WalletAdapterNetwork } from '@solana/wallet-adapter-base';\nimport {\n  PhantomWalletAdapter,\n  SolletExtensionWalletAdapter,\n  SolletWalletAdapter,\n} from '@solana/wallet-adapter-wallets';\nimport { singleton } from 'tsyringe';\n\nimport { MnemonicAdapter } from 'new/scenes/Main/Auth/MnemonicAdapter';\n\nexport interface IWalletAdaptorService {\n  getAdaptors(network: WalletAdapterNetwork): Array<Adapter>;\n}\n\n@singleton()\nexport class WalletAdaptorService implements IWalletAdaptorService {\n  constructor() {}\n\n  getAdaptors(network: WalletAdapterNetwork): Array<Adapter | MnemonicAdapter> {\n    return [\n      new MnemonicAdapter(),\n      new PhantomWalletAdapter(),\n      new SolletWalletAdapter({ network }),\n      new SolletExtensionWalletAdapter({ network }),\n    ];\n  }\n}\n","import '@abraham/reflection';\n\nimport type { Adapter, MessageSignerWalletAdapter, WalletName } from '@solana/wallet-adapter-base';\nimport { WalletAdapterNetwork } from '@solana/wallet-adapter-base';\nimport { PhantomWalletName } from '@solana/wallet-adapter-phantom';\nimport type { Transaction } from '@solana/web3.js';\nimport { PublicKey } from '@solana/web3.js';\nimport { action, autorun, computed, makeObservable, observable, runInAction } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport type { Wallet } from 'new/scenes/Main/Auth/MnemonicAdapter';\nimport { MnemonicAdapter, MnemonicAdapterName } from 'new/scenes/Main/Auth/MnemonicAdapter';\nimport type { ConnectConfig } from 'new/scenes/Main/Auth/typings';\nimport { WalletAdaptorService } from 'new/services/WalletAdaptorService';\n\nimport { Model } from '../../core/models/Model';\n\n@singleton()\nexport class WalletModel extends Model {\n  name: string;\n  publicKey: string;\n  adaptors: Adapter[] = [];\n  network: WalletAdapterNetwork;\n  connected: boolean;\n  connecting: boolean;\n  selectedAdaptor: Adapter | null = null;\n\n  private _adaptors: Array<Adapter | MnemonicAdapter> | null = null;\n  private static _previousAdaptorKey = 'previousAdaptor';\n  private static _reloadableAdaptors = [PhantomWalletName];\n\n  constructor(\n    protected walletAdaptorService: WalletAdaptorService,\n    private _mnemonicAdapter: MnemonicAdapter,\n  ) {\n    super();\n    this.name = '';\n    this.network = WalletAdapterNetwork.Mainnet;\n    this.publicKey = '';\n    this.connected = false;\n    this.connecting = false;\n\n    makeObservable<WalletModel, '_restoreLocal'>(this, {\n      _restoreLocal: action,\n      connectAdaptor: action,\n      name: observable,\n      publicKey: observable,\n      network: observable,\n      connected: observable,\n      connecting: observable,\n      selectedAdaptor: observable,\n      adaptors: observable,\n      pubKey: computed,\n      signer: computed,\n    });\n\n    this.onConnect = this.onConnect.bind(this);\n    this.onDisconnect = this.onDisconnect.bind(this);\n  }\n\n  signAllTransactions(transactions: Array<Transaction>): Promise<Array<Transaction>> {\n    if (!this.selectedAdaptor) {\n      throw new Error('Not connected to an adaptor');\n    }\n\n    return this.signer.signAllTransactions(transactions);\n  }\n\n  signTransaction(transaction: Transaction): Promise<Transaction> {\n    if (!this.selectedAdaptor) {\n      throw new Error('Not connected to a wallet adaptor');\n    }\n\n    return this.signer.signTransaction(transaction);\n  }\n\n  async disconnect(): Promise<void> {\n    localStorage.removeItem(WalletModel._previousAdaptorKey);\n\n    await this.selectedAdaptor?.disconnect();\n  }\n\n  async connectAdaptor(adaptorName: string, config?: ConnectConfig): Promise<void> {\n    try {\n      this.setupAdaptors();\n\n      const adaptors = this._getAdaptors();\n      const chosenAdaptor = adaptors.find((adaptor) => adaptor.name === adaptorName);\n\n      if (chosenAdaptor) {\n        this.connecting = true;\n        await chosenAdaptor.connect(config);\n      }\n\n      this._saveAdaptorName(adaptorName);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      this.connecting = false;\n    }\n  }\n\n  protected _saveAdaptorName(adaptorName: string): void {\n    if (adaptorName !== MnemonicAdapterName) {\n      localStorage.setItem(WalletModel._previousAdaptorKey, adaptorName);\n    }\n  }\n\n  protected setUpAdaptor(adaptor: Adapter | MnemonicAdapter): Adapter {\n    adaptor.on('connect', (publicKey: PublicKey) => {\n      this.onConnect(adaptor, publicKey);\n    });\n\n    adaptor.on('disconnect', () => {\n      this.onDisconnect(adaptor);\n    });\n\n    if (adaptor.connected && adaptor.publicKey) {\n      this.onConnect(adaptor, adaptor.publicKey);\n    }\n\n    return adaptor;\n  }\n\n  protected createReactions() {\n    this.addReaction(\n      autorun(() => {\n        if (this.network) {\n          this.setupAdaptors();\n        }\n      }),\n    );\n  }\n\n  protected afterReactionsRemoved() {}\n\n  protected onInitialize(): void {\n    this.createReactions();\n    void this._restoreLocal();\n  }\n\n  protected override onEnd() {\n    this.adaptors.forEach((adapter) => {\n      adapter.removeAllListeners('connect');\n      adapter.removeAllListeners('disconnect');\n    });\n    super.onEnd();\n  }\n\n  protected setupAdaptors() {\n    const originalAdaptors = this._getAdaptors();\n\n    const newAdaptors = originalAdaptors.map((value) => this.setUpAdaptor(value));\n\n    runInAction(() => {\n      this.adaptors = newAdaptors;\n    });\n  }\n\n  protected onConnect(adaptor: Adapter, publicKey: PublicKey) {\n    runInAction(() => {\n      this.selectedAdaptor = adaptor;\n      this.connected = this.selectedAdaptor.connected;\n      this.name = adaptor.name;\n      this.publicKey = publicKey.toBase58();\n    });\n  }\n\n  protected onDisconnect(adaptor: Adapter) {\n    runInAction(() => {\n      this.connected = adaptor.connected;\n      this.name = '';\n      this.publicKey = '';\n    });\n  }\n\n  get pubKey(): PublicKey {\n    return new PublicKey(this.publicKey);\n  }\n\n  get signer(): Wallet {\n    return this.selectedAdaptor as Wallet;\n  }\n\n  get messageSigner(): MessageSignerWalletAdapter {\n    return this.selectedAdaptor as MessageSignerWalletAdapter;\n  }\n\n  private _getAdaptors() {\n    if (!this._adaptors) {\n      this._adaptors = this.walletAdaptorService.getAdaptors(this.network);\n    }\n\n    return this._adaptors;\n  }\n\n  private async _restoreLocal(): Promise<void> {\n    this.connecting = true;\n    const localSinger = await this._mnemonicAdapter.getLocalSigner();\n\n    if (localSinger) {\n      this.connecting = false;\n      return await this.connectAdaptor(MnemonicAdapterName, {\n        type: 'recur',\n        signer: localSinger,\n      });\n    }\n\n    const localAdaptor = localStorage.getItem(WalletModel._previousAdaptorKey);\n    const shouldAutoConnect =\n      localAdaptor && WalletModel._reloadableAdaptors.includes(localAdaptor as WalletName);\n\n    if (shouldAutoConnect) {\n      await this.connectAdaptor(localAdaptor);\n    }\n    this.connecting = false;\n  }\n}\n","import type { WalletName } from '@solana/wallet-adapter-base';\nimport { BaseMessageSignerWalletAdapter, WalletReadyState } from '@solana/wallet-adapter-base';\nimport type { Signer, Transaction } from '@solana/web3.js';\nimport { Keypair as SolanaKeypair, PublicKey } from '@solana/web3.js';\nimport bs58 from 'bs58';\nimport { pbkdf2 } from 'crypto';\nimport nacl from 'tweetnacl';\n\nimport type { ConnectConfig, StorageInfo } from 'new/scenes/Main/Auth/typings';\nimport type { KeyPairDbInstance } from 'new/scenes/Main/Auth/utils';\nimport {\n  getDB,\n  getKeyPairFromSeed,\n  KEYPAIR_KEY,\n  setStorageValue,\n  STORE_NAME,\n} from 'new/scenes/Main/Auth/utils';\nimport { notImplemented } from 'new/utils/decorators';\n\nexport interface Wallet {\n  signTransaction(tx: Transaction): Promise<Transaction>;\n  signAllTransactions(txs: Transaction[]): Promise<Transaction[]>;\n  publicKey: PublicKey;\n}\n\nexport const MnemonicAdapterName = 'MnemonicAdapter' as WalletName;\n\nexport class MnemonicAdapter extends BaseMessageSignerWalletAdapter {\n  name = MnemonicAdapterName;\n  icon = '';\n  url = '';\n  private _account: Signer | null = null;\n  private _connecting = false;\n  private _readyState = WalletReadyState.NotDetected;\n  private _keypairDB: KeyPairDbInstance | undefined;\n  private _extractableKeys = false;\n  private _encryptAlgo = 'RSA-OAEP';\n\n  static walletIndex = 0;\n  static mnemonicStrength = 256;\n\n  private static _noKeypairError = 'No keypair to sign transactions';\n  private static _mnemonicStorageKey = 'encryptedSeedAndMnemonic';\n  private static _privateStorageKey = 'walletPrivateKey';\n\n  constructor() {\n    super();\n  }\n\n  async getLocalSigner(): Promise<Signer | null> {\n    const rsaKeypair = await this._getKeyPair();\n\n    const chipherString = localStorage.getItem(MnemonicAdapter._privateStorageKey);\n\n    if (!chipherString) {\n      return null;\n    }\n\n    const decrypted = await window.crypto.subtle.decrypt(\n      {\n        name: this._encryptAlgo,\n      },\n      rsaKeypair.privateKey as CryptoKey,\n      Buffer.from(chipherString, 'hex'),\n    );\n\n    if (!decrypted) {\n      return null;\n    }\n\n    const keyPair = SolanaKeypair.fromSecretKey(new Uint8Array(decrypted));\n\n    return {\n      publicKey: new PublicKey(keyPair.publicKey),\n      secretKey: keyPair.secretKey,\n    };\n  }\n\n  signTransaction(transaction: Transaction): Promise<Transaction> {\n    if (this._account) {\n      transaction.partialSign(this._account);\n\n      return Promise.resolve(transaction);\n    }\n\n    return Promise.reject(MnemonicAdapter._noKeypairError);\n  }\n\n  signAllTransactions(transactions: Transaction[]): Promise<Transaction[]> {\n    if (this._account) {\n      transactions.forEach((trx) => trx.partialSign(this._account as Signer));\n\n      return Promise.resolve(transactions);\n    }\n\n    return Promise.reject(MnemonicAdapter._noKeypairError);\n  }\n\n  @notImplemented()\n  async signMessage(message: Uint8Array): Promise<Uint8Array> {\n    return Promise.resolve(message);\n  }\n\n  async disconnect(): Promise<void> {\n    this._account = null;\n    this.emit('disconnect');\n\n    await this._removeLocalAuthData();\n\n    return Promise.resolve();\n  }\n\n  get publicKey(): PublicKey | null {\n    return this._account?.publicKey || null;\n  }\n\n  get readyState(): WalletReadyState {\n    return this._readyState;\n  }\n\n  get connecting(): boolean {\n    return this._connecting;\n  }\n\n  async connect(config?: ConnectConfig): Promise<void> {\n    try {\n      if (config?.type === 'sign') {\n        const keyPair = getKeyPairFromSeed(\n          config.storageInfo.seed,\n          MnemonicAdapter.walletIndex,\n          config.derivationPath,\n        );\n\n        const signer = {\n          publicKey: new PublicKey(keyPair.publicKey),\n          secretKey: keyPair.secretKey,\n        };\n\n        this._account = signer;\n        this.emit('connect', signer.publicKey);\n\n        await this._saveCurrentSecretKey(signer.secretKey);\n\n        await MnemonicAdapter._saveEncryptedMnemonicAndSeed(config.storageInfo);\n      }\n\n      if (config?.type === 'recur') {\n        this._account = config.signer;\n        this.emit('connect', config.signer.publicKey);\n      }\n\n      // eslint-disable-next-line\n    } catch (error: any) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n\n  private static async _saveEncryptedMnemonicAndSeed(payload: StorageInfo) {\n    const plaintext = JSON.stringify({\n      mnemonic: payload.mnemonic,\n      seed: payload.seed,\n    });\n    const locked = await MnemonicAdapter._generateEncryptedTextAsync(plaintext, payload.password);\n\n    setStorageValue(MnemonicAdapter._mnemonicStorageKey, JSON.stringify(locked));\n  }\n\n  private async _saveCurrentSecretKey(secretKey: Uint8Array) {\n    const keyPair = await this._getKeyPair();\n\n    const ciphertext = await window.crypto.subtle.encrypt(\n      this._encryptAlgo,\n      keyPair.publicKey as CryptoKey,\n      secretKey,\n    );\n\n    if (ciphertext) {\n      const cipherString = Buffer.from(ciphertext).toString('hex');\n\n      localStorage.setItem(MnemonicAdapter._privateStorageKey, cipherString);\n    }\n  }\n\n  private static async _deriveEncryptionKey(\n    password: string,\n    salt: Uint8Array,\n    iterations: number,\n    digest: string,\n  ) {\n    return new Promise<Buffer>((resolve, reject) =>\n      pbkdf2(password, salt, iterations, nacl.secretbox.keyLength, digest, (err, key) =>\n        err ? reject(err) : resolve(key),\n      ),\n    );\n  }\n\n  private static async _generateEncryptedTextAsync(plaintext: string, password: string) {\n    const salt = nacl.randomBytes(16);\n    const kdf = 'pbkdf2';\n    const iterations = 100000;\n    const digest = 'sha256';\n\n    const nonce = nacl.randomBytes(nacl.secretbox.nonceLength);\n    const key = await MnemonicAdapter._deriveEncryptionKey(password, salt, iterations, digest);\n    const encrypted = nacl.secretbox(Buffer.from(plaintext), nonce, key);\n\n    return {\n      encrypted: bs58.encode(encrypted),\n      nonce: bs58.encode(nonce),\n      kdf,\n      salt: bs58.encode(salt),\n      iterations,\n      digest,\n    };\n  }\n\n  private async _removeLocalAuthData(): Promise<void> {\n    localStorage.removeItem(MnemonicAdapter._privateStorageKey);\n    localStorage.removeItem(MnemonicAdapter._mnemonicStorageKey);\n\n    const db = await this._getDB();\n\n    await db.delete(STORE_NAME, KEYPAIR_KEY);\n  }\n\n  private async _getKeyPair(): Promise<CryptoKeyPair> {\n    this._keypairDB = await getDB();\n\n    let keypair = await this._keypairDB.get(STORE_NAME, KEYPAIR_KEY);\n\n    if (keypair) {\n      return keypair;\n    }\n\n    keypair = await window.crypto.subtle.generateKey(\n      {\n        name: this._encryptAlgo,\n        modulusLength: 4096,\n        publicExponent: new Uint8Array([1, 0, 1]),\n        hash: 'SHA-256',\n      },\n      this._extractableKeys,\n      ['encrypt', 'decrypt'],\n    );\n\n    await this._keypairDB.put(STORE_NAME, keypair, KEYPAIR_KEY);\n\n    return keypair;\n  }\n\n  private async _getDB(): Promise<KeyPairDbInstance> {\n    if (this._keypairDB) {\n      return this._keypairDB;\n    }\n\n    return await getDB();\n  }\n}\n","export function notImplemented() {\n  return function (_: unknown, property: string, descriptor: PropertyDescriptor) {\n    descriptor.value = function () {\n      throw new TypeError(`${property} is not implemented`);\n    };\n  };\n}\n","import * as bip32 from 'bip32';\nimport * as bip39 from 'bip39';\nimport * as ed25519 from 'ed25519-hd-key';\nimport type { DBSchema } from 'idb';\nimport { openDB } from 'idb';\nimport type { IDBPDatabase } from 'idb/build/entry';\nimport nacl from 'tweetnacl';\n\nimport type { ExpiryDataType, ValueOf } from './typings';\n\nexport const DERIVATION_PATH = {\n  Deprecated: 'deprecated',\n  Bip44: 'bip44',\n  Bip44Change: 'bip44Change',\n};\n\nexport const createExpiringValue = <T>(value: T, ms?: number) => {\n  if (ms) {\n    return {\n      value,\n      expiry: Date.now() + ms,\n    };\n  }\n\n  return {\n    value,\n    expiry: Number.MAX_SAFE_INTEGER,\n  };\n};\n\nexport const getExpiringValue = <T>(data: ExpiryDataType<T>) => {\n  if (!data) {\n    return null;\n  }\n\n  if (data.expiry < Date.now()) {\n    return null;\n  }\n\n  return data.value;\n};\n\nexport function validatePassword(password: string) {\n  const isLowerCase = /[a-z]/.test(password);\n  const isUpperCase = /[A-Z]/.test(password);\n  const isNumber = /\\d/.test(password);\n  const isMinLength = password.length >= 8;\n\n  return { isLowerCase, isUpperCase, isNumber, isMinLength };\n}\n\nexport const mnemonicToSeed = async (mnemonic: string) => {\n  if (!bip39.validateMnemonic(mnemonic)) {\n    throw new Error('Invalid seed words');\n  }\n  const seed = await bip39.mnemonicToSeed(mnemonic);\n  return Buffer.from(seed).toString('hex');\n};\n\nexport const setStorageValue = <T>(key: string, data: T, { msTTL }: { msTTL?: number } = {}) => {\n  const expiringData = createExpiringValue(data, msTTL);\n  return localStorage.setItem(key, JSON.stringify(expiringData));\n};\n\nexport const getStorageValue = <T>(key: string) => {\n  const strData = localStorage.getItem(key);\n  if (!strData) {\n    return null;\n  }\n\n  const value = getExpiringValue(JSON.parse(strData) as ExpiryDataType<T>);\n\n  if (!value) {\n    localStorage.removeItem(key);\n    return null;\n  }\n\n  return value;\n};\n\nexport const deriveSecretKeyFromSeed = (\n  seed: string,\n  walletIndex: number,\n  derivationPath: ValueOf<typeof DERIVATION_PATH>,\n) => {\n  return getKeyPairFromSeed(seed, walletIndex, derivationPath).secretKey;\n};\n\nconst deriveSeed = (\n  seed: string,\n  walletIndex: number,\n  derivationPath: ValueOf<typeof DERIVATION_PATH>,\n): Buffer | undefined => {\n  switch (derivationPath) {\n    case DERIVATION_PATH.Deprecated: {\n      const path = `m/501'/${walletIndex}'/0/0`;\n      return bip32.fromSeed(Buffer.from(seed, 'hex')).derivePath(path).privateKey;\n    }\n    case DERIVATION_PATH.Bip44: {\n      const path = `m/44'/501'/${walletIndex}'`;\n      return ed25519.derivePath(path, seed).key;\n    }\n    case DERIVATION_PATH.Bip44Change: {\n      const path = `m/44'/501'/${walletIndex}'/0'`;\n      return ed25519.derivePath(path, seed).key;\n    }\n  }\n};\n\nexport function getKeyPairFromSeed(\n  seed: string,\n  walletIndex: number,\n  derivationPath: ValueOf<typeof DERIVATION_PATH>,\n) {\n  const derivedPrivateKey = deriveSeed(seed, walletIndex, derivationPath);\n  if (!derivedPrivateKey) {\n    throw new Error('Could not derive secretKey');\n  }\n  return nacl.sign.keyPair.fromSeed(derivedPrivateKey);\n}\n\nexport const derivePublicKeyFromSeed = (\n  seed: string,\n  walletIndex: number,\n  derivationPath: ValueOf<typeof DERIVATION_PATH>,\n) => {\n  return getKeyPairFromSeed(seed, walletIndex, derivationPath).publicKey;\n};\n\ninterface KeypairDB extends DBSchema {\n  cryptoPair: {\n    key: string;\n    value: CryptoKeyPair;\n  };\n}\n\nconst DB_NAME = 'keys';\nexport const STORE_NAME = 'cryptoPair';\nexport const KEYPAIR_KEY = 'keypair';\nconst INIT_VERSION = 1;\n\nexport const getDB = async (): Promise<KeyPairDbInstance> =>\n  await openDB<KeypairDB>(DB_NAME, INIT_VERSION, {\n    upgrade(db) {\n      db.createObjectStore(STORE_NAME);\n    },\n  });\n\nexport type KeyPairDbInstance = IDBPDatabase<KeypairDB>;\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { LaagTooltip } from 'components/ui';\nimport type { PayingFeeInfo } from 'new/app/models/PayingFee';\n\nconst TooltipContent = styled.div`\n  width: 300px;\n\n  &.loader {\n    padding: 50px 0;\n  }\n`;\n\ninterface Props {\n  info: PayingFeeInfo;\n}\n\nexport const FeeTransactionTooltip: FC<Props> = ({ info }) => {\n  const elContent = (\n    <TooltipContent>\n      <strong>{info.alertTitle}</strong>\n      <div>{info.alertDescription}</div>\n    </TooltipContent>\n  );\n\n  return <LaagTooltip withClose={true} elContent={elContent} />;\n};\n","import type { FC, ReactNode } from 'react';\n\nimport { observer } from 'mobx-react-lite';\nimport * as R from 'ramda';\n\nimport { ListWrapper, Row, Text } from 'components/ui/AccordionDetails/common';\nimport type { LoadableRelay } from 'new/app/models/LoadableRelay';\nimport { LoadableStateType } from 'new/app/models/LoadableRelay';\nimport type { PayingFee } from 'new/app/models/PayingFee';\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport { FeeTransactionTooltip } from './FeeTransactionTooltip';\n\ninterface DetailFeesViewVieModelType {\n  readonly fees: LoadableRelay<PayingFee[]>;\n  getPrice(symbol: string): number | null;\n  readonly totalFees: {\n    totalFeesSymbol: string;\n    decimals: number;\n    amount: number;\n    amountInFiat: number;\n  } | null;\n}\n\ninterface Props {\n  viewModel: Readonly<DetailFeesViewVieModelType>;\n  slippageView?: ReactNode;\n  feesView?: ReactNode;\n}\n\nexport const DetailFeesView: FC<Props> = observer(({ viewModel, slippageView, feesView }) => {\n  const formatAmount = ({ fee, withFiat }: { fee: PayingFee; withFiat: boolean }) => {\n    const amount = convertToBalance(fee.lamports, fee.token.decimals);\n    const price = viewModel.getPrice(fee.token.symbol) ?? 0;\n    const amountInFiat = amount * price;\n\n    return (\n      <Text>\n        {numberToString(amount, { maximumFractionDigits: fee.token.decimals + 1 })}{' '}\n        {fee.token.symbol}\n        {withFiat ? (\n          <Text className=\"gray\">\n            (~{Defaults.fiat.symbol}\n            {numberToString(amountInFiat, {\n              maximumFractionDigits: 2,\n            })}\n            )\n          </Text>\n        ) : null}\n      </Text>\n    );\n  };\n\n  const formatTotalFees = () => {\n    const totalFees = viewModel.totalFees;\n    if (totalFees) {\n      const { totalFeesSymbol, decimals, amount, amountInFiat } = totalFees;\n\n      return (\n        <Text>\n          <Text className=\"big\">\n            {numberToString(amount, { maximumFractionDigits: decimals })} {totalFeesSymbol}\n          </Text>{' '}\n          <Text className=\"gray\">\n            (~{Defaults.fiat.symbol}\n            {numberToString(amountInFiat, { maximumFractionDigits: 2 })})\n          </Text>\n        </Text>\n      );\n    }\n  };\n\n  const customRow = ({ title, trailing }: { title: string; trailing: ReactNode }) => {\n    return (\n      <Row key={title}>\n        <Text className=\"gray\">{title}</Text>\n        {trailing}\n      </Row>\n    );\n  };\n\n  const freeFee = ({ fee, index }: { fee: PayingFee; index: number }) => {\n    const payBy = fee.info?.payBy;\n    return (\n      <Text key={index} className=\"inline-flex\">\n        <Text className=\"right\">\n          Free {payBy ? <Text className=\"green\">({payBy})</Text> : null}\n        </Text>\n        {fee.info ? <FeeTransactionTooltip info={fee.info} /> : null}\n      </Text>\n    );\n  };\n\n  const row = ({ title, descriptions }: { title: string; descriptions: ReactNode[] }) => {\n    return (\n      <Row key={title}>\n        <Text className=\"gray\">{title}</Text>\n        <Text className=\"right\">\n          {descriptions.map((description, index) => {\n            if (index === 0) {\n              return <span key={index}>{description}</span>;\n            } else {\n              return <span key={index}> + {description}</span>;\n            }\n          })}\n        </Text>\n      </Row>\n    );\n  };\n\n  const snapshot = viewModel.fees;\n  switch (snapshot.state.type) {\n    case LoadableStateType.loaded: {\n      const value = snapshot.value ?? [];\n      const group = R.pipe(\n        R.groupBy<PayingFee, string>((el) => el.type.headerString),\n        R.mapObjIndexed(\n          R.sort<PayingFee>((el1, el2) => {\n            const id1 =\n              value.findIndex((fee) => fee.type.headerString === el1.type.headerString) ?? 0;\n            const id2 =\n              value.findIndex((fee) => fee.type.headerString === el2.type.headerString) ?? 0;\n            return id1 - id2;\n          }),\n        ),\n      )(value);\n\n      return (\n        <>\n          <ListWrapper>\n            {/* Slippage */}\n            {slippageView ? slippageView : null}\n\n            {/* Fee categories*/}\n            {Object.entries(group).map((el) => {\n              if (el[1].some((fee) => fee.isFree)) {\n                // Free fee\n                return customRow({\n                  title: el[0],\n                  trailing: el[1].map((fee, index) => freeFee({ fee, index })),\n                });\n              } else {\n                // Normal fee\n                return row({\n                  title: el[0],\n                  descriptions: el[1].map((fee) =>\n                    formatAmount({\n                      fee,\n                      withFiat: value.length === 1,\n                    }),\n                  ),\n                });\n              }\n            })}\n          </ListWrapper>\n\n          {feesView ? <ListWrapper className=\"flat\">{feesView}</ListWrapper> : null}\n\n          {/* Total */}\n          <ListWrapper className=\"total\">\n            <Row>\n              <Text>Total fee</Text>\n              {formatTotalFees()}\n            </Row>\n          </ListWrapper>\n        </>\n      );\n    }\n    default:\n      return null;\n  }\n});\n","import type { FC } from 'react';\n\nimport { Row, Text } from 'components/ui/AccordionDetails/common';\n\ninterface Props {\n  token: string;\n  price: string;\n  fiatPrice: string;\n}\n\nexport const DetailRatesView: FC<Props> = ({ token, price, fiatPrice }) => {\n  return (\n    <Row>\n      <Text className=\"gray nowrap\">1 {token} price</Text>\n      <Text className=\"flex-end right\">\n        {price} <Text className=\"gray\">{fiatPrice}</Text>\n      </Text>\n    </Row>\n  );\n};\n","import type { FC } from 'react';\n\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\n\nimport { ListWrapper } from 'components/ui/AccordionDetails/common';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\nimport { DetailRatesView } from './DetailRatesView';\n\ninterface Props {\n  exchangeRate: number | null;\n  sourceWallet: Wallet | null;\n  destinationWallet: Wallet | null;\n}\n\nexport const RatesStackView: FC<Props> = observer(\n  ({ exchangeRate, sourceWallet, destinationWallet }) => {\n    const fromRate = expr(() => {\n      const rate = exchangeRate;\n      const source = sourceWallet;\n      const destination = destinationWallet;\n      if (!rate || !source || !destination) {\n        return null;\n      }\n\n      const sourceSymbol = source.token.symbol;\n      const destinationSymbol = destination.token.symbol;\n\n      const fiatPrice = numberToString(source.priceInCurrentFiat, { maximumFractionDigits: 2 });\n      const formattedFiatPrice = `(~${Defaults.fiat.symbol}${fiatPrice})`;\n\n      return {\n        token: sourceSymbol,\n        price: `${numberToString(rate, { maximumFractionDigits: 9 })} ${destinationSymbol}`,\n        fiatPrice: formattedFiatPrice,\n      };\n    });\n\n    const toRate = expr(() => {\n      const rate = !exchangeRate ? null : 1 / exchangeRate;\n      const source = sourceWallet;\n      const destination = destinationWallet;\n      if (!rate || !source || !destination) {\n        return null;\n      }\n\n      const sourceSymbol = source.token.symbol;\n      const destinationSymbol = destination.token.symbol;\n\n      const fiatPrice = numberToString(destination.priceInCurrentFiat, {\n        maximumFractionDigits: 2,\n      });\n      const formattedFiatPrice = `(~${Defaults.fiat.symbol}${fiatPrice})`;\n\n      return {\n        token: destinationSymbol,\n        price: `${numberToString(rate, { maximumFractionDigits: 9 })} ${sourceSymbol}`,\n        fiatPrice: formattedFiatPrice,\n      };\n    });\n\n    if (!fromRate && !toRate) {\n      return null;\n    }\n\n    return (\n      <ListWrapper>\n        {fromRate ? <DetailRatesView {...fromRate} /> : null}\n        {toRate ? <DetailRatesView {...toRate} /> : null}\n      </ListWrapper>\n    );\n  },\n);\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nimport { Icon } from 'components/ui';\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { TokenAvatar } from 'new/ui/components/common/TokenAvatar';\n\nconst Wrapper = styled.div`\n  position: relative;\n`;\n\nconst BaseWrapper = styled.div`\n  width: 48px;\n  height: 48px;\n`;\n\nconst WrapperFromOneToOne = styled(BaseWrapper)`\n  position: relative;\n\n  & > :nth-child(1) {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  & > :nth-child(2) {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n  }\n`;\n\nexport const WrapperIcon = styled(BaseWrapper)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  background: #f6f6f8;\n  border-radius: 12px;\n`;\n\nconst TransactionIcon = styled(Icon)`\n  width: 25px;\n  height: 25px;\n\n  color: #a3a5ba;\n`;\n\nconst StatusWrapper = styled.div`\n  position: absolute;\n  right: 0;\n  bottom: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst StatusIcon = styled(Icon)`\n  margin-left: 9px;\n\n  &.clock {\n    width: 15px;\n    height: 15px;\n\n    color: #ffa631;\n  }\n\n  &.warning {\n    width: 16px;\n    height: 16px;\n\n    color: #f43d3d;\n  }\n`;\n\ntype FromOneToOne = { fromOneToOne: { from?: Token; to?: Token } };\ntype OneImage = { oneImage: string };\n\nexport type ImageViewType = FromOneToOne | OneImage | null;\n\ninterface Props {\n  imageView: ImageViewType;\n  statusImage: string | null;\n  className?: string;\n}\n\nexport const TransactionImageView: FC<Props> = ({ imageView, statusImage, className }) => {\n  const renderEl = () => {\n    if ((imageView as FromOneToOne).fromOneToOne) {\n      return (\n        <WrapperFromOneToOne>\n          <TokenAvatar token={(imageView as FromOneToOne).fromOneToOne.from} size={32} />\n          <TokenAvatar token={(imageView as FromOneToOne).fromOneToOne.to} size={32} />\n        </WrapperFromOneToOne>\n      );\n    }\n\n    return (\n      <WrapperIcon>\n        <TransactionIcon name={(imageView as OneImage).oneImage} />\n      </WrapperIcon>\n    );\n  };\n\n  return (\n    <Wrapper className={className}>\n      {renderEl()}\n      {statusImage ? (\n        <StatusWrapper>\n          <StatusIcon name={statusImage} className={statusImage} />\n        </StatusWrapper>\n      ) : null}\n    </Wrapper>\n  );\n};\n","export class Cache<Key extends string, Value> {\n  private _wrapped: Map<Key, Value> = new Map(); // TODO: should be persistent i think\n\n  insert(value: Value, key: Key): void {\n    this._wrapped.set(key, value);\n  }\n\n  value(key: Key): Value | undefined {\n    return this._wrapped.get(key);\n  }\n\n  removeValue(key: Key): void {\n    this._wrapped.delete(key);\n  }\n}\n","import type { SignaturePubkeyPair, TransactionSignature } from '@solana/web3.js';\nimport bs58 from 'bs58';\n\nimport { FeeRelayerError } from 'new/sdk/FeeRelayer';\n\nexport function getSignature(\n  signatures: SignaturePubkeyPair[],\n  index: number,\n): TransactionSignature {\n  if (signatures.length <= index) {\n    throw FeeRelayerError.invalidSignature();\n  }\n\n  const data = signatures[index]?.signature;\n  if (!data) {\n    throw FeeRelayerError.invalidSignature();\n  }\n\n  return bs58.encode(data);\n}\n","import type { AxiosRequestConfig } from 'axios';\nimport axios from 'axios';\n\nimport type { FeeRelayerRequestType } from '../models/FeeRelayerRequestType';\nimport * as Relay from '../relay/helpers/FeeRelayerRelayModels';\n\nconst request = axios.create();\n\nexport interface FeeRelayerAPIClientType {\n  version: number;\n  getFeePayerPubkey(): Promise<string>;\n  requestFreeFeeLimits(authority: string): Promise<Relay.FeeLimitForAuthorityResponse>;\n  sendTransaction(requestType: FeeRelayerRequestType): Promise<string>;\n}\n\n// TODO: APIClientError\n\nexport class FeeRelayerAPIClient implements FeeRelayerAPIClientType {\n  // Properties\n  version: number;\n  private _baseUrlString: string;\n\n  // Initializers\n  constructor(version = 1) {\n    this.version = version;\n    this._baseUrlString = 'https://solana-fee-relayer.wallet.p2p.org'; // TODO: from params\n  }\n\n  // Methods\n\n  /// Get fee payer for free transaction\n  /// - Returns: Account's public key that is responsible for paying fee\n  async getFeePayerPubkey(): Promise<string> {\n    let url = this._baseUrlString;\n    if (this.version > 1) {\n      url += `/v${this.version}`;\n    }\n    url += '/fee_payer/pubkey';\n\n    return request(url).then(({ data }) => data);\n  }\n\n  requestFreeFeeLimits(authority: string): Promise<Relay.FeeLimitForAuthorityResponse> {\n    let url = this._baseUrlString;\n    if (this.version > 1) {\n      url += `/v${this.version}`;\n    }\n    url += `/free_fee_limits/${authority}`;\n\n    return request\n      .get<Relay.FeeLimitForAuthorityResponseJSON>(url)\n      .then(({ data }) => Relay.FeeLimitForAuthorityResponse.fromJSON(data));\n  }\n\n  /// Send transaction to fee relayer\n  /// - Parameters:\n  ///   - path: additional path for request\n  ///   - params: request's parameters\n  /// - Returns: transaction id\n  sendTransaction(requestType: FeeRelayerRequestType): Promise<string> {\n    // TODO: add error parsing\n    return request(this._urlRequest(requestType)).then(({ data }) => {\n      return data[0];\n    });\n  }\n\n  private _urlRequest(requestType: FeeRelayerRequestType): AxiosRequestConfig {\n    let url = this._baseUrlString;\n    if (this.version > 1) {\n      url += `/v${this.version}`;\n    }\n    url += requestType.path;\n\n    return <AxiosRequestConfig>{\n      url,\n      method: 'post',\n      responseType: 'json',\n      data: requestType.getParams(),\n    };\n  }\n}\n","import type { PublicKey } from '@solana/web3.js';\n\n// A basic class that represents SPL Token.\nexport class TokenAccount {\n  // A address of spl token.\n  address: PublicKey;\n  // A mint address for spl token.\n  mint: PublicKey;\n\n  constructor({ address, mint }: { address: PublicKey; mint: PublicKey }) {\n    this.address = address;\n    this.mint = mint;\n  }\n}\n","export enum StatsInfoOperationType {\n  topUp = 'TopUp',\n  transfer = 'Transfer',\n  swap = 'Swap',\n  other = 'Other',\n}\n\nexport enum StatsInfoDeviceType {\n  web = 'Web',\n  android = 'Android',\n  iOS = 'Ios',\n}\n\nexport class StatsInfo {\n  operationType: StatsInfoOperationType;\n  deviceType: StatsInfoDeviceType;\n  currency: string | null;\n  build: string | null;\n\n  constructor({\n    operationType,\n    deviceType,\n    currency,\n    build,\n  }: {\n    operationType: StatsInfoOperationType;\n    deviceType: StatsInfoDeviceType;\n    currency: string | null;\n    build: string | null;\n  }) {\n    this.operationType = operationType;\n    this.deviceType = deviceType;\n    this.currency = currency;\n    this.build = build;\n  }\n\n  toJSON() {\n    return {\n      operation_type: this.operationType,\n      device_type: this.deviceType,\n      currency: this.currency,\n      build: this.build,\n    };\n  }\n}\n","import type { u64 } from '@solana/spl-token';\n\nenum ErrorType {\n  parseHashError = 'ParseHashError',\n  parsePubkeyError = 'ParsePubkeyError',\n  parseKeypairError = 'ParseKeypairError',\n  parseSignatureError = 'ParseSignatureError',\n  wrongSignature = 'WrongSignature',\n  signerError = 'SignerError',\n  clientError = 'ClientError',\n  programError = 'ProgramError',\n  tooSmallAmount = 'TooSmallAmount',\n  notEnoughBalance = 'NotEnoughBalance',\n  notEnoughTokenBalance = 'NotEnoughTokenBalance',\n  decimalsMismatch = 'DecimalsMismatch',\n  tokenAccountNotFound = 'TokenAccountNotFound',\n  incorrectAccountOwner = 'IncorrectAccountOwner',\n  tokenMintMismatch = 'TokenMintMismatch',\n  unsupportedRecipientAddress = 'UnsupportedRecipientAddress',\n  feeCalculatorNotFound = 'FeeCalculatorNotFound',\n  notEnoughOutAmount = 'NotEnoughOutAmount',\n  unknownSwapProgramId = 'UnknownSwapProgramId',\n\n  unknown = 'UnknownError',\n}\n\nclass ErrorDetail {\n  type?: ErrorType;\n  data?: ErrorData;\n\n  constructor(type?: ErrorType, data?: ErrorData) {\n    this.type = type;\n    this.data = data;\n  }\n\n  // TODO: from\n}\n\nclass ErrorData {\n  array?: string[];\n  dict?: Record<string, u64>[];\n\n  constructor(array?: string[], dict?: Record<string, u64>[]) {\n    this.array = array;\n    this.dict = dict;\n  }\n\n  // TODO: from\n}\n\nexport class FeeRelayerError extends Error {\n  code: number;\n  data?: ErrorDetail;\n\n  constructor(code: number, message: string, data?: ErrorDetail) {\n    super(message);\n\n    this.code = code;\n    this.data = data;\n  }\n\n  static unknown() {\n    return new FeeRelayerError(-1, 'Unknown error');\n  }\n\n  static wrongAddress() {\n    return new FeeRelayerError(-2, 'Wrong address');\n  }\n\n  static swapPoolsNotFound() {\n    return new FeeRelayerError(-3, 'Swap pools not found');\n  }\n\n  static transitTokenMintNotFound() {\n    return new FeeRelayerError(-4, 'Transit token mint not found');\n  }\n\n  static invalidAmount() {\n    return new FeeRelayerError(-5, 'Invalid amount');\n  }\n\n  static invalidSignature() {\n    return new FeeRelayerError(-6, 'Invalid signature');\n  }\n\n  static unsupportedSwap() {\n    return new FeeRelayerError(-7, 'Unsupported swap');\n  }\n\n  static relayInfoMissing() {\n    return new FeeRelayerError(-8, 'Relay info missing');\n  }\n\n  static invalidFeePayer() {\n    return new FeeRelayerError(-9, 'Invalid fee payer');\n  }\n\n  static feePayingTokenMissing() {\n    return new FeeRelayerError(-10, 'No token for paying fee is provided');\n  }\n\n  static unauthorized() {\n    return new FeeRelayerError(-11, 'Unauthorized');\n  }\n\n  static topUpSuccessButTransactionThrows() {\n    return new FeeRelayerError(-12, 'Topping up is successfull, but the transaction failed');\n  }\n}\n","import type * as Compensation from '../compensation';\nimport type * as Relay from '../relay';\n\nexport class FeeRelayerRequestType {\n  // Properties\n\n  path: string;\n  private _params: unknown;\n\n  constructor({ path, params }: { path: string; params: unknown }) {\n    this.path = path;\n    this._params = params;\n  }\n\n  getParams() {\n    return this._params;\n  }\n\n  // Builders\n\n  static rewardTransferSOL(params: Relay.TransferSolParams): FeeRelayerRequestType {\n    return new FeeRelayerRequestType({\n      path: '/transfer_sol',\n      params,\n    });\n  }\n\n  static rewardTransferSPLToken(params: Relay.TransferSPLTokenParams): FeeRelayerRequestType {\n    return new FeeRelayerRequestType({\n      path: '/transfer_spl_token',\n      params,\n    });\n  }\n\n  static compensationSwapToken(params: Compensation.SwapTokensParams): FeeRelayerRequestType {\n    return new FeeRelayerRequestType({\n      path: '/swap_spl_token_with_fee_compensation',\n      params,\n    });\n  }\n\n  static relayTopUpWithSwap(params: Relay.TopUpWithSwapParams): FeeRelayerRequestType {\n    return new FeeRelayerRequestType({\n      path: '/relay_top_up_with_swap',\n      params,\n    });\n  }\n\n  static relaySwap(params: Relay.SwapParams): FeeRelayerRequestType {\n    return new FeeRelayerRequestType({\n      path: '/relay_swap',\n      params,\n    });\n  }\n\n  static relayTransferSPLTokena(params: Relay.TransferParam): FeeRelayerRequestType {\n    return new FeeRelayerRequestType({\n      path: '/relay_transfer_spl_token',\n      params,\n    });\n  }\n\n  static relayTransaction(params: Relay.RelayTransactionParam): FeeRelayerRequestType {\n    return new FeeRelayerRequestType({\n      path: '/relay_transaction',\n      params,\n    });\n  }\n}\n","import type { u64 } from '@solana/spl-token';\n\nexport class UsageStatus {\n  maxUsage: number;\n  currentUsage: number;\n  maxAmount: u64;\n  amountUsed: u64;\n\n  constructor({\n    maxUsage,\n    currentUsage,\n    maxAmount,\n    amountUsed,\n  }: {\n    maxUsage: number;\n    currentUsage: number;\n    maxAmount: u64;\n    amountUsed: u64;\n  }) {\n    this.maxUsage = maxUsage;\n    this.currentUsage = currentUsage;\n    this.maxAmount = maxAmount;\n    this.amountUsed = amountUsed;\n  }\n\n  isFreeTransactionFeeAvailable({\n    transactionFee,\n    forNextTransaction = false,\n  }: {\n    transactionFee: u64;\n    forNextTransaction?: boolean;\n  }): boolean {\n    let currentUsage = this.currentUsage;\n    if (forNextTransaction) {\n      currentUsage += 1;\n    }\n\n    return currentUsage < this.maxUsage && this.amountUsed.add(transactionFee).lte(this.maxAmount);\n  }\n\n  // for debug\n  toJSON() {\n    return {\n      maxUsage: this.maxUsage,\n      currentUsage: this.currentUsage,\n      maxAmount: this.maxAmount.toString(),\n      amountUsed: this.amountUsed.toString(),\n    };\n  }\n}\n","import type { u64 } from '@solana/spl-token';\nimport type { PublicKey } from '@solana/web3.js';\n\nimport type { UsageStatus } from '../models';\nimport type { RelayAccountStatus } from './helpers';\n\nexport class FeeRelayerContext {\n  minimumTokenAccountBalance: u64;\n  minimumRelayAccountBalance: u64;\n  feePayerAddress: PublicKey;\n  lamportsPerSignature: u64;\n  relayAccountStatus: RelayAccountStatus;\n  usageStatus: UsageStatus;\n\n  constructor({\n    minimumTokenAccountBalance,\n    minimumRelayAccountBalance,\n    feePayerAddress,\n    lamportsPerSignature,\n    relayAccountStatus,\n    usageStatus,\n  }: {\n    minimumTokenAccountBalance: u64;\n    minimumRelayAccountBalance: u64;\n    feePayerAddress: PublicKey;\n    lamportsPerSignature: u64;\n    relayAccountStatus: RelayAccountStatus;\n    usageStatus: UsageStatus;\n  }) {\n    this.minimumTokenAccountBalance = minimumTokenAccountBalance;\n    this.minimumRelayAccountBalance = minimumRelayAccountBalance;\n    this.feePayerAddress = feePayerAddress;\n    this.lamportsPerSignature = lamportsPerSignature;\n    this.relayAccountStatus = relayAccountStatus;\n    this.usageStatus = usageStatus;\n  }\n\n  equals(rhs: FeeRelayerContext): boolean {\n    if (!this.minimumTokenAccountBalance.eq(rhs.minimumTokenAccountBalance)) {\n      return false;\n    }\n    if (!this.minimumRelayAccountBalance.eq(rhs.minimumRelayAccountBalance)) {\n      return false;\n    }\n    if (this.feePayerAddress !== rhs.feePayerAddress) {\n      return false;\n    }\n    if (!this.lamportsPerSignature.eq(rhs.lamportsPerSignature)) {\n      return false;\n    }\n    if (!this.relayAccountStatus.equals(rhs.relayAccountStatus)) {\n      return false;\n    }\n    return true;\n  }\n\n  // for debug\n  toJSON() {\n    return {\n      minimumTokenAccountBalance: this.minimumTokenAccountBalance.toString(),\n      minimumRelayAccountBalance: this.minimumRelayAccountBalance.toString(),\n      feePayerAddress: this.feePayerAddress.toString(),\n      lamportsPerSignature: this.lamportsPerSignature.toString(),\n      relayAccountStatus: this.relayAccountStatus.toJSON(),\n      usageStatus: this.usageStatus.toJSON(),\n    };\n  }\n}\n","import { PublicKey } from '@solana/web3.js';\n\nimport { AccountInfo } from 'new/sdk/SolanaSDK';\n\nimport type { FeeRelayerAPIClientType } from '../apiClient';\nimport { FeeRelayerError } from '../models';\nimport { RelayProgram } from '../relayProgram';\nimport { FeeRelayerContext } from './FeeRelayerContext';\nimport type { FeeRelayerRelaySolanaClient } from './helpers';\n\ninterface FeeRelayerContextManagerType {\n  getCurrentContext(): Promise<FeeRelayerContext>;\n  update(): Promise<void>;\n  validate(): Promise<boolean>;\n}\n\nexport class FeeRelayerContextManager implements FeeRelayerContextManagerType {\n  private _owner: PublicKey;\n  private _solanaAPIClient: FeeRelayerRelaySolanaClient;\n  private _feeRelayerAPIClient: FeeRelayerAPIClientType;\n\n  private _context: FeeRelayerContext | null = null;\n\n  constructor({\n    owner,\n    solanaAPIClient,\n    feeRelayerAPIClient,\n  }: {\n    owner: PublicKey;\n    solanaAPIClient: FeeRelayerRelaySolanaClient;\n    feeRelayerAPIClient: FeeRelayerAPIClientType;\n  }) {\n    this._owner = owner;\n    this._solanaAPIClient = solanaAPIClient;\n    this._feeRelayerAPIClient = feeRelayerAPIClient;\n  }\n\n  async getCurrentContext(): Promise<FeeRelayerContext> {\n    if (!this._context) {\n      await this.update();\n    }\n    if (!this._context) {\n      throw FeeRelayerContextManagerError.invalidContext();\n    }\n    return this._context;\n  }\n\n  async update(): Promise<void> {\n    this._context = await this._loadNewContext();\n  }\n\n  async validate(): Promise<boolean> {\n    const newContext = await this._loadNewContext();\n    return Boolean(this._context?.equals(newContext));\n  }\n\n  private async _loadNewContext(): Promise<FeeRelayerContext> {\n    const account = this._owner;\n    if (!account) {\n      throw FeeRelayerError.unauthorized();\n    }\n\n    const [\n      minimumTokenAccountBalance,\n      minimumRelayAccountBalance,\n      lamportsPerSignature,\n      feePayerAddress,\n      relayAccountStatus,\n      usageStatus,\n    ] = await Promise.all([\n      this._solanaAPIClient.getMinimumBalanceForRentExemption(AccountInfo.span), // 165\n      this._solanaAPIClient.getMinimumBalanceForRentExemption(0),\n      this._solanaAPIClient.getLamportsPerSignature(),\n      this._feeRelayerAPIClient.getFeePayerPubkey(),\n      this._solanaAPIClient.getRelayAccountStatus(\n        RelayProgram.getUserRelayAddress({\n          user: account,\n          network: this._solanaAPIClient.endpoint.network,\n        }).toString(),\n      ),\n      (await this._feeRelayerAPIClient.requestFreeFeeLimits(account.toString())).asUsageStatus(),\n    ]);\n\n    return new FeeRelayerContext({\n      minimumTokenAccountBalance,\n      minimumRelayAccountBalance,\n      feePayerAddress: new PublicKey(feePayerAddress),\n      lamportsPerSignature,\n      relayAccountStatus,\n      usageStatus,\n    });\n  }\n}\n\nexport class FeeRelayerContextManagerError extends Error {\n  static invalidContext(): FeeRelayerContextManagerError {\n    return new FeeRelayerContextManagerError('invalidContext');\n  }\n}\n","import { u64 } from '@solana/spl-token';\nimport type { PublicKey } from '@solana/web3.js';\nimport bs58 from 'bs58';\n\nimport type { PoolsPair } from 'new/sdk/OrcaSwap';\nimport type * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport type { Lamports } from 'new/sdk/SolanaSDK';\n\nimport type { StatsInfoDeviceType } from '../../models';\nimport { FeeRelayerError, StatsInfo, StatsInfoOperationType, UsageStatus } from '../../models';\n\nexport type FeeRelayerRelaySwapType = {};\n\ninterface Period {\n  secs: number;\n  nanos: number;\n}\n\ninterface Limits {\n  useFreeFee: boolean;\n  maxAmount: u64;\n  maxCount: number;\n  period: Period;\n}\n\ninterface ProcessedFee {\n  totalAmount: u64;\n  count: number;\n}\n\nexport type FeeLimitForAuthorityResponseJSON = {\n  authority: number[];\n  limits: {\n    use_free_fee: boolean;\n    max_amount: number;\n    max_count: number;\n    period: {\n      secs: number;\n      nanos: number;\n    };\n  };\n  processed_fee: {\n    total_amount: number;\n    count: number;\n  };\n};\n\nexport class FeeLimitForAuthorityResponse {\n  authority: number[];\n  limits: Limits;\n  processedFee: ProcessedFee;\n\n  constructor({\n    authority,\n    limits,\n    processedFee,\n  }: {\n    authority: number[];\n    limits: Limits;\n    processedFee: ProcessedFee;\n  }) {\n    this.authority = authority;\n    this.limits = limits;\n    this.processedFee = processedFee;\n  }\n\n  asUsageStatus(): UsageStatus {\n    return new UsageStatus({\n      maxUsage: this.limits.maxCount,\n      currentUsage: this.processedFee.count,\n      maxAmount: this.limits.maxAmount,\n      amountUsed: this.processedFee.totalAmount,\n    });\n  }\n\n  static fromJSON(data: FeeLimitForAuthorityResponseJSON) {\n    const authority = data.authority;\n    const limits = <Limits>{\n      useFreeFee: data.limits.use_free_fee,\n      maxAmount: new u64(data.limits.max_amount),\n      maxCount: data.limits.max_count,\n      period: {\n        secs: data.limits.period.secs,\n        nanos: data.limits.period.nanos,\n      },\n    };\n    const processedFee = <ProcessedFee>{\n      totalAmount: new u64(data.processed_fee.total_amount),\n      count: data.processed_fee.count,\n    };\n\n    return new FeeLimitForAuthorityResponse({\n      authority,\n      limits,\n      processedFee,\n    });\n  }\n}\n\n// Top up\nexport class TopUpWithSwapParams {\n  userSourceTokenAccountPubkey: PublicKey;\n  sourceTokenMintPubkey: PublicKey;\n  userAuthorityPubkey: PublicKey;\n  topUpSwap: SwapData;\n  feeAmount: u64;\n  signatures: SwapTransactionSignatures;\n  blockhash: string;\n  statsInfo: StatsInfo;\n\n  constructor({\n    userSourceTokenAccountPubkey,\n    sourceTokenMintPubkey,\n    userAuthorityPubkey,\n    topUpSwap,\n    feeAmount,\n    signatures,\n    blockhash,\n    deviceType,\n    buildNumber,\n  }: {\n    userSourceTokenAccountPubkey: PublicKey;\n    sourceTokenMintPubkey: PublicKey;\n    userAuthorityPubkey: PublicKey;\n    topUpSwap: SwapData;\n    feeAmount: u64;\n    signatures: SwapTransactionSignatures;\n    blockhash: string;\n    deviceType: StatsInfoDeviceType;\n    buildNumber: string | null;\n  }) {\n    this.userSourceTokenAccountPubkey = userSourceTokenAccountPubkey;\n    this.sourceTokenMintPubkey = sourceTokenMintPubkey;\n    this.userAuthorityPubkey = userAuthorityPubkey;\n    this.topUpSwap = topUpSwap;\n    this.feeAmount = feeAmount;\n    this.signatures = signatures;\n    this.blockhash = blockhash;\n    this.statsInfo = new StatsInfo({\n      operationType: StatsInfoOperationType.topUp,\n      deviceType,\n      currency: sourceTokenMintPubkey.toString(),\n      build: buildNumber,\n    });\n  }\n\n  toJSON() {\n    return {\n      user_source_token_account_pubkey: this.userSourceTokenAccountPubkey.toString(),\n      source_token_mint_pubkey: this.sourceTokenMintPubkey.toString(),\n      user_authority_pubkey: this.userAuthorityPubkey.toString(),\n      top_up_swap: this.topUpSwap.toJSON(),\n      fee_amount: this.feeAmount.toNumber(),\n      signatures: this.signatures.toJSON(),\n      blockhash: this.blockhash,\n      info: this.statsInfo,\n    };\n  }\n}\n\n// Swap\nexport class SwapParams {\n  userSourceTokenAccountPubkey: string;\n  userDestinationPubkey: string;\n  userDestinationAccountOwner?: string;\n  sourceTokenMintPubkey: string;\n  destinationTokenMintPubkey: string;\n  userAuthorityPubkey: string;\n  userSwap: SwapData;\n  feeAmount: u64;\n  signatures: SwapTransactionSignatures;\n  blockhash: string;\n  statsInfo: StatsInfo;\n\n  constructor({\n    userSourceTokenAccountPubkey,\n    userDestinationPubkey,\n    userDestinationAccountOwner,\n    sourceTokenMintPubkey,\n    destinationTokenMintPubkey,\n    userAuthorityPubkey,\n    userSwap,\n    feeAmount,\n    signatures,\n    blockhash,\n    deviceType,\n    buildNumber,\n  }: {\n    userSourceTokenAccountPubkey: string;\n    userDestinationPubkey: string;\n    userDestinationAccountOwner?: string;\n    sourceTokenMintPubkey: string;\n    destinationTokenMintPubkey: string;\n    userAuthorityPubkey: string;\n    userSwap: SwapData;\n    feeAmount: u64;\n    signatures: SwapTransactionSignatures;\n    blockhash: string;\n    deviceType: StatsInfoDeviceType;\n    buildNumber: string;\n  }) {\n    this.userSourceTokenAccountPubkey = userSourceTokenAccountPubkey;\n    this.userDestinationPubkey = userDestinationPubkey;\n    this.userDestinationAccountOwner = userDestinationAccountOwner;\n    this.sourceTokenMintPubkey = sourceTokenMintPubkey;\n    this.destinationTokenMintPubkey = destinationTokenMintPubkey;\n    this.userAuthorityPubkey = userAuthorityPubkey;\n    this.userSwap = userSwap;\n    this.feeAmount = feeAmount;\n    this.signatures = signatures;\n    this.blockhash = blockhash;\n    this.statsInfo = new StatsInfo({\n      operationType: StatsInfoOperationType.transfer,\n      deviceType,\n      currency: sourceTokenMintPubkey,\n      build: buildNumber,\n    });\n  }\n\n  toJSON() {\n    return {\n      user_source_token_account_pubkey: this.userSourceTokenAccountPubkey,\n      user_destination_pubkey: this.userDestinationPubkey,\n      user_destination_account_owner: this.userDestinationAccountOwner,\n      source_token_mint_pubkey: this.sourceTokenMintPubkey,\n      destination_token_mint_pubkey: this.destinationTokenMintPubkey,\n      user_authority_pubkey: this.userAuthorityPubkey,\n      user_swap: this.userSwap.toJSON(),\n      fee_amount: this.feeAmount.toNumber(),\n      signatures: this.signatures.toJSON(),\n      blockhash: this.blockhash,\n      info: this.statsInfo,\n    };\n  }\n}\n\n// TransferParam\nexport class TransferParam {\n  senderTokenAccountPubkey: string;\n  recipientPubkey: string;\n  tokenMintPubkey: string;\n  authorityPubkey: string;\n  amount: u64;\n  feeAmount: u64;\n  decimals: number;\n  authoritySignature: string;\n  blockhash: string;\n  statsInfo: StatsInfo;\n\n  constructor({\n    senderTokenAccountPubkey,\n    recipientPubkey,\n    tokenMintPubkey,\n    authorityPubkey,\n    amount,\n    feeAmount,\n    decimals,\n    authoritySignature,\n    blockhash,\n    deviceType,\n    buildNumber,\n  }: {\n    senderTokenAccountPubkey: string;\n    recipientPubkey: string;\n    tokenMintPubkey: string;\n    authorityPubkey: string;\n    amount: u64;\n    feeAmount: u64;\n    decimals: number;\n    authoritySignature: string;\n    blockhash: string;\n    deviceType: StatsInfoDeviceType;\n    buildNumber: string;\n  }) {\n    this.senderTokenAccountPubkey = senderTokenAccountPubkey;\n    this.recipientPubkey = recipientPubkey;\n    this.tokenMintPubkey = tokenMintPubkey;\n    this.authorityPubkey = authorityPubkey;\n    this.amount = amount;\n    this.feeAmount = feeAmount;\n    this.decimals = decimals;\n    this.authoritySignature = authoritySignature;\n    this.blockhash = blockhash;\n    this.statsInfo = new StatsInfo({\n      operationType: StatsInfoOperationType.transfer,\n      deviceType,\n      currency: tokenMintPubkey,\n      build: buildNumber,\n    });\n  }\n\n  toJSON() {\n    return {\n      sender_token_account_pubkey: this.senderTokenAccountPubkey,\n      recipient_pubkey: this.recipientPubkey,\n      token_mint_pubkey: this.tokenMintPubkey,\n      authority_pubkey: this.authorityPubkey,\n      amount: this.amount.toNumber(),\n      decimals: this.decimals,\n      fee_amount: this.feeAmount.toNumber(),\n      authority_signature: this.authoritySignature,\n      blockhash: this.blockhash,\n      info: this.statsInfo,\n    };\n  }\n}\n\n// RelayTransactionParam\nexport class RelayTransactionParam {\n  instructions: RequestInstruction[];\n  signatures: Record<string, string>;\n  pubkeys: string[];\n  blockhash: string;\n\n  constructor(preparedTransaction: SolanaSDK.PreparedTransaction) {\n    const recentBlockhash = preparedTransaction.transaction.recentBlockhash;\n    if (!recentBlockhash) {\n      throw FeeRelayerError.unknown();\n    }\n\n    const message = preparedTransaction.transaction.compileMessage();\n    this.pubkeys = message.accountKeys.map((pubkey) => pubkey.toString());\n    this.blockhash = recentBlockhash;\n    this.instructions = message.instructions.map((compiledInstruction, index) => {\n      const accounts: RequestAccountMeta[] = compiledInstruction.accounts.map((account) => {\n        const pubkey = message.accountKeys[account];\n        const meta = pubkey\n          ? preparedTransaction.transaction.instructions[index]?.keys.find((key) =>\n              key.pubkey.equals(pubkey),\n            )\n          : null;\n\n        return new RequestAccountMeta({\n          pubkeyIndex: account,\n          isSigner: meta?.isSigner ?? message.isAccountSigner(account),\n          isWritable: meta?.isWritable ?? message.isAccountWritable(account),\n        });\n      });\n\n      return new RequestInstruction({\n        programIndex: compiledInstruction.programIdIndex,\n        accounts,\n        data: Buffer.from(bs58.decode(compiledInstruction.data)),\n      });\n    });\n\n    const signatures: Record<string, string> = {};\n\n    // extract publicKeys from signers and add owner\n    const signers = preparedTransaction.signers.map((signer) => signer.publicKey);\n    // owner first\n    const publicKeys: PublicKey[] = (\n      preparedTransaction.owner ? [preparedTransaction.owner] : []\n    ).concat(signers);\n    for (const publicKey of publicKeys) {\n      const idx = this.pubkeys.findIndex((pubkey) => pubkey === publicKey.toString());\n      if (idx) {\n        const idxString = `${idx}`;\n        const signature = preparedTransaction.findSignature(publicKey);\n        signatures[idxString] = signature;\n      } else {\n        throw FeeRelayerError.invalidSignature();\n      }\n    }\n    this.signatures = signatures;\n  }\n\n  toJSON() {\n    return {\n      instructions: this.instructions.map((instruction) => instruction.toJSON()),\n      signatures: this.signatures,\n      pubkeys: this.pubkeys,\n      blockhash: this.blockhash,\n    };\n  }\n}\n\nexport class RequestInstruction {\n  programIndex: number;\n  accounts: RequestAccountMeta[];\n  data: Buffer;\n\n  constructor({\n    programIndex,\n    accounts,\n    data,\n  }: {\n    programIndex: number;\n    accounts: RequestAccountMeta[];\n    data: Buffer;\n  }) {\n    this.programIndex = programIndex;\n    this.accounts = accounts;\n    this.data = data;\n  }\n\n  toJSON() {\n    return {\n      program_id: this.programIndex,\n      accounts: this.accounts.map((account) => account.toJSON()),\n      data: [...this.data],\n    };\n  }\n}\n\nexport class RequestAccountMeta {\n  pubkeyIndex: number;\n  isSigner: boolean;\n  isWritable: boolean;\n\n  constructor({\n    pubkeyIndex,\n    isSigner,\n    isWritable,\n  }: {\n    pubkeyIndex: number;\n    isSigner: boolean;\n    isWritable: boolean;\n  }) {\n    this.pubkeyIndex = pubkeyIndex;\n    this.isSigner = isSigner;\n    this.isWritable = isWritable;\n  }\n\n  toJSON() {\n    return {\n      pubkey: this.pubkeyIndex,\n      is_signer: this.isSigner,\n      is_writable: this.isWritable,\n    };\n  }\n}\n\n// Swap data\nexport class SwapData {\n  Spl: DirectSwapData | null;\n  SplTransitive: TransitiveSwapData | null;\n\n  constructor(swap: FeeRelayerRelaySwapType) {\n    switch (swap.constructor) {\n      case DirectSwapData: {\n        this.Spl = swap as DirectSwapData;\n        this.SplTransitive = null;\n        break;\n      }\n      case TransitiveSwapData: {\n        this.Spl = null;\n        this.SplTransitive = swap as TransitiveSwapData;\n        break;\n      }\n      default: {\n        throw new Error('unsupported swap type');\n      }\n    }\n  }\n\n  toJSON() {\n    return {\n      Spl: this.Spl?.toJSON(),\n      SplTransitive: this.SplTransitive?.toJSON(),\n    };\n  }\n}\n\nexport class TransitiveSwapData implements FeeRelayerRelaySwapType {\n  from: DirectSwapData;\n  to: DirectSwapData;\n  transitTokenMintPubkey: string;\n  needsCreateTransitTokenAccount: boolean;\n\n  constructor({\n    from,\n    to,\n    transitTokenMintPubkey,\n    needsCreateTransitTokenAccount,\n  }: {\n    from: DirectSwapData;\n    to: DirectSwapData;\n    transitTokenMintPubkey: string;\n    needsCreateTransitTokenAccount: boolean;\n  }) {\n    this.from = from;\n    this.to = to;\n    this.transitTokenMintPubkey = transitTokenMintPubkey;\n    this.needsCreateTransitTokenAccount = needsCreateTransitTokenAccount;\n  }\n\n  toJSON() {\n    return {\n      from: this.from.toJSON(),\n      to: this.to.toJSON(),\n      transit_token_mint_pubkey: this.transitTokenMintPubkey,\n      needs_create_transit_token_account: this.needsCreateTransitTokenAccount,\n    };\n  }\n}\n\nexport class DirectSwapData implements FeeRelayerRelaySwapType {\n  programId: string;\n  accountPubkey: string;\n  authorityPubkey: string;\n  transferAuthorityPubkey: string;\n  sourcePubkey: string;\n  destinationPubkey: string;\n  poolTokenMintPubkey: string;\n  poolFeeAccountPubkey: string;\n  amountIn: u64;\n  minimumAmountOut: u64;\n\n  constructor({\n    programId,\n    accountPubkey,\n    authorityPubkey,\n    transferAuthorityPubkey,\n    sourcePubkey,\n    destinationPubkey,\n    poolTokenMintPubkey,\n    poolFeeAccountPubkey,\n    amountIn,\n    minimumAmountOut,\n  }: {\n    programId: string;\n    accountPubkey: string;\n    authorityPubkey: string;\n    transferAuthorityPubkey: string;\n    sourcePubkey: string;\n    destinationPubkey: string;\n    poolTokenMintPubkey: string;\n    poolFeeAccountPubkey: string;\n    amountIn: u64;\n    minimumAmountOut: u64;\n  }) {\n    this.programId = programId;\n    this.accountPubkey = accountPubkey;\n    this.authorityPubkey = authorityPubkey;\n    this.transferAuthorityPubkey = transferAuthorityPubkey;\n    this.sourcePubkey = sourcePubkey;\n    this.destinationPubkey = destinationPubkey;\n    this.poolTokenMintPubkey = poolTokenMintPubkey;\n    this.poolFeeAccountPubkey = poolFeeAccountPubkey;\n    this.amountIn = amountIn;\n    this.minimumAmountOut = minimumAmountOut;\n  }\n\n  toJSON() {\n    return {\n      program_id: this.programId.toString(),\n      account_pubkey: this.accountPubkey.toString(),\n      authority_pubkey: this.authorityPubkey.toString(),\n      transfer_authority_pubkey: this.transferAuthorityPubkey.toString(),\n      source_pubkey: this.sourcePubkey.toString(),\n      destination_pubkey: this.destinationPubkey.toString(),\n      pool_token_mint_pubkey: this.poolTokenMintPubkey.toString(),\n      pool_fee_account_pubkey: this.poolFeeAccountPubkey.toString(),\n      amount_in: this.amountIn.toNumber(), // TODO: check mb string\n      minimum_amount_out: this.minimumAmountOut.toNumber(), // TODO: check mb string\n    };\n  }\n}\n\nexport class SwapTransactionSignatures {\n  userAuthoritySignature: string;\n  transferAuthoritySignature?: string | null;\n\n  constructor({\n    userAuthoritySignature,\n    transferAuthoritySignature = null,\n  }: {\n    userAuthoritySignature: string;\n    transferAuthoritySignature?: string | null;\n  }) {\n    this.userAuthoritySignature = userAuthoritySignature;\n    this.transferAuthoritySignature = transferAuthoritySignature;\n  }\n\n  toJSON() {\n    return {\n      user_authority_signature: this.userAuthoritySignature,\n      transfer_authority_signature: this.transferAuthoritySignature ?? undefined,\n    };\n  }\n}\n\nexport enum RelayAccountStatusType {\n  notYetCreated,\n  created,\n}\n\nexport class RelayAccountStatus {\n  type: RelayAccountStatusType;\n  private _balance?: u64;\n\n  private constructor({ type, balance }: { type: RelayAccountStatusType; balance?: u64 }) {\n    this.type = type;\n    this._balance = balance;\n  }\n\n  static notYetCreated(): RelayAccountStatus {\n    return new RelayAccountStatus({\n      type: RelayAccountStatusType.notYetCreated,\n    });\n  }\n\n  static created(balance: u64): RelayAccountStatus {\n    return new RelayAccountStatus({ balance, type: RelayAccountStatusType.created });\n  }\n\n  get balance(): u64 | null {\n    switch (this.type) {\n      case RelayAccountStatusType.notYetCreated:\n        return null;\n      case RelayAccountStatusType.created:\n        return this._balance ? new u64(this._balance) : null;\n    }\n  }\n\n  equals(rhs: RelayAccountStatus) {\n    if (this.type !== rhs.type) {\n      return false;\n    }\n    if (this.balance?.toString() !== rhs.balance?.toString()) {\n      return false;\n    }\n    return true;\n  }\n\n  // for debug\n  toJSON() {\n    return {\n      type: this.type,\n      balance: this._balance?.toString(),\n    };\n  }\n}\n\nexport interface TopUpPreparedParams {\n  amount: u64;\n  expectedFee: u64;\n  poolsPair: PoolsPair;\n}\n\nexport interface TopUpAndActionPreparedParams {\n  topUpPreparedParam?: TopUpPreparedParams | null;\n  actionFeesAndPools: FeesAndPools;\n}\n\nexport interface FeesAndPools {\n  fee: SolanaSDK.FeeAmount;\n  poolsPair: PoolsPair;\n}\n\nexport interface FeesAndTopUpAmount {\n  feeInSOL: SolanaSDK.FeeAmount;\n  topUpAmountInSOL?: u64 | null;\n  feeInPayingToken?: SolanaSDK.FeeAmount | null;\n  topUpAmountInPayingToen?: u64 | null;\n}\n\nexport class TransferSolParams {\n  sender: string;\n  recipient: string;\n  amount: Lamports;\n  signature: string;\n  blockhash: string;\n  statsInfo: StatsInfo;\n\n  constructor({\n    sender,\n    recipient,\n    amount,\n    signature,\n    blockhash,\n    deviceType,\n    buildNumber,\n  }: {\n    sender: string;\n    recipient: string;\n    amount: Lamports;\n    signature: string;\n    blockhash: string;\n    deviceType: StatsInfoDeviceType;\n    buildNumber: string | null;\n  }) {\n    this.sender = sender;\n    this.recipient = recipient;\n    this.amount = amount;\n    this.signature = signature;\n    this.blockhash = blockhash;\n    this.statsInfo = new StatsInfo({\n      operationType: StatsInfoOperationType.transfer,\n      deviceType,\n      currency: 'SOL',\n      build: buildNumber,\n    });\n  }\n\n  toJSON() {\n    return {\n      sender_pubkey: this.sender,\n      recipient_pubkey: this.recipient,\n      lamports: this.amount,\n      signature: this.signature,\n      blockhash: this.blockhash,\n      info: this.statsInfo,\n    };\n  }\n}\n\n// Transfer SPL Tokens\nexport class TransferSPLTokenParams {\n  sender: string;\n  recipient: string;\n  mintAddress: string;\n  authority: string;\n  amount: Lamports;\n  decimals: number;\n  signature: string;\n  blockhash: string;\n  statsInfo: StatsInfo;\n\n  constructor({\n    sender,\n    recipient,\n    mintAddress,\n    authority,\n    amount,\n    decimals,\n    signature,\n    blockhash,\n    deviceType,\n    buildNumber,\n  }: {\n    sender: string;\n    recipient: string;\n    mintAddress: string;\n    authority: string;\n    amount: Lamports;\n    decimals: number;\n    signature: string;\n    blockhash: string;\n    deviceType: StatsInfoDeviceType;\n    buildNumber: string | null;\n  }) {\n    this.sender = sender;\n    this.recipient = recipient;\n    this.mintAddress = mintAddress;\n    this.authority = authority;\n    this.amount = amount;\n    this.decimals = decimals;\n    this.signature = signature;\n    this.blockhash = blockhash;\n    this.statsInfo = new StatsInfo({\n      operationType: StatsInfoOperationType.transfer,\n      deviceType,\n      currency: mintAddress,\n      build: buildNumber,\n    });\n  }\n\n  toJSON() {\n    return {\n      sender_token_account_pubkey: this.sender,\n      recipient_pubkey: this.recipient,\n      token_mint_pubkey: this.mintAddress,\n      authority_pubkey: this.authority,\n      amount: this.amount,\n      decimals: this.decimals,\n      signature: this.signature,\n      blockhash: this.blockhash,\n      info: this.statsInfo,\n    };\n  }\n}\n","import { u64 } from '@solana/spl-token';\nimport type {\n  AccountInfo as BufferInfo,\n  Commitment,\n  PublicKey,\n  Signer,\n  TransactionInstruction,\n} from '@solana/web3.js';\nimport { injectable } from 'tsyringe';\n\nimport { SolanaModel } from 'new/models/SolanaModel';\nimport type * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport type { FeeCalculator } from 'new/sdk/SolanaSDK';\nimport {\n  AccountInfo,\n  getAssociatedTokenAddressSync,\n  SolanaSDK as SolanaSDKClass,\n  SolanaSDKPublicKey,\n} from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\n\nimport { FeeRelayerError } from '../../models';\nimport * as Relay from '../index';\n\ninterface FeeRelayerRelaySolanaClientType {\n  getRelayAccountStatus(relayAccountAddress: string): Promise<Relay.RelayAccountStatus>;\n\n  getMinimumBalanceForRentExemption(span: number): Promise<u64>;\n\n  getRecentBlockhash(commitment?: Commitment): Promise<string>;\n\n  getLamportsPerSignature(): Promise<SolanaSDK.Lamports>;\n\n  prepareTransaction({\n    owner,\n    instructions,\n    signers,\n    feePayer,\n    feeCalculator,\n  }: {\n    owner: PublicKey;\n    instructions: TransactionInstruction[];\n    signers?: Signer[];\n    feePayer: PublicKey;\n    feeCalculator?: FeeCalculator;\n  }): Promise<SolanaSDK.PreparedTransaction>;\n\n  findSPLTokenDestinationAddress({\n    mintAddress,\n    destinationAddress,\n  }: {\n    mintAddress: string;\n    destinationAddress: string;\n  }): Promise<SolanaSDK.SPLTokenDestinationAddress>;\n\n  getAccountInfo<T>({\n    account,\n    decodedTo,\n  }: {\n    account: string;\n    decodedTo: { decode(data: Buffer): T };\n  }): Promise<BufferInfo<T> | null>;\n}\n\n// TODO: dont use all sdk\n@injectable()\nexport class FeeRelayerRelaySolanaClient\n  extends SolanaSDKClass\n  implements FeeRelayerRelaySolanaClientType\n{\n  constructor(protected solanaModel: SolanaModel) {\n    super({\n      provider: solanaModel.provider,\n      endpoint: Defaults.apiEndpoint,\n    });\n  }\n\n  getLamportsPerSignature(): Promise<SolanaSDK.Lamports> {\n    return this.provider.connection.getRecentBlockhash().then((result) => {\n      return new u64(result.feeCalculator.lamportsPerSignature);\n    });\n  }\n\n  async getRelayAccountStatus(relayAccountAddress: string): Promise<Relay.RelayAccountStatus> {\n    const account = await this.getAccountInfo<AccountInfo | null>({\n      account: relayAccountAddress,\n      decodedTo: AccountInfo,\n    });\n    if (!account) {\n      return Relay.RelayAccountStatus.notYetCreated();\n    }\n    return Relay.RelayAccountStatus.created(new u64(account.lamports));\n  }\n\n  /// Retrieves associated SPL Token address for ``address``.\n  ///\n  /// - Returns: The associated address.\n  async getAssociatedSPLTokenAddress({\n    address,\n    mint,\n  }: {\n    address: PublicKey;\n    mint: PublicKey;\n  }): Promise<PublicKey> {\n    const account = await this.getAccountInfo<AccountInfo | null>({\n      account: address.toString(),\n      decodedTo: AccountInfo,\n    });\n\n    // The account doesn't exists\n    if (!account) {\n      return getAssociatedTokenAddressSync(mint, address);\n    }\n\n    // The account is already token account\n    if (account.data?.mint.equals(mint)) {\n      if (account.owner.equals(SolanaSDKPublicKey.programId)) {\n        throw FeeRelayerError.wrongAddress();\n      }\n    }\n    return getAssociatedTokenAddressSync(mint, address);\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\nimport type { PublicKey } from '@solana/web3.js';\n\nimport { FeeRelayerConstants } from 'new/sdk/FeeRelayer';\nimport type { OrcaSwapType } from 'new/sdk/OrcaSwap';\nimport { getInputAmountSlippage } from 'new/sdk/OrcaSwap';\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nimport { FeeRelayerError } from '../models';\nimport type { FeeRelayerContext } from './FeeRelayerContext';\nimport { RelayAccountStatusType } from './helpers';\n\nexport interface FeeRelayerCalculator {\n  /// Calculate a top up amount for user's relayer account.\n  ///\n  /// The user's relayer account will be used as fee payer address.\n  /// - Parameters:\n  ///   - context: Processing context\n  ///   - expectedFee: an amount of fee, that blockchain need to process if user's send directly.\n  ///   - payingTokenMint: a mint address of spl token, that user will use to play fee.\n  /// - Returns: Fee amount in SOL\n  /// - Throws:\n  calculateNeededTopUpAmount({\n    context,\n    expectedFee,\n    payingTokenMint,\n  }: {\n    context: FeeRelayerContext;\n    expectedFee: SolanaSDK.FeeAmount;\n    payingTokenMint?: PublicKey;\n  }): SolanaSDK.FeeAmount;\n\n  calculateExpectedFeeForTopUp(context: FeeRelayerContext): u64;\n\n  /// Convert fee amount into spl value.\n  ///\n  /// - Parameters:\n  ///   - orcaSwap: OrcaSwap service\n  ///   - feeInSOL: a fee amount in SOL\n  ///   - payingFeeTokenMint: a mint address of spl token, that user will use to play fee.\n  /// - Returns:\n  /// - Throws:\n  calculateFeeInPayingToken({\n    orcaSwap,\n    feeInSOL,\n    payingFeeTokenMint,\n  }: {\n    orcaSwap: OrcaSwapType;\n    feeInSOL: SolanaSDK.FeeAmount;\n    payingFeeTokenMint: PublicKey;\n  }): Promise<SolanaSDK.FeeAmount>;\n}\n\nexport class DefaultFeeRelayerCalculator implements FeeRelayerCalculator {\n  constructor() {}\n\n  calculateNeededTopUpAmount({\n    context,\n    expectedFee,\n    payingTokenMint,\n  }: {\n    context: FeeRelayerContext;\n    expectedFee: SolanaSDK.FeeAmount;\n    payingTokenMint?: PublicKey;\n  }): SolanaSDK.FeeAmount {\n    const amount = this._calculateMinTopUpAmount({\n      context,\n      expectedFee,\n      payingTokenMint,\n    });\n\n    // Correct amount if it's too small\n    if (amount.total.gtn(0) && amount.total.ltn(1000)) {\n      amount.transaction = new u64(amount.transaction.add(new u64(1000).sub(amount.total)));\n    }\n\n    // TODO: amount.transaction = max(1000, amount.total)\n    return amount;\n  }\n\n  /// Calculate needed top up amount for expected fee\n  private _calculateMinTopUpAmount({\n    context,\n    expectedFee,\n    payingTokenMint,\n  }: {\n    context: FeeRelayerContext;\n    expectedFee: SolanaSDK.FeeAmount;\n    payingTokenMint?: PublicKey;\n  }): SolanaSDK.FeeAmount {\n    const neededAmount = expectedFee.clone();\n\n    // expected fees\n    const expectedTopUpNetworkFee = new u64(context.lamportsPerSignature.muln(2));\n    const expectedTransactionNetworkFee = new u64(expectedFee.transaction);\n\n    // real fees\n    let neededTopUpNetworkFee = new u64(expectedTopUpNetworkFee);\n    let neededTransactionNetworkFee = new u64(expectedTransactionNetworkFee);\n\n    // is Top up free\n    if (\n      context.usageStatus.isFreeTransactionFeeAvailable({\n        transactionFee: expectedTopUpNetworkFee,\n      })\n    ) {\n      neededTopUpNetworkFee = ZERO;\n    }\n\n    // is transaction free\n    if (\n      context.usageStatus.isFreeTransactionFeeAvailable({\n        transactionFee: expectedTopUpNetworkFee.add(expectedTransactionNetworkFee),\n        forNextTransaction: true,\n      })\n    ) {\n      neededTransactionNetworkFee = ZERO;\n    }\n\n    neededAmount.transaction = new u64(neededTopUpNetworkFee.add(neededTransactionNetworkFee));\n\n    // transaction is totally free\n    if (neededAmount.total.eqn(0)) {\n      return neededAmount;\n    }\n\n    const neededAmountWithoutCheckingRelayAccount = neededAmount.clone();\n    const minimumRelayAccountBalance = context.minimumRelayAccountBalance;\n\n    // check if relay account current balance can cover part of needed amount\n    let relayAccountBalance = context.relayAccountStatus.balance;\n    if (relayAccountBalance) {\n      if (relayAccountBalance.lt(minimumRelayAccountBalance)) {\n        neededAmount.transaction = new u64(\n          neededAmount.transaction.add(minimumRelayAccountBalance.sub(relayAccountBalance)),\n        );\n      } else {\n        relayAccountBalance = new u64(relayAccountBalance.sub(minimumRelayAccountBalance));\n\n        // if relayAccountBalance has enough balance to cover transaction fee\n        if (relayAccountBalance.gte(neededAmount.transaction)) {\n          neededAmount.transaction = ZERO;\n\n          // if relayAccountBalance has enough balance to cover accountBalances fee too\n          if (relayAccountBalance.sub(neededAmount.transaction).gte(neededAmount.accountBalances)) {\n            neededAmount.accountBalances = ZERO;\n          }\n          // Relay account balance can cover part of account creation fee\n          else {\n            neededAmount.accountBalances = new u64(\n              neededAmount.accountBalances.sub(relayAccountBalance.sub(neededAmount.transaction)),\n            );\n          }\n        }\n        // if not, relayAccountBalance can cover part of transaction fee\n        else {\n          neededAmount.transaction = new u64(neededAmount.transaction.sub(relayAccountBalance));\n        }\n      }\n    } else {\n      neededAmount.transaction = new u64(neededAmount.transaction.add(minimumRelayAccountBalance));\n    }\n\n    // if relay account could not cover all fees and paying token is WSOL, the compensation will be done without the existense of relay account\n    if (neededAmount.total.gtn(0) && payingTokenMint?.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n      return neededAmountWithoutCheckingRelayAccount;\n    }\n\n    return neededAmount;\n  }\n\n  calculateExpectedFeeForTopUp(context: FeeRelayerContext): u64 {\n    let expectedFee: u64 = ZERO;\n    if (context.relayAccountStatus.type === RelayAccountStatusType.notYetCreated) {\n      expectedFee = expectedFee.add(context.minimumRelayAccountBalance);\n    }\n\n    const transactionNetworkFee = new u64(2).mul(context.lamportsPerSignature);\n    if (\n      !context.usageStatus.isFreeTransactionFeeAvailable({\n        transactionFee: transactionNetworkFee,\n      })\n    ) {\n      expectedFee = expectedFee.add(transactionNetworkFee);\n    }\n\n    expectedFee = expectedFee.add(context.minimumTokenAccountBalance);\n    return new u64(expectedFee.toString());\n  }\n\n  async calculateFeeInPayingToken({\n    orcaSwap,\n    feeInSOL,\n    payingFeeTokenMint,\n  }: {\n    orcaSwap: OrcaSwapType;\n    feeInSOL: SolanaSDK.FeeAmount;\n    payingFeeTokenMint: PublicKey;\n  }): Promise<SolanaSDK.FeeAmount> {\n    if (payingFeeTokenMint.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n      return feeInSOL;\n    }\n    const tradableTopUpPoolsPair = await orcaSwap.getTradablePoolsPairs({\n      fromMint: payingFeeTokenMint.toString(),\n      toMint: SolanaSDKPublicKey.wrappedSOLMint.toString(),\n    });\n    const topUpPools = orcaSwap.findBestPoolsPairForEstimatedAmount({\n      estimatedAmount: feeInSOL.total,\n      poolsPairs: tradableTopUpPoolsPair,\n    });\n    if (!topUpPools) {\n      throw FeeRelayerError.swapPoolsNotFound();\n    }\n\n    const transactionFee = getInputAmountSlippage(\n      topUpPools,\n      feeInSOL.transaction,\n      FeeRelayerConstants.topUpSlippage,\n    );\n    const accountCreationFee = getInputAmountSlippage(\n      topUpPools,\n      feeInSOL.accountBalances,\n      FeeRelayerConstants.topUpSlippage,\n    );\n\n    return new SolanaSDK.FeeAmount({\n      transaction: transactionFee ?? ZERO,\n      accountBalances: accountCreationFee ?? ZERO,\n    });\n  }\n}\n","export class FeeRelayerConstants {\n  /// A default slippage value for top up operation.\n  ///\n  /// When user uses spl token as fee payer, fee relayer service will swap fee amount for transaction in this token to native token (SOL).\n  /// In some cases if the swapping amount is too small, user can receive slippage error.\n  static topUpSlippage = 0.03;\n}\n","/* eslint-disable no-console */\nimport { ZERO } from '@orca-so/sdk';\nimport type { Network } from '@saberhq/solana-contrib';\nimport { Token, u64 } from '@solana/spl-token';\nimport type { TransactionInstruction } from '@solana/web3.js';\nimport { Account, PublicKey, SystemProgram, Transaction } from '@solana/web3.js';\n\nimport type * as OrcaSwap from 'new/sdk/OrcaSwap';\nimport type { TransactionID } from 'new/sdk/SolanaSDK';\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport {\n  calculateTransactionFee,\n  getAssociatedTokenAddressSync,\n  SolanaSDKPublicKey,\n} from 'new/sdk/SolanaSDK';\n\nimport type { FeeRelayerAPIClientType } from '../apiClient';\nimport { getSignature } from '../helpers';\nimport type { StatsInfoDeviceType, StatsInfoOperationType, TokenAccount } from '../models';\nimport { FeeRelayerError, FeeRelayerRequestType } from '../models';\nimport { RelayProgram } from '../relayProgram';\nimport { TransitTokenAccountAnalysator } from '../swap';\nimport { getSwapData } from '../swap/transactionBuilder/checking';\nimport type { FeeRelayerCalculator } from './FeeRelayerCalculator';\nimport { DefaultFeeRelayerCalculator } from './FeeRelayerCalculator';\nimport { FeeRelayerConstants } from './FeeRelayerConstants';\nimport type { FeeRelayerContext } from './FeeRelayerContext';\nimport type { FeeRelayerRelaySwapType, RelayAccountStatus, TopUpPreparedParams } from './helpers';\nimport {\n  DirectSwapData,\n  RelayAccountStatusType,\n  RelayTransactionParam,\n  SwapData,\n  SwapTransactionSignatures,\n  TopUpWithSwapParams,\n  TransitiveSwapData,\n} from './helpers';\nimport type { FeeRelayerRelaySolanaClient } from './helpers/FeeRelayerRelaySolanaClient';\n\n// A fee relayer configuration.\nexport class FeeRelayerConfiguration {\n  additionalPaybackFee: u64;\n\n  operationType: StatsInfoOperationType;\n  currency: string | null;\n\n  constructor({\n    additionalPaybackFee = ZERO,\n    operationType,\n    currency = null,\n  }: {\n    additionalPaybackFee?: u64;\n    operationType: StatsInfoOperationType;\n    currency?: string | null;\n  }) {\n    this.additionalPaybackFee = additionalPaybackFee;\n    this.operationType = operationType;\n    this.currency = currency;\n  }\n}\n\n// The service that allows users to do gas-less transactions.\nexport interface FeeRelayerType {\n  readonly feeCalculator: FeeRelayerCalculator;\n\n  /// Top up relay account (if needed) and relay transaction\n  topUpAndRelayTransaction({\n    context,\n    transaction,\n    fee,\n    config,\n  }: {\n    context: FeeRelayerContext;\n    transaction: SolanaSDK.PreparedTransaction;\n    fee?: TokenAccount | null;\n    config: FeeRelayerConfiguration;\n  }): Promise<TransactionID>;\n\n  /// Top up relay account (if needed) and relay multiple transactions\n  topUpAndRelayTransactions({\n    context,\n    transactions,\n    fee,\n    config,\n  }: {\n    context: FeeRelayerContext;\n    transactions: SolanaSDK.PreparedTransaction[];\n    fee?: TokenAccount;\n    config: FeeRelayerConfiguration;\n  }): Promise<TransactionID[]>;\n\n  getFeePayer(): Promise<PublicKey>;\n}\n\nexport class FeeRelayer implements FeeRelayerType {\n  private _feeRelayerAPIClient: FeeRelayerAPIClientType;\n  private _solanaApiClient: FeeRelayerRelaySolanaClient;\n  private _orcaSwap: OrcaSwap.OrcaSwapType;\n  private _owner: PublicKey; // accountStorage: SolanaSDKAccountStorage;\n  feeCalculator: FeeRelayerCalculator;\n  private _deviceType: StatsInfoDeviceType;\n  private _buildNumber: string | null;\n\n  get account(): PublicKey {\n    return this._owner;\n  }\n\n  constructor({\n    orcaSwap,\n    owner,\n    solanaApiClient,\n    feeCalculator = new DefaultFeeRelayerCalculator(),\n    feeRelayerAPIClient,\n    deviceType,\n    buildNumber,\n  }: {\n    orcaSwap: OrcaSwap.OrcaSwapType;\n    owner: PublicKey; // accountStorage: SolanaSDKAccountStorage,\n    solanaApiClient: FeeRelayerRelaySolanaClient;\n    feeCalculator?: FeeRelayerCalculator;\n    feeRelayerAPIClient: FeeRelayerAPIClientType;\n    deviceType: StatsInfoDeviceType;\n    buildNumber: string | null;\n  }) {\n    // const owner = accountStorage.account;\n    // if (!owner) {\n    //   throw FeeRelayerError.unauthorized();\n    // }\n\n    this._orcaSwap = orcaSwap;\n    this._owner = owner; // this.accountStorage = accountStorage;\n    this.feeCalculator = feeCalculator;\n    this._solanaApiClient = solanaApiClient;\n    this._feeRelayerAPIClient = feeRelayerAPIClient;\n    this._deviceType = deviceType;\n    this._buildNumber = buildNumber;\n  }\n\n  async getFeePayer(): Promise<PublicKey> {\n    return new PublicKey(await this._feeRelayerAPIClient.getFeePayerPubkey());\n  }\n\n  /// Generic function for sending transaction to fee relayer's relay\n  async topUpAndRelayTransaction({\n    context,\n    transaction,\n    fee,\n    config,\n  }: {\n    context: FeeRelayerContext;\n    transaction: SolanaSDK.PreparedTransaction;\n    fee?: TokenAccount | null;\n    config: FeeRelayerConfiguration;\n  }): Promise<TransactionID> {\n    const result = (\n      await this.topUpAndRelayTransactions({\n        context,\n        transactions: [transaction],\n        fee,\n        config,\n      })\n    )[0];\n    if (!result) {\n      throw FeeRelayerError.unknown();\n    }\n    return result;\n  }\n\n  async topUpAndRelayTransactions({\n    context,\n    transactions,\n    fee,\n    config,\n  }: {\n    context: FeeRelayerContext;\n    transactions: SolanaSDK.PreparedTransaction[];\n    fee?: TokenAccount | null;\n    config: FeeRelayerConfiguration;\n  }): Promise<TransactionID[]> {\n    const expectedFees = transactions.map((tx) => tx.expectedFee);\n    const res = await this._checkAndTopUp({\n      context,\n      expectedFee: new SolanaSDK.FeeAmount({\n        transaction: expectedFees\n          .map((fee) => fee.transaction)\n          .reduce((acc, val) => acc.add(val), ZERO),\n        accountBalances: expectedFees\n          .map((fee) => fee.accountBalances)\n          .reduce((acc, val) => acc.add(val), ZERO),\n      }),\n      payingFeeToken: fee,\n    });\n\n    try {\n      const trx: TransactionID[] = [];\n      for (const preparedTransaction of transactions) {\n        const request = await this.relayTransaction({\n          context,\n          preparedTransaction,\n          payingFeeToken: fee,\n          relayAccountStatus: context.relayAccountStatus,\n          additionalPaybackFee: transactions.length > 0 ? config.additionalPaybackFee : ZERO,\n          operationType: config.operationType,\n          currency: config.currency,\n        });\n\n        trx.push(...request);\n      }\n\n      return trx;\n    } catch (error) {\n      console.error(error);\n      if (res) {\n        throw FeeRelayerError.topUpSuccessButTransactionThrows();\n      }\n      throw error;\n    }\n  }\n\n  private async _checkAndTopUp({\n    context,\n    expectedFee,\n    payingFeeToken,\n  }: {\n    context: FeeRelayerContext;\n    expectedFee: SolanaSDK.FeeAmount;\n    payingFeeToken?: TokenAccount | null;\n  }): Promise<string[] | null> {\n    // if paying fee token is solana, skip the top up\n    if (payingFeeToken?.mint.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n      return Promise.resolve(null);\n    }\n\n    const topUpAmount = this.feeCalculator.calculateNeededTopUpAmount({\n      context,\n      expectedFee,\n      payingTokenMint: payingFeeToken?.mint,\n    });\n\n    let params: TopUpPreparedParams | null;\n    let needsCreateUserRelayAddress: boolean;\n    if (topUpAmount.total.lten(0)) {\n      // no need to top up\n      [params, needsCreateUserRelayAddress] = [\n        null,\n        context.relayAccountStatus.type === RelayAccountStatusType.notYetCreated,\n      ];\n    } else {\n      // top up\n      if (!payingFeeToken) {\n        throw FeeRelayerError.unknown();\n      }\n\n      const prepareResult = await this._prepareForTopUp1({\n        context,\n        topUpAmount: topUpAmount.total,\n        payingFeeToken,\n      });\n\n      [params, needsCreateUserRelayAddress] = [\n        prepareResult,\n        context.relayAccountStatus.type === RelayAccountStatusType.notYetCreated,\n      ];\n    }\n\n    const topUpParams = params;\n    if (topUpParams && payingFeeToken) {\n      return this.topUp({\n        context,\n        needsCreateUserRelayAddress,\n        sourceToken: payingFeeToken,\n        targetAmount: topUpParams.amount,\n        topUpPools: topUpParams.poolsPair,\n        expectedFee: topUpParams.expectedFee,\n      });\n    }\n\n    return null;\n  }\n  private async _prepareForTopUp1({\n    context,\n    topUpAmount,\n    payingFeeToken,\n    forceUsingTransitiveSwap = false, // true for testing purpose only\n  }: {\n    context: FeeRelayerContext;\n    topUpAmount: SolanaSDK.Lamports;\n    payingFeeToken: TokenAccount;\n    forceUsingTransitiveSwap?: boolean;\n  }): Promise<TopUpPreparedParams | null> {\n    // form request\n    const tradableTopUpPoolsPair = await this._orcaSwap.getTradablePoolsPairs({\n      fromMint: payingFeeToken.mint.toString(),\n      toMint: SolanaSDKPublicKey.wrappedSOLMint.toString(),\n    });\n    // Get fee\n    const expectedFee = this.feeCalculator.calculateExpectedFeeForTopUp(context);\n    // Get pools for topping up\n    let topUpPools: OrcaSwap.PoolsPair;\n    // force using transitive swap (for testing only)\n    if (forceUsingTransitiveSwap) {\n      const pools = tradableTopUpPoolsPair.find((pair) => pair.length === 2)!;\n      topUpPools = pools;\n    } else {\n      // prefer direct swap to transitive swap\n      const directSwapPools = tradableTopUpPoolsPair.find((pair) => pair.length === 1);\n      if (directSwapPools) {\n        topUpPools = directSwapPools;\n      } else {\n        // if direct swap is not available, use transitive swap\n        const transitiveSwapPools = this._orcaSwap.findBestPoolsPairForEstimatedAmount({\n          estimatedAmount: topUpAmount,\n          poolsPairs: tradableTopUpPoolsPair,\n        });\n        if (transitiveSwapPools) {\n          topUpPools = transitiveSwapPools;\n        }\n        // no swap is available\n        else {\n          throw FeeRelayerError.swapPoolsNotFound();\n        }\n      }\n    }\n\n    // return needed amount and pools\n    return {\n      amount: topUpAmount,\n      expectedFee,\n      poolsPair: topUpPools,\n    };\n  }\n\n  async topUp({\n    context,\n    needsCreateUserRelayAddress,\n    sourceToken,\n    targetAmount,\n    topUpPools,\n    expectedFee,\n  }: {\n    context: FeeRelayerContext;\n    needsCreateUserRelayAddress: boolean;\n    sourceToken: TokenAccount;\n    targetAmount: u64;\n    topUpPools: OrcaSwap.PoolsPair;\n    expectedFee: u64;\n  }): Promise<string[]> {\n    const transitToken = TransitTokenAccountAnalysator.getTransitToken({\n      solanaApiClient: this._solanaApiClient,\n      orcaSwap: this._orcaSwap,\n      account: this.account,\n      pools: topUpPools,\n    });\n\n    const needsCreateTransitTokenAccount =\n      await TransitTokenAccountAnalysator.checkIfNeedsCreateTransitTokenAccount({\n        solanaApiClient: this._solanaApiClient,\n        transitToken,\n      });\n\n    const blockhash = await this._solanaApiClient.getRecentBlockhash();\n    const minimumRelayAccountBalance = context.minimumRelayAccountBalance;\n    const minimumTokenAccountBalance = context.minimumTokenAccountBalance;\n    const feePayerAddress = context.feePayerAddress;\n    const lamportsPerSignature = context.lamportsPerSignature;\n\n    // STEP 3: prepare for topUp\n    const topUpTransaction = await this._prepareForTopUp({\n      network: this._solanaApiClient.endpoint.network,\n      sourceToken,\n      userAuthorityAddress: this.account,\n      userRelayAddress: RelayProgram.getUserRelayAddress({\n        user: this.account,\n        network: this._solanaApiClient.endpoint.network,\n      }),\n      topUpPools,\n      targetAmount,\n      expectedFee,\n      blockhash,\n      minimumRelayAccountBalance,\n      minimumTokenAccountBalance,\n      needsCreateUserRelayAccount: needsCreateUserRelayAddress,\n      feePayerAddress,\n      lamportsPerSignature,\n      needsCreateTransitTokenAccount,\n      transitTokenMintPubkey: transitToken?.mint,\n      transitTokenAccountAddress: transitToken?.address,\n    });\n\n    // STEP 4: send transaction\n    const signatures = topUpTransaction.preparedTransaction.transaction.signatures;\n    if (signatures.length < 2) {\n      throw FeeRelayerError.invalidSignature();\n    }\n\n    // the second signature is the owner's signature\n    const ownerSignature = getSignature(signatures, 1);\n\n    // the third signature (optional) is the transferAuthority's signature\n    let transferAuthoritySignature = null;\n    try {\n      transferAuthoritySignature = getSignature(signatures, 2);\n    } catch {\n      // ignore\n    }\n\n    const topUpSignatures = new SwapTransactionSignatures({\n      userAuthoritySignature: ownerSignature,\n      transferAuthoritySignature,\n    });\n    const result = await this._feeRelayerAPIClient.sendTransaction(\n      FeeRelayerRequestType.relayTopUpWithSwap(\n        new TopUpWithSwapParams({\n          userSourceTokenAccountPubkey: sourceToken.address,\n          sourceTokenMintPubkey: sourceToken.mint,\n          userAuthorityPubkey: this.account,\n          topUpSwap: new SwapData(topUpTransaction.swapData),\n          feeAmount: expectedFee,\n          signatures: topUpSignatures,\n          blockhash,\n          deviceType: this._deviceType,\n          buildNumber: this._buildNumber,\n        }),\n      ),\n    );\n\n    return [result];\n  }\n\n  /// Prepare transaction and expected fee for a given relay transaction\n  private async _prepareForTopUp({\n    network,\n    sourceToken,\n    userAuthorityAddress,\n    userRelayAddress,\n    topUpPools,\n    targetAmount,\n    expectedFee,\n    blockhash,\n    minimumRelayAccountBalance,\n    minimumTokenAccountBalance,\n    needsCreateUserRelayAccount,\n    feePayerAddress,\n    lamportsPerSignature,\n    // freeTransactionFeeLimit,\n    needsCreateTransitTokenAccount = false,\n    transitTokenMintPubkey,\n    transitTokenAccountAddress,\n  }: {\n    network: Network;\n    sourceToken: TokenAccount;\n    userAuthorityAddress: PublicKey;\n    userRelayAddress: PublicKey;\n    topUpPools: OrcaSwap.PoolsPair;\n    targetAmount: u64;\n    expectedFee: u64;\n    blockhash: string;\n    minimumRelayAccountBalance: u64;\n    minimumTokenAccountBalance: u64;\n    needsCreateUserRelayAccount: boolean;\n    feePayerAddress: PublicKey;\n    lamportsPerSignature: u64;\n    // freeTransactionFeeLimit?: FreeTransactionFeeLimit;\n    needsCreateTransitTokenAccount?: boolean | null;\n    transitTokenMintPubkey?: PublicKey | null;\n    transitTokenAccountAddress?: PublicKey | null;\n  }): Promise<{\n    swapData: FeeRelayerRelaySwapType;\n    preparedTransaction: SolanaSDK.PreparedTransaction;\n  }> {\n    // assertion\n    const userSourceTokenAccountAddress = sourceToken.address;\n    const sourceTokenMintAddress = sourceToken.mint;\n    let associatedTokenAddress;\n    try {\n      associatedTokenAddress = getAssociatedTokenAddressSync(\n        sourceTokenMintAddress,\n        feePayerAddress,\n      );\n    } catch {\n      throw FeeRelayerError.unknown();\n    }\n\n    if (userSourceTokenAccountAddress.equals(associatedTokenAddress)) {\n      throw FeeRelayerError.wrongAddress();\n    }\n\n    // forming transaction and count fees\n    let accountCreationFee: u64 = ZERO;\n    const instructions: TransactionInstruction[] = [];\n\n    // create user relay account\n    if (needsCreateUserRelayAccount) {\n      instructions.push(\n        SystemProgram.transfer({\n          fromPubkey: feePayerAddress,\n          toPubkey: userRelayAddress,\n          lamports: minimumRelayAccountBalance.toNumber(),\n        }),\n      );\n      accountCreationFee = new u64(accountCreationFee.add(minimumRelayAccountBalance));\n    }\n\n    // top up swap\n    const swap = this._prepareSwapData({\n      pools: topUpPools,\n      inputAmount: null,\n      minAmountOut: targetAmount,\n      slippage: FeeRelayerConstants.topUpSlippage,\n      transitTokenMintPubkey,\n      needsCreateTransitTokenAccount: needsCreateTransitTokenAccount === true,\n    });\n    const userTransferAuthority = swap.transferAuthorityAccount?.publicKey;\n\n    const swapNew = swap.swapData;\n    switch (swapNew.constructor) {\n      case DirectSwapData: {\n        accountCreationFee = new u64(accountCreationFee.add(minimumTokenAccountBalance));\n        // approve\n        if (userTransferAuthority) {\n          instructions.push(\n            Token.createApproveInstruction(\n              SolanaSDKPublicKey.tokenProgramId,\n              userSourceTokenAccountAddress,\n              userTransferAuthority,\n              userAuthorityAddress,\n              [],\n              (swapNew as DirectSwapData).amountIn,\n            ),\n          );\n        }\n\n        // top up\n        instructions.push(\n          RelayProgram.topUpSwapInstruction({\n            network,\n            topUpSwap: swapNew,\n            userAuthorityAddress,\n            userSourceTokenAccountAddress,\n            feePayerAddress,\n          }),\n        );\n\n        break;\n      }\n\n      case TransitiveSwapData: {\n        // approve\n        if (userTransferAuthority) {\n          instructions.push(\n            Token.createApproveInstruction(\n              SolanaSDKPublicKey.tokenProgramId,\n              userSourceTokenAccountAddress,\n              userTransferAuthority,\n              userAuthorityAddress,\n              [],\n              (swapNew as TransitiveSwapData).from.amountIn,\n            ),\n          );\n        }\n\n        // create transit token account\n        if (needsCreateTransitTokenAccount && transitTokenAccountAddress) {\n          instructions.push(\n            RelayProgram.createTransitTokenAccountInstruction({\n              feePayer: feePayerAddress,\n              userAuthority: userAuthorityAddress,\n              transitTokenAccount: transitTokenAccountAddress,\n              transitTokenMint: new PublicKey(\n                (swapNew as TransitiveSwapData).transitTokenMintPubkey,\n              ),\n              network,\n            }),\n          );\n        }\n\n        // Destination WSOL account funding\n        accountCreationFee = new u64(accountCreationFee.add(minimumTokenAccountBalance));\n\n        // top up\n        instructions.push(\n          RelayProgram.topUpSwapInstruction({\n            network,\n            topUpSwap: swapNew,\n            userAuthorityAddress,\n            userSourceTokenAccountAddress,\n            feePayerAddress,\n          }),\n        );\n\n        break;\n      }\n      default:\n        throw new Error('unsupported swap type');\n    }\n\n    // transfer\n    instructions.push(\n      RelayProgram.transferSolInstruction({\n        userAuthorityAddress,\n        recipient: feePayerAddress,\n        lamports: expectedFee,\n        network,\n      }),\n    );\n\n    const transaction = new Transaction();\n    transaction.instructions = instructions;\n    transaction.feePayer = feePayerAddress;\n    transaction.recentBlockhash = blockhash;\n\n    // calculate fee first\n    const expectedFeeNew = new SolanaSDK.FeeAmount({\n      // TODO: return than works\n      // transaction: new u64(\n      //   await transaction.getEstimatedFee(this._solanaApiClient.provider.connection),\n      // ),\n      transaction: calculateTransactionFee(transaction, lamportsPerSignature),\n      accountBalances: accountCreationFee,\n    });\n\n    // resign transaction\n    const signers: Account[] = []; // there was account\n    const transferAuthority = swap.transferAuthorityAccount;\n    if (transferAuthority) {\n      signers.push(transferAuthority);\n    }\n    if (signers.length > 0) {\n      transaction.partialSign(...signers);\n    }\n\n    const signedTransaction = await this._solanaApiClient.provider.wallet.signTransaction(\n      transaction,\n    );\n\n    return {\n      swapData: swap.swapData,\n      preparedTransaction: new SolanaSDK.PreparedTransaction({\n        owner: this.account,\n        transaction: signedTransaction,\n        signers,\n        expectedFee: expectedFeeNew,\n      }),\n    };\n  }\n\n  /// Prepare swap data from swap pools\n  private _prepareSwapData({\n    pools,\n    inputAmount,\n    minAmountOut,\n    slippage,\n    transitTokenMintPubkey = null,\n    newTransferAuthority = false,\n    needsCreateTransitTokenAccount,\n  }: {\n    pools: OrcaSwap.PoolsPair;\n    inputAmount?: u64 | null;\n    minAmountOut?: u64 | null;\n    slippage: number;\n    transitTokenMintPubkey?: PublicKey | null;\n    newTransferAuthority?: boolean;\n    needsCreateTransitTokenAccount: boolean;\n  }): {\n    swapData: FeeRelayerRelaySwapType;\n    transferAuthorityAccount: Account | null;\n  } {\n    // preconditions\n    if (pools.length === 0 || pools.length > 2) {\n      throw FeeRelayerError.swapPoolsNotFound();\n    }\n    if (!inputAmount && !minAmountOut) {\n      throw FeeRelayerError.invalidAmount();\n    }\n\n    // create transferAuthority\n    const transferAuthority = new Account();\n\n    // form topUp params\n    if (pools.length === 1) {\n      const pool = pools[0]!;\n\n      const amountIn = inputAmount ?? pool.getInputAmountSlippage(minAmountOut!, slippage);\n      const minAmountOutNew = minAmountOut ?? pool.getInputAmountSlippage(inputAmount!, slippage);\n      if (!amountIn || !minAmountOutNew) {\n        throw FeeRelayerError.invalidAmount();\n      }\n\n      const directSwapData = getSwapData({\n        pool,\n        transferAuthorityPubkey: newTransferAuthority ? transferAuthority.publicKey : this.account,\n        amountIn,\n        minAmountOut: minAmountOutNew,\n      });\n      return {\n        swapData: directSwapData,\n        transferAuthorityAccount: newTransferAuthority ? transferAuthority : null,\n      };\n    } else {\n      const firstPool = pools[0]!;\n      const secondPool = pools[1]!;\n\n      if (!transitTokenMintPubkey) {\n        throw FeeRelayerError.transitTokenMintNotFound();\n      }\n\n      // if input amount is provided\n      let firstPoolAmountIn = inputAmount;\n      let secondPoolAmountIn: u64 | null = null;\n      let secondPoolAmountOut = minAmountOut;\n\n      if (inputAmount) {\n        secondPoolAmountIn = firstPool.getMinimumAmountOut(inputAmount, slippage) ?? ZERO;\n        secondPoolAmountOut = secondPool.getMinimumAmountOut(secondPoolAmountIn, slippage);\n      } else if (minAmountOut) {\n        secondPoolAmountIn = secondPool.getInputAmountSlippage(minAmountOut, slippage) ?? ZERO;\n        firstPoolAmountIn = firstPool.getInputAmountSlippage(secondPoolAmountIn, slippage);\n      }\n\n      if (!firstPoolAmountIn || !secondPoolAmountIn || !secondPoolAmountOut) {\n        throw FeeRelayerError.invalidAmount();\n      }\n\n      const transitiveSwapData = new TransitiveSwapData({\n        from: getSwapData({\n          pool: firstPool,\n          transferAuthorityPubkey: newTransferAuthority\n            ? transferAuthority.publicKey\n            : this.account,\n          amountIn: firstPoolAmountIn,\n          minAmountOut: secondPoolAmountIn,\n        }),\n        to: getSwapData({\n          pool: secondPool,\n          transferAuthorityPubkey: newTransferAuthority\n            ? transferAuthority.publicKey\n            : this.account,\n          amountIn: secondPoolAmountIn,\n          minAmountOut: secondPoolAmountOut,\n        }),\n        transitTokenMintPubkey: transitTokenMintPubkey.toString(),\n        needsCreateTransitTokenAccount,\n      });\n      return {\n        swapData: transitiveSwapData,\n        transferAuthorityAccount: newTransferAuthority ? transferAuthority : null,\n      };\n    }\n  }\n\n  async relayTransaction({\n    context,\n    preparedTransaction,\n    payingFeeToken,\n    relayAccountStatus,\n    additionalPaybackFee,\n  }: {\n    context: FeeRelayerContext;\n    preparedTransaction: SolanaSDK.PreparedTransaction;\n    payingFeeToken?: TokenAccount | null;\n    relayAccountStatus: RelayAccountStatus;\n    additionalPaybackFee: u64;\n    operationType: StatsInfoOperationType;\n    currency: string | null;\n  }): Promise<TransactionID[]> {\n    const feePayer = context.feePayerAddress;\n\n    // verify fee payer\n    if (!preparedTransaction.transaction.feePayer?.equals(feePayer)) {\n      throw FeeRelayerError.invalidFeePayer();\n    }\n\n    // Calculate the fee to send back to feePayer\n    // Account creation fee (accountBalances) is a must-pay-back fee\n    let paybackFee = new u64(\n      additionalPaybackFee.add(preparedTransaction.expectedFee.accountBalances),\n    );\n\n    // The transaction fee, on the other hand, is only be paid if user used more than number of free transaction fee\n    if (\n      !context.usageStatus.isFreeTransactionFeeAvailable({\n        transactionFee: preparedTransaction.expectedFee.transaction,\n      })\n    ) {\n      paybackFee = new u64(paybackFee.add(preparedTransaction.expectedFee.transaction));\n    }\n\n    // transfer sol back to feerelayer's feePayer\n    const preparedTransactionNew = preparedTransaction.clone();\n    if (paybackFee.gtn(0)) {\n      if (\n        payingFeeToken?.mint.equals(SolanaSDKPublicKey.wrappedSOLMint) &&\n        (relayAccountStatus.balance ?? ZERO).lt(paybackFee)\n      ) {\n        preparedTransactionNew.transaction.instructions.push(\n          SystemProgram.transfer({\n            fromPubkey: this.account,\n            toPubkey: feePayer,\n            lamports: paybackFee.toNumber(),\n          }),\n        );\n      } else {\n        preparedTransactionNew.transaction.instructions.push(\n          RelayProgram.transferSolInstruction({\n            userAuthorityAddress: this.account,\n            recipient: feePayer,\n            lamports: paybackFee,\n            network: this._solanaApiClient.endpoint.network,\n          }),\n        );\n      }\n    }\n\n    // resign transaction\n    if (preparedTransactionNew.signers.length > 0) {\n      preparedTransactionNew.transaction.partialSign(...preparedTransactionNew.signers);\n    }\n    preparedTransactionNew.transaction =\n      await this._solanaApiClient.provider.wallet.signTransaction(\n        preparedTransactionNew.transaction,\n      );\n\n    return [\n      await this._feeRelayerAPIClient.sendTransaction(\n        FeeRelayerRequestType.relayTransaction(new RelayTransactionParam(preparedTransactionNew)),\n      ),\n    ];\n  }\n}\n","import { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport type { Network } from '@saberhq/solana-contrib';\nimport { u64 } from '@solana/spl-token';\nimport { PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport { Buffer } from 'buffer';\nimport BufferLayout from 'buffer-layout';\n\nimport { readonly, SolanaSDKPublicKey, writable } from 'new/sdk/SolanaSDK';\n\nimport type { FeeRelayerRelaySwapType } from '../relay';\nimport { DirectSwapData, TransitiveSwapData } from '../relay';\n\nexport class RelayProgram {\n  static id(network: Network): PublicKey {\n    switch (network) {\n      default:\n      case 'mainnet-beta':\n        return new PublicKey('12YKFL4mnZz6CBEGePrf293mEzueQM3h8VLPUJsKpGs9');\n      case 'devnet':\n      case 'testnet':\n        return new PublicKey('6xKJFyuM6UHCT8F5SBxnjGt6ZrZYjsVfnAnAeHPU775k');\n    }\n  }\n\n  static getUserRelayAddress({ user, network }: { user: PublicKey; network: Network }): PublicKey {\n    return findProgramAddressSync([user.toBuffer(), Buffer.from('relay')], this.id(network))[0];\n  }\n\n  static getUserTemporaryWSOLAddress({\n    user,\n    network,\n  }: {\n    user: PublicKey;\n    network: Network;\n  }): PublicKey {\n    return findProgramAddressSync(\n      [user.toBuffer(), Buffer.from('temporary_wsol')],\n      this.id(network),\n    )[0];\n  }\n\n  static getTransitTokenAccountAddress({\n    user,\n    transitTokenMint,\n    network,\n  }: {\n    user: PublicKey;\n    transitTokenMint: PublicKey;\n    network: Network;\n  }): PublicKey {\n    return findProgramAddressSync(\n      [user.toBuffer(), transitTokenMint.toBuffer(), Buffer.from('transit')],\n      this.id(network),\n    )[0];\n  }\n\n  static topUpSwapInstruction({\n    network,\n    topUpSwap,\n    userAuthorityAddress,\n    userSourceTokenAccountAddress,\n    feePayerAddress,\n  }: {\n    network: Network;\n    topUpSwap: FeeRelayerRelaySwapType;\n    userAuthorityAddress: PublicKey;\n    userSourceTokenAccountAddress: PublicKey;\n    feePayerAddress: PublicKey;\n  }): TransactionInstruction {\n    const userRelayAddress = this.getUserRelayAddress({\n      user: userAuthorityAddress,\n      network,\n    });\n    const userTemporarilyWSOLAddress = this.getUserTemporaryWSOLAddress({\n      user: userAuthorityAddress,\n      network,\n    });\n\n    const swap = topUpSwap;\n    switch (swap.constructor) {\n      case DirectSwapData: {\n        return this._topUpWithSPLSwapDirectInstruction({\n          feePayer: feePayerAddress,\n          userAuthority: userAuthorityAddress,\n          userRelayAccount: userRelayAddress,\n          userTransferAuthority: new PublicKey((swap as DirectSwapData).transferAuthorityPubkey),\n          userSourceTokenAccount: userSourceTokenAccountAddress,\n          userTemporaryWsolAccount: userTemporarilyWSOLAddress,\n          swapProgramId: new PublicKey((swap as DirectSwapData).programId),\n          swapAccount: new PublicKey((swap as DirectSwapData).accountPubkey),\n          swapAuthority: new PublicKey((swap as DirectSwapData).authorityPubkey),\n          swapSource: new PublicKey((swap as DirectSwapData).sourcePubkey),\n          swapDestination: new PublicKey((swap as DirectSwapData).destinationPubkey),\n          poolTokenMint: new PublicKey((swap as DirectSwapData).poolTokenMintPubkey),\n          poolFeeAccount: new PublicKey((swap as DirectSwapData).poolFeeAccountPubkey),\n          amountIn: (swap as DirectSwapData).amountIn,\n          minimumAmountOut: (swap as DirectSwapData).minimumAmountOut,\n          network,\n        });\n      }\n      case TransitiveSwapData: {\n        return this._topUpWithSPLSwapTransitiveInstruction({\n          feePayer: feePayerAddress,\n          userAuthority: userAuthorityAddress,\n          userRelayAccount: userRelayAddress,\n          userTransferAuthority: new PublicKey(\n            (swap as TransitiveSwapData).from.transferAuthorityPubkey,\n          ),\n          userSourceTokenAccount: userSourceTokenAccountAddress,\n          userDestinationTokenAccount: userTemporarilyWSOLAddress,\n          transitTokenMint: new PublicKey((swap as TransitiveSwapData).transitTokenMintPubkey),\n          swapFromProgramId: new PublicKey((swap as TransitiveSwapData).from.programId),\n          swapFromAccount: new PublicKey((swap as TransitiveSwapData).from.accountPubkey),\n          swapFromAuthority: new PublicKey((swap as TransitiveSwapData).from.authorityPubkey),\n          swapFromSource: new PublicKey((swap as TransitiveSwapData).from.sourcePubkey),\n          swapFromDestination: new PublicKey((swap as TransitiveSwapData).from.destinationPubkey),\n          swapFromPoolTokenMint: new PublicKey(\n            (swap as TransitiveSwapData).from.poolTokenMintPubkey,\n          ),\n          swapFromPoolFeeAccount: new PublicKey(\n            (swap as TransitiveSwapData).from.poolFeeAccountPubkey,\n          ),\n          swapToProgramId: new PublicKey((swap as TransitiveSwapData).to.programId),\n          swapToAccount: new PublicKey((swap as TransitiveSwapData).to.accountPubkey),\n          swapToAuthority: new PublicKey((swap as TransitiveSwapData).to.authorityPubkey),\n          swapToSource: new PublicKey((swap as TransitiveSwapData).to.sourcePubkey),\n          swapToDestination: new PublicKey((swap as TransitiveSwapData).to.destinationPubkey),\n          swapToPoolTokenMint: new PublicKey((swap as TransitiveSwapData).to.poolTokenMintPubkey),\n          swapToPoolFeeAccount: new PublicKey((swap as TransitiveSwapData).to.poolFeeAccountPubkey),\n          amountIn: (swap as TransitiveSwapData).from.amountIn,\n          transitMinimumAmount: (swap as TransitiveSwapData).from.minimumAmountOut,\n          minimumAmountOut: (swap as TransitiveSwapData).to.minimumAmountOut,\n          network,\n        });\n      }\n      default: {\n        throw new Error('unsupported swap type');\n      }\n    }\n  }\n\n  static transferSolInstruction({\n    userAuthorityAddress,\n    recipient,\n    lamports,\n    network,\n  }: {\n    userAuthorityAddress: PublicKey;\n    recipient: PublicKey;\n    lamports: u64;\n    network: Network;\n  }): TransactionInstruction {\n    const keys = [\n      readonly({ pubkey: userAuthorityAddress, isSigner: true }),\n      writable({\n        pubkey: this.getUserRelayAddress({\n          user: userAuthorityAddress,\n          network,\n        }),\n        isSigner: false,\n      }),\n      writable({ pubkey: recipient, isSigner: false }),\n      readonly({ pubkey: SolanaSDKPublicKey.programId, isSigner: false }),\n    ];\n    const dataLayout = BufferLayout.struct([\n      BufferLayout.u8('instruction'),\n      BufferLayout.blob(8, 'amount'),\n    ]);\n\n    const data = Buffer.alloc(dataLayout.span);\n    dataLayout.encode(\n      {\n        instruction: 2,\n        amount: new u64(lamports.toString()).toBuffer(),\n      },\n      data,\n    );\n\n    return new TransactionInstruction({\n      keys,\n      programId: this.id(network),\n      data,\n    });\n  }\n\n  static createTransitTokenAccountInstruction({\n    feePayer,\n    userAuthority,\n    transitTokenAccount,\n    transitTokenMint,\n    network,\n  }: {\n    feePayer: PublicKey;\n    userAuthority: PublicKey;\n    transitTokenAccount: PublicKey;\n    transitTokenMint: PublicKey;\n    network: Network;\n  }): TransactionInstruction {\n    const keys = [\n      writable({ pubkey: transitTokenAccount, isSigner: false }),\n      readonly({ pubkey: transitTokenMint, isSigner: false }),\n      writable({ pubkey: userAuthority, isSigner: true }),\n      readonly({ pubkey: feePayer, isSigner: true }),\n      readonly({ pubkey: SolanaSDKPublicKey.tokenProgramId, isSigner: false }),\n      readonly({ pubkey: SolanaSDKPublicKey.sysvarRent, isSigner: false }),\n      readonly({ pubkey: SolanaSDKPublicKey.programId, isSigner: false }),\n    ];\n\n    const dataLayout = BufferLayout.struct([BufferLayout.u8('instruction')]);\n\n    const data = Buffer.alloc(dataLayout.span);\n    dataLayout.encode(\n      {\n        instruction: 3,\n      },\n      data,\n    );\n    return new TransactionInstruction({\n      keys,\n      programId: this.id(network),\n      data,\n    });\n  }\n\n  static createRelaySwapInstruction({\n    transitiveSwap,\n    userAuthorityAddressPubkey,\n    sourceAddressPubkey,\n    transitTokenAccount,\n    destinationAddressPubkey,\n    feePayerPubkey,\n    network,\n  }: {\n    transitiveSwap: TransitiveSwapData;\n    userAuthorityAddressPubkey: PublicKey;\n    sourceAddressPubkey: PublicKey;\n    transitTokenAccount: PublicKey;\n    destinationAddressPubkey: PublicKey;\n    feePayerPubkey: PublicKey;\n    network: Network;\n  }): TransactionInstruction {\n    const transferAuthorityPubkey = new PublicKey(transitiveSwap.from.transferAuthorityPubkey);\n    const transitTokenMintPubkey = new PublicKey(transitiveSwap.transitTokenMintPubkey);\n    const swapFromProgramId = new PublicKey(transitiveSwap.from.programId);\n    const swapFromAccount = new PublicKey(transitiveSwap.from.accountPubkey);\n    const swapFromAuthority = new PublicKey(transitiveSwap.from.authorityPubkey);\n    const swapFromSource = new PublicKey(transitiveSwap.from.sourcePubkey);\n    const swapFromDestination = new PublicKey(transitiveSwap.from.destinationPubkey);\n    const swapFromTokenMint = new PublicKey(transitiveSwap.from.poolTokenMintPubkey);\n    const swapFromPoolFeeAccount = new PublicKey(transitiveSwap.from.poolFeeAccountPubkey);\n    const swapToProgramId = new PublicKey(transitiveSwap.to.programId);\n    const swapToAccount = new PublicKey(transitiveSwap.to.accountPubkey);\n    const swapToAuthority = new PublicKey(transitiveSwap.to.authorityPubkey);\n    const swapToSource = new PublicKey(transitiveSwap.to.sourcePubkey);\n    const swapToDestination = new PublicKey(transitiveSwap.to.destinationPubkey);\n    const swapToPoolTokenMint = new PublicKey(transitiveSwap.to.poolTokenMintPubkey);\n    const swapToPoolFeeAccount = new PublicKey(transitiveSwap.to.poolFeeAccountPubkey);\n    const amountIn = transitiveSwap.from.amountIn;\n    const transitMinimumAmount = transitiveSwap.from.minimumAmountOut;\n    const minimumAmountOut = transitiveSwap.to.minimumAmountOut;\n\n    return this._splSwapTransitiveInstruction({\n      feePayer: feePayerPubkey,\n      userAuthority: userAuthorityAddressPubkey,\n      userTransferAuthority: transferAuthorityPubkey,\n      userSourceTokenAccount: sourceAddressPubkey,\n      userTransitTokenAccount: transitTokenAccount,\n      userDestinationTokenAccount: destinationAddressPubkey,\n      transitTokenMint: transitTokenMintPubkey,\n      swapFromProgramId,\n      swapFromAccount,\n      swapFromAuthority,\n      swapFromSource,\n      swapFromDestination,\n      swapFromPoolTokenMint: swapFromTokenMint,\n      swapFromPoolFeeAccount,\n      swapToProgramId,\n      swapToAccount,\n      swapToAuthority,\n      swapToSource,\n      swapToDestination,\n      swapToPoolTokenMint,\n      swapToPoolFeeAccount,\n      amountIn,\n      transitMinimumAmount,\n      minimumAmountOut,\n      network,\n    });\n  }\n\n  // Helpers\n\n  private static _topUpWithSPLSwapDirectInstruction({\n    feePayer,\n    userAuthority,\n    userRelayAccount,\n    userTransferAuthority,\n    userSourceTokenAccount,\n    userTemporaryWsolAccount,\n    swapProgramId,\n    swapAccount,\n    swapAuthority,\n    swapSource,\n    swapDestination,\n    poolTokenMint,\n    poolFeeAccount,\n    amountIn,\n    minimumAmountOut,\n    network,\n  }: {\n    feePayer: PublicKey;\n    userAuthority: PublicKey;\n    userRelayAccount: PublicKey;\n    userTransferAuthority: PublicKey;\n    userSourceTokenAccount: PublicKey;\n    userTemporaryWsolAccount: PublicKey;\n    swapProgramId: PublicKey;\n    swapAccount: PublicKey;\n    swapAuthority: PublicKey;\n    swapSource: PublicKey;\n    swapDestination: PublicKey;\n    poolTokenMint: PublicKey;\n    poolFeeAccount: PublicKey;\n    amountIn: u64;\n    minimumAmountOut: u64;\n    network: Network;\n  }): TransactionInstruction {\n    const keys = [\n      readonly({ pubkey: SolanaSDKPublicKey.wrappedSOLMint, isSigner: false }),\n      writable({ pubkey: feePayer, isSigner: true }),\n      readonly({ pubkey: userAuthority, isSigner: true }),\n      writable({ pubkey: userRelayAccount, isSigner: false }),\n      readonly({ pubkey: SolanaSDKPublicKey.tokenProgramId, isSigner: false }),\n      readonly({ pubkey: swapProgramId, isSigner: false }),\n      readonly({ pubkey: swapAccount, isSigner: false }),\n      readonly({ pubkey: swapAuthority, isSigner: false }),\n      readonly({ pubkey: userTransferAuthority, isSigner: true }),\n      writable({ pubkey: userSourceTokenAccount, isSigner: false }),\n      writable({ pubkey: userTemporaryWsolAccount, isSigner: false }),\n      writable({ pubkey: swapSource, isSigner: false }),\n      writable({ pubkey: swapDestination, isSigner: false }),\n      writable({ pubkey: poolTokenMint, isSigner: false }),\n      writable({ pubkey: poolFeeAccount, isSigner: false }),\n      readonly({ pubkey: SolanaSDKPublicKey.sysvarRent, isSigner: false }),\n      readonly({ pubkey: SolanaSDKPublicKey.programId, isSigner: false }),\n    ];\n\n    const dataLayout = BufferLayout.struct([\n      BufferLayout.u8('instruction'),\n      BufferLayout.blob(8, 'amountIn'), // TODO: check method\n      BufferLayout.blob(8, 'minimumAmountOut'), // TODO: check method\n    ]);\n\n    const data = Buffer.alloc(dataLayout.span);\n    dataLayout.encode(\n      {\n        instruction: 0,\n        amountIn: amountIn.toBuffer(),\n        minimumAmountOut: minimumAmountOut.toBuffer(),\n      },\n      data,\n    );\n\n    return new TransactionInstruction({\n      keys,\n      programId: this.id(network),\n      data,\n    });\n  }\n\n  private static _topUpWithSPLSwapTransitiveInstruction({\n    feePayer,\n    userAuthority,\n    userRelayAccount,\n    userTransferAuthority,\n    userSourceTokenAccount,\n    userDestinationTokenAccount,\n    transitTokenMint,\n    swapFromProgramId,\n    swapFromAccount,\n    swapFromAuthority,\n    swapFromSource,\n    swapFromDestination,\n    swapFromPoolTokenMint,\n    swapFromPoolFeeAccount,\n    swapToProgramId,\n    swapToAccount,\n    swapToAuthority,\n    swapToSource,\n    swapToDestination,\n    swapToPoolTokenMint,\n    swapToPoolFeeAccount,\n    amountIn,\n    transitMinimumAmount,\n    minimumAmountOut,\n    network,\n  }: {\n    feePayer: PublicKey;\n    userAuthority: PublicKey;\n    userRelayAccount: PublicKey;\n    userTransferAuthority: PublicKey;\n    userSourceTokenAccount: PublicKey;\n    userDestinationTokenAccount: PublicKey;\n    transitTokenMint: PublicKey;\n    swapFromProgramId: PublicKey;\n    swapFromAccount: PublicKey;\n    swapFromAuthority: PublicKey;\n    swapFromSource: PublicKey;\n    swapFromDestination: PublicKey;\n    swapFromPoolTokenMint: PublicKey;\n    swapFromPoolFeeAccount: PublicKey;\n    swapToProgramId: PublicKey;\n    swapToAccount: PublicKey;\n    swapToAuthority: PublicKey;\n    swapToSource: PublicKey;\n    swapToDestination: PublicKey;\n    swapToPoolTokenMint: PublicKey;\n    swapToPoolFeeAccount: PublicKey;\n    amountIn: u64;\n    transitMinimumAmount: u64;\n    minimumAmountOut: u64;\n    network: Network;\n  }): TransactionInstruction {\n    const keys = [\n      readonly({ pubkey: SolanaSDKPublicKey.wrappedSOLMint, isSigner: false }),\n      writable({ pubkey: feePayer, isSigner: true }),\n      readonly({ pubkey: userAuthority, isSigner: true }),\n      writable({ pubkey: userRelayAccount, isSigner: false }),\n      readonly({ pubkey: SolanaSDKPublicKey.tokenProgramId, isSigner: false }),\n      readonly({ pubkey: userTransferAuthority, isSigner: true }),\n      writable({ pubkey: userSourceTokenAccount, isSigner: false }),\n      writable({\n        pubkey: this.getTransitTokenAccountAddress({\n          user: userAuthority,\n          transitTokenMint,\n          network,\n        }),\n        isSigner: false,\n      }),\n      writable({ pubkey: userDestinationTokenAccount, isSigner: false }),\n      readonly({ pubkey: swapFromProgramId, isSigner: false }),\n      readonly({ pubkey: swapFromAccount, isSigner: false }),\n      readonly({ pubkey: swapFromAuthority, isSigner: false }),\n      writable({ pubkey: swapFromSource, isSigner: false }),\n      writable({ pubkey: swapFromDestination, isSigner: false }),\n      writable({ pubkey: swapFromPoolTokenMint, isSigner: false }),\n      writable({ pubkey: swapFromPoolFeeAccount, isSigner: false }),\n      readonly({ pubkey: swapToProgramId, isSigner: false }),\n      readonly({ pubkey: swapToAccount, isSigner: false }),\n      readonly({ pubkey: swapToAuthority, isSigner: false }),\n      writable({ pubkey: swapToSource, isSigner: false }),\n      writable({ pubkey: swapToDestination, isSigner: false }),\n      writable({ pubkey: swapToPoolTokenMint, isSigner: false }),\n      writable({ pubkey: swapToPoolFeeAccount, isSigner: false }),\n      readonly({ pubkey: SolanaSDKPublicKey.sysvarRent, isSigner: false }),\n      readonly({ pubkey: SolanaSDKPublicKey.programId, isSigner: false }),\n    ];\n\n    const dataLayout = BufferLayout.struct([\n      BufferLayout.u8('instruction'),\n      BufferLayout.blob(8, 'amountIn'),\n      BufferLayout.blob(8, 'transitMinimumAmount'),\n      BufferLayout.blob(8, 'minimumAmountOut'),\n    ]);\n\n    const data = Buffer.alloc(dataLayout.span);\n    dataLayout.encode(\n      {\n        instruction: 1,\n        amountIn: amountIn.toBuffer(),\n        transitMinimumAmount: transitMinimumAmount.toBuffer(),\n        minimumAmountOut: minimumAmountOut.toBuffer(), // TODO: can't find why we need no cast it, where BN\n      },\n      data,\n    );\n\n    return new TransactionInstruction({\n      keys,\n      programId: this.id(network),\n      data,\n    });\n  }\n\n  private static _splSwapTransitiveInstruction({\n    feePayer,\n    // userAuthority,\n    userTransferAuthority,\n    userSourceTokenAccount,\n    userTransitTokenAccount,\n    userDestinationTokenAccount,\n    // transitTokenMint,\n    swapFromProgramId,\n    swapFromAccount,\n    swapFromAuthority,\n    swapFromSource,\n    swapFromDestination,\n    swapFromPoolTokenMint,\n    swapFromPoolFeeAccount,\n    swapToProgramId,\n    swapToAccount,\n    swapToAuthority,\n    swapToSource,\n    swapToDestination,\n    swapToPoolTokenMint,\n    swapToPoolFeeAccount,\n    amountIn,\n    transitMinimumAmount,\n    minimumAmountOut,\n    network,\n  }: {\n    feePayer: PublicKey;\n    userAuthority: PublicKey;\n    userTransferAuthority: PublicKey;\n    userSourceTokenAccount: PublicKey;\n    userTransitTokenAccount: PublicKey;\n    userDestinationTokenAccount: PublicKey;\n    transitTokenMint: PublicKey;\n    swapFromProgramId: PublicKey;\n    swapFromAccount: PublicKey;\n    swapFromAuthority: PublicKey;\n    swapFromSource: PublicKey;\n    swapFromDestination: PublicKey;\n    swapFromPoolTokenMint: PublicKey;\n    swapFromPoolFeeAccount: PublicKey;\n    swapToProgramId: PublicKey;\n    swapToAccount: PublicKey;\n    swapToAuthority: PublicKey;\n    swapToSource: PublicKey;\n    swapToDestination: PublicKey;\n    swapToPoolTokenMint: PublicKey;\n    swapToPoolFeeAccount: PublicKey;\n    amountIn: u64;\n    transitMinimumAmount: u64;\n    minimumAmountOut: u64;\n    network: Network;\n  }): TransactionInstruction {\n    const keys = [\n      writable({ pubkey: feePayer, isSigner: true }),\n      readonly({ pubkey: SolanaSDKPublicKey.tokenProgramId, isSigner: false }),\n      readonly({ pubkey: userTransferAuthority, isSigner: true }),\n      writable({ pubkey: userSourceTokenAccount, isSigner: false }),\n      writable({ pubkey: userTransitTokenAccount, isSigner: false }),\n      writable({ pubkey: userDestinationTokenAccount, isSigner: false }),\n      readonly({ pubkey: swapFromProgramId, isSigner: false }),\n      readonly({ pubkey: swapFromAccount, isSigner: false }),\n      readonly({ pubkey: swapFromAuthority, isSigner: false }),\n      writable({ pubkey: swapFromSource, isSigner: false }),\n      writable({ pubkey: swapFromDestination, isSigner: false }),\n      writable({ pubkey: swapFromPoolTokenMint, isSigner: false }),\n      writable({ pubkey: swapFromPoolFeeAccount, isSigner: false }),\n      readonly({ pubkey: swapToProgramId, isSigner: false }),\n      readonly({ pubkey: swapToAccount, isSigner: false }),\n      readonly({ pubkey: swapToAuthority, isSigner: false }),\n      writable({ pubkey: swapToSource, isSigner: false }),\n      writable({ pubkey: swapToDestination, isSigner: false }),\n      writable({ pubkey: swapToPoolTokenMint, isSigner: false }),\n      writable({ pubkey: swapToPoolFeeAccount, isSigner: false }),\n    ];\n\n    const dataLayout = BufferLayout.struct([\n      BufferLayout.u8('instruction'),\n      BufferLayout.blob(8, 'amountIn'),\n      BufferLayout.blob(8, 'transitMinimumAmount'),\n      BufferLayout.blob(8, 'minimumAmountOut'),\n    ]);\n\n    const data = Buffer.alloc(dataLayout.span);\n    dataLayout.encode(\n      {\n        instruction: 4,\n        amountIn: amountIn.toBuffer(),\n        transitMinimumAmount: transitMinimumAmount.toBuffer(),\n        minimumAmountOut: minimumAmountOut.toBuffer(),\n      },\n      data,\n    );\n\n    return new TransactionInstruction({\n      keys,\n      programId: this.id(network),\n      data,\n    });\n  }\n}\n","import type { PublicKey } from '@solana/web3.js';\n\nimport { AccountInfo, SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nimport { TokenAccount } from '../../models/TokenAccount';\nimport type { FeeRelayerRelaySolanaClient } from '../../relay';\n\nexport class DestinationAnalysator {\n  static async analyseDestination({\n    apiClient,\n    destination,\n    mint,\n    userAccount,\n  }: {\n    apiClient: FeeRelayerRelaySolanaClient; // TODO: change type\n    destination?: PublicKey | null;\n    mint: PublicKey;\n    userAccount: PublicKey;\n  }): Promise<{\n    destination: TokenAccount;\n    destinationOwner: PublicKey | null;\n    needCreateDestination: boolean;\n  }> {\n    if (SolanaSDKPublicKey.wrappedSOLMint.equals(mint)) {\n      // Target is SOL Token\n      return {\n        destination: new TokenAccount({ address: userAccount, mint }),\n        destinationOwner: userAccount,\n        needCreateDestination: true,\n      };\n    } else {\n      // Target is SPL Token\n      if (destination) {\n        // User already has SPL account\n        return {\n          destination: new TokenAccount({ address: destination, mint }),\n          destinationOwner: userAccount,\n          needCreateDestination: false,\n        };\n      } else {\n        // User doesn't have SPL account\n\n        // Try to get associated account\n        const address = await apiClient.getAssociatedSPLTokenAddress({\n          address: userAccount,\n          mint,\n        });\n\n        // Check destination address is exist.\n        const info = await apiClient.getAccountInfo<AccountInfo | null>({\n          account: address.toString(),\n          decodedTo: AccountInfo,\n        });\n        const needsCreateDestinationTokenAccount = !info?.owner.equals(\n          SolanaSDKPublicKey.tokenProgramId,\n        );\n\n        return {\n          destination: new TokenAccount({\n            address: userAccount,\n            mint,\n          }),\n          destinationOwner: null,\n          needCreateDestination: needsCreateDestinationTokenAccount,\n        };\n      }\n    }\n  }\n}\n","import { PublicKey } from '@solana/web3.js';\n\nimport type * as OrcaSwap from 'new/sdk/OrcaSwap';\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\n\nimport { TokenAccount } from '../../models';\nimport type { FeeRelayerRelaySolanaClient } from '../../relay';\nimport { RelayProgram } from '../../relayProgram';\n\nexport class TransitTokenAccountAnalysator {\n  static getTransitToken({\n    solanaApiClient,\n    orcaSwap,\n    account,\n    pools,\n  }: {\n    solanaApiClient: FeeRelayerRelaySolanaClient; // TODO: change type\n    pools: OrcaSwap.PoolsPair;\n    account: PublicKey;\n    orcaSwap: OrcaSwap.OrcaSwapType;\n  }): TokenAccount | null {\n    const transitTokenMintPubkey = TransitTokenAccountAnalysator.getTransitTokenMintPubkey({\n      orcaSwap,\n      pools,\n    });\n    if (!transitTokenMintPubkey) {\n      return null;\n    }\n\n    const transitTokenAccountAddress = RelayProgram.getTransitTokenAccountAddress({\n      user: account,\n      transitTokenMint: transitTokenMintPubkey,\n      network: solanaApiClient.endpoint.network,\n    });\n\n    return new TokenAccount({\n      address: transitTokenAccountAddress,\n      mint: transitTokenMintPubkey,\n    });\n  }\n\n  static getTransitTokenMintPubkey({\n    pools,\n    orcaSwap,\n  }: {\n    pools: OrcaSwap.PoolsPair;\n    orcaSwap: OrcaSwap.OrcaSwapType;\n  }): PublicKey | null {\n    if (pools.length !== 2) {\n      return null;\n    }\n    const interTokenName = pools[0]!.tokenBName.toString();\n    const mint = orcaSwap.getMint(interTokenName);\n    return mint ? new PublicKey(mint) : null;\n  }\n\n  static async checkIfNeedsCreateTransitTokenAccount({\n    solanaApiClient,\n    transitToken,\n  }: {\n    solanaApiClient: FeeRelayerRelaySolanaClient; // TODO: change type\n    transitToken: TokenAccount | null;\n  }): Promise<boolean | null> {\n    if (!transitToken) {\n      return null;\n    }\n\n    const account = await solanaApiClient.getAccountInfo({\n      account: transitToken.address.toString(),\n      decodedTo: SolanaSDK.AccountInfo,\n    });\n    if (!account) {\n      return true;\n    }\n\n    return !account.data?.mint.equals(transitToken.mint);\n  }\n}\n","import { u64 } from '@solana/spl-token';\nimport type { PublicKey } from '@solana/web3.js';\n\nimport type * as OrcaSwap from 'new/sdk/OrcaSwap';\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nimport type { FeeRelayerContext, FeeRelayerRelaySolanaClient } from '../../relay';\nimport { DestinationAnalysator } from '../helper';\n\nexport interface SwapFeeRelayerCalculator {\n  calculateSwappingNetworkFees({\n    context,\n    swapPools,\n    sourceTokenMint,\n    destinationTokenMint,\n    destinationAddress,\n  }: {\n    context: FeeRelayerContext;\n    swapPools?: OrcaSwap.PoolsPair | null;\n    sourceTokenMint: PublicKey;\n    destinationTokenMint: PublicKey;\n    destinationAddress?: PublicKey | null;\n  }): Promise<SolanaSDK.FeeAmount>;\n}\n\nexport class DefaultSwapFeeRelayerCalculator implements SwapFeeRelayerCalculator {\n  solanaApiClient: FeeRelayerRelaySolanaClient;\n  owner: PublicKey;\n\n  constructor({\n    solanaApiClient,\n    owner,\n  }: {\n    solanaApiClient: FeeRelayerRelaySolanaClient;\n    owner: PublicKey;\n  }) {\n    this.solanaApiClient = solanaApiClient;\n    this.owner = owner;\n  }\n\n  async calculateSwappingNetworkFees({\n    context,\n    swapPools,\n    sourceTokenMint,\n    destinationTokenMint,\n    destinationAddress,\n  }: {\n    context: FeeRelayerContext;\n    swapPools?: OrcaSwap.PoolsPair | null;\n    sourceTokenMint: PublicKey;\n    destinationTokenMint: PublicKey;\n    destinationAddress?: PublicKey | null;\n  }): Promise<SolanaSDK.FeeAmount> {\n    const destinationInfo = await DestinationAnalysator.analyseDestination({\n      apiClient: this.solanaApiClient,\n      destination: destinationAddress,\n      mint: destinationTokenMint,\n      userAccount: this.owner,\n    });\n\n    const lamportsPerSignature = context.lamportsPerSignature;\n    const minimumTokenAccountBalance = context.minimumTokenAccountBalance;\n\n    const expectedFee = SolanaSDK.FeeAmount.zero();\n\n    // fee for payer's signature\n    expectedFee.transaction = new u64(expectedFee.transaction.add(lamportsPerSignature));\n\n    // fee for owner's signature\n    expectedFee.transaction = new u64(expectedFee.transaction.add(lamportsPerSignature));\n\n    // when source token is native SOL\n    if (sourceTokenMint.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n      // WSOL's signature\n      expectedFee.transaction = new u64(expectedFee.transaction.add(lamportsPerSignature));\n    }\n\n    // when needed to create destination\n    if (\n      destinationInfo.needCreateDestination &&\n      !destinationTokenMint.equals(SolanaSDKPublicKey.wrappedSOLMint)\n    ) {\n      expectedFee.accountBalances = new u64(\n        expectedFee.accountBalances.add(minimumTokenAccountBalance),\n      );\n    }\n\n    // when destination is native SOL\n    if (destinationTokenMint.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n      expectedFee.transaction = new u64(expectedFee.transaction.add(lamportsPerSignature));\n    }\n\n    // in transitive swap, there will be situation when swapping from SOL -> SPL that needs spliting transaction to 2 transactions\n    if (\n      swapPools?.length === 2 &&\n      sourceTokenMint.equals(SolanaSDKPublicKey.wrappedSOLMint) &&\n      !destinationAddress\n    ) {\n      expectedFee.transaction = new u64(expectedFee.transaction.add(lamportsPerSignature.muln(2)));\n    }\n\n    return expectedFee;\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport type { u64 } from '@solana/spl-token';\nimport type { PublicKey } from '@solana/web3.js';\n\nimport type { OrcaSwap, PoolsPair } from 'new/sdk/OrcaSwap';\nimport type { PreparedTransaction } from 'new/sdk/SolanaSDK';\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nimport type { TokenAccount } from '../models';\nimport { FeeRelayerError } from '../models';\nimport type {\n  FeeRelayerCalculator,\n  FeeRelayerContext,\n  FeeRelayerRelaySolanaClient,\n  TopUpAndActionPreparedParams,\n  TopUpPreparedParams,\n} from '../relay';\nimport { DefaultFeeRelayerCalculator } from '../relay';\nimport { SwapTransactionBuilder } from '../swap/transactionBuilder/SwapTransactionBuilder';\nimport type { SwapFeeRelayerCalculator } from './calculator';\nimport { DefaultSwapFeeRelayerCalculator } from './calculator';\nimport type { BuildContext } from './transactionBuilder';\n\ninterface SwapFeeRelayerType {\n  calculator: SwapFeeRelayerCalculator;\n\n  prepareSwapTransaction({\n    context,\n    sourceToken,\n    destinationTokenMint,\n    destinationAddress,\n    fee,\n    swapPools,\n    inputAmount,\n    slippage,\n  }: {\n    context: FeeRelayerContext;\n    sourceToken: TokenAccount;\n    destinationTokenMint: PublicKey;\n    destinationAddress?: PublicKey;\n    fee?: TokenAccount;\n    swapPools: PoolsPair;\n    inputAmount: u64;\n    slippage: number;\n  }): Promise<{\n    transactions: PreparedTransaction[];\n    additionalPaybackFee: u64;\n  }>;\n}\n\n// The service that allows users to create gas-less swap transactions.\nexport class SwapFeeRelayer implements SwapFeeRelayerType {\n  get userAccount(): PublicKey {\n    return this._owner;\n  }\n\n  private _owner: PublicKey;\n  private _solanaApiClient: FeeRelayerRelaySolanaClient;\n  private _orcaSwap: OrcaSwap;\n\n  private _swapCalculator: SwapFeeRelayerCalculator;\n  private _feeRelayerCalculator: FeeRelayerCalculator;\n\n  constructor({\n    owner,\n    solanaApiClient,\n    orcaSwap,\n    feeRelayerCalculator = new DefaultFeeRelayerCalculator(),\n  }: {\n    owner: PublicKey;\n    solanaApiClient: FeeRelayerRelaySolanaClient;\n    orcaSwap: OrcaSwap;\n    feeRelayerCalculator?: FeeRelayerCalculator;\n  }) {\n    this._owner = owner;\n    this._solanaApiClient = solanaApiClient;\n    this._orcaSwap = orcaSwap;\n    this._feeRelayerCalculator = feeRelayerCalculator;\n\n    this._swapCalculator = new DefaultSwapFeeRelayerCalculator({\n      solanaApiClient,\n      owner,\n    });\n  }\n\n  get calculator(): SwapFeeRelayerCalculator {\n    return this._swapCalculator;\n  }\n\n  /// Prepare swap transaction for relay\n  async prepareSwapTransaction({\n    context,\n    sourceToken,\n    destinationTokenMint,\n    destinationAddress,\n    fee,\n    swapPools,\n    inputAmount,\n    slippage,\n  }: {\n    context: FeeRelayerContext;\n    sourceToken: TokenAccount;\n    destinationTokenMint: PublicKey;\n    destinationAddress?: PublicKey | null;\n    fee?: TokenAccount | null;\n    swapPools: PoolsPair;\n    inputAmount: u64;\n    slippage: number;\n  }): Promise<{\n    transactions: PreparedTransaction[];\n    additionalPaybackFee: u64;\n  }> {\n    const preparedParams = await this._prepareForTopUpAndSwap({\n      context,\n      source: sourceToken,\n      destinationTokenMint,\n      destinationAddress,\n      payingFeeToken: fee,\n      swapPools,\n    });\n\n    const latestBlockhash = await this._solanaApiClient.getRecentBlockhash();\n\n    const buildContext: BuildContext = {\n      feeRelayerContext: context,\n      solanaApiClient: this._solanaApiClient,\n      orcaSwap: this._orcaSwap,\n      config: {\n        userAccount: this.userAccount,\n        pools: preparedParams.actionFeesAndPools.poolsPair,\n        inputAmount,\n        slippage,\n        sourceAccount: sourceToken,\n        destinationTokenMint,\n        destinationAddress,\n        blockhash: latestBlockhash,\n      },\n      env: {\n        instructions: [],\n        signers: [],\n        accountCreationFee: ZERO,\n        additionalPaybackFee: ZERO,\n      },\n    };\n\n    return SwapTransactionBuilder.prepareSwapTransaction(buildContext);\n  }\n\n  private async _prepareForTopUpAndSwap({\n    context,\n    source,\n    destinationTokenMint,\n    destinationAddress,\n    payingFeeToken,\n    swapPools,\n  }: {\n    context: FeeRelayerContext;\n    source: TokenAccount;\n    destinationTokenMint: PublicKey;\n    destinationAddress?: PublicKey | null;\n    payingFeeToken?: TokenAccount | null;\n    swapPools: PoolsPair;\n  }): Promise<TopUpAndActionPreparedParams> {\n    const swappingFee = await this._swapCalculator.calculateSwappingNetworkFees({\n      context,\n      swapPools,\n      sourceTokenMint: source.mint,\n      destinationTokenMint,\n      destinationAddress,\n    });\n\n    // TOP UP\n    let topUpPreparedParam: TopUpPreparedParams | null;\n    const balance = context.relayAccountStatus.balance;\n    if (\n      !payingFeeToken?.mint.equals(SolanaSDKPublicKey.wrappedSOLMint) &&\n      balance &&\n      balance.lt(swappingFee.total)\n    ) {\n      // Get real amounts needed for topping up\n      const topUpAmount = this._feeRelayerCalculator.calculateNeededTopUpAmount({\n        context,\n        expectedFee: swappingFee,\n        payingTokenMint: payingFeeToken?.mint,\n      }).total;\n\n      const expectedFee = this._feeRelayerCalculator.calculateExpectedFeeForTopUp(context);\n\n      // Get pools\n      let tradablePoolsPair: PoolsPair[];\n      if (payingFeeToken) {\n        tradablePoolsPair = await this._orcaSwap.getTradablePoolsPairs({\n          fromMint: payingFeeToken.mint.toString(),\n          toMint: SolanaSDKPublicKey.wrappedSOLMint.toString(),\n        });\n      } else {\n        tradablePoolsPair = [];\n      }\n\n      const topUpPools = this._orcaSwap.findBestPoolsPairForEstimatedAmount({\n        estimatedAmount: topUpAmount,\n        poolsPairs: tradablePoolsPair,\n      });\n      if (!topUpPools) {\n        throw FeeRelayerError.swapPoolsNotFound();\n      }\n\n      topUpPreparedParam = {\n        amount: topUpAmount,\n        expectedFee,\n        poolsPair: topUpPools,\n      };\n    } else {\n      topUpPreparedParam = null;\n    }\n\n    return {\n      topUpPreparedParam,\n      actionFeesAndPools: {\n        fee: swappingFee,\n        poolsPair: swapPools,\n      },\n    };\n  }\n}\n","import type { u64 } from '@solana/spl-token';\nimport type { Account, TransactionInstruction } from '@solana/web3.js';\nimport { Transaction } from '@solana/web3.js';\n\nimport {\n  calculateTransactionFee,\n  FeeAmount,\n  getAssociatedTokenAddressSync,\n  PreparedTransaction,\n} from 'new/sdk/SolanaSDK';\n\nimport { FeeRelayerError } from '../../models';\nimport type { BuildContext } from './BuildContext';\nimport {\n  buildSwapData,\n  checkClosingAccount,\n  checkDestination,\n  checkSigners,\n  checkSource,\n  checkSwapData,\n  checkTransitTokenAccount,\n} from './checking';\n\nexport class SwapTransactionBuilder {\n  static async prepareSwapTransaction(context: BuildContext): Promise<{\n    transactions: PreparedTransaction[];\n    additionalPaybackFee: u64;\n  }> {\n    context.env.userSource = context.config.sourceAccount.address;\n\n    const associatedToken = getAssociatedTokenAddressSync(\n      context.config.sourceAccount.mint,\n      context.feeRelayerContext.feePayerAddress,\n    );\n    if (context.env.userSource.equals(associatedToken)) {\n      throw FeeRelayerError.wrongAddress();\n    }\n\n    // check transit token\n    await checkTransitTokenAccount(context);\n\n    // check source\n    checkSource(context);\n\n    // check destination\n    await checkDestination(context);\n\n    // build swap data\n    checkSwapData(\n      context,\n      buildSwapData({\n        userAccount: context.config.userAccount,\n        pools: context.config.pools,\n        inputAmount: context.config.inputAmount,\n        minAmountOut: null,\n        slippage: context.config.slippage,\n        transitTokenMintPubkey: context.env.transitTokenMintPubkey,\n        needsCreateTransitTokenAccount: Boolean(context.env.needsCreateTransitTokenAccount),\n      }),\n    );\n\n    // closing accounts\n    checkClosingAccount(context);\n\n    // check signers\n    checkSigners(context);\n\n    const transactions: PreparedTransaction[] = [];\n\n    // include additional transaciton\n    const additionalTransaction = context.env.additionalTransaction;\n    if (additionalTransaction) {\n      transactions.push(additionalTransaction);\n    }\n\n    // make primary transaction\n    transactions.push(\n      await SwapTransactionBuilder.makeTransaction({\n        context: context,\n        instructions: context.env.instructions,\n        signers: context.env.signers,\n        blockhash: context.config.blockhash,\n        accountCreationFee: context.env.accountCreationFee,\n      }),\n    );\n\n    return {\n      transactions,\n      additionalPaybackFee: context.env.additionalPaybackFee,\n    };\n  }\n\n  static async makeTransaction({\n    context,\n    instructions,\n    signers = [],\n    blockhash,\n    accountCreationFee,\n  }: {\n    context: BuildContext;\n    instructions: TransactionInstruction[];\n    signers?: Account[];\n    blockhash: string;\n    accountCreationFee: u64;\n  }): Promise<PreparedTransaction> {\n    const transaction = new Transaction();\n    transaction.instructions = instructions;\n    transaction.recentBlockhash = blockhash;\n    transaction.feePayer = context.feeRelayerContext.feePayerAddress;\n\n    if (signers.length > 0) {\n      transaction.partialSign(...signers);\n    }\n\n    // let signedTransaction = transaction;\n    // transaction.setSigners(context.config.userAccount);\n    // signedTransaction = await context.solanaApiClient.provider.wallet.signTransaction(transaction);\n\n    // calculate fee first\n    const expectedFee = new FeeAmount({\n      // TODO: return when works\n      // transaction: new u64(\n      //   await signedTransaction.getEstimatedFee(context.solanaApiClient.provider.connection),\n      // ),\n      transaction: calculateTransactionFee(\n        transaction,\n        context.feeRelayerContext.lamportsPerSignature,\n      ),\n      accountBalances: accountCreationFee,\n    });\n\n    return new PreparedTransaction({\n      owner: context.config.userAccount, // instead of signers with owner\n      transaction,\n      signers,\n      expectedFee,\n    });\n  }\n}\n","import { Token, u64 } from '@solana/spl-token';\nimport { SystemProgram } from '@solana/web3.js';\n\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nimport type { BuildContext } from '../BuildContext';\n\nexport function checkClosingAccount(context: BuildContext): void {\n  const newAccount = context.env.sourceWSOLNewAccount;\n  if (newAccount) {\n    context.env.instructions.push(\n      Token.createCloseAccountInstruction(\n        SolanaSDKPublicKey.tokenProgramId,\n        newAccount.publicKey,\n        context.config.userAccount,\n        context.config.userAccount,\n        [],\n      ),\n    );\n  }\n  // close destination\n  const newAccountNew = context.env.destinationNewAccount;\n  if (\n    newAccountNew &&\n    context.config.destinationTokenMint.equals(SolanaSDKPublicKey.wrappedSOLMint)\n  ) {\n    context.env.instructions.push(\n      ...[\n        Token.createCloseAccountInstruction(\n          SolanaSDKPublicKey.tokenProgramId,\n          newAccountNew.publicKey,\n          context.config.userAccount,\n          context.config.userAccount,\n          [],\n        ),\n        SystemProgram.transfer({\n          fromPubkey: context.config.userAccount,\n          toPubkey: context.feeRelayerContext.feePayerAddress,\n          lamports: context.feeRelayerContext.minimumTokenAccountBalance.toNumber(),\n        }),\n      ],\n    );\n    context.env.accountCreationFee = new u64(\n      context.env.accountCreationFee.sub(context.feeRelayerContext.minimumTokenAccountBalance),\n    );\n  }\n}\n","import { Token, u64 } from '@solana/spl-token';\nimport { Account, SystemProgram } from '@solana/web3.js';\n\nimport { AccountInfo, getAssociatedTokenAddressSync, SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nimport { DestinationAnalysator } from '../../helper';\nimport type { BuildContext } from '../BuildContext';\nimport { SwapTransactionBuilder } from '../SwapTransactionBuilder';\n\nexport async function checkDestination(context: BuildContext): Promise<void> {\n  let destinationNewAccount: Account | undefined;\n\n  const destinationInfo = await DestinationAnalysator.analyseDestination({\n    apiClient: context.solanaApiClient,\n    destination: context.config.destinationAddress,\n    mint: context.config.destinationTokenMint,\n    userAccount: context.config.userAccount,\n  });\n\n  let userDestinationTokenAccountAddress = destinationInfo.destination.address;\n\n  if (destinationInfo.needCreateDestination) {\n    if (destinationInfo.destination.mint.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n      // For native solana, create and initialize WSOL\n      destinationNewAccount = new Account();\n      context.env.instructions.push(\n        ...[\n          SystemProgram.createAccount({\n            fromPubkey: context.feeRelayerContext.feePayerAddress,\n            newAccountPubkey: destinationNewAccount.publicKey,\n            lamports: context.feeRelayerContext.minimumTokenAccountBalance.toNumber(),\n            space: AccountInfo.span,\n            programId: SolanaSDKPublicKey.tokenProgramId,\n          }),\n          Token.createInitAccountInstruction(\n            SolanaSDKPublicKey.tokenProgramId,\n            destinationInfo.destination.mint,\n            destinationNewAccount.publicKey,\n            context.config.userAccount,\n          ),\n        ],\n      );\n      userDestinationTokenAccountAddress = destinationNewAccount.publicKey;\n      context.env.accountCreationFee = context.env.accountCreationFee.add(\n        context.feeRelayerContext.minimumTokenAccountBalance,\n      );\n    } else {\n      // For other token, create associated token address\n      const associatedAddress = getAssociatedTokenAddressSync(\n        destinationInfo.destination.mint,\n        context.config.userAccount,\n      );\n\n      const instruction = Token.createAssociatedTokenAccountInstruction(\n        SolanaSDKPublicKey.splAssociatedTokenAccountProgramId,\n        SolanaSDKPublicKey.tokenProgramId,\n        destinationInfo.destination.mint,\n        associatedAddress,\n        context.config.userAccount,\n        context.feeRelayerContext.feePayerAddress,\n      );\n\n      // SPECIAL CASE WHEN WE SWAP FROM SOL TO NON-CREATED SPL TOKEN, THEN WE NEEDS ADDITIONAL TRANSACTION BECAUSE TRANSACTION IS TOO LARGE\n      if (context.env.sourceWSOLNewAccount) {\n        context.env.additionalTransaction = await SwapTransactionBuilder.makeTransaction({\n          context,\n          instructions: [instruction],\n          // there was signers: [context.config.userAccount]\n          blockhash: context.config.blockhash,\n          accountCreationFee: context.feeRelayerContext.minimumTokenAccountBalance,\n        });\n      } else {\n        context.env.instructions.push(instruction);\n        context.env.accountCreationFee = new u64(\n          context.env.accountCreationFee.add(context.feeRelayerContext.minimumTokenAccountBalance),\n        );\n      }\n      userDestinationTokenAccountAddress = associatedAddress;\n    }\n  }\n\n  context.env.destinationNewAccount = destinationNewAccount;\n  context.env.userDestinationTokenAccountAddress = userDestinationTokenAccountAddress;\n}\n","import type { BuildContext } from '../BuildContext';\n\nexport function checkSigners(context: BuildContext): void {\n  // context.env.signers.push(context.config.userAccount) // can't do it on web\n  if (context.env.sourceWSOLNewAccount) {\n    context.env.signers.push(context.env.sourceWSOLNewAccount);\n  }\n  if (context.env.destinationNewAccount) {\n    context.env.signers.push(context.env.destinationNewAccount);\n  }\n}\n","import { Token, u64 } from '@solana/spl-token';\nimport { Account, SystemProgram } from '@solana/web3.js';\n\nimport { AccountInfo, SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nimport type { BuildContext } from '../BuildContext';\n\nexport function checkSource(context: BuildContext): void {\n  let sourceWSOLNewAccount: Account | undefined;\n  if (context.config.sourceAccount.mint.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n    sourceWSOLNewAccount = new Account();\n    context.env.instructions.push(\n      ...[\n        SystemProgram.transfer({\n          fromPubkey: context.config.userAccount,\n          toPubkey: context.feeRelayerContext.feePayerAddress,\n          lamports: context.config.inputAmount.toNumber(),\n        }),\n        SystemProgram.createAccount({\n          fromPubkey: context.feeRelayerContext.feePayerAddress,\n          newAccountPubkey: sourceWSOLNewAccount.publicKey,\n          lamports: context.feeRelayerContext.minimumTokenAccountBalance\n            .add(context.config.inputAmount)\n            .toNumber(),\n          space: AccountInfo.span,\n          programId: SolanaSDKPublicKey.tokenProgramId,\n        }),\n        Token.createInitAccountInstruction(\n          SolanaSDKPublicKey.tokenProgramId,\n          SolanaSDKPublicKey.wrappedSOLMint,\n          sourceWSOLNewAccount.publicKey,\n          context.config.userAccount,\n        ),\n      ],\n    );\n    context.env.userSource = sourceWSOLNewAccount.publicKey;\n    context.env.additionalPaybackFee = new u64(\n      context.env.additionalPaybackFee.add(context.feeRelayerContext.minimumTokenAccountBalance),\n    );\n  }\n\n  context.env.sourceWSOLNewAccount = sourceWSOLNewAccount;\n}\n","import { Token } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\n\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nimport { FeeRelayerError } from '../../../models';\nimport { DirectSwapData, TransitiveSwapData } from '../../../relay';\nimport { RelayProgram } from '../../../relayProgram';\nimport type { BuildContext } from '../BuildContext';\nimport type { SwapData } from './SwapDataBuilder';\n\nexport function checkSwapData(context: BuildContext, swapData: SwapData): void {\n  const userTransferAuthority = swapData.transferAuthorityAccount?.publicKey;\n\n  const swap = swapData.swapData;\n  switch (swap.constructor) {\n    case DirectSwapData: {\n      const pool = context.config.pools[0];\n      if (!pool) {\n        throw FeeRelayerError.swapPoolsNotFound();\n      }\n\n      // approve\n      if (userTransferAuthority) {\n        context.env.instructions.push(\n          Token.createApproveInstruction(\n            SolanaSDKPublicKey.tokenProgramId,\n            context.env.userSource!,\n            userTransferAuthority,\n            context.config.userAccount,\n            [],\n            (swap as DirectSwapData).amountIn,\n          ),\n        );\n      }\n\n      // swap\n      context.env.instructions.push(\n        pool.createSwapInstruction({\n          userTransferAuthorityPubkey: userTransferAuthority ?? context.config.userAccount,\n          sourceTokenAddress: context.env.userSource!,\n          destinationTokenAddress: context.env.userDestinationTokenAccountAddress!,\n          amountIn: (swap as DirectSwapData).amountIn,\n          minAmountOut: (swap as DirectSwapData).minimumAmountOut,\n        }),\n      );\n\n      break;\n    }\n    case TransitiveSwapData: {\n      // approve\n      if (userTransferAuthority) {\n        context.env.instructions.push(\n          Token.createApproveInstruction(\n            SolanaSDKPublicKey.tokenProgramId,\n            context.env.userSource!,\n            userTransferAuthority,\n            context.config.userAccount,\n            [],\n            (swap as TransitiveSwapData).from.amountIn,\n          ),\n        );\n      }\n\n      // create transit token account\n      const transitTokenMint = new PublicKey((swap as TransitiveSwapData).transitTokenMintPubkey);\n      const transitTokenAccountAddressNew = RelayProgram.getTransitTokenAccountAddress({\n        user: context.config.userAccount,\n        transitTokenMint,\n        network: context.solanaApiClient.endpoint.network,\n      });\n\n      if (context.env.needsCreateTransitTokenAccount) {\n        context.env.instructions.push(\n          RelayProgram.createTransitTokenAccountInstruction({\n            feePayer: context.feeRelayerContext.feePayerAddress,\n            userAuthority: context.config.userAccount,\n            transitTokenAccount: transitTokenAccountAddressNew,\n            transitTokenMint,\n            network: context.solanaApiClient.endpoint.network,\n          }),\n        );\n      }\n\n      // relay swap\n      context.env.instructions.push(\n        RelayProgram.createRelaySwapInstruction({\n          transitiveSwap: swap as TransitiveSwapData,\n          userAuthorityAddressPubkey: context.config.userAccount,\n          sourceAddressPubkey: context.env.userSource!,\n          transitTokenAccount: transitTokenAccountAddressNew,\n          destinationAddressPubkey: context.env.userDestinationTokenAccountAddress!,\n          feePayerPubkey: context.feeRelayerContext.feePayerAddress,\n          network: context.solanaApiClient.endpoint.network,\n        }),\n      );\n      break;\n    }\n    default:\n      throw new Error('unsupported swap type');\n  }\n}\n","import { TransitTokenAccountAnalysator } from '../../helper';\nimport type { BuildContext } from '../BuildContext';\n\nexport async function checkTransitTokenAccount(context: BuildContext): Promise<void> {\n  const transitToken = TransitTokenAccountAnalysator.getTransitToken({\n    solanaApiClient: context.solanaApiClient,\n    orcaSwap: context.orcaSwap,\n    account: context.config.userAccount,\n    pools: context.config.pools,\n  });\n\n  const needsCreateTransitTokenAccount =\n    await TransitTokenAccountAnalysator.checkIfNeedsCreateTransitTokenAccount({\n      solanaApiClient: context.solanaApiClient,\n      transitToken,\n    });\n\n  context.env.needsCreateTransitTokenAccount = needsCreateTransitTokenAccount;\n  context.env.transitTokenAccountAddress = transitToken?.address;\n  context.env.transitTokenMintPubkey = transitToken?.mint;\n}\n","import { ZERO } from '@orca-so/sdk';\nimport type { u64 } from '@solana/spl-token';\nimport type { PublicKey } from '@solana/web3.js';\nimport { Account } from '@solana/web3.js';\n\nimport type { Pool, PoolsPair } from 'new/sdk/OrcaSwap';\n\nimport { FeeRelayerError } from '../../../models';\nimport type { FeeRelayerRelaySwapType } from '../../../relay';\nimport { DirectSwapData, TransitiveSwapData } from '../../../relay';\n\nexport interface SwapData {\n  swapData: FeeRelayerRelaySwapType;\n  transferAuthorityAccount: Account | null;\n}\n\nexport function buildSwapData({\n  userAccount,\n  pools,\n  inputAmount,\n  minAmountOut,\n  slippage,\n  transitTokenMintPubkey = null,\n  newTransferAuthority = false,\n  needsCreateTransitTokenAccount,\n}: {\n  userAccount: PublicKey;\n  pools: PoolsPair;\n  inputAmount?: u64 | null;\n  minAmountOut?: u64 | null;\n  slippage: number;\n  transitTokenMintPubkey?: PublicKey | null;\n  newTransferAuthority?: boolean;\n  needsCreateTransitTokenAccount: boolean;\n}): SwapData {\n  // preconditions\n  if (pools.length === 0 || pools.length > 2) {\n    throw FeeRelayerError.swapPoolsNotFound();\n  }\n  if (!inputAmount && !minAmountOut) {\n    throw FeeRelayerError.invalidAmount();\n  }\n\n  // create transferAuthority\n  const transferAuthority = new Account();\n\n  // form topUp params\n  if (pools.length === 1) {\n    const pool = pools[0]!;\n\n    const amountIn = inputAmount ?? pool.getInputAmountSlippage(minAmountOut!, slippage);\n    const minAmountOutNew = minAmountOut ?? pool.getMinimumAmountOut(inputAmount!, slippage);\n    if (!amountIn || !minAmountOutNew) {\n      throw FeeRelayerError.invalidAmount();\n    }\n\n    const directSwapData = getSwapData({\n      pool,\n      transferAuthorityPubkey: newTransferAuthority ? transferAuthority.publicKey : userAccount,\n      amountIn,\n      minAmountOut: minAmountOutNew,\n    });\n    return {\n      swapData: directSwapData,\n      transferAuthorityAccount: newTransferAuthority ? transferAuthority : null,\n    };\n  } else {\n    const firstPool = pools[0]!;\n    const secondPool = pools[1]!;\n\n    if (!transitTokenMintPubkey) {\n      throw FeeRelayerError.transitTokenMintNotFound();\n    }\n\n    // if input amount is provided\n    let firstPoolAmountIn = inputAmount;\n    let secondPoolAmountIn: u64 | null = null;\n    let secondPoolAmountOut = minAmountOut;\n\n    if (inputAmount) {\n      secondPoolAmountIn = firstPool.getMinimumAmountOut(inputAmount, slippage) ?? ZERO;\n      secondPoolAmountOut = secondPool.getMinimumAmountOut(secondPoolAmountIn, slippage);\n    } else if (minAmountOut) {\n      secondPoolAmountIn = secondPool.getInputAmountSlippage(minAmountOut, slippage) ?? ZERO;\n      firstPoolAmountIn = firstPool.getInputAmountSlippage(secondPoolAmountIn, slippage);\n    }\n\n    if (!firstPoolAmountIn || !secondPoolAmountIn || !secondPoolAmountOut) {\n      throw FeeRelayerError.invalidAmount();\n    }\n\n    const transitiveSwapData = new TransitiveSwapData({\n      from: getSwapData({\n        pool: firstPool,\n        transferAuthorityPubkey: newTransferAuthority ? transferAuthority.publicKey : userAccount,\n        amountIn: firstPoolAmountIn,\n        minAmountOut: secondPoolAmountIn,\n      }),\n      to: getSwapData({\n        pool: secondPool,\n        transferAuthorityPubkey: newTransferAuthority ? transferAuthority.publicKey : userAccount,\n        amountIn: secondPoolAmountIn,\n        minAmountOut: secondPoolAmountOut,\n      }),\n      transitTokenMintPubkey: transitTokenMintPubkey.toString(),\n      needsCreateTransitTokenAccount,\n    });\n    return {\n      swapData: transitiveSwapData,\n      transferAuthorityAccount: newTransferAuthority ? transferAuthority : null,\n    };\n  }\n}\n\n// Pool extension\n\nexport function getSwapData({\n  pool,\n  transferAuthorityPubkey,\n  amountIn,\n  minAmountOut,\n}: {\n  pool: Pool;\n  transferAuthorityPubkey: PublicKey;\n  amountIn: u64;\n  minAmountOut: u64;\n}): DirectSwapData {\n  return new DirectSwapData({\n    programId: pool.swapProgramId.toString(),\n    accountPubkey: pool.account,\n    authorityPubkey: pool.authority,\n    transferAuthorityPubkey: transferAuthorityPubkey.toString(),\n    sourcePubkey: pool.tokenAccountA,\n    destinationPubkey: pool.tokenAccountB,\n    poolTokenMintPubkey: pool.poolTokenMint,\n    poolFeeAccountPubkey: pool.feeAccount,\n    amountIn,\n    minimumAmountOut: minAmountOut,\n  });\n}\n","import { plainToInstance } from 'class-transformer';\n\nimport type { Pools, ProgramIDS, TokenValue } from 'new/sdk/OrcaSwap';\nimport { OrcaInfoResponse } from 'new/sdk/OrcaSwap';\n\nimport type { OrcaSwapConfigsProvider } from './ConfigsProvider';\n\ninterface OrcaSwapAPIClient {\n  readonly configProvider: OrcaSwapConfigsProvider;\n  reload(): Promise<void>;\n  getTokens(): Promise<Map<string, TokenValue>>;\n  getPools(): Promise<Pools>;\n  getProgramID(): Promise<ProgramIDS>;\n}\n\nexport class APIClient implements OrcaSwapAPIClient {\n  configProvider: OrcaSwapConfigsProvider;\n\n  constructor(configsProvider: OrcaSwapConfigsProvider) {\n    this.configProvider = configsProvider;\n  }\n\n  async reload(): Promise<void> {\n    await this.configProvider.getData(true);\n  }\n\n  async getTokens(): Promise<Map<string, TokenValue>> {\n    const data = await this.configProvider.getConfigs<OrcaInfoResponse>();\n    const response = plainToInstance(OrcaInfoResponse, data);\n    return response.value.tokens;\n  }\n\n  async getPools(): Promise<Pools> {\n    const data = await this.configProvider.getConfigs<OrcaInfoResponse>();\n    const response = plainToInstance(OrcaInfoResponse, data);\n    const pools = new Map();\n    response.value.pools.forEach((pool, key) => {\n      if (!pool.deprecated) {\n        pools.set(key, pool);\n      }\n    });\n    return pools;\n  }\n\n  async getProgramID(): Promise<ProgramIDS> {\n    const data = await this.configProvider.getConfigs<OrcaInfoResponse>();\n    const response = plainToInstance(OrcaInfoResponse, data);\n    return response.value.programIds;\n  }\n}\n","import type { Network } from '@saberhq/solana-contrib';\n\nexport interface OrcaSwapConfigsProvider {\n  getData<T>(reload: boolean): Promise<T>;\n  getConfigs<T>(): Promise<T>;\n}\n\nexport class NetworkConfigsProvider implements OrcaSwapConfigsProvider {\n  network: string;\n  cache?: any;\n  private _urlString = 'https://orca.wallet.p2p.org/info';\n\n  constructor(network: Network) {\n    this.network = network;\n  }\n\n  async getData<T>(reload = false): Promise<T> {\n    if (!reload && this.cache) {\n      return Promise.resolve(this.cache);\n    }\n    // hack: network\n    if (this.network === 'mainnet-beta') {\n      this.network = 'mainnet';\n    }\n\n    // get\n    const data = await (await fetch(this._urlString)).json();\n\n    this.cache = data;\n\n    return Promise.resolve(data);\n  }\n\n  async getConfigs<T>(): Promise<T> {\n    return this.getData<T>(false);\n  }\n}\n","import { SolanaSDK } from 'new/sdk/SolanaSDK';\n\nexport class OrcaSwapSolanaClient extends SolanaSDK {}\n","export class OrcaSwapError extends Error {\n  static notFound() {\n    return new OrcaSwapError('Not found');\n  }\n\n  static swapInfoMissing() {\n    return new OrcaSwapError('Swap is not available');\n  }\n\n  static accountBalanceNotFound() {\n    return new OrcaSwapError('Account balance is not found');\n  }\n\n  static unauthorized() {\n    return new OrcaSwapError('Unauthorized');\n  }\n\n  static couldNotEstimatedMinimumOutAmount() {\n    return new OrcaSwapError('Could not estimate minimum output amount');\n  }\n\n  // Pools\n\n  static invalidPool() {\n    return new OrcaSwapError('Invalid pool');\n  }\n\n  static ampDoesNotExistInPoolConfig() {\n    return new OrcaSwapError('amp does not exist in poolConfig');\n  }\n\n  static estimatedAmountIsTooHigh() {\n    return new OrcaSwapError('Estimated amount is too high');\n  }\n\n  static invalidNumberOfTransactions() {\n    return new OrcaSwapError('Number of transactions is invalid');\n  }\n\n  // Unknown\n\n  static unknown() {\n    return new OrcaSwapError('Unknown error');\n  }\n\n  static intermediaryTokenAddressNotFound() {\n    return new OrcaSwapError('Intermediary token address not found');\n  }\n}\n","import { ONE, ZERO } from '@orca-so/sdk';\nimport { computeInputAmount, computeOutputAmount } from '@orca-so/stablecurve';\nimport { Token, u64 } from '@solana/spl-token';\nimport { TokenSwap } from '@solana/spl-token-swap';\nimport type { Signer, TransactionInstruction } from '@solana/web3.js';\nimport { PublicKey } from '@solana/web3.js';\nimport { Transform, Type } from 'class-transformer';\n\nimport type { TokenValue } from 'new/sdk/OrcaSwap';\nimport type { Lamports, TokenAccountBalance } from 'new/sdk/SolanaSDK';\nimport { AccountInstructions } from 'new/sdk/SolanaSDK';\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK/extensions/PublicKey/PublicKeyExtensions';\n\nimport type { OrcaSwapSolanaClient } from '../apiClient/OrcaSwapSolanaClient';\nimport { OrcaSwapError } from './OrcaSwapError';\n\nconst STABLE = 'Stable';\nconst CONSTANT_PRODUCT = 'ConstantProduct';\n\nconst VERSION_1 = 1;\nconst VERSION_2 = 2;\n\ntype CurveType = 'ConstantProduct' | 'ConstantPrice' | 'Stable' | 'Offset';\n\nexport class OrcaSwapTokenName {\n  private _tokenName: string;\n\n  constructor(tokenName: string) {\n    this._tokenName = tokenName;\n  }\n\n  get fixedTokenName(): string {\n    return this._tokenName.split('[').shift()!;\n  }\n\n  toString(): string {\n    return this._tokenName;\n  }\n}\n\nexport class Pool {\n  // @ts-ignore\n  account: string;\n  // @ts-ignore\n  authority: string;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  nonce: u64;\n  // @ts-ignore\n  poolTokenMint: string;\n  // @ts-ignore\n  tokenAccountA: string;\n  // @ts-ignore\n  tokenAccountB: string;\n  // @ts-ignore\n  feeAccount: string;\n  // @ts-ignore\n  hostFeeAccount: string | null = null;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  feeNumerator: u64;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  feeDenominator: u64;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  ownerTradeFeeNumerator: u64;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  ownerTradeFeeDenominator: u64;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  ownerWithdrawFeeNumerator: u64;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  ownerWithdrawFeeDenominator: u64;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  hostFeeNumerator: u64;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  // @ts-ignore\n  hostFeeDenominator: u64;\n  @Type(() => OrcaSwapTokenName)\n  @Transform(({ value }) => new OrcaSwapTokenName(value))\n  // @ts-ignore\n  tokenAName: OrcaSwapTokenName;\n  @Type(() => OrcaSwapTokenName)\n  @Transform(({ value }) => new OrcaSwapTokenName(value))\n  // @ts-ignore\n  tokenBName: OrcaSwapTokenName;\n  // @ts-ignore\n  curveType: CurveType;\n  @Type(() => u64)\n  @Transform(({ value }) => new u64(value))\n  amp: u64 | undefined;\n  programVersion: number | undefined = 1;\n  deprecated: boolean | undefined = false;\n\n  // balance (lazy load)\n  tokenABalance?: TokenAccountBalance;\n  tokenBBalance?: TokenAccountBalance;\n\n  isStable?: boolean;\n\n  // constructor({\n  //   account,\n  //   authority,\n  //   nonce,\n  //   poolTokenMint,\n  //   tokenAccountA,\n  //   tokenAccountB,\n  //   feeAccount,\n  //   hostFeeAccount = null,\n  //   feeNumerator,\n  //   feeDenominator,\n  //   ownerTradeFeeNumerator,\n  //   ownerTradeFeeDenominator,\n  //   ownerWithdrawFeeNumerator,\n  //   ownerWithdrawFeeDenominator,\n  //   hostFeeNumerator,\n  //   hostFeeDenominator,\n  //   tokenAName,\n  //   tokenBName,\n  //   curveType,\n  //   amp,\n  //   programVersion = 1,\n  //   deprecated,\n  // }: {\n  //   account: string;\n  //   authority: string;\n  //   nonce: u64;\n  //   poolTokenMint: string;\n  //   tokenAccountA: string;\n  //   tokenAccountB: string;\n  //   feeAccount: string;\n  //   hostFeeAccount: string | null;\n  //   feeNumerator: u64;\n  //   feeDenominator: u64;\n  //   ownerTradeFeeNumerator: u64;\n  //   ownerTradeFeeDenominator: u64;\n  //   ownerWithdrawFeeNumerator: u64;\n  //   ownerWithdrawFeeDenominator: u64;\n  //   hostFeeNumerator: u64;\n  //   hostFeeDenominator: u64;\n  //   tokenAName: OrcaSwapTokenName;\n  //   tokenBName: OrcaSwapTokenName;\n  //   curveType: CurveType;\n  //   amp: u64 | undefined;\n  //   programVersion: number | undefined;\n  //   deprecated: boolean | undefined;\n  // }) {\n  //   this.account = account;\n  //   this.authority = authority;\n  //   this.nonce = nonce;\n  //   this.poolTokenMint = poolTokenMint;\n  //   this.tokenAccountA = tokenAccountA;\n  //   this.tokenAccountB = tokenAccountB;\n  //   this.feeAccount = feeAccount;\n  //   this.hostFeeAccount = hostFeeAccount;\n  //   this.feeNumerator = feeNumerator;\n  //   this.feeDenominator = feeDenominator;\n  //   this.ownerTradeFeeNumerator = ownerTradeFeeNumerator;\n  //   this.ownerTradeFeeDenominator = ownerTradeFeeDenominator;\n  //   this.ownerWithdrawFeeNumerator = ownerWithdrawFeeNumerator;\n  //   this.ownerWithdrawFeeDenominator = ownerWithdrawFeeDenominator;\n  //   this.hostFeeNumerator = hostFeeNumerator;\n  //   this.hostFeeDenominator = hostFeeDenominator;\n  //   this.tokenAName = tokenAName;\n  //   this.tokenBName = tokenBName;\n  //   this.curveType = curveType;\n  //   this.amp = amp;\n  //   this.programVersion = programVersion;\n  //   this.deprecated = deprecated;\n  // }\n\n  get reversed() {\n    // https://stackoverflow.com/a/44782052/1024097\n    const reversedPool = Object.assign(Object.create(Object.getPrototypeOf(this)), this);\n\n    const [tokenAccountB, tokenAccountA] = [reversedPool.tokenAccountA, reversedPool.tokenAccountB];\n    reversedPool.tokenAccountA = tokenAccountA;\n    reversedPool.tokenAccountB = tokenAccountB;\n\n    const [tokenBName, tokenAName] = [reversedPool.tokenAName, reversedPool.tokenBName];\n    reversedPool.tokenAName = tokenAName;\n    reversedPool.tokenBName = tokenBName;\n\n    const [tokenBBalance, tokenABalance] = [reversedPool.tokenABalance, reversedPool.tokenBBalance];\n    reversedPool.tokenABalance = tokenABalance;\n    reversedPool.tokenBBalance = tokenBBalance;\n\n    return reversedPool;\n  }\n\n  getTokenBDecimals(): number | null {\n    return this.tokenBBalance?.decimals ?? null;\n  }\n\n  getTokenADecimals(): number | null {\n    return this.tokenABalance?.decimals ?? null;\n  }\n\n  get swapProgramId(): PublicKey {\n    return SolanaSDKPublicKey.orcaSwapId(this.programVersion === VERSION_2 ? VERSION_2 : VERSION_1);\n  }\n\n  getMinimumAmountOut(inputAmount: u64, slippage: number): u64 {\n    const estimatedOutputAmount = this.getOutputAmount(inputAmount);\n    // don't lose precision\n    return new u64(estimatedOutputAmount.toNumber() * (1 - slippage));\n  }\n\n  getInputAmountSlippage(minimumReceiveAmount: u64, slippage: number): u64 | null {\n    if (slippage === 1) {\n      return null;\n    }\n\n    const estimatedAmount = minimumReceiveAmount.divn(1 - slippage);\n    return this.getInputAmount(estimatedAmount);\n  }\n\n  createSwapInstruction({\n    userTransferAuthorityPubkey,\n    sourceTokenAddress,\n    destinationTokenAddress,\n    amountIn,\n    minAmountOut,\n  }: {\n    userTransferAuthorityPubkey: PublicKey;\n    sourceTokenAddress: PublicKey;\n    destinationTokenAddress: PublicKey;\n    amountIn: u64;\n    minAmountOut: u64;\n  }): TransactionInstruction {\n    return TokenSwap.swapInstruction(\n      new PublicKey(this.account),\n      new PublicKey(this.authority),\n      new PublicKey(userTransferAuthorityPubkey),\n      new PublicKey(sourceTokenAddress),\n      new PublicKey(this.tokenAccountA),\n      new PublicKey(this.tokenAccountB),\n      new PublicKey(destinationTokenAddress),\n      new PublicKey(this.poolTokenMint),\n      new PublicKey(this.feeAccount),\n      this.hostFeeAccount ? new PublicKey(this.hostFeeAccount) : null,\n      new PublicKey(this.swapProgramId),\n      SolanaSDKPublicKey.tokenProgramId,\n      amountIn,\n      minAmountOut,\n    );\n  }\n\n  getOutputAmount(inputAmount: u64): u64 {\n    const fees = this.getFee(inputAmount);\n    const inputAmountLessFee = inputAmount.sub(fees);\n    return this._getOutputAmount(inputAmountLessFee);\n  }\n\n  getInputAmount(estimatedAmount: u64): u64 | null {\n    const poolInputAmount = this.tokenABalance?.amountInU64;\n    const poolOutputAmount = this.tokenBBalance?.amountInU64;\n    if (!poolInputAmount || !poolOutputAmount) {\n      throw OrcaSwapError.accountBalanceNotFound();\n    }\n\n    if (estimatedAmount.gt(poolOutputAmount)) {\n      throw OrcaSwapError.estimatedAmountIsTooHigh();\n    }\n\n    switch (this.curveType) {\n      case STABLE: {\n        const amp = this.amp;\n        if (!amp) {\n          throw OrcaSwapError.ampDoesNotExistInPoolConfig();\n        }\n\n        const inputAmountLessFee = computeInputAmount(\n          estimatedAmount,\n          poolInputAmount,\n          poolOutputAmount,\n          amp,\n        );\n        const inputAmount = inputAmountLessFee\n          .mul(this.feeDenominator)\n          .div(this.feeDenominator.sub(this.feeNumerator));\n\n        return new u64(inputAmount.toString());\n      }\n      case CONSTANT_PRODUCT: {\n        const invariant = poolInputAmount.mul(poolOutputAmount);\n\n        const newPoolInputAmount = ceilingDivision(\n          invariant,\n          poolOutputAmount.sub(estimatedAmount),\n        ).quotient;\n        const inputAmountLessFees = newPoolInputAmount.sub(poolInputAmount);\n\n        let feeRatioNumerator: u64;\n        let feeRatioDenominator: u64;\n\n        if (this.ownerTradeFeeDenominator.eq(ZERO)) {\n          feeRatioNumerator = this.feeDenominator;\n          feeRatioDenominator = this.feeDenominator.sub(this.feeNumerator);\n        } else {\n          feeRatioNumerator = this.feeDenominator.mul(this.ownerTradeFeeDenominator);\n          feeRatioDenominator = this.feeDenominator\n            .mul(this.ownerTradeFeeDenominator)\n            .sub(this.feeNumerator.mul(this.ownerTradeFeeDenominator))\n            .sub(this.ownerTradeFeeNumerator.mul(this.feeDenominator));\n        }\n\n        const inputAmount = inputAmountLessFees.mul(feeRatioNumerator).div(feeRatioDenominator);\n        return new u64(inputAmount.toString());\n      }\n      default: {\n        return null;\n      }\n    }\n  }\n\n  calculatingFees(inputAmount: u64): u64 {\n    const inputFees = this.getFee(inputAmount);\n    return this._getOutputAmount(inputFees);\n  }\n\n  // Public methods\n\n  /// Construct exchange\n  async constructExchange({\n    tokens,\n    solanaClient,\n    owner,\n    fromTokenPubkey,\n    toTokenPubkey,\n    amount,\n    slippage,\n    feePayer,\n    minRentExemption,\n  }: {\n    tokens: Map<string, TokenValue>;\n    solanaClient: OrcaSwapSolanaClient;\n    owner: PublicKey;\n    fromTokenPubkey: string;\n    intermediaryTokenAddress?: string;\n    toTokenPubkey?: string;\n    amount: u64;\n    slippage: number;\n    feePayer?: PublicKey | null;\n    minRentExemption: u64;\n  }): Promise<[AccountInstructions, Lamports /*account creation fee*/]> {\n    const fromMintStr = tokens.get(this.tokenAName.toString())?.mint;\n    const fromMint = fromMintStr ? new PublicKey(fromMintStr) : null;\n    const toMintStr = tokens.get(this.tokenBName.toString())?.mint;\n    const toMint = toMintStr ? new PublicKey(toMintStr) : null;\n    const fromTokenPubkeyNew = new PublicKey(fromTokenPubkey);\n\n    if (!fromMint || !toMint || !fromTokenPubkeyNew) {\n      throw OrcaSwapError.notFound();\n    }\n\n    // Create fromTokenAccount when needed\n    let sourceAccountInstructions: AccountInstructions;\n\n    if (fromMint.equals(SolanaSDKPublicKey.wrappedSOLMint) && owner.equals(fromTokenPubkeyNew)) {\n      sourceAccountInstructions = await solanaClient.prepareCreatingWSOLAccountAndCloseWhenDone(\n        owner,\n        amount,\n        feePayer ?? owner,\n      );\n    } else {\n      sourceAccountInstructions = new AccountInstructions({ account: fromTokenPubkeyNew });\n    }\n\n    // If necessary, create a TokenAccount for the output token\n    let destinationAccountInstructions: AccountInstructions;\n\n    // If destination token is Solana, create WSOL if needed\n    if (toMint.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n      const toTokenPubkeyNew = toTokenPubkey ? new PublicKey(toTokenPubkey) : null;\n      if (toTokenPubkeyNew && !toTokenPubkeyNew?.equals(owner)) {\n        // wrapped sol has already been created, just return it, then close later\n        destinationAccountInstructions = new AccountInstructions({\n          account: toTokenPubkeyNew,\n          cleanupInstructions: [\n            Token.createCloseAccountInstruction(\n              SolanaSDKPublicKey.tokenProgramId,\n              toTokenPubkeyNew,\n              owner,\n              owner,\n              [],\n            ),\n          ],\n        });\n      } else {\n        // create wrapped sol\n        destinationAccountInstructions =\n          await solanaClient.prepareCreatingWSOLAccountAndCloseWhenDone(\n            owner,\n            ZERO,\n            feePayer ?? owner,\n          );\n      }\n    } else {\n      // If destination is another token and has already been created\n      const toTokenPubkeyNew = toTokenPubkey ? new PublicKey(toTokenPubkey) : null;\n      if (toTokenPubkeyNew) {\n        destinationAccountInstructions = new AccountInstructions({\n          account: toTokenPubkeyNew,\n        });\n      }\n      // Create associated token address\n      else {\n        destinationAccountInstructions =\n          await solanaClient.prepareForCreatingAssociatedTokenAccount(\n            owner,\n            toMint,\n            feePayer ?? owner,\n            false,\n          );\n      }\n    }\n\n    // Combine request\n\n    // form instructions\n    const instructions: TransactionInstruction[] = [];\n    const cleanupInstructions: TransactionInstruction[] = [];\n    let accountCreationFee: u64 = ZERO;\n\n    // source\n    instructions.push(...sourceAccountInstructions.instructions);\n    cleanupInstructions.push(...sourceAccountInstructions.cleanupInstructions);\n    if (!sourceAccountInstructions.instructions.length) {\n      accountCreationFee = new u64(accountCreationFee.add(minRentExemption));\n    }\n\n    // destination\n    instructions.push(...destinationAccountInstructions.instructions);\n    cleanupInstructions.push(...destinationAccountInstructions.cleanupInstructions);\n    if (!destinationAccountInstructions.instructions.length) {\n      accountCreationFee = new u64(accountCreationFee.add(minRentExemption));\n    }\n\n    // swap instructions\n    let minAmountOut;\n    try {\n      minAmountOut = this.getMinimumAmountOut(amount, slippage);\n    } catch {\n      // ignore\n    }\n    if (!minAmountOut) {\n      throw OrcaSwapError.couldNotEstimatedMinimumOutAmount();\n    }\n\n    const swapInstruction = this.createSwapInstruction({\n      userTransferAuthorityPubkey: owner,\n      sourceTokenAddress: sourceAccountInstructions.account,\n      destinationTokenAddress: destinationAccountInstructions.account,\n      amountIn: amount,\n      minAmountOut,\n    });\n\n    instructions.push(swapInstruction);\n\n    const signers: Signer[] = [];\n    signers.push(...sourceAccountInstructions.signers);\n    signers.push(...destinationAccountInstructions.signers);\n\n    return [\n      new AccountInstructions({\n        account: destinationAccountInstructions.account,\n        instructions,\n        cleanupInstructions,\n        signers,\n      }),\n      accountCreationFee,\n    ];\n  }\n\n  // Helpers\n  getFee(inputAmount: u64) {\n    if (this.curveType !== STABLE && this.curveType !== CONSTANT_PRODUCT) {\n      throw OrcaSwapError.unknown();\n    }\n\n    const tradingFee = this._computeFee({\n      baseAmount: inputAmount,\n      feeNumerator: this.feeNumerator,\n      feeDenominator: this.feeDenominator,\n    });\n\n    const ownerFee = this._computeFee({\n      baseAmount: inputAmount,\n      feeNumerator: this.ownerTradeFeeNumerator,\n      feeDenominator: this.ownerTradeFeeDenominator,\n    });\n\n    return new u64(tradingFee.add(ownerFee));\n  }\n\n  private _getOutputAmount(inputAmount: u64): u64 {\n    const poolInputAmount = this.tokenABalance?.amountInU64;\n    const poolOutputAmount = this.tokenBBalance?.amountInU64;\n\n    if (!poolInputAmount || !poolOutputAmount) {\n      throw OrcaSwapError.accountBalanceNotFound();\n    }\n\n    switch (this.curveType) {\n      case STABLE: {\n        const amp = this.amp;\n        if (!amp) {\n          throw OrcaSwapError.ampDoesNotExistInPoolConfig();\n        }\n        return computeOutputAmount(inputAmount, poolInputAmount, poolOutputAmount, amp);\n      }\n      case CONSTANT_PRODUCT: {\n        const invariant = poolInputAmount.mul(poolOutputAmount);\n        const newPoolOutputAmount = ceilingDivision(\n          invariant,\n          poolInputAmount.add(inputAmount),\n        ).quotient;\n        return new u64(poolOutputAmount.sub(newPoolOutputAmount));\n      }\n      default: {\n        throw OrcaSwapError.unknown();\n      }\n    }\n  }\n\n  private _computeFee({\n    baseAmount,\n    feeNumerator,\n    feeDenominator,\n  }: {\n    baseAmount: u64;\n    feeNumerator: u64;\n    feeDenominator: u64;\n  }): u64 {\n    if (feeNumerator.eqn(0)) {\n      return ZERO;\n    }\n\n    return new u64(baseAmount.mul(feeNumerator).div(feeDenominator));\n  }\n}\n\nfunction ceilingDivision(dividend: u64, divisor: u64): { quotient: u64; divisor: u64 } {\n  let quotient = dividend.div(divisor);\n  if (quotient.eq(ZERO)) {\n    return { quotient: ZERO, divisor };\n  }\n\n  let remainder = dividend.mod(divisor);\n  if (remainder.gt(ZERO)) {\n    quotient = quotient.add(ONE);\n    divisor = dividend.div(quotient);\n    remainder = dividend.mod(quotient); // TODO: check div - ios div, orca mod\n    if (remainder.gt(ZERO)) {\n      divisor = divisor.add(ONE);\n    }\n  }\n\n  return { quotient, divisor };\n}\n","import { Type } from 'class-transformer';\n\nimport { Pool } from './Pool';\n\n// ProgramIDS\nexport class ProgramIDS {\n  // @ts-ignore\n  serumTokenSwap: string;\n  // @ts-ignore\n  tokenSwapV2: string;\n  // @ts-ignore\n  tokenSwap: string;\n  // @ts-ignore\n  token: TokenEnum;\n  // @ts-ignore\n  aquafarm: string;\n\n  // constructor({\n  //   serumTokenSwap,\n  //   tokenSwapV2,\n  //   tokenSwap,\n  //   token,\n  //   aquafarm,\n  // }: {\n  //   serumTokenSwap: string;\n  //   tokenSwapV2: string;\n  //   tokenSwap: string;\n  //   token: TokenEnum;\n  //   aquafarm: string;\n  // }) {\n  //   this.serumTokenSwap = serumTokenSwap;\n  //   this.tokenSwapV2 = tokenSwapV2;\n  //   this.tokenSwap = tokenSwap;\n  //   this.token = token;\n  //   this.aquafarm = aquafarm;\n  // }\n}\n\n// OrcaConfigs\nexport class OrcaInfo {\n  @Type(() => Pool)\n  // @ts-ignore\n  pools: Map<string, Pool>;\n  @Type(() => ProgramIDS)\n  // @ts-ignore\n  programIds: ProgramIDS;\n  @Type(() => TokenValue)\n  // @ts-ignore\n  tokens: Map<string, TokenValue>;\n\n  // constructor({\n  //   pools,\n  //   programIds,\n  //   tokens,\n  // }: {\n  //   pools: Record<string, Pool>;\n  //   programIds: ProgramIDS;\n  //   tokens: Record<string, TokenValue>;\n  // }) {\n  //   this.pools = pools;\n  //   this.programIds = programIds;\n  //   this.tokens = tokens;\n  // }\n}\n\nexport enum TokenEnum {\n  tokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA = 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\n}\n\n// TokenValue\nexport class TokenValue {\n  // @ts-ignore\n  mint: string;\n  // @ts-ignore\n  name: string;\n  // @ts-ignore\n  decimals: number;\n  fetchPrice?: boolean;\n  poolToken?: boolean;\n  wrapper?: string;\n\n  // constructor({\n  //   mint,\n  //   name,\n  //   decimals,\n  //   fetchPrice,\n  //   poolToken,\n  //   wrapper,\n  // }: {\n  //   mint: string;\n  //   name: string;\n  //   decimals: number;\n  //   fetchPrice?: boolean;\n  //   poolToken?: boolean;\n  //   wrapper?: string;\n  // }) {\n  //   this.mint = mint;\n  //   this.name = name;\n  //   this.decimals = decimals;\n  //   this.fetchPrice = fetchPrice;\n  //   this.poolToken = poolToken;\n  //   this.wrapper = wrapper;\n  // }\n}\n","import { Type } from 'class-transformer';\n\nimport { OrcaInfo } from './OrcaInfo';\n\nexport class OrcaInfoResponse {\n  @Type(() => OrcaInfo)\n  // @ts-ignore\n  value: OrcaInfo;\n\n  // constructor({ value }: { value: OrcaInfo }) {\n  //   this.value = value;\n  // }\n}\n","import type { u64 } from '@solana/spl-token';\n\nexport class InterTokenInfo {\n  tokenName: string;\n  outputAmount?: u64;\n  minAmountOut?: u64;\n  isStableSwap: boolean;\n\n  constructor({\n    tokenName,\n    outputAmount,\n    minAmountOut,\n    isStableSwap,\n  }: {\n    tokenName: string;\n    outputAmount?: u64;\n    minAmountOut?: u64;\n    isStableSwap: boolean;\n  }) {\n    this.tokenName = tokenName;\n    this.outputAmount = outputAmount;\n    this.minAmountOut = minAmountOut;\n    this.isStableSwap = isStableSwap;\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport type { u64 } from '@solana/spl-token';\nimport type { PublicKey } from '@solana/web3.js';\n\nimport type { TokenValue } from 'new/sdk/OrcaSwap';\nimport type { Lamports } from 'new/sdk/SolanaSDK';\nimport { AccountInstructions } from 'new/sdk/SolanaSDK';\nimport { toLamport } from 'new/sdk/SolanaSDK/extensions/NumberExtensions';\n\nimport type { OrcaSwapSolanaClient } from '../apiClient/OrcaSwapSolanaClient';\nimport { InterTokenInfo } from './InterTokenInfo';\nimport { OrcaSwapError } from './OrcaSwapError';\nimport type { Pool } from './Pool';\n\nexport type Pools = Map<string, Pool>;\nexport type PoolsPair = Pool[];\n\n/// Pools\n\n// PoolsPair\nexport async function constructExchange({\n  pools,\n  tokens,\n  solanaClient,\n  owner,\n  fromTokenPubkey,\n  intermediaryTokenAddress,\n  toTokenPubkey,\n  amount,\n  slippage,\n  feePayer,\n  minRentExemption,\n}: {\n  pools: PoolsPair;\n  tokens: Map<string, TokenValue>;\n  solanaClient: OrcaSwapSolanaClient;\n  owner: PublicKey;\n  fromTokenPubkey: string;\n  intermediaryTokenAddress?: string;\n  toTokenPubkey?: string;\n  amount: u64;\n  slippage: number;\n  feePayer?: PublicKey | null;\n  minRentExemption: u64;\n}): Promise<[AccountInstructions, Lamports /*account creation fee*/]> {\n  if (!pools.length || pools.length > 2) {\n    throw OrcaSwapError.invalidPool();\n  }\n\n  if (pools.length === 1) {\n    // direct swap\n    return pools[0]!.constructExchange({\n      tokens,\n      solanaClient,\n      owner,\n      fromTokenPubkey,\n      intermediaryTokenAddress,\n      toTokenPubkey,\n      amount,\n      slippage,\n      feePayer,\n      minRentExemption,\n    });\n  } else {\n    // transitive swap\n    if (!intermediaryTokenAddress) {\n      throw OrcaSwapError.intermediaryTokenAddressNotFound();\n    }\n\n    // first construction\n    const [pool0AccountInstructions, pool0AccountCreationFee] = await pools[0]!.constructExchange({\n      tokens,\n      solanaClient,\n      owner,\n      fromTokenPubkey,\n      toTokenPubkey: intermediaryTokenAddress,\n      amount,\n      slippage,\n      feePayer,\n      minRentExemption,\n    });\n\n    /// TODO: its different from, please actual then changes https://github.dev/p2p-org/OrcaSwapSwift/blob/7877642f7d6fd3765eee0143c21f3f8a7b93fe13/Sources/OrcaSwapSwift/Models/Pools.swift#L49\n    const minAmountOut = pools[0]!.getMinimumAmountOut(amount, slippage);\n    if (!amount) {\n      throw OrcaSwapError.unknown();\n    }\n\n    const [pool1AccountInstructions, pool1AccountCreationFee] = await pools[1]!.constructExchange({\n      tokens,\n      solanaClient,\n      owner,\n      fromTokenPubkey: intermediaryTokenAddress,\n      toTokenPubkey,\n      amount: minAmountOut,\n      slippage,\n      feePayer,\n      minRentExemption,\n    });\n\n    return [\n      new AccountInstructions({\n        account: pool1AccountInstructions.account,\n        instructions: pool0AccountInstructions.instructions.concat(\n          pool1AccountInstructions.instructions,\n        ),\n        cleanupInstructions: pool0AccountInstructions.cleanupInstructions.concat(\n          pool1AccountInstructions.cleanupInstructions,\n        ),\n        signers: pool0AccountInstructions.signers.concat(pool1AccountInstructions.signers),\n      }),\n      pool0AccountCreationFee.add(pool1AccountCreationFee),\n    ];\n  }\n}\n\nexport function getOutputAmount(pools: PoolsPair, inputAmount: u64): u64 | null {\n  if (!pools.length) {\n    return null;\n  }\n\n  const pool0 = pools[0];\n\n  let estimatedAmountOfPool0;\n  try {\n    estimatedAmountOfPool0 = pool0?.getOutputAmount(inputAmount);\n  } catch {\n    // ignore\n  }\n  if (!estimatedAmountOfPool0 || estimatedAmountOfPool0.eq(ZERO)) {\n    return null;\n  }\n\n  // direct\n  if (pools.length === 1) {\n    return estimatedAmountOfPool0;\n  }\n  // transitive\n  else {\n    const pool1 = pools[1];\n    let estimatedAmountOfPool1;\n    try {\n      estimatedAmountOfPool1 = pool1?.getOutputAmount(estimatedAmountOfPool0);\n    } catch {\n      // ignore\n    }\n    if (!estimatedAmountOfPool1) {\n      return null;\n    }\n\n    return estimatedAmountOfPool1;\n  }\n}\n\nexport function getInputAmount(pools: PoolsPair, estimatedAmount: u64): u64 | null {\n  if (!pools.length) {\n    return null;\n  }\n  const pool0 = pools[0];\n\n  // direct\n  if (pools.length === 1) {\n    let inputAmount;\n    try {\n      inputAmount = pool0?.getInputAmount(estimatedAmount);\n    } catch {\n      // ignore\n    }\n    if (!inputAmount) {\n      return null;\n    }\n\n    return inputAmount;\n  }\n  // transitive\n  else {\n    const pool1 = pools[1];\n    let inputAmountOfPool1;\n    try {\n      inputAmountOfPool1 = pool1?.getInputAmount(estimatedAmount);\n    } catch {\n      // ignore\n    }\n    if (!inputAmountOfPool1 || inputAmountOfPool1.eq(ZERO)) {\n      return null;\n    }\n    let inputAmountOfPool0;\n    try {\n      inputAmountOfPool0 = pool0?.getInputAmount(inputAmountOfPool1);\n    } catch {\n      // ignore\n    }\n    if (!inputAmountOfPool0) {\n      return null;\n    }\n\n    return inputAmountOfPool0;\n  }\n}\n\nexport function getInputAmountSlippage(\n  pools: PoolsPair,\n  minimumAmountOut: u64,\n  slippage: number,\n): u64 | null {\n  if (pools.length === 0) {\n    return null;\n  }\n  const pool0 = pools[0];\n\n  //direct\n  if (pools.length === 1) {\n    let inputAmount;\n    try {\n      inputAmount = pool0?.getInputAmountSlippage(minimumAmountOut, slippage);\n    } catch {\n      // ignore\n    }\n    if (!inputAmount) {\n      return null;\n    }\n\n    return inputAmount;\n  }\n  // transitive\n  else {\n    const pool1 = pools[1];\n    let inputAmountPool1;\n    try {\n      inputAmountPool1 = pool1?.getInputAmountSlippage(minimumAmountOut, slippage);\n    } catch {\n      // ignore\n    }\n    if (!inputAmountPool1 || inputAmountPool1.eq(ZERO)) {\n      return null;\n    }\n\n    let inputAmountPool0;\n    try {\n      inputAmountPool0 = pool0?.getInputAmountSlippage(inputAmountPool1, slippage);\n    } catch {\n      // ignore\n    }\n    if (!inputAmountPool0) {\n      return null;\n    }\n    return inputAmountPool0;\n  }\n}\n\nexport function getMinimumAmountOut(\n  pools: PoolsPair,\n  inputAmount: u64,\n  slippage: number,\n): u64 | null {\n  if (pools.length === 0) {\n    return null;\n  }\n  const pool0 = pools[0];\n\n  //direct\n  if (pools.length === 1) {\n    let minimumAmountOut;\n    try {\n      minimumAmountOut = pool0?.getMinimumAmountOut(inputAmount, slippage);\n    } catch {\n      // ignore\n    }\n    if (!minimumAmountOut) {\n      return null;\n    }\n    return minimumAmountOut;\n  }\n  // transitive\n  else {\n    let outputAmountOfPool0;\n    try {\n      outputAmountOfPool0 = pool0?.getOutputAmount(inputAmount);\n    } catch {\n      // ignore\n    }\n    if (!outputAmountOfPool0 || outputAmountOfPool0.eq(ZERO)) {\n      return null;\n    }\n\n    const pool1 = pools[1];\n    let minimumAmountOut;\n    try {\n      minimumAmountOut = pool1?.getMinimumAmountOut(outputAmountOfPool0, slippage);\n    } catch {\n      // ignore\n    }\n    if (!minimumAmountOut) {\n      return null;\n    }\n    return minimumAmountOut;\n  }\n}\n\nexport function getIntermediaryToken(\n  pools: PoolsPair,\n  inputAmount: u64,\n  slippage: number,\n): InterTokenInfo | null {\n  if (pools.length <= 1) {\n    return null;\n  }\n\n  const pool0 = pools[0]!;\n\n  return new InterTokenInfo({\n    tokenName: pool0.tokenBName.toString(),\n    outputAmount: pool0.getOutputAmount(inputAmount),\n    minAmountOut: pool0.getMinimumAmountOut(inputAmount, slippage),\n    isStableSwap: pools[1]!.isStable === true,\n  });\n}\n\nexport function calculateLiquidityProviderFees(\n  pools: PoolsPair,\n  inputAmount: number,\n  slippage: number,\n): u64[] {\n  if (!pools.length || pools.length <= 1) {\n    return [];\n  }\n\n  const pool0 = pools[0];\n\n  const sourceDecimals = pool0?.tokenABalance?.decimals;\n  if (!sourceDecimals) {\n    throw OrcaSwapError.unknown();\n  }\n\n  const inputAmount0 = toLamport(inputAmount, sourceDecimals);\n\n  // 1 pool\n  const result: u64[] = [];\n  const fee0 = pool0.calculatingFees(inputAmount0);\n  result.push(fee0);\n\n  // 2 pool\n  if (pools.length === 2) {\n    const pool1 = pools[1]!;\n    const inputAmount1 = pool0.getMinimumAmountOut(inputAmount0, slippage);\n    if (inputAmount1) {\n      const fee1 = pool1.calculatingFees(inputAmount1);\n      result.push(fee1);\n    }\n  }\n\n  return result;\n}\n","import type { Pool } from 'new/sdk/OrcaSwap';\nimport type { TokenAccountBalance } from 'new/sdk/SolanaSDK';\n\nexport class BalancesCache {\n  balancesCache: Record<string, TokenAccountBalance> = {};\n\n  getTokenABalance(pool: Pool): TokenAccountBalance | undefined {\n    return pool.tokenABalance ?? this.balancesCache[pool.tokenAccountA.toString()];\n  }\n\n  getTokenBBalance(pool: Pool): TokenAccountBalance | undefined {\n    return pool.tokenBBalance ?? this.balancesCache[pool.tokenAccountB.toString()];\n  }\n\n  save(key: string, value: TokenAccountBalance): void {\n    this.balancesCache[key] = value;\n  }\n}\n","import type { u64 } from '@solana/spl-token';\nimport type { PublicKey, Signer, TransactionInstruction } from '@solana/web3.js';\n\nexport class PreparedSwapTransaction {\n  owner: PublicKey;\n  instructions: TransactionInstruction[];\n  signers: Signer[];\n  accountCreationFee: u64;\n\n  constructor({\n    owner,\n    instructions,\n    signers = [],\n    accountCreationFee,\n  }: {\n    owner: PublicKey;\n    instructions: TransactionInstruction[];\n    signers?: Signer[];\n    accountCreationFee: u64;\n  }) {\n    this.owner = owner;\n    this.instructions = instructions;\n    this.signers = signers;\n    this.accountCreationFee = accountCreationFee;\n  }\n}\n","import type { ProgramIDS, TokenValue } from './OrcaInfo';\nimport type { Pools } from './Pools';\nimport type { Routes } from './Route';\n\nexport class SwapInfo {\n  routes: Routes;\n  tokens: Map<string, TokenValue>;\n  pools: Pools;\n  programIds: ProgramIDS;\n  tokenNames: Map<string, string>; // [Mint: TokenName]\n\n  constructor({\n    routes,\n    tokens,\n    pools,\n    programIds,\n    tokenNames,\n  }: {\n    routes: Routes;\n    tokens: Map<string, TokenValue>;\n    pools: Pools;\n    programIds: ProgramIDS;\n    tokenNames: Map<string, string>;\n  }) {\n    this.routes = routes;\n    this.tokens = tokens;\n    this.pools = pools;\n    this.programIds = programIds;\n    this.tokenNames = tokenNames;\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@saberhq/token-utils';\nimport type { Signer, TransactionInstruction } from '@solana/web3.js';\nimport { PublicKey } from '@solana/web3.js';\nimport promiseRetry from 'promise-retry';\nimport { pickBy } from 'ramda';\n\nimport type { TokenValue } from 'new/sdk/OrcaSwap/models';\nimport { BalancesCache } from 'new/sdk/OrcaSwap/models/BalancesCache';\nimport { toLamport } from 'new/sdk/SolanaSDK/extensions/NumberExtensions';\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK/extensions/PublicKey/PublicKeyExtensions';\n\nimport type { AccountInstructions, Lamports, TokenAccountBalance } from '../SolanaSDK';\nimport { SwapResponse } from '../SolanaSDK';\nimport * as SolanaSDK from '../SolanaSDK';\nimport type { APIClient } from './apiClient/APIClient';\nimport type { OrcaSwapSolanaClient } from './apiClient/OrcaSwapSolanaClient';\nimport { OrcaSwapError } from './models/OrcaSwapError';\nimport type { Pool } from './models/Pool';\nimport { OrcaSwapTokenName } from './models/Pool';\nimport type { Pools, PoolsPair } from './models/Pools';\nimport {\n  calculateLiquidityProviderFees,\n  constructExchange,\n  getInputAmount,\n  getIntermediaryToken,\n  getOutputAmount,\n} from './models/Pools';\nimport { PreparedSwapTransaction } from './models/PreparedSwapTransaction';\nimport type { Route, Routes } from './models/Route';\nimport { SwapInfo } from './models/SwapInfo';\n\nexport type OrcaSwapType = {\n  load(): Promise<void>;\n  getMint(tokenName: string): string | undefined;\n  findPosibleDestinationMints(fromMint: string): string[];\n  getTradablePoolsPairs({\n    fromMint,\n    toMint,\n  }: {\n    fromMint: string;\n    toMint: string;\n  }): Promise<PoolsPair[]>;\n  findBestPoolsPairForInputAmount({\n    inputAmount,\n    poolsPairs,\n  }: {\n    inputAmount: u64;\n    poolsPairs: PoolsPair[];\n  }): PoolsPair | null;\n  findBestPoolsPairForEstimatedAmount({\n    estimatedAmount,\n    poolsPairs,\n  }: {\n    estimatedAmount: u64;\n    poolsPairs: PoolsPair[];\n  }): PoolsPair | null;\n  getLiquidityProviderFee({\n    bestPoolsPair,\n    inputAmount,\n    slippage,\n  }: {\n    bestPoolsPair?: PoolsPair;\n    inputAmount?: number;\n    slippage: number;\n  }): u64[];\n  getNetworkFees({\n    owner,\n    myWalletsMints,\n    fromWalletPubkey,\n    toWalletPubkey,\n    bestPoolsPair,\n    inputAmount,\n    slippage,\n    lamportsPerSignature,\n    minRentExempt,\n  }: {\n    owner: PublicKey;\n    myWalletsMints: string[];\n    fromWalletPubkey: string;\n    toWalletPubkey?: string;\n    bestPoolsPair?: PoolsPair;\n    inputAmount?: number;\n    slippage: number;\n    lamportsPerSignature: u64;\n    minRentExempt: u64;\n  }): Promise<SolanaSDK.FeeAmount>;\n  prepareForSwapping({\n    owner,\n    fromWalletPubkey,\n    toWalletPubkey,\n    bestPoolsPair,\n    amount,\n    feePayer,\n    slippage,\n  }: {\n    owner: PublicKey;\n    fromWalletPubkey: string;\n    toWalletPubkey?: string;\n    bestPoolsPair: PoolsPair;\n    amount: number;\n    feePayer?: PublicKey | null; // null if the owner is the fee payer\n    slippage: number;\n  }): Promise<[PreparedSwapTransaction[], string | null]>;\n  swap({\n    owner,\n    fromWalletPubkey,\n    toWalletPubkey,\n    bestPoolsPair,\n    amount,\n    slippage,\n    isSimulation,\n  }: {\n    owner: PublicKey;\n    fromWalletPubkey: string;\n    toWalletPubkey?: string;\n    bestPoolsPair: PoolsPair;\n    amount: number;\n    slippage: number;\n    isSimulation: boolean;\n  }): Promise<SolanaSDK.SwapResponse>;\n};\n\nexport class OrcaSwap implements OrcaSwapType {\n  // Properties\n  protected _apiClient: APIClient; // TODO: make OrcaSwapAPIClient\n  protected _solanaClient: OrcaSwapSolanaClient; // TODO: make SolanaAPIClient\n\n  private _info: SwapInfo | null = null;\n  private _balancesCache: BalancesCache = new BalancesCache();\n\n  // Constructor\n  constructor({\n    apiClient,\n    solanaClient,\n  }: {\n    apiClient: APIClient;\n    solanaClient: OrcaSwapSolanaClient;\n  }) {\n    this._apiClient = apiClient;\n    this._solanaClient = solanaClient;\n  }\n\n  // Methods\n  /// Prepare all needed infos for swapping\n  async load(): Promise<void> {\n    // already been loaded\n    if (this._info) {\n      return Promise.resolve();\n    }\n\n    const [tokens, pools, programIds] = await Promise.all([\n      this._apiClient.getTokens(),\n      this._apiClient.getPools(),\n      this._apiClient.getProgramID(),\n    ]);\n\n    // find all available routes\n    const routes = _findAllAvailableRoutes(tokens, pools);\n    const tokenNames = Array.from(tokens).reduce((result, token) => {\n      result.set(token[1].mint, token[0]);\n      return result;\n    }, new Map<string, string>());\n\n    // create swap info\n    const swapInfo = new SwapInfo({ routes, tokens, pools, programIds, tokenNames });\n\n    // save cache\n    this._info = swapInfo;\n\n    return Promise.resolve();\n  }\n\n  /// Get token's mint address by its name\n  getMint(tokenName: string): string | undefined {\n    const info = this._info;\n    if (!info?.tokenNames) {\n      return;\n    }\n\n    return [...info.tokenNames].find((obj) => obj[1] === tokenName)?.[0];\n  }\n\n  /// Map mint to token info\n  private _getTokenFromMint(mint?: string): { name: string; info: TokenValue } | null {\n    const info = this._info;\n    if (!info) {\n      return null;\n    }\n\n    const tokenInfo = [...info.tokens].find(([, token]) => token.mint === mint);\n    if (!tokenInfo || !tokenInfo[0] || !tokenInfo[1]) {\n      return null;\n    }\n\n    return { name: tokenInfo[0], info: tokenInfo[1] };\n  }\n\n  /// Find posible destination tokens by mint\n  /// - Parameter fromMint: from token mint\n  /// - Returns: List of token mints that can be swapped to\n  findPosibleDestinationMints(fromMint: string): string[] {\n    const fromTokenName = this._getTokenFromMint(fromMint)?.name;\n    if (!fromTokenName) {\n      throw OrcaSwapError.notFound();\n    }\n\n    const routes = this._findRoutes(fromTokenName, null);\n    const info = this._info;\n\n    const mints = Array.from(\n      Object.keys(routes).reduce((acc, key) => {\n        const name = key.split('/').find((tokenName) => tokenName !== fromTokenName);\n        if (name && info?.tokens.get(name)?.mint) {\n          acc.add(info.tokens.get(name)!.mint);\n        }\n\n        return acc;\n      }, new Set<string>()),\n    );\n\n    return mints;\n  }\n\n  /// Get all tradable pools pairs for current token pair\n  /// - Returns: route and parsed pools\n  async getTradablePoolsPairs({\n    fromMint,\n    toMint,\n  }: {\n    fromMint: string;\n    toMint: string;\n  }): Promise<PoolsPair[]> {\n    const fromTokenName = this._getTokenFromMint(fromMint)?.name;\n    const toTokenName = this._getTokenFromMint(toMint)?.name;\n    const currentRoutes = Object.values(this._findRoutes(fromTokenName, toTokenName))[0];\n    if (!fromTokenName || !toTokenName || !currentRoutes) {\n      return [];\n    }\n    const poolsPairs: PoolsPair[] = [];\n    const group = await Promise.all(\n      currentRoutes.map((route) => {\n        // FIXME: Support more than 2 paths later\n        if (route.length > 2) {\n          return null;\n        }\n\n        return this.getPools({\n          route,\n          fromTokenName,\n          toTokenName,\n        });\n      }),\n    );\n\n    for (const pools of group) {\n      if (!pools) {\n        continue;\n      }\n      poolsPairs.push(pools);\n    }\n\n    return poolsPairs;\n  }\n\n  /// Find best pool to swap from input amount\n  findBestPoolsPairForInputAmount({\n    inputAmount,\n    poolsPairs,\n  }: {\n    inputAmount: u64;\n    poolsPairs: PoolsPair[];\n  }): PoolsPair | null {\n    if (!poolsPairs.length) {\n      return null;\n    }\n\n    let bestPools: Pool[] | null = null;\n    let bestEstimatedAmount: u64 = ZERO;\n\n    for (const pair of poolsPairs) {\n      const estimatedAmount = getOutputAmount(pair, inputAmount);\n      if (!estimatedAmount) {\n        continue;\n      }\n\n      if (estimatedAmount.gt(bestEstimatedAmount)) {\n        bestEstimatedAmount = estimatedAmount;\n        bestPools = pair;\n      }\n    }\n\n    return bestPools;\n  }\n\n  /// Find best pool to swap from estimated amount\n  findBestPoolsPairForEstimatedAmount({\n    estimatedAmount,\n    poolsPairs,\n  }: {\n    estimatedAmount: u64;\n    poolsPairs: PoolsPair[];\n  }): PoolsPair | null {\n    if (!poolsPairs.length) {\n      return null;\n    }\n\n    let bestPools: Pool[] | null = null;\n    let bestInputAmount: u64 = new u64(Number.MAX_SAFE_INTEGER);\n\n    for (const pair of poolsPairs) {\n      const inputAmount = getInputAmount(pair, estimatedAmount);\n      if (!inputAmount) {\n        continue;\n      }\n\n      if (inputAmount.lt(bestInputAmount)) {\n        bestInputAmount = inputAmount;\n        bestPools = pair;\n      }\n    }\n\n    return bestPools;\n  }\n\n  /// Get liquidity provider fee\n  getLiquidityProviderFee({\n    bestPoolsPair,\n    inputAmount,\n    slippage,\n  }: {\n    bestPoolsPair?: PoolsPair | null;\n    inputAmount?: number | null;\n    slippage: number;\n  }): u64[] {\n    if (!bestPoolsPair) {\n      return [];\n    }\n\n    return calculateLiquidityProviderFees(bestPoolsPair, inputAmount ?? 0, slippage) ?? [];\n  }\n\n  /// Get network fees from current context\n  /// - Returns: transactions fees (fees for signatures), liquidity provider fees (fees in intermediary token?, fees in destination token)\n  async getNetworkFees({\n    owner,\n    myWalletsMints,\n    fromWalletPubkey,\n    toWalletPubkey,\n    bestPoolsPair,\n    inputAmount,\n    slippage,\n    lamportsPerSignature,\n    minRentExempt,\n  }: {\n    owner: PublicKey;\n    myWalletsMints: string[];\n    fromWalletPubkey: string;\n    toWalletPubkey?: string;\n    bestPoolsPair?: PoolsPair;\n    inputAmount?: number;\n    slippage: number;\n    lamportsPerSignature: u64;\n    minRentExempt: u64;\n  }): Promise<SolanaSDK.FeeAmount> {\n    let numberOfTransactions = new u64(1);\n\n    if (bestPoolsPair?.length === 2) {\n      const myTokens = myWalletsMints\n        .map((mint) => this._getTokenFromMint(mint)?.name)\n        .filter(Boolean) as string[];\n      const intermediaryTokenName = bestPoolsPair[0]!.tokenBName.toString();\n\n      if (!myTokens.includes(intermediaryTokenName) || toWalletPubkey === null) {\n        numberOfTransactions = numberOfTransactions.addn(1);\n      }\n    }\n\n    const expectedFee = SolanaSDK.FeeAmount.zero();\n\n    // fee for owner's signature\n    expectedFee.transaction = new u64(\n      expectedFee.transaction.add(numberOfTransactions.mul(lamportsPerSignature)),\n    );\n\n    // when source token is native SOL\n    if (fromWalletPubkey === owner.toBase58()) {\n      // WSOL's signature\n      expectedFee.transaction = new u64(expectedFee.transaction.add(lamportsPerSignature));\n      expectedFee.deposit = new u64(expectedFee.deposit.add(minRentExempt));\n    }\n\n    // when there is intermediary token\n    let isIntermediaryTokenCreatedRequest = Promise.resolve(true);\n    if (bestPoolsPair?.length === 2) {\n      const decimals = bestPoolsPair[0]!.tokenABalance?.decimals;\n      if (decimals && inputAmount) {\n        const intermediaryToken = getIntermediaryToken(\n          bestPoolsPair,\n          toLamport(inputAmount, decimals),\n          slippage,\n        );\n        if (intermediaryToken) {\n          const mint = this.getMint(intermediaryToken.tokenName);\n          if (mint) {\n            // when intermediary token is SOL, a deposit fee for creating WSOL is needed (will be returned after transaction)\n            if (intermediaryToken.tokenName === 'SOL') {\n              expectedFee.transaction = new u64(expectedFee.transaction.add(lamportsPerSignature));\n              expectedFee.deposit = new u64(expectedFee.deposit.add(minRentExempt));\n            }\n            // Check if intermediary token creation is needed\n            else {\n              isIntermediaryTokenCreatedRequest =\n                this._solanaClient.checkIfAssociatedTokenAccountExists(owner, mint);\n            }\n          }\n        }\n      }\n    }\n\n    // when needed to create destination\n    if (!toWalletPubkey) {\n      expectedFee.accountBalances = new u64(expectedFee.accountBalances.add(minRentExempt));\n    }\n\n    return isIntermediaryTokenCreatedRequest.then((needsCreateIntermediaryToken) => {\n      // Intermediary token needs to be created, so add the fee\n      if (needsCreateIntermediaryToken) {\n        expectedFee.accountBalances = new u64(expectedFee.accountBalances.add(minRentExempt));\n      }\n\n      return expectedFee;\n    });\n  }\n\n  /// Execute swap\n  prepareForSwapping({\n    owner,\n    fromWalletPubkey,\n    toWalletPubkey,\n    bestPoolsPair,\n    amount,\n    feePayer,\n    slippage,\n  }: {\n    owner: PublicKey;\n    fromWalletPubkey: string;\n    toWalletPubkey?: string;\n    bestPoolsPair: PoolsPair;\n    amount: number;\n    feePayer?: PublicKey | null; // nil if the owner is the fee payer\n    slippage: number;\n  }): Promise<[PreparedSwapTransaction[], string | null /*New created account*/]> {\n    if (!bestPoolsPair.length) {\n      throw OrcaSwapError.swapInfoMissing();\n    }\n\n    const fromDecimals = bestPoolsPair[0]!.tokenABalance?.decimals;\n    if (!fromDecimals) {\n      throw OrcaSwapError.invalidPool();\n    }\n\n    const amountNew = toLamport(amount, fromDecimals);\n\n    const minRentExemptionRequest = this._solanaClient.getMinimumBalanceForRentExemption(165);\n\n    if (bestPoolsPair.length === 1) {\n      return minRentExemptionRequest\n        .then((minRentExemption) => {\n          return this._directSwap({\n            owner,\n            pool: bestPoolsPair[0]!,\n            fromTokenPubkey: fromWalletPubkey,\n            toTokenPubkey: toWalletPubkey,\n            amount: amountNew,\n            feePayer,\n            slippage,\n            minRentExemption,\n          });\n        })\n        .then(([x, y]) => [[x], y]);\n    } else {\n      const pool0 = bestPoolsPair[0]!;\n      const pool1 = bestPoolsPair[1]!;\n\n      // TO AVOID `TRANSACTION IS TOO LARGE` ERROR, WE SPLIT OPERATION INTO 2 TRANSACTIONS\n      // FIRST TRANSACTION IS TO CREATE ASSOCIATED TOKEN ADDRESS FOR INTERMEDIARY TOKEN OR DESTINATION TOKEN (IF NOT YET CREATED) AND WAIT FOR CONFIRMATION **IF THEY ARE NOT WSOL**\n      // SECOND TRANSACTION TAKE THE RESULT OF FIRST TRANSACTION (ADDRESSES) TO REDUCE ITS SIZE. **IF INTERMEDIATE TOKEN OR DESTINATION TOKEN IS WSOL, IT SHOULD BE INCLUDED IN THIS TRANSACTION**\n\n      // First transaction\n      return minRentExemptionRequest.then((resMinRentExemption) => {\n        const minRentExemption = new u64(resMinRentExemption);\n        return this.createIntermediaryTokenAndDestinationTokenAddressIfNeeded({\n          owner,\n          pool0,\n          pool1,\n          // toWalletPubkey,\n          feePayer,\n          minRentExemption,\n        }).then(\n          ([\n            intermediaryTokenAddress,\n            destinationTokenAddress,\n            wsolAccountInstructions,\n            preparedTransaction,\n          ]) => {\n            // Second transaction\n            return this._transitiveSwap({\n              owner,\n              pool0,\n              pool1,\n              fromTokenPubkey: fromWalletPubkey,\n              intermediaryTokenAddress: intermediaryTokenAddress.toString(),\n              destinationTokenAddress: destinationTokenAddress.toString(),\n              wsolAccountInstructions,\n              isDestinationNew: !toWalletPubkey,\n              amount: amountNew,\n              slippage,\n              feePayer,\n              minRentExemption,\n            }).then(([a, b]) => {\n              const transactions: PreparedSwapTransaction[] = [];\n              if (preparedTransaction) {\n                transactions.push(preparedTransaction);\n              }\n              transactions.push(a);\n              return [transactions, b];\n            });\n          },\n        );\n      });\n    }\n  }\n\n  /// Prepare for swapping and swap\n  swap({\n    owner,\n    fromWalletPubkey,\n    toWalletPubkey,\n    bestPoolsPair,\n    amount,\n    slippage,\n    isSimulation,\n  }: {\n    owner: PublicKey;\n    fromWalletPubkey: string;\n    toWalletPubkey?: string;\n    bestPoolsPair: PoolsPair;\n    amount: number;\n    slippage: number;\n    isSimulation: boolean;\n  }): Promise<SwapResponse> {\n    return this.prepareForSwapping({\n      owner,\n      fromWalletPubkey,\n      toWalletPubkey,\n      bestPoolsPair,\n      amount,\n      feePayer: null,\n      slippage,\n    }).then((params) => {\n      const swapTransactions = params[0];\n      if (!swapTransactions.length || swapTransactions.length > 2) {\n        throw OrcaSwapError.invalidNumberOfTransactions();\n      }\n\n      let request = this.prepareAndSend({\n        swapTransaction: swapTransactions[0]!,\n        feePayer: owner,\n        isSimulation: swapTransactions.length === 2 ? false : isSimulation, // the first transaction in transitive swap must be non-simulation\n      });\n\n      if (swapTransactions.length === 2) {\n        request = request\n          .then((txId) => {\n            return this._solanaClient.waitForConfirmation(txId);\n          })\n          .then(() => {\n            return promiseRetry(\n              (_retry) => {\n                return this.prepareAndSend({\n                  swapTransaction: swapTransactions[1]!,\n                  feePayer: owner,\n                  isSimulation,\n                }).catch((error: Error) => {\n                  if (error) {\n                    // TODO: some conditions to make retry\n                  }\n\n                  throw error;\n                });\n              },\n              {\n                minTimeout: 1000,\n                maxTimeout: 60000,\n                factor: 1,\n              },\n            );\n          });\n      }\n\n      return request.then((transactionId) => {\n        return new SwapResponse({\n          transactionId,\n          newWalletPubkey: params[1],\n        });\n      });\n    });\n  }\n\n  prepareAndSend({\n    swapTransaction,\n    feePayer,\n    isSimulation,\n  }: {\n    swapTransaction: PreparedSwapTransaction;\n    feePayer: PublicKey;\n    isSimulation: boolean;\n  }): Promise<string> {\n    return this._solanaClient\n      .prepareTransaction({\n        owner: this._solanaClient.provider.wallet.publicKey,\n        instructions: swapTransaction.instructions,\n        signers: swapTransaction.signers,\n        feePayer,\n        // accountsCreationFee: swapTransaction.accountCreationFee,\n        // recentBlockhash: null,\n      })\n      .then((preparedTransaction) => {\n        return this._solanaClient.serializeAndSend({\n          preparedTransaction,\n          isSimulation,\n        });\n      });\n  }\n\n  // Find routes for from and to token name, aka symbol\n  private _findRoutes(fromTokenName?: string, toTokenName?: string | null): Routes {\n    const info = this._info;\n    if (!info) {\n      throw OrcaSwapError.swapInfoMissing();\n    }\n\n    // if fromToken isn't selected\n    if (!fromTokenName) {\n      return {};\n    }\n\n    // if toToken isn't selected\n    if (!toTokenName) {\n      // get all routes that have token A\n      return pickBy((_, key) => key.split('/').includes(fromTokenName), info.routes);\n    }\n\n    // get routes with fromToken and toToken\n    const pair = [fromTokenName, toTokenName];\n    const validRoutesNames = [pair.join('/'), pair.reverse().join('/')];\n    return pickBy((_, key) => validRoutesNames.includes(key), info.routes);\n  }\n\n  private _directSwap({\n    owner,\n    pool,\n    fromTokenPubkey,\n    toTokenPubkey,\n    amount,\n    feePayer,\n    slippage,\n    minRentExemption,\n  }: {\n    owner: PublicKey;\n    pool: Pool;\n    fromTokenPubkey: string;\n    toTokenPubkey?: string;\n    amount: u64;\n    feePayer?: PublicKey | null;\n    slippage: number;\n    minRentExemption: Lamports;\n  }): Promise<[PreparedSwapTransaction, string | null]> {\n    const info = this._info;\n    if (!info) {\n      throw OrcaSwapError.swapInfoMissing();\n    }\n\n    return constructExchange({\n      pools: [pool],\n      tokens: info.tokens,\n      solanaClient: this._solanaClient,\n      owner,\n      fromTokenPubkey,\n      toTokenPubkey,\n      amount,\n      slippage,\n      feePayer,\n      minRentExemption,\n    }).then(([accountInstructions, accountCreationFee]) => {\n      return [\n        new PreparedSwapTransaction({\n          owner, // instead of owner in signers\n          instructions: accountInstructions.instructions.concat(\n            accountInstructions.cleanupInstructions,\n          ),\n          signers: accountInstructions.signers,\n          accountCreationFee,\n        }),\n        !toTokenPubkey ? accountInstructions.account.toString() : null,\n      ];\n    });\n  }\n\n  private _transitiveSwap({\n    owner,\n    pool0,\n    pool1,\n    fromTokenPubkey,\n    intermediaryTokenAddress,\n    destinationTokenAddress,\n    feePayer,\n    wsolAccountInstructions,\n    isDestinationNew,\n    amount,\n    slippage,\n    minRentExemption,\n  }: {\n    owner: PublicKey;\n    pool0: Pool;\n    pool1: Pool;\n    fromTokenPubkey: string;\n    intermediaryTokenAddress: string;\n    destinationTokenAddress: string;\n    feePayer?: PublicKey | null;\n    wsolAccountInstructions: AccountInstructions | null;\n    isDestinationNew: boolean;\n    amount: u64;\n    slippage: number;\n    minRentExemption: Lamports;\n  }): Promise<[PreparedSwapTransaction, string | null]> {\n    const info = this._info;\n    if (!info) {\n      throw OrcaSwapError.swapInfoMissing();\n    }\n\n    return constructExchange({\n      pools: [pool0, pool1],\n      tokens: info.tokens,\n      solanaClient: this._solanaClient,\n      owner,\n      fromTokenPubkey,\n      intermediaryTokenAddress,\n      toTokenPubkey: destinationTokenAddress,\n      amount,\n      slippage,\n      feePayer,\n      minRentExemption,\n    }).then(([accountInstructions, accountCreationFee]) => {\n      const instructions = accountInstructions.instructions.concat(\n        accountInstructions.cleanupInstructions,\n      );\n      const additionalSigners: Signer[] = [];\n      if (wsolAccountInstructions) {\n        additionalSigners.push(...wsolAccountInstructions.signers);\n        instructions.unshift(...wsolAccountInstructions.instructions);\n        instructions.push(...wsolAccountInstructions.cleanupInstructions);\n        accountCreationFee = new u64(accountCreationFee.add(minRentExemption));\n      }\n\n      return [\n        new PreparedSwapTransaction({\n          owner, // instead of owner in signers\n          instructions,\n          signers: additionalSigners.concat(accountInstructions.signers),\n          accountCreationFee,\n        }),\n        isDestinationNew ? accountInstructions.account.toString() : null,\n      ];\n    });\n  }\n\n  createIntermediaryTokenAndDestinationTokenAddressIfNeeded({\n    owner,\n    pool0,\n    pool1,\n    // toWalletPubkey,\n    feePayer,\n    minRentExemption,\n  }: {\n    owner: PublicKey;\n    pool0: Pool;\n    pool1: Pool;\n    // toWalletPubkey?: string;\n    feePayer?: PublicKey | null;\n    minRentExemption: Lamports;\n  }): Promise<\n    [PublicKey, PublicKey, AccountInstructions | null, PreparedSwapTransaction | null]\n  > /*intermediaryTokenAddress, destination token address, WSOL account and instructions, account creation fee*/ {\n    const intermediaryTokenMintStr = this._info?.tokens.get(pool0.tokenBName.toString())?.mint;\n    const intermediaryTokenMint = intermediaryTokenMintStr\n      ? new PublicKey(intermediaryTokenMintStr)\n      : null;\n    const destinationMintStr = this._info?.tokens.get(pool1.tokenBName.toString())?.mint;\n    const destinationMint = destinationMintStr ? new PublicKey(destinationMintStr) : null;\n    if (!intermediaryTokenMint || !destinationMint) {\n      throw OrcaSwapError.unauthorized();\n    }\n\n    let requestCreatingIntermediaryToken: Promise<AccountInstructions>;\n\n    if (intermediaryTokenMint.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n      requestCreatingIntermediaryToken =\n        this._solanaClient.prepareCreatingWSOLAccountAndCloseWhenDone(\n          owner,\n          ZERO,\n          feePayer ?? owner,\n        );\n    } else {\n      requestCreatingIntermediaryToken =\n        this._solanaClient.prepareForCreatingAssociatedTokenAccount(\n          owner,\n          intermediaryTokenMint,\n          feePayer ?? owner,\n          true,\n        );\n    }\n\n    return Promise.all([\n      requestCreatingIntermediaryToken,\n      this._solanaClient.prepareForCreatingAssociatedTokenAccount(\n        owner,\n        destinationMint,\n        feePayer ?? owner,\n        false,\n      ),\n    ]).then(([initAccountInstructions, destAccountInstructions]) => {\n      // get all creating instructions, PASS WSOL ACCOUNT INSTRUCTIONS TO THE SECOND TRANSACTION\n      const instructions: TransactionInstruction[] = [];\n      let wsolAccountInstructions: AccountInstructions | null = null;\n      let accountCreationFee: u64 = ZERO;\n\n      if (intermediaryTokenMint.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n        wsolAccountInstructions = initAccountInstructions;\n        wsolAccountInstructions.cleanupInstructions = [];\n      } else {\n        instructions.push(...initAccountInstructions.instructions);\n        if (!initAccountInstructions.instructions.length) {\n          accountCreationFee = new u64(accountCreationFee.add(minRentExemption));\n        }\n        // omit clean up instructions\n      }\n      if (destinationMint.equals(SolanaSDKPublicKey.wrappedSOLMint)) {\n        wsolAccountInstructions = destAccountInstructions;\n      } else {\n        instructions.push(...destAccountInstructions.instructions);\n        if (!destAccountInstructions.instructions.length) {\n          accountCreationFee = new u64(accountCreationFee.add(minRentExemption));\n        }\n      }\n\n      // if token address has already been created, then no need to send any transactions\n      if (!instructions.length) {\n        return [\n          initAccountInstructions.account,\n          destAccountInstructions.account,\n          wsolAccountInstructions,\n          null,\n        ];\n      }\n      // if creating transaction is needed\n      else {\n        return [\n          initAccountInstructions.account,\n          destAccountInstructions.account,\n          wsolAccountInstructions,\n          new PreparedSwapTransaction({\n            owner, // instead of owner in signers\n            instructions,\n            accountCreationFee,\n          }),\n        ];\n      }\n    });\n  }\n\n  async getPools({\n    route,\n    fromTokenName,\n    toTokenName,\n  }: {\n    route: Route;\n    fromTokenName: string;\n    toTokenName: string;\n  }): Promise<Pool[]> {\n    if (route.length === 0) {\n      return [];\n    }\n\n    const pools: Pool[] = [];\n    const group = await Promise.all(route.map((path) => this.fixedPool({ path })));\n\n    for (const pool of group) {\n      if (!pool) {\n        continue;\n      }\n      pools.push(pool);\n    }\n\n    // modify orders\n    if (pools.length === 2) {\n      // reverse order of the 2 pools\n      // Ex: Swap from SOCN -> BTC, but paths are\n      // [\n      //     \"BTC/SOL[aquafarm]\",\n      //     \"SOCN/SOL[stable][aquafarm]\"\n      // ]\n      // Need to change to\n      // [\n      //     \"SOCN/SOL[stable][aquafarm]\",\n      //     \"BTC/SOL[aquafarm]\"\n      // ]\n\n      if (\n        pools[0]!.tokenAName.toString() !== fromTokenName &&\n        pools[0]!.tokenBName.toString() !== fromTokenName\n      ) {\n        const temp = pools[0]!;\n        pools[0] = pools[1]!;\n        pools[1] = temp;\n      }\n    }\n\n    // reverse token A and token B in pool if needed\n    for (let i = 0; i < pools.length; i++) {\n      if (i === 0) {\n        let pool = pools[0]!;\n        if (\n          pool.tokenAName.fixedTokenName !== new OrcaSwapTokenName(fromTokenName).fixedTokenName\n        ) {\n          pool = pool.reversed;\n        }\n        pools[0] = pool;\n      }\n\n      if (i === 1) {\n        let pool = pools[1]!;\n        if (pool.tokenBName.fixedTokenName !== new OrcaSwapTokenName(toTokenName).fixedTokenName) {\n          pool = pool.reversed;\n        }\n        pools[1] = pool;\n      }\n    }\n\n    return pools;\n  }\n\n  async fixedPool({\n    path,\n  }: {\n    path: string; // Ex. BTC/SOL[aquafarm][stable]\n  }): Promise<Pool | null> {\n    const allPools = this._info?.pools;\n    if (!allPools) {\n      return null;\n    }\n    const pool = allPools.get(path);\n    if (!pool) {\n      return null;\n    }\n\n    if (path.includes('[stable]')) {\n      pool.isStable = true;\n    }\n\n    // get balances\n    let tokenABalance: TokenAccountBalance;\n    let tokenBBalance: TokenAccountBalance;\n\n    const tab = this._balancesCache.getTokenABalance(pool);\n    const tbb = this._balancesCache.getTokenBBalance(pool);\n    if (tab && tbb) {\n      [tokenABalance, tokenBBalance] = [tab, tbb];\n    } else {\n      [tokenABalance, tokenBBalance] = await Promise.all([\n        this._solanaClient.getTokenAccountBalance(pool.tokenAccountA),\n        this._solanaClient.getTokenAccountBalance(pool.tokenAccountB),\n      ]);\n    }\n\n    this._balancesCache.save(pool.tokenAccountA.toString(), tokenABalance);\n    this._balancesCache.save(pool.tokenAccountB.toString(), tokenBBalance);\n\n    pool.tokenABalance = tokenABalance;\n    pool.tokenBBalance = tokenBBalance;\n\n    return pool;\n  }\n}\n\nfunction _findAllAvailableRoutes(tokens: Map<string, TokenValue>, pools: Pools): Routes {\n  const filteredTokens = Array.from(tokens)\n    .filter(([, token]) => token.poolToken !== true)\n    .map(([tokenName]) => tokenName);\n\n  const pairs = _getPairs(filteredTokens);\n\n  return _getAllRoutes(pairs, pools);\n}\n\nfunction _getPairs(tokens: string[]): string[][] {\n  const pairs: string[][] = [];\n\n  if (tokens.length === 0) {\n    return pairs;\n  }\n\n  for (let i = 0; i + 1 < tokens.length; i++) {\n    for (let j = i + 1; j < tokens.length; j++) {\n      const tokenA = tokens[i]!;\n      const tokenB = tokens[j]!;\n\n      pairs.push(_orderTokenPair(tokenA, tokenB));\n    }\n  }\n\n  return pairs;\n}\n\nfunction _orderTokenPair(tokenX: string, tokenY: string): string[] {\n  if (tokenX === 'USDC' && tokenY === 'USDT') {\n    return [tokenX, tokenY];\n  } else if (tokenY === 'USDC' && tokenX === 'USDT') {\n    return [tokenY, tokenX];\n  } else if (tokenY === 'USDC' || tokenY === 'USDT') {\n    return [tokenX, tokenY];\n  } else if (tokenX === 'USDC' || tokenX === 'USDT') {\n    return [tokenY, tokenX];\n  } else if (tokenX.localeCompare(tokenY) < 0) {\n    return [tokenX, tokenY];\n  } else {\n    return [tokenY, tokenX];\n  }\n}\n\nfunction _getAllRoutes(pairs: string[][], pools: Pools): Routes {\n  const routes: Routes = {};\n  pairs.forEach((pair) => {\n    const tokenA = pair[0] ?? null;\n    const tokenB = pair[1] ?? null;\n\n    if (!tokenA || !tokenB) {\n      return;\n    }\n\n    routes[_getTradeId(tokenA, tokenB)] = _getRoutes(tokenA, tokenB, pools);\n  });\n\n  return routes;\n}\n\nfunction _getTradeId(tokenX: string, tokenY: string): string {\n  return _orderTokenPair(tokenX, tokenY).join('/');\n}\n\nfunction _getRoutes(tokenA: string, tokenB: string, pools: Pools): Route[] {\n  const routes: Route[] = [];\n\n  // Find all pools that contain the same tokens.\n  // Checking tokenAName and tokenBName will find Stable pools.\n  pools.forEach((poolConfig, poolId) => {\n    if (\n      (poolConfig.tokenAName.toString() === tokenA &&\n        poolConfig.tokenBName.toString() === tokenB) ||\n      (poolConfig.tokenAName.toString() === tokenB && poolConfig.tokenBName.toString() === tokenA)\n    ) {\n      routes.push([poolId]);\n    }\n  });\n\n  // Find all pools that contain the first token but not the second\n  const firstLegPools = Array.from(pools)\n    .filter(\n      ([, poolConfig]) =>\n        (poolConfig.tokenAName.toString() === tokenA &&\n          poolConfig.tokenBName.toString() !== tokenB) ||\n        (poolConfig.tokenBName.toString() === tokenA &&\n          poolConfig.tokenAName.toString() !== tokenB),\n    )\n    .map(([poolId, poolConfig]) => [\n      poolId,\n      poolConfig.tokenBName.toString() === tokenA\n        ? poolConfig.tokenAName.toString()\n        : poolConfig.tokenBName.toString(),\n    ]);\n\n  // Find all routes that can include firstLegPool and a second pool.\n  firstLegPools.forEach(([firstLegPoolId, intermediateTokenName]) => {\n    pools.forEach((poolConfig, secondLegPoolId) => {\n      if (\n        (poolConfig.tokenAName.toString() === intermediateTokenName &&\n          poolConfig.tokenBName.toString() === tokenB) ||\n        (poolConfig.tokenBName.toString() === intermediateTokenName &&\n          poolConfig.tokenAName.toString() === tokenB)\n      ) {\n        routes.push([firstLegPoolId!, secondLegPoolId]);\n      }\n    });\n  });\n\n  return routes;\n}\n","import { u64 } from '@solana/spl-token';\nimport BN from 'bn.js';\n\n// u64\n\nexport function convertToBalance(value: BN, decimals?: number): number {\n  if (!decimals) {\n    return 0;\n  }\n\n  const divisor = new BN(10).pow(new BN(decimals));\n  const quotient = value.div(divisor);\n  const remainder = value.mod(divisor);\n  return quotient.toNumber() + remainder.toNumber() / divisor.toNumber();\n\n  // return new Fraction(value, makeDecimalMultiplier(decimals)).asNumber;\n  // return value.mul(new BN(10).pown(-decimals)).\n}\n\n// Number\n\n// TODO: find better precision way for bignumber\nexport function toLamport(value: number, decimals: number): u64 {\n  return new u64(Math.round(value * 10 ** decimals));\n}\n","import { ASSOCIATED_TOKEN_PROGRAM_ID, NATIVE_MINT, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport {\n  PublicKey,\n  SystemProgram,\n  SYSVAR_INSTRUCTIONS_PUBKEY,\n  SYSVAR_RENT_PUBKEY,\n} from '@solana/web3.js';\n\nexport class SolanaSDKPublicKey {\n  static get tokenProgramId(): PublicKey {\n    return TOKEN_PROGRAM_ID;\n  }\n  static get sysvarRent(): PublicKey {\n    return SYSVAR_RENT_PUBKEY;\n  }\n  static get programId(): PublicKey {\n    return SystemProgram.programId;\n  }\n  static get wrappedSOLMint(): PublicKey {\n    return NATIVE_MINT;\n  }\n  static get splAssociatedTokenAccountProgramId(): PublicKey {\n    return ASSOCIATED_TOKEN_PROGRAM_ID;\n  }\n  static get renBTCMint(): PublicKey {\n    return new PublicKey('CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5');\n  }\n  static get renBTCMintDevnet(): PublicKey {\n    return new PublicKey('FsaLodPu4VmSwXGr3gWfwANe4vKf8XSZcCh1CEeJ3jpD');\n  }\n\n  static get sysvarInstruction(): PublicKey {\n    return SYSVAR_INSTRUCTIONS_PUBKEY; // Sysvar1nstructions1111111111111111111111111\n  }\n  static get secp256k1ProgramId(): PublicKey {\n    return new PublicKey('KeccakSecp256k11111111111111111111111111111');\n  }\n\n  static orcaSwapId(version = 2): PublicKey {\n    switch (version) {\n      case 2: {\n        return new PublicKey('9W959DqEETiGZocYWCQPaJ6sBmUzgfxXfqGeTEdp3aQP');\n      }\n      default: {\n        return new PublicKey('DjVE6JNiYqPL2QXyCUUh8rNjHrbz9hXHNYt99MQ59qw1');\n      }\n    }\n  }\n\n  static get usdcMint(): PublicKey {\n    return new PublicKey('EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v');\n  }\n  static get usdtMint(): PublicKey {\n    return new PublicKey('Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB');\n  }\n  static get dexPID(): PublicKey {\n    return new PublicKey('9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin');\n  }\n  static get serumSwapPID(): PublicKey {\n    return new PublicKey('22Y43yTVxuUkoRKdm9thyRhQ3SdgQS7c7kB6UNCiaczD');\n  }\n  static isUsdx(pubkey: PublicKey): boolean {\n    return pubkey.equals(this.usdcMint) || pubkey.equals(this.usdtMint);\n  }\n}\n","import type { PublicKey } from '@solana/web3.js';\n\nexport class SPLTokenDestinationAddress {\n  destination: PublicKey;\n  isUnregisteredAsocciatedToken: boolean;\n\n  constructor({\n    destination,\n    isUnregisteredAsocciatedToken,\n  }: {\n    destination: PublicKey;\n    isUnregisteredAsocciatedToken: boolean;\n  }) {\n    this.destination = destination;\n    this.isUnregisteredAsocciatedToken = isUnregisteredAsocciatedToken;\n  }\n}\n","import type { PublicKey, Signer, TransactionInstruction } from '@solana/web3.js';\n\nimport type { TransactionID } from 'new/sdk/SolanaSDK';\n\nexport class SwapResponse {\n  transactionId: TransactionID;\n  newWalletPubkey?: string | null;\n\n  constructor({\n    transactionId,\n    newWalletPubkey,\n  }: {\n    transactionId: TransactionID;\n    newWalletPubkey?: string | null;\n  }) {\n    this.transactionId = transactionId;\n    this.newWalletPubkey = newWalletPubkey;\n  }\n}\n\nexport class AccountInstructions {\n  account: PublicKey;\n  instructions: TransactionInstruction[];\n  cleanupInstructions: TransactionInstruction[];\n  signers: Signer[];\n\n  // additionally return new wallet address\n  protected newWalletPubkey?: string;\n  // additionally return newAccount's secretkey\n  protected secretKey?: Uint8Array;\n\n  constructor({\n    account,\n    instructions = [],\n    cleanupInstructions = [],\n    signers = [],\n    newWalletPubkey,\n    secretKey,\n  }: {\n    account: PublicKey;\n    instructions?: TransactionInstruction[];\n    cleanupInstructions?: TransactionInstruction[];\n    signers?: Signer[];\n    newWalletPubkey?: string;\n    secretKey?: Uint8Array;\n  }) {\n    this.account = account;\n    this.instructions = instructions;\n    this.cleanupInstructions = cleanupInstructions;\n    this.signers = signers;\n    this.newWalletPubkey = newWalletPubkey;\n    this.secretKey = secretKey;\n  }\n}\n","import { TokenOwnerOffCurveError } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\n\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\n/**\n * Get the address of the associated token account for a given mint and owner\n *\n * @param mint                     Token mint account\n * @param owner                    Owner of the new account\n * @param allowOwnerOffCurve       Allow the owner account to be a PDA (Program Derived Address)\n * @param programId                SPL Token program account\n * @param associatedTokenProgramId SPL Associated Token program account\n *\n * @return Address of the associated token account\n */\nexport function getAssociatedTokenAddressSync(\n  mint: PublicKey,\n  owner: PublicKey,\n  allowOwnerOffCurve = false,\n  programId = SolanaSDKPublicKey.tokenProgramId,\n  associatedTokenProgramId = SolanaSDKPublicKey.splAssociatedTokenAccountProgramId,\n): PublicKey {\n  if (!allowOwnerOffCurve && !PublicKey.isOnCurve(owner.toBuffer())) {\n    throw new TokenOwnerOffCurveError();\n  }\n\n  const [address] = PublicKey.findProgramAddressSync(\n    [owner.toBuffer(), programId.toBuffer(), mint.toBuffer()],\n    associatedTokenProgramId,\n  );\n\n  return address;\n}\n","import type { Token } from 'new/sdk/SolanaSDK';\n\nexport function excludingSpecialTokens(tokens: Token[]): Token[] {\n  return tokens.filter(\n    (token) =>\n      !token.tags.some(\n        (tag) => tag === 'nft' || tag === 'leveraged' || tag === 'bull' || tag === 'lp-token',\n      ),\n  );\n}\n","export function trySafe<T, D extends null>(\n  fn: () => T,\n  defaultValue: D | null = null,\n): T | D | null {\n  try {\n    return fn();\n  } catch (e) {\n    return defaultValue;\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\nimport type { Connection, PublicKey } from '@solana/web3.js';\nimport { SYSTEM_INSTRUCTION_LAYOUTS, Transaction } from '@solana/web3.js';\n\nimport type { Lamports } from '.';\nimport { FeeAmount, SolanaSDKPublicKey } from '.';\n\nexport interface FeeCalculator {\n  calculateNetworkFee(transaction: Transaction, connection: Connection): Promise<FeeAmount>;\n}\n\nexport class DefaultFeeCalculator implements FeeCalculator {\n  private readonly _lamportsPerSignature: Lamports;\n  private readonly _minRentExemption: Lamports;\n\n  constructor({\n    lamportsPerSignature,\n    minRentExemption,\n  }: {\n    lamportsPerSignature: Lamports;\n    minRentExemption: Lamports;\n  }) {\n    this._lamportsPerSignature = lamportsPerSignature;\n    this._minRentExemption = minRentExemption;\n  }\n\n  async calculateNetworkFee(transaction: Transaction, _connection: Connection): Promise<FeeAmount> {\n    // TODO: return than works\n    // const transactionFee = new u64((await transaction.getEstimatedFee(connection)) ?? 0);\n    const transactionFee = calculateTransactionFee(transaction, this._lamportsPerSignature);\n    let accountCreationFee: Lamports = ZERO;\n    let depositFee: Lamports = ZERO;\n    for (const instruction of transaction.instructions) {\n      let createdAccount: PublicKey | null = null;\n      switch (instruction.programId.toString()) {\n        case SolanaSDKPublicKey.programId.toString(): {\n          if (instruction.data.length < 4) {\n            break;\n          }\n          const index = instruction.data.readUIntBE(0, 3); // TODO: check its right\n          if (index === SYSTEM_INSTRUCTION_LAYOUTS.Create.index) {\n            createdAccount = instruction.keys[1]?.pubkey ?? null;\n          }\n          break;\n        }\n        case SolanaSDKPublicKey.splAssociatedTokenAccountProgramId.toString(): {\n          createdAccount = instruction.keys[1]?.pubkey ?? null;\n          break;\n        }\n        default:\n          break;\n      }\n\n      if (createdAccount) {\n        // Check if account is closed right after its creation\n        // TODO: CHECK data[0] casting\n        const closingInstruction = transaction.instructions.find(\n          (transaction) =>\n            transaction.data[0] === 9 &&\n            transaction.keys[0]?.pubkey.toString() === createdAccount!.toString(),\n        );\n        const isAccountClosedAfterCreation = Boolean(closingInstruction);\n\n        // If account is closed after creation, increase the deposit fee\n        if (isAccountClosedAfterCreation) {\n          depositFee = new u64(depositFee.add(this._lamportsPerSignature));\n        }\n        // Otherwise, there will be an account creation fee\n        else {\n          accountCreationFee = new u64(accountCreationFee.add(this._minRentExemption));\n        }\n      }\n    }\n\n    return new FeeAmount({\n      transaction: transactionFee,\n      accountBalances: accountCreationFee,\n      deposit: depositFee,\n    });\n  }\n}\n\n// TODO: temp, use getEstimatedFee instead\nexport function calculateTransactionFee(transaction: Transaction, lamportsPerSignatures: u64): u64 {\n  const _transaction = new Transaction();\n  _transaction.instructions = transaction.instructions;\n  _transaction.recentBlockhash = 'BdA9gRatFvvwszr9uU5fznkHoMVQE8tf6ZFi8Mp6xdKs'; // fake\n  _transaction.feePayer = transaction.feePayer;\n  const message = _transaction.compileMessage();\n  return new u64(message.header.numRequiredSignatures).mul(lamportsPerSignatures);\n}\n","/* eslint-disable no-console */\nimport PATH from 'path';\n\nexport enum LogEvent {\n  error = '[]',\n  info = '[]', // for guard & alert & route\n  debug = '[]', // tested values & local notifications\n  verbose = '[]', // current values\n  warning = '[]',\n  severe = '[]', // tokens & keys & init & deinit\n  request = '[]',\n  response = '[]',\n  event = '[]',\n}\n\nfunction getStackTrace() {\n  const obj = { stack: '' };\n  Error.captureStackTrace(obj, getStackTrace);\n  return obj.stack;\n}\n\nexport class Logger {\n  /**\n   * @param message This will be the debug message to appear on the debug console.\n   * @param event Type of event as s of LogEvent enum.\n   */\n  static log(message: unknown, event: LogEvent, _apiMethod?: string) {\n    const stack = getStackTrace();\n    const matchstack = stack.match(/\\(.*?\\)/g) || []; // Get the contents of all parentheses in the call stack\n    const line = matchstack[2] || ''; // The 0th call is let stack = getStackTrace() The 1st call stack is where log is called\n\n    // TODO: find better ways to investigate file and line with source maps\n    const fileAndLine = line.substring(line.lastIndexOf(PATH.sep) + 1, line.length - 1);\n\n    console.log(`${new Date().toLocaleString()} ${event}[${fileAndLine}] -> `, message);\n  }\n}\n","import type { AccountMeta, PublicKey } from '@solana/web3.js';\n\n// AccountMeta\n\nexport function readonly({\n  pubkey,\n  isSigner,\n}: {\n  pubkey: PublicKey;\n  isSigner: boolean;\n}): AccountMeta {\n  return {\n    pubkey,\n    isSigner,\n    isWritable: false,\n  };\n}\n\nexport function writable({\n  pubkey,\n  isSigner,\n}: {\n  pubkey: PublicKey;\n  isSigner: boolean;\n}): AccountMeta {\n  return {\n    pubkey,\n    isSigner,\n    isWritable: true,\n  };\n}\n","import type { Network } from '@saberhq/solana-contrib';\nimport { clusterApiUrl } from '@solana/web3.js';\n\nimport { isEnabled } from 'new/services/FeatureFlags';\nimport { Features } from 'new/services/FeatureFlags/features';\nimport { RemoteConfig } from 'new/services/RemoteConfig';\n\nenum APIKeysNames {\n  rpcpool = 'rpcpool',\n}\n\nconst API_KEYS: Record<APIKeysNames, string> = {\n  rpcpool: process.env.REACT_APP_RPCPOOL_API_KEY as string,\n};\n\nexport type APIEndpointProps = {\n  address: string;\n  network: Network;\n  socketUrl?: string;\n  additionalQuery?: string;\n};\n\nexport class APIEndpoint {\n  address: string;\n  network: Network;\n  socketUrl: string;\n  additionalQuery?: string;\n\n  private _apiKeyName?: APIKeysNames;\n\n  constructor({ address, network, socketUrl, additionalQuery }: APIEndpointProps) {\n    this.address = address;\n    this.network = network;\n    this.socketUrl = socketUrl ?? address.replace('http', 'ws');\n\n    const apiKeyName = additionalQuery as APIKeysNames;\n    this.additionalQuery = API_KEYS[apiKeyName] || additionalQuery;\n\n    this._apiKeyName = API_KEYS[apiKeyName] ? apiKeyName : undefined;\n  }\n\n  // TODO: defaults\n  static get _defaultEndpoints(): APIEndpoint[] {\n    const endpoints: APIEndpoint[] = [\n      new APIEndpoint({\n        address: 'https://p2p.rpcpool.com',\n        network: 'mainnet-beta',\n        additionalQuery: APIKeysNames.rpcpool,\n      }),\n      new APIEndpoint({\n        address: 'https://solana-api.projectserum.com',\n        network: 'mainnet-beta',\n      }),\n      new APIEndpoint({\n        address: clusterApiUrl('mainnet-beta'),\n        network: 'mainnet-beta',\n      }),\n    ];\n\n    // TODO: add feature flag condition\n    // if (debug) {\n    // endpoints.push(\n    //   new APIEndpoint({\n    //     address: clusterApiUrl('testnet'),\n    //     network: 'testnet',\n    //   }),\n    // );\n    // endpoints.push(\n    //   new APIEndpoint({\n    //     address: clusterApiUrl('devnet'),\n    //     network: 'devnet',\n    //   }),\n    // );\n    // }\n\n    return endpoints;\n  }\n\n  static get definedEndpoints(): APIEndpoint[] {\n    const definedEndpoints = RemoteConfig.definedEndpoints.map(\n      ({ urlString, network, additionalQuery }) =>\n        new APIEndpoint({ address: urlString, network: network as Network, additionalQuery }),\n    );\n\n    let endpoints: APIEndpoint[];\n    if (definedEndpoints.length) {\n      endpoints = definedEndpoints;\n    } else {\n      endpoints = APIEndpoint._defaultEndpoints;\n    }\n\n    if (isEnabled(Features.ShowDevnet)) {\n      endpoints.push(\n        new APIEndpoint({\n          address: clusterApiUrl('testnet'),\n          network: 'testnet',\n        }),\n      );\n      endpoints.push(\n        new APIEndpoint({\n          address: clusterApiUrl('devnet'),\n          network: 'devnet',\n        }),\n      );\n    }\n\n    return endpoints;\n  }\n\n  getURL(): string {\n    let url = this.address;\n    const query = this.additionalQuery;\n    if (query) {\n      url += '/' + query;\n    }\n    return url;\n  }\n\n  getSocketURL(): string {\n    let url = this.socketUrl;\n    const query = this.additionalQuery;\n    if (query) {\n      url += '/' + query;\n    }\n    return url;\n  }\n\n  toJSON(): APIEndpointProps {\n    const { address, network, socketUrl, additionalQuery, _apiKeyName } = this;\n    return {\n      address,\n      network,\n      socketUrl,\n      additionalQuery: _apiKeyName || additionalQuery,\n    };\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { AccountLayout, u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\n\nexport class AccountInfo {\n  mint: PublicKey;\n  owner: PublicKey;\n  lamports: u64;\n  delegateOption: number;\n  delegate: PublicKey | null;\n  state: number;\n  isNativeOption: number;\n  isNativeRaw: u64;\n  delegatedAmount: u64;\n  closeAuthorityOption: number;\n  closeAuthority: PublicKey | null;\n\n  static decode(data: Buffer) {\n    // TODO: need try catch or more complex conditions?\n    try {\n      return new AccountInfo(data);\n    } catch {\n      return null;\n    }\n  }\n\n  constructor(data: Buffer) {\n    const accountInfo = AccountLayout.decode(data);\n    this.mint = new PublicKey(accountInfo.mint);\n    this.owner = new PublicKey(accountInfo.owner);\n    this.lamports = u64.fromBuffer(accountInfo.amount);\n    this.delegateOption = accountInfo.delegateOption;\n    this.delegate = new PublicKey(accountInfo.delegate);\n    this.state = accountInfo.state;\n    this.isNativeOption = accountInfo.isNativeOption;\n    this.isNativeRaw = accountInfo.isNativeRaw;\n    this.delegatedAmount = new u64(accountInfo.delegatedAmount);\n    this.closeAuthorityOption = accountInfo.closeAuthorityOption;\n    this.closeAuthority = accountInfo.closeAuthority\n      ? new PublicKey(accountInfo.closeAuthority)\n      : null;\n\n    if (this.delegateOption === 0) {\n      this.delegate = null;\n      this.delegatedAmount = ZERO;\n    }\n\n    if (this.closeAuthorityOption === 0) {\n      this.closeAuthority = null;\n    }\n  }\n\n  // non-parsing\n  get isInitialized(): boolean {\n    return this.state !== 0;\n  }\n\n  get isFrozen(): boolean {\n    return this.state === 2;\n  }\n\n  get rentExemptReserve(): u64 | null {\n    if (this.isNativeOption === 1) {\n      return this.isNativeRaw;\n    }\n    return null;\n  }\n\n  get isNative(): boolean {\n    return this.isNativeOption === 1;\n  }\n\n  static span = AccountLayout.span;\n}\n","export class EmptyInfo {\n  static decode(data: Buffer): EmptyInfo {\n    return new EmptyInfo(data);\n  }\n\n  constructor(_data: Buffer) {}\n}\n","import { MintLayout, u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\n\nexport class MintInfo {\n  mintAuthorityOption: number;\n  private _mintAuthority: null | PublicKey;\n  supply: u64;\n  decimals: number;\n  isInitialized: boolean;\n  freezeAuthorityOption: number;\n  private _freezeAuthority: null | PublicKey;\n\n  static decode(data: Buffer) {\n    return new MintInfo(data);\n  }\n\n  constructor(data: Buffer) {\n    const accountInfo = MintLayout.decode(data);\n    this.mintAuthorityOption = accountInfo.mintAuthorityOption;\n    this._mintAuthority = accountInfo.mintAuthority\n      ? new PublicKey(accountInfo.mintAuthority)\n      : null;\n    this.supply = u64.fromBuffer(accountInfo.supply);\n    this.decimals = accountInfo.decimals;\n    this.isInitialized = accountInfo.isInitialized;\n    this.freezeAuthorityOption = accountInfo.freezeAuthorityOption;\n    this._freezeAuthority = accountInfo.freezeAuthority\n      ? new PublicKey(accountInfo.freezeAuthority)\n      : null;\n\n    if (this.mintAuthorityOption === 0) {\n      this._mintAuthority = null;\n    }\n\n    if (this.freezeAuthorityOption === 0) {\n      this._freezeAuthority = null;\n    }\n  }\n\n  get mintAuthority() {\n    return this._mintAuthority;\n  }\n\n  get freezeAuthority() {\n    return this._freezeAuthority;\n  }\n\n  static span = MintLayout.span;\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\n\nexport class OtherFee {\n  amount: number;\n  unit: string;\n\n  constructor({ amount, unit }: { amount: number; unit: string }) {\n    this.amount = amount;\n    this.unit = unit;\n  }\n}\n\nexport class FeeAmount {\n  transaction: u64;\n  accountBalances: u64;\n  deposit: u64 = ZERO;\n  others?: OtherFee[];\n\n  constructor({\n    transaction,\n    accountBalances,\n    deposit = ZERO,\n    others,\n  }: {\n    transaction: u64;\n    accountBalances: u64;\n    deposit?: u64;\n    others?: OtherFee[];\n  }) {\n    this.transaction = new u64(transaction.toString());\n    this.accountBalances = new u64(accountBalances.toString());\n    this.deposit = new u64(deposit.toString());\n    this.others = others;\n  }\n\n  get total(): u64 {\n    return new u64(this.transaction.add(this.accountBalances).add(this.deposit).toString());\n  }\n\n  static zero(): FeeAmount {\n    return new FeeAmount({ transaction: ZERO, accountBalances: ZERO });\n  }\n\n  // for debug\n  toJSON() {\n    return {\n      transaction: this.transaction.toNumber(),\n      accountBalances: this.accountBalances.toNumber(),\n      deposit: this.deposit.toNumber(),\n      others: this.others,\n      total: this.total.toNumber(),\n    };\n  }\n\n  clone(): FeeAmount {\n    // https://stackoverflow.com/a/44782052/1024097\n    return Object.assign(Object.create(Object.getPrototypeOf(this)), this);\n  }\n}\n","import { u64 } from '@solana/spl-token';\nimport type {\n  ParsedInnerInstruction,\n  ParsedTransactionMeta,\n  ParsedTransactionWithMeta,\n  TokenAmount,\n} from '@solana/web3.js';\n\nimport type { ConfirmedTransaction, ParsedInstruction } from './ConfirmedTransaction';\n\nexport type TransactionID = string;\nexport type Lamports = u64;\n\nexport type TransactionInfo = Omit<ParsedTransactionWithMeta, 'meta' | 'transaction'> & {\n  meta?: TransactionMeta;\n  transaction: ConfirmedTransaction;\n};\n\nexport type TransactionMeta = Omit<ParsedTransactionMeta, 'innerInstructions'> & {\n  innerInstructions: InnerInstruction[] | null;\n};\n\nexport type InnerInstruction = Omit<ParsedInnerInstruction, 'instructions'> & {\n  instructions: ParsedInstruction[];\n};\n\nexport class TokenAccountBalance {\n  uiAmount: number | null;\n  amount: string;\n  decimals?: number;\n  uiAmountString?: string;\n\n  constructor({ uiAmount, amount, decimals, uiAmountString }: TokenAmount) {\n    this.uiAmount = uiAmount;\n    this.amount = amount;\n    this.decimals = decimals;\n    this.uiAmountString = uiAmountString;\n  }\n\n  get amountInU64(): u64 {\n    return new u64(this.amount);\n  }\n}\n","import type { ParsedInstruction } from './ConfirmedTransaction';\nimport type { InnerInstruction, TransactionInfo } from './Models';\n\nexport type ParsedInstructionData = {\n  instruction: ParsedInstruction;\n  innerInstruction?: InnerInstruction;\n};\n\nexport const instructionsData = (transactionInfo: TransactionInfo): ParsedInstructionData[] => {\n  const instructions = transactionInfo.transaction.message.instructions;\n  const innerInstructions = transactionInfo.meta?.innerInstructions ?? [];\n\n  return instructions.map((instruction, index) => ({\n    instruction,\n    innerInstruction: innerInstructions.find((inst) => inst.index === index),\n  }));\n};\n","import type { PublicKey, Signer, Transaction } from '@solana/web3.js';\nimport bs58 from 'bs58';\n\nimport { LogEvent, Logger, SolanaSDKError } from '../index';\nimport type { FeeAmount } from './FeeAmount';\n\nexport class PreparedTransaction {\n  owner?: PublicKey;\n  transaction: Transaction;\n  signers: Signer[];\n  expectedFee: FeeAmount;\n\n  constructor({\n    owner,\n    transaction,\n    signers,\n    expectedFee,\n  }: {\n    owner?: PublicKey;\n    transaction: Transaction;\n    signers: Signer[];\n    expectedFee: FeeAmount;\n  }) {\n    this.owner = owner;\n    this.transaction = transaction;\n    this.signers = signers;\n    this.expectedFee = expectedFee;\n  }\n\n  sign() {\n    if (this.signers.length > 0) {\n      this.transaction.partialSign(...this.signers);\n    }\n  }\n\n  serialize(): string {\n    const transaction = this.transaction;\n    const serializedTransaction = transaction.serialize().toString('base64');\n\n    Logger.log(serializedTransaction, LogEvent.info);\n    const decodedTransaction = transaction;\n    Logger.log(decodedTransaction, LogEvent.info);\n\n    return serializedTransaction;\n  }\n\n  findSignature(publicKey: PublicKey): string {\n    const signature = this.transaction.signatures.find((sign) =>\n      sign.publicKey.equals(publicKey),\n    )?.signature;\n\n    if (!signature) {\n      console.error(publicKey.toString());\n      throw SolanaSDKError.other('Signature not found');\n    }\n\n    return bs58.encode(signature);\n  }\n\n  clone(): PreparedTransaction {\n    return Object.assign(Object.create(Object.getPrototypeOf(this)), this);\n  }\n}\n","// base class for \"instanceof\"\nexport class SolanaError extends Error {}\n\nclass UnauthorizedError extends SolanaError {}\nclass InvalidRequestError extends SolanaError {}\nclass OtherError extends SolanaError {}\nclass UnknownError extends SolanaError {}\n\nexport class SolanaSDKError {\n  static equals(lhs: Error, rhs: Error) {\n    if (isSameInstance(lhs, rhs, OtherError)) {\n      return lhs.message === rhs.message;\n    }\n    if (isSameInstance(lhs, rhs, InvalidRequestError)) {\n      return lhs.message === rhs.message;\n    }\n\n    return false;\n  }\n\n  static unauthorized(): UnauthorizedError {\n    return new UnauthorizedError('unauthorized');\n  }\n\n  // Invalid Requests\n  static invalidRequest(reason?: string): InvalidRequestError {\n    return new InvalidRequestError(reason);\n  }\n\n  // TODO: invalidResponse\n  // static invalidResponse(reason?: string): InvalidRequestError {\n  //   return new InvalidRequestError(reason);\n  // }\n\n  // Other\n  static other(message: string): OtherError {\n    return new OtherError(message);\n  }\n  static unknown(): UnknownError {\n    return new UnknownError('Unknown error');\n  }\n\n  // Predefined error\n  static couldNotRetrieveAccountInfo(): OtherError {\n    return new OtherError('Could not retrieve account info');\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isSameInstance(lhs: Error, rhs: Error, Instance: any) {\n  return lhs instanceof Instance && rhs instanceof Instance;\n}\n","import type { Network } from '@saberhq/solana-contrib';\nimport { chainIdToNetwork } from '@saberhq/token-utils';\n\nimport type { Lamports } from 'new/sdk/SolanaSDK';\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nexport class TokenList {\n  constructor() {}\n}\n\nexport enum WrappingToken {\n  sollet = 'sollet',\n  wormhole = 'wormhole',\n}\n\nexport class Token {\n  /**\n   * The network that the Token is on.\n   */\n  readonly network: Network;\n\n  chainId: number;\n  address: string;\n  symbol: string;\n  name: string;\n  decimals: number;\n  logoURI?: string | null;\n  tags: string[];\n  extensions?: TokenExtensions | null;\n  supply?: Lamports | null;\n  private _isNative: boolean;\n\n  constructor({\n    chainId,\n    address,\n    symbol,\n    name,\n    decimals,\n    logoURI,\n    tags = [],\n    extensions,\n    isNative = false,\n    supply,\n  }: {\n    chainId: number;\n    address: string;\n    symbol: string;\n    name: string;\n    decimals: number;\n    logoURI?: string | null;\n    tags?: string[];\n    extensions?: TokenExtensions | null;\n    isNative?: boolean;\n    supply?: Lamports;\n  }) {\n    this.chainId = chainId;\n    this.address = address;\n    this.symbol = symbol;\n    this.name = name;\n    this.decimals = decimals;\n    this.logoURI = logoURI;\n    this.tags = tags;\n    this.extensions = extensions;\n    this.supply = supply;\n    this._isNative = isNative;\n\n    this.network = chainIdToNetwork(chainId);\n  }\n\n  get isNative(): boolean {\n    return this._isNative;\n  }\n\n  static unsupported({\n    mint,\n    decimals = 0,\n    symbol = '',\n    supply,\n  }: {\n    mint?: string;\n    decimals?: number;\n    symbol?: string;\n    supply?: Lamports;\n  }): Token {\n    return new Token({\n      chainId: 101,\n      address: mint ?? '<undefined>',\n      symbol: symbol,\n      name: mint ?? '<undefined>',\n      decimals: decimals,\n      logoURI: null,\n      tags: [],\n      extensions: null,\n      supply,\n    });\n  }\n\n  static get nativeSolana(): Token {\n    return new Token({\n      chainId: 101,\n      address: 'So11111111111111111111111111111111111111112',\n      symbol: 'SOL',\n      name: 'Solana',\n      decimals: 9,\n      logoURI:\n        'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png',\n      tags: [],\n      extensions: {\n        coingeckoId: 'solana',\n      },\n      isNative: true,\n    });\n  }\n\n  static get renBTC(): Token {\n    return new Token({\n      chainId: 101,\n      address: SolanaSDKPublicKey.renBTCMint.toString(),\n      symbol: 'renBTC',\n      name: 'renBTC',\n      decimals: 8,\n      logoURI:\n        'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5/logo.png',\n      extensions: {\n        website: 'https://renproject.io/',\n        serumV3Usdc: '74Ciu5yRzhe8TFTHvQuEVbFZJrbnCMRoohBK33NNiPtv',\n        coingeckoId: 'renbtc',\n      },\n    });\n  }\n\n  static get usdc(): Token {\n    return new Token({\n      chainId: 101,\n      address: SolanaSDKPublicKey.renBTCMint.toString(),\n      symbol: 'USDC',\n      name: 'USDC',\n      decimals: 8,\n      logoURI:\n        'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png',\n      extensions: {\n        coingeckoId: 'usd-coin',\n      },\n    });\n  }\n\n  get wrappedBy(): WrappingToken | null {\n    if (this.tags.some((tag) => tag === 'wrapped-sollet')) {\n      return WrappingToken.sollet;\n    }\n\n    if (this.tags.some((tag) => tag === 'wrapped') && this.tags.some((tag) => tag === 'wormhole')) {\n      return WrappingToken.wormhole;\n    }\n\n    return null;\n  }\n\n  get isLiquidity(): boolean {\n    return this.tags.some((tag) => tag === 'lp-token');\n  }\n\n  get isUndefined(): boolean {\n    return this.symbol === '';\n  }\n\n  get isNativeSOL(): boolean {\n    return this.symbol === 'SOL' && this.isNative;\n  }\n\n  get isRenBTC(): boolean {\n    return (\n      this.address === SolanaSDKPublicKey.renBTCMint.toString() ||\n      this.address === SolanaSDKPublicKey.renBTCMintDevnet.toString()\n    );\n  }\n\n  equals(other: Token): boolean {\n    return tokensEqual(this, other);\n  }\n}\n\n/**\n * Checks if two tokens are equal.\n * @param a\n * @param b\n * @returns\n */\nexport const tokensEqual = (a: Token | undefined, b: Token | undefined): boolean =>\n  a !== undefined && b !== undefined && a.address === b.address && a.network === b.network;\n\nexport interface TokenExtensions {\n  website?: string | null;\n  bridgeContract?: string | null;\n  assetContract?: string | null;\n  address?: string | null;\n  explorer?: string | null;\n  twitter?: string | null;\n  github?: string | null;\n  medium?: string | null;\n  tgann?: string | null;\n  tggroup?: string | null;\n  discord?: string | null;\n  serumV3Usdt?: string | null;\n  serumV3Usdc?: string | null;\n  coingeckoId?: string | null;\n  imageUrl?: string | null;\n  description?: string | null;\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { makeAutoObservable } from 'mobx';\nimport { isEmpty } from 'ramda';\n\nimport { convertToBalance } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport type { CurrentPrice } from 'new/services/PriceAPIs/PricesService';\n\nimport type { Lamports } from './Models';\nimport { Token } from './SolanaToken';\n\ninterface SolanaWalletUserInfo {\n  price?: CurrentPrice | null;\n  _isHidden: boolean;\n  isProcessing?: boolean;\n  _customName?: string;\n  isBeingCreated?: boolean;\n  creatingError?: string;\n}\n\nconst defaultSolanaWalletUserInfo: SolanaWalletUserInfo = {\n  _isHidden: false,\n};\n\nexport class Wallet {\n  // Properties\n\n  pubkey?: string | null;\n  lamports?: Lamports | null;\n  token: Token;\n  userInfo: object | null = null;\n  supply?: number | null;\n\n  get isNativeSOL(): boolean {\n    return this.token.isNativeSOL;\n  }\n\n  constructor({\n    pubkey = null,\n    lamports = null,\n    supply = null,\n    token,\n  }: {\n    pubkey?: string | null;\n    lamports?: Lamports | null;\n    supply?: number | null;\n    token: Token;\n  }) {\n    this.pubkey = pubkey;\n    this.lamports = lamports;\n    this.supply = supply;\n    this.token = token;\n\n    makeAutoObservable(this);\n  }\n\n  // Computed properties\n  get amount(): number {\n    return this.lamports ? convertToBalance(this.lamports, this.token.decimals) : 0;\n  }\n\n  // Fabric methods\n  static nativeSolana({\n    pubkey = null,\n    lamports = null,\n  }: {\n    pubkey?: string | null;\n    lamports?: Lamports | null;\n  }): Wallet {\n    return new Wallet({ pubkey, lamports, token: Token.nativeSolana });\n  }\n\n  // extensions\n\n  get name(): string {\n    if (!this.pubkey) {\n      return this.token.symbol;\n    }\n\n    return Defaults.walletName[this.pubkey] ?? this.token.symbol;\n  }\n\n  get isHidden(): boolean {\n    if (this.token.isNativeSOL) {\n      return false;\n    }\n\n    if (!this.pubkey) {\n      return false;\n    }\n\n    if (Defaults.hiddenWalletPubkey.includes(this.pubkey)) {\n      return true;\n    } else if (Defaults.unhiddenWalletPubkey.includes(this.pubkey)) {\n      return false;\n    } else if (Defaults.hideZeroBalances && this.amount === 0) {\n      return true;\n    }\n\n    return false;\n  }\n\n  get price(): CurrentPrice | null {\n    return this.getParsedUserInfo().price ?? null;\n  }\n\n  set price(newValue) {\n    const userInfo = this.getParsedUserInfo();\n    userInfo.price = newValue;\n    this.userInfo = userInfo;\n  }\n\n  get priceInCurrentFiat(): number {\n    return this.price?.value ?? 0;\n  }\n\n  get amountInCurrentFiat(): number {\n    return this.amount * this.priceInCurrentFiat;\n  }\n\n  get shortAddress() {\n    return `${this.pubkey?.slice(0, 4)}${this.pubkey?.slice(-4)}`;\n  }\n\n  updateVisibility() {\n    const userInfo = this.getParsedUserInfo();\n    userInfo._isHidden = this.isHidden;\n    this.userInfo = userInfo;\n  }\n\n  getParsedUserInfo(): SolanaWalletUserInfo {\n    return (this.userInfo as SolanaWalletUserInfo) ?? { ...defaultSolanaWalletUserInfo };\n  }\n\n  increaseBalance(diffInLamports: Lamports): void {\n    const currentBalance = this.lamports ?? ZERO;\n    this.lamports = currentBalance.add(diffInLamports);\n  }\n\n  decreaseBalance(diffInLamports: Lamports): void {\n    const currentBalance = this.lamports ?? ZERO;\n    if (currentBalance.gte(diffInLamports)) {\n      this.lamports = currentBalance.sub(diffInLamports);\n    } else {\n      this.lamports = ZERO;\n    }\n  }\n\n  static defaultSorter(lhs: Wallet, rhs: Wallet): number {\n    // Solana\n    if (lhs.isNativeSOL !== rhs.isNativeSOL) {\n      return lhs.isNativeSOL ? -1 : 1;\n    }\n\n    if (lhs.token.isLiquidity !== rhs.token.isLiquidity) {\n      return !lhs.token.isLiquidity ? -1 : 1;\n    }\n\n    if (lhs.amountInCurrentFiat !== rhs.amountInCurrentFiat) {\n      return lhs.amountInCurrentFiat > rhs.amountInCurrentFiat ? -1 : 1;\n    }\n\n    if (isEmpty(lhs.token.symbol) !== isEmpty(rhs.token.symbol)) {\n      return !isEmpty(lhs.token.symbol) ? -1 : 1;\n    }\n\n    if (lhs.amount !== rhs.amount) {\n      return lhs.amount > rhs.amount ? -1 : 1;\n    }\n\n    if (lhs.token.symbol !== rhs.token.symbol) {\n      return lhs.token.symbol < rhs.token.symbol ? -1 : 1;\n    }\n\n    return lhs.name < rhs.name ? -1 : 1;\n  }\n\n  // extensions\n\n  get mintAddress(): string {\n    return this.token.address;\n  }\n}\n","import type { Provider } from '@project-serum/anchor';\nimport { Token as SPLToken, u64 } from '@solana/spl-token';\nimport type {\n  AccountInfo as BufferInfo,\n  Commitment,\n  Signer,\n  TransactionInstruction,\n} from '@solana/web3.js';\nimport { Keypair, PublicKey, SystemProgram, Transaction } from '@solana/web3.js';\nimport promiseRetry from 'promise-retry';\n\nimport type {\n  APIEndpoint,\n  FeeCalculator,\n  Lamports,\n  SolanaTokensRepository,\n  TransactionID,\n} from './';\nimport {\n  AccountInfo,\n  AccountInstructions,\n  DefaultFeeCalculator,\n  EmptyInfo,\n  getAssociatedTokenAddressSync,\n  LogEvent,\n  Logger,\n  MintInfo,\n  PreparedTransaction,\n  SolanaSDKError,\n  SolanaSDKPublicKey,\n  SPLTokenDestinationAddress,\n  Token,\n  TokenAccountBalance,\n  TokensRepository,\n  Wallet,\n} from './';\n\n// export interface SolanaSDKAccountStorage {\n//   readonly account?: Account;\n//   save(account: Account): void;\n// }\n\nexport class SolanaSDK {\n  // Properties\n  provider: Provider;\n  // accountStorage: SolanaSDKAccountStorage;\n  endpoint: APIEndpoint;\n\n  constructor({\n    provider,\n    endpoint,\n  }: // accountStorage,\n  {\n    provider: Provider;\n    endpoint: APIEndpoint;\n    // accountStorage: SolanaSDKAccountStorage;\n  }) {\n    this.provider = provider;\n    this.endpoint = endpoint;\n    // this.accountStorage = accountStorage;\n  }\n\n  // SolanaSDKMethods\n\n  getAccountInfo<T>({\n    account,\n    decodedTo,\n  }: {\n    account: string;\n    decodedTo: { decode(data: Buffer): T };\n  }): Promise<BufferInfo<T> | null> {\n    const pubkey = new PublicKey(account);\n    return this.provider.connection.getAccountInfo(pubkey).then((info) => {\n      if (!info) {\n        return null;\n        // throw SolanaSDKError.couldNotRetrieveAccountInfo();\n      }\n\n      return {\n        ...info,\n        data: decodedTo.decode(info.data),\n      };\n    });\n  }\n\n  async getAccountInfoOr<T>({\n    account,\n    anotherAccount,\n    decodedTo,\n  }: {\n    account?: string;\n    anotherAccount?: string;\n    decodedTo: { decode(data: Buffer): T };\n  }): Promise<BufferInfo<T> | null> {\n    if (!account) {\n      return null;\n    }\n\n    let accountInfo = null;\n    try {\n      accountInfo = await this.getAccountInfo({\n        account,\n        decodedTo,\n      });\n    } catch {\n      // ignore\n    }\n\n    if (accountInfo) {\n      return accountInfo;\n    } else if (anotherAccount) {\n      return this.getAccountInfo({\n        account: anotherAccount,\n        decodedTo,\n      });\n    } else {\n      throw SolanaSDKError.couldNotRetrieveAccountInfo();\n    }\n  }\n\n  async getMinimumBalanceForRentExemption(span: number): Promise<Lamports> {\n    return new u64(await this.provider.connection.getMinimumBalanceForRentExemption(span));\n  }\n\n  async getMultipleAccounts<T>({\n    pubkeys,\n    decodedTo,\n  }: {\n    pubkeys: string[];\n    decodedTo: { decode(data: Buffer): T };\n  }): Promise<(BufferInfo<T> | null)[]> {\n    if (pubkeys.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const pubkeysNew = pubkeys.map((pubkey) => new PublicKey(pubkey));\n    return (await this.provider.connection.getMultipleAccountsInfo(pubkeysNew)).map((info) => {\n      if (!info) {\n        return null;\n      }\n\n      return {\n        ...info,\n        data: decodedTo.decode(info.data),\n      };\n    });\n  }\n\n  async getRecentBlockhash(commitment?: Commitment): Promise<string> {\n    return (await this.provider.connection.getRecentBlockhash(commitment)).blockhash;\n  }\n\n  async getTokenAccountBalance(\n    tokenAddress: string,\n    commitment?: Commitment,\n  ): Promise<TokenAccountBalance> {\n    const result = await this.provider.connection.getTokenAccountBalance(\n      new PublicKey(tokenAddress),\n      commitment,\n    );\n    if (!result.value.amount) {\n      throw SolanaSDKError.couldNotRetrieveAccountInfo();\n    }\n    return new TokenAccountBalance(result.value);\n  }\n\n  // TODO: test it\n\n  // Wait until transaction is confirmed, return even when there is one or more confirmations and request timed out\n  waitForConfirmation(signature: string): Promise<void> {\n    let partiallyConfirmed = false;\n    // Due to a bug (https://github.com/solana-labs/solana/issues/15461)\n    // the `confirmationStatus` field could be unpopulated.\n    // To handle this case, also check the `confirmations` field.\n    // Note that a `null` value for `confirmations` signals that the\n    // transaction was finalized.\n\n    return promiseRetry(\n      (retry) => {\n        return this.provider.connection\n          .getSignatureStatus(signature)\n          .then((status) => {\n            const confirmations = status.value?.confirmations;\n            if (confirmations && confirmations > 0) {\n              partiallyConfirmed = true;\n            }\n\n            const confirmed =\n              status.value?.confirmations === null ||\n              status.value?.confirmationStatus === 'finalized';\n\n            if (confirmed) {\n              return;\n            }\n\n            throw new Error('Status has not been confirmed');\n          })\n          .catch(retry);\n      },\n      {\n        retries: 30,\n        minTimeout: 1_000,\n        maxTimeout: 2_000,\n        factor: 1,\n      },\n    ).catch((err) => {\n      if (partiallyConfirmed) {\n        return;\n      }\n\n      throw err;\n    });\n  }\n\n  getMultipleMintDatas({\n    mintAddresses,\n    programId = SolanaSDKPublicKey.tokenProgramId.toString(),\n  }: {\n    mintAddresses: string[];\n    programId?: string;\n  }): Promise<(MintInfo | null)[]> {\n    return this.getMultipleAccounts<MintInfo>({\n      pubkeys: mintAddresses,\n      decodedTo: MintInfo,\n    }).then((accounts) => {\n      if (accounts.some((account) => account?.owner.toString() !== programId)) {\n        throw SolanaSDKError.other('Invalid mint owner');\n      }\n\n      const result = accounts.map((account) => account?.data ?? null);\n      if (result.length !== mintAddresses.length) {\n        throw SolanaSDKError.other('Some of mint data are missing');\n      }\n\n      return result;\n    });\n  }\n\n  async checkIfAssociatedTokenAccountExists(owner: PublicKey, mint: string): Promise<boolean> {\n    const mintAddress = new PublicKey(mint);\n\n    const associatedTokenAccount = await SPLToken.getAssociatedTokenAddress(\n      SolanaSDKPublicKey.splAssociatedTokenAccountProgramId,\n      SolanaSDKPublicKey.tokenProgramId,\n      mintAddress,\n      owner,\n    );\n\n    return this.provider.connection\n      .getAccountInfo(associatedTokenAccount)\n      .then((info) => {\n        if (!info) {\n          throw SolanaSDKError.couldNotRetrieveAccountInfo();\n        }\n\n        const accountInfo = info as unknown as BufferInfo<{ mint: string }>;\n        // detect if destination address is already a SPLToken address\n        if (accountInfo.data.mint === mint) {\n          return true;\n        }\n\n        return false;\n      })\n      .catch((error) => {\n        if (error === SolanaSDKError.couldNotRetrieveAccountInfo()) {\n          return false;\n        }\n\n        throw error;\n      });\n  }\n\n  // SolanaSDKActions\n\n  async prepareTransaction({\n    owner,\n    instructions,\n    signers = [],\n    feePayer,\n    feeCalculator,\n  }: {\n    owner?: PublicKey;\n    instructions: TransactionInstruction[];\n    signers?: Signer[];\n    feePayer: PublicKey;\n    feeCalculator?: FeeCalculator;\n  }): Promise<PreparedTransaction> {\n    // form transaction\n    const transaction = new Transaction();\n    transaction.instructions = instructions;\n    transaction.feePayer = feePayer;\n\n    let feeCalculatorNew: FeeCalculator;\n    if (feeCalculator) {\n      feeCalculatorNew = feeCalculator;\n    } else {\n      const lps = new u64(\n        (await this.provider.connection.getRecentBlockhash()).feeCalculator.lamportsPerSignature,\n      );\n      const minRentExemption = new u64(\n        await this.getMinimumBalanceForRentExemption(AccountInfo.span),\n      ); // 165\n      const lamportsPerSignature = lps ?? new u64(5000);\n      feeCalculatorNew = new DefaultFeeCalculator({\n        lamportsPerSignature,\n        minRentExemption,\n      });\n    }\n    const expectedFee = await feeCalculatorNew.calculateNetworkFee(\n      transaction,\n      this.provider.connection,\n    );\n\n    const blockhash = await this.getRecentBlockhash();\n    transaction.recentBlockhash = blockhash;\n\n    // resign transaction\n    if (signers.length > 0) {\n      transaction.partialSign(...signers);\n    }\n\n    let signedTransaction = transaction;\n    if (owner) {\n      signedTransaction = await this.provider.wallet.signTransaction(transaction);\n    }\n\n    return new PreparedTransaction({\n      owner,\n      transaction: signedTransaction,\n      signers,\n      expectedFee,\n    });\n  }\n\n  /// Send preparedTransaction\n  /// - Parameter preparedTransaction: preparedTransaction to be sent\n  /// - Returns: Transaction signature\n  async sendTransaction({\n    preparedTransaction,\n  }: {\n    preparedTransaction: PreparedTransaction;\n  }): Promise<string> {\n    const maxAttemps = 3;\n    let numberOfTries = 0;\n\n    try {\n      const recentBlockhash = await this.getRecentBlockhash();\n      const serializedTransaction = await this.signAndSerialize({\n        preparedTransaction,\n        recentBlockhash,\n      });\n      return this.provider.connection.sendEncodedTransaction(serializedTransaction);\n    } catch (error) {\n      console.error(error);\n      if (numberOfTries <= maxAttemps) {\n        let shouldRetry = false;\n        if ((error as Error).message.includes('Blockhash not found')) {\n          shouldRetry = true;\n        }\n\n        if (shouldRetry) {\n          numberOfTries += 1;\n          return this.sendTransaction({ preparedTransaction });\n        }\n      }\n      throw error;\n    }\n  }\n\n  async signAndSerialize({\n    preparedTransaction,\n    recentBlockhash,\n  }: {\n    preparedTransaction: PreparedTransaction;\n    recentBlockhash: string;\n  }): Promise<string> {\n    const preparedTransactionNew = preparedTransaction;\n    preparedTransactionNew.transaction.recentBlockhash = recentBlockhash;\n    preparedTransactionNew.sign();\n    preparedTransactionNew.transaction = await this.provider.wallet.signTransaction(\n      preparedTransactionNew.transaction,\n    );\n    return preparedTransactionNew.serialize();\n  }\n\n  serializeAndSend({\n    preparedTransaction,\n    isSimulation,\n  }: {\n    preparedTransaction: PreparedTransaction;\n    isSimulation: boolean;\n  }): Promise<string> {\n    let request: Promise<string>;\n\n    if (isSimulation) {\n      request = this.provider.connection\n        .simulateTransaction(preparedTransaction.transaction)\n        .then((result) => {\n          if (result.value.err) {\n            throw Error('Simulation error');\n          }\n\n          return 'simulated transaction id';\n        });\n    } else {\n      const serializedTransaction = preparedTransaction.serialize();\n      request = this.provider.connection.sendEncodedTransaction(serializedTransaction);\n    }\n\n    const maxAttemps = 3;\n    let numberOfTries = 0;\n    return request.catch((error: Error) => {\n      if (numberOfTries <= maxAttemps) {\n        let shouldRetry = false;\n        if (error.message.includes('Blockhash not found')) {\n          shouldRetry = true;\n        }\n\n        if (shouldRetry) {\n          numberOfTries += 1;\n          return this.serializeAndSend({ preparedTransaction, isSimulation });\n        }\n      }\n      throw error;\n    });\n  }\n\n  /// Traditional sending without FeeRelayer\n  /// - Parameters:\n  ///   - instructions: transaction's instructions\n  ///   - recentBlockhash: recentBlockhash\n  ///   - signers: signers\n  ///   - isSimulation: define if this is a simulation or real transaction\n  /// - Returns: transaction id\n  serializeAndSendTraditional({\n    instructions,\n    recentBlockhash = null,\n    signers,\n    isSimulation,\n  }: {\n    instructions: TransactionInstruction[];\n    recentBlockhash?: string | null;\n    signers?: Signer[];\n    isSimulation: boolean;\n  }): Promise<TransactionID> {\n    const maxAttemps = 3;\n    let numberOfTries = 0;\n    return this.serializeTransaction({\n      instructions,\n      recentBlockhash,\n      signers,\n    })\n      .then((transaction) => {\n        if (isSimulation) {\n          // transfrom serialized tx to Transaction class\n          const restoredTransaction = Transaction.from(Buffer.from(transaction, 'base64'));\n          // simulate\n          return this.provider.connection\n            .simulateTransaction(restoredTransaction)\n            .then((result) => {\n              if (result.value.err) {\n                throw Error('Simulation error');\n              }\n\n              return 'simulated transaction id';\n            });\n        } else {\n          return this.provider.connection.sendEncodedTransaction(transaction);\n        }\n      })\n      .catch((error: Error) => {\n        if (numberOfTries <= maxAttemps) {\n          let shouldRetry = false;\n          if (error.message.includes('Blockhash not found')) {\n            shouldRetry = true;\n          }\n\n          if (shouldRetry) {\n            numberOfTries += 1;\n            return this.serializeAndSendTraditional({ instructions, signers, isSimulation });\n          }\n        }\n        throw error;\n      });\n  }\n\n  serializeTransaction({\n    instructions,\n    recentBlockhash = null,\n    signers = [],\n    feePayer = null,\n  }: {\n    instructions: TransactionInstruction[];\n    recentBlockhash?: string | null;\n    signers?: Signer[];\n    feePayer?: PublicKey | null;\n  }): Promise<string> {\n    // get recentBlockhash\n    let getRecentBlockhashRequest: Promise<string>;\n    if (recentBlockhash) {\n      getRecentBlockhashRequest = Promise.resolve(recentBlockhash);\n    } else {\n      getRecentBlockhashRequest = this.getRecentBlockhash();\n    }\n\n    const _feePayer = feePayer ?? this.provider.wallet.publicKey;\n    if (!feePayer) {\n      // TODO: custom error wrapper\n      throw SolanaSDKError.invalidRequest('Fee-payer not found');\n    }\n\n    // serialize transaction\n    return getRecentBlockhashRequest.then(async (_recentBlockhash) => {\n      const transaction = new Transaction();\n      transaction.instructions = instructions;\n      transaction.feePayer = _feePayer;\n      transaction.recentBlockhash = _recentBlockhash;\n      transaction.partialSign(...signers);\n      const signedTransaction = await this.provider.wallet.signTransaction(transaction);\n      const serializedTransaction = signedTransaction.serialize().toString('base64');\n\n      const decodedTransaction = transaction;\n      Logger.log(decodedTransaction, LogEvent.info);\n      Logger.log(serializedTransaction, LogEvent.info);\n\n      return serializedTransaction;\n    });\n  }\n\n  // SolanaSDKSwap\n\n  prepareCreatingWSOLAccountAndCloseWhenDone(\n    owner: PublicKey,\n    amount: Lamports,\n    payer: PublicKey,\n  ): Promise<AccountInstructions> {\n    return this.provider.connection\n      .getMinimumBalanceForRentExemption(AccountInfo.span)\n      .then((minRentExemption) => {\n        // create new account\n        const newAccount = new Keypair();\n\n        return new AccountInstructions({\n          account: newAccount.publicKey,\n          instructions: [\n            SystemProgram.createAccount({\n              fromPubkey: owner,\n              newAccountPubkey: newAccount.publicKey,\n              lamports: amount.addn(minRentExemption).toNumber(),\n              space: AccountInfo.span,\n              programId: SolanaSDKPublicKey.tokenProgramId,\n            }),\n            SPLToken.createInitAccountInstruction(\n              SolanaSDKPublicKey.tokenProgramId,\n              SolanaSDKPublicKey.wrappedSOLMint,\n              newAccount.publicKey,\n              payer,\n            ),\n          ],\n          cleanupInstructions: [\n            SPLToken.createCloseAccountInstruction(\n              SolanaSDKPublicKey.tokenProgramId,\n              newAccount.publicKey,\n              payer,\n              owner,\n              [],\n            ),\n          ],\n          signers: [newAccount],\n          secretKey: newAccount.secretKey,\n        });\n      });\n  }\n\n  async prepareForCreatingAssociatedTokenAccount(\n    owner: PublicKey,\n    mint: PublicKey,\n    feePayer: PublicKey,\n    closeAfterward: boolean,\n  ): Promise<AccountInstructions> {\n    const associatedAddress = await SPLToken.getAssociatedTokenAddress(\n      SolanaSDKPublicKey.splAssociatedTokenAccountProgramId,\n      SolanaSDKPublicKey.tokenProgramId,\n      mint,\n      owner,\n    );\n\n    let isAssociatedTokenAddressRegistered: boolean;\n    try {\n      const info: BufferInfo<AccountInfo | null> | null = await this.getAccountInfo({\n        account: associatedAddress.toString(),\n        decodedTo: AccountInfo,\n      });\n\n      if (\n        info?.owner.toString() === SolanaSDKPublicKey.tokenProgramId.toString() &&\n        info?.data?.owner.toString() === owner.toString()\n      ) {\n        isAssociatedTokenAddressRegistered = true;\n      } else {\n        throw Error('Associated token account is belong to another user');\n      }\n    } catch (error) {\n      console.error(error);\n      // TODO: check error\n      // associated address is not available\n      if (error === SolanaSDKError.couldNotRetrieveAccountInfo()) {\n        isAssociatedTokenAddressRegistered = false;\n      } else {\n        throw error;\n      }\n    }\n\n    // cleanup intructions\n    let cleanupInstructions: TransactionInstruction[] = [];\n    if (closeAfterward) {\n      cleanupInstructions = [\n        SPLToken.createCloseAccountInstruction(\n          SolanaSDKPublicKey.tokenProgramId,\n          associatedAddress,\n          owner,\n          owner,\n          [],\n        ),\n      ];\n    }\n\n    // if associated address is registered, there is no need to creating it again\n    if (isAssociatedTokenAddressRegistered) {\n      return new AccountInstructions({\n        account: associatedAddress,\n        cleanupInstructions: [],\n      });\n    }\n\n    // / else create associated address\n    return new AccountInstructions({\n      account: associatedAddress,\n      instructions: [\n        SPLToken.createAssociatedTokenAccountInstruction(\n          SolanaSDKPublicKey.splAssociatedTokenAccountProgramId,\n          SolanaSDKPublicKey.tokenProgramId,\n          mint,\n          associatedAddress,\n          owner,\n          feePayer,\n        ),\n      ],\n      cleanupInstructions,\n      newWalletPubkey: associatedAddress.toString(),\n    });\n  }\n\n  // SolanaSDKSend\n\n  /// Create prepared transaction for sending SOL\n  /// - Parameters:\n  ///   - account\n  ///   - destination: destination wallet address\n  ///   - amount: amount in lamports\n  ///   - feePayer: custom fee payer, can be omited if the authorized user is the payer\n  /// - Returns: PreparedTransaction, can be send either directly or via custom fee relayer\n  async prepareSendingNativeSOL({\n    account,\n    destination,\n    amount,\n    feePayer,\n  }: {\n    account: PublicKey;\n    destination: string;\n    amount: u64;\n    feePayer?: PublicKey | null;\n  }): Promise<PreparedTransaction> {\n    const feePayerNew = feePayer ?? account;\n    const fromPublicKey = account;\n\n    if (fromPublicKey.toString() === destination) {\n      throw SolanaSDKError.other('You can not send tokens to yourself');\n    }\n\n    let accountInfo: BufferInfo<EmptyInfo> | null = null;\n    try {\n      accountInfo = await this.getAccountInfo({\n        account: destination,\n        decodedTo: EmptyInfo,\n      });\n      if (accountInfo?.owner.toString() !== SolanaSDKPublicKey.programId.toString()) {\n        throw SolanaSDKError.other('Invalid account info');\n      }\n    } catch (error) {\n      console.error(error);\n      if (error === SolanaSDKError.couldNotRetrieveAccountInfo()) {\n        // ignoring error\n        accountInfo = null;\n      } else {\n        throw error;\n      }\n    }\n\n    // form instruction\n    const instruction = SystemProgram.transfer({\n      fromPubkey: fromPublicKey,\n      toPubkey: new PublicKey(destination),\n      lamports: amount.toNumber(),\n    });\n\n    return this.prepareTransaction({\n      owner: account, // instead of signers with owner\n      instructions: [instruction],\n      feePayer: feePayerNew,\n    });\n  }\n\n  /// Create prepared transaction for sending SPL token\n  async prepareSendingSPLTokens({\n    account,\n    mintAddress,\n    decimals,\n    fromPublicKey,\n    destinationAddress,\n    amount,\n    feePayer,\n    transferChecked, // recentBlockhash, minRentExemption,\n  }: {\n    account: PublicKey;\n    mintAddress: string;\n    decimals: number;\n    fromPublicKey: string;\n    destinationAddress: string;\n    amount: u64;\n    feePayer?: PublicKey | null;\n    transferChecked?: boolean;\n    recentBlockhash?: string;\n    minRentExemption?: Lamports;\n  }): Promise<{\n    preparedTransaction: PreparedTransaction;\n    realDestination: string;\n  }> {\n    const feePayerNew = feePayer ?? account;\n\n    // let minRentExemptionNew: Lamports;\n    // if (minRentExemption) {\n    //   minRentExemptionNew = minRentExemption;\n    // } else {\n    //   minRentExemptionNew = await this.getMinimumBalanceForRentExemption(AccountInfo.span);\n    // }\n    const splDestination = await this.findSPLTokenDestinationAddress({\n      mintAddress,\n      destinationAddress,\n    });\n\n    // get address\n    const toPublicKey = splDestination.destination;\n\n    // catch error\n    if (fromPublicKey === toPublicKey.toString()) {\n      throw SolanaSDKError.other('You can not send tokens to yourself');\n    }\n\n    const fromPublicKeyNew = new PublicKey(fromPublicKey);\n\n    const instructions: TransactionInstruction[] = [];\n\n    // create associated token address\n    // let accountsCreationFee: u64 = ZERO;\n    if (splDestination.isUnregisteredAsocciatedToken) {\n      const mint = new PublicKey(mintAddress);\n      const ownerNew = new PublicKey(destinationAddress);\n\n      const associatedAccount = getAssociatedTokenAddressSync(mint, ownerNew);\n      const createATokenInstruction = SPLToken.createAssociatedTokenAccountInstruction(\n        SolanaSDKPublicKey.splAssociatedTokenAccountProgramId,\n        SolanaSDKPublicKey.tokenProgramId,\n        mint,\n        associatedAccount,\n        ownerNew,\n        feePayerNew,\n      );\n      instructions.push(createATokenInstruction);\n      // TODO: why not using?\n      // accountsCreationFee = accountsCreationFee.sub(minRentExemptionNew);\n    }\n\n    // send instruction\n    let sendInstruction: TransactionInstruction;\n\n    // use transfer checked transaction for proxy, otherwise use normal transfer transaction\n    if (transferChecked) {\n      // transfer checked transaction\n      sendInstruction = SPLToken.createTransferCheckedInstruction(\n        SolanaSDKPublicKey.tokenProgramId,\n        fromPublicKeyNew,\n        new PublicKey(mintAddress),\n        splDestination.destination,\n        account,\n        [],\n        amount,\n        decimals,\n      );\n    } else {\n      // transfer transaction\n      sendInstruction = SPLToken.createTransferInstruction(\n        SolanaSDKPublicKey.tokenProgramId,\n        fromPublicKeyNew,\n        toPublicKey,\n        account,\n        [],\n        amount,\n      );\n    }\n\n    instructions.push(sendInstruction);\n\n    let realDestination = destinationAddress;\n    if (!splDestination.isUnregisteredAsocciatedToken) {\n      realDestination = splDestination.destination.toString();\n    }\n\n    // if not, serialize and send instructions normally\n    const preparedTransaction = await this.prepareTransaction({\n      owner: this.provider.wallet.publicKey, // instead of signers with owner\n      instructions,\n      feePayer: feePayerNew,\n    });\n\n    return {\n      preparedTransaction,\n      realDestination,\n    };\n  }\n\n  // Helpers\n\n  checkAccountValidation(account: string): Promise<boolean> {\n    return this.getAccountInfo({\n      account,\n      decodedTo: EmptyInfo,\n    })\n      .then(() => true)\n      .catch((error: Error) => {\n        if (error.message === SolanaSDKError.couldNotRetrieveAccountInfo().message) {\n          return false;\n        }\n\n        throw error;\n      });\n  }\n\n  async findSPLTokenDestinationAddress({\n    mintAddress,\n    destinationAddress,\n  }: {\n    mintAddress: string;\n    destinationAddress: string;\n  }): Promise<SPLTokenDestinationAddress> {\n    let address: string;\n    let accountInfo: BufferInfo<AccountInfo | null> | null = null;\n    try {\n      accountInfo = await this.getAccountInfoThrowable({\n        account: destinationAddress,\n        decodedTo: AccountInfo,\n      });\n      const toTokenMint = accountInfo?.data?.mint.toString();\n      // detect if destination address is already a SPLToken address\n      if (mintAddress === toTokenMint) {\n        address = destinationAddress;\n      }\n      // detect if destination address is a SOL address\n      else if (accountInfo?.owner.toString() === SolanaSDKPublicKey.programId.toString()) {\n        const owner = new PublicKey(destinationAddress);\n        const tokenMint = new PublicKey(mintAddress);\n        // create associated token address\n        address = getAssociatedTokenAddressSync(tokenMint, owner).toString();\n      } else {\n        throw SolanaSDKError.invalidRequest('Wallet address is not valid');\n      }\n    } catch (error) {\n      console.error(error, accountInfo, destinationAddress);\n      // TODO: check its work\n      if (SolanaSDKError.equals(error as Error, SolanaSDKError.couldNotRetrieveAccountInfo())) {\n        const owner = new PublicKey(destinationAddress);\n        const tokenMint = new PublicKey(mintAddress);\n\n        // create associated token address\n        address = getAssociatedTokenAddressSync(tokenMint, owner).toString();\n      } else {\n        throw error;\n      }\n    }\n\n    // address needs here\n    const toPublicKey = new PublicKey(address);\n    // if destination address is an SOL account address\n    let isUnregisteredAsocciatedToken = false;\n    if (destinationAddress !== toPublicKey.toString()) {\n      // check if associated address is already registered\n      let info: BufferInfo<AccountInfo | null> | null = null;\n      try {\n        info = await this.getAccountInfoThrowable({\n          account: toPublicKey.toString(),\n          decodedTo: AccountInfo,\n        });\n      } catch {\n        info = null;\n      }\n      isUnregisteredAsocciatedToken = true;\n\n      // if associated token account has been registered\n      if (info?.owner.toString() === SolanaSDKPublicKey.tokenProgramId.toString()) {\n        isUnregisteredAsocciatedToken = false;\n      }\n    }\n\n    return new SPLTokenDestinationAddress({\n      destination: toPublicKey,\n      isUnregisteredAsocciatedToken,\n    });\n  }\n\n  // SolanaSDKCreateTokenAccount\n\n  getCreatingTokenAccountFee(): Promise<u64> {\n    return this.getMinimumBalanceForRentExemption(AccountInfo.span);\n  }\n\n  // SolanaSDKClose\n  closeTokenAccount({\n    // account = null,\n    tokenPubkey,\n    isSimulation = false,\n  }: {\n    // account: string;\n    tokenPubkey: string;\n    isSimulation?: boolean;\n  }): Promise<TransactionID> {\n    const account = this.provider.wallet.publicKey;\n    if (!account) {\n      throw SolanaSDKError.unauthorized();\n    }\n\n    const _tokenPubkey = new PublicKey(tokenPubkey);\n\n    const instruction = SPLToken.createCloseAccountInstruction(\n      SolanaSDKPublicKey.tokenProgramId,\n      _tokenPubkey,\n      account,\n      account,\n      [],\n    );\n\n    // TOOD: custom error wrapper\n    return this.serializeAndSendTraditional({\n      instructions: [instruction],\n      isSimulation,\n    });\n  }\n\n  // SolanaSDKTokens\n\n  async getTokenWallets(\n    account: string,\n    tokensRepository?: SolanaTokensRepository,\n  ): Promise<Wallet[]> {\n    const accounts = await this.provider.connection.getTokenAccountsByOwner(\n      new PublicKey(account),\n      {\n        programId: SolanaSDKPublicKey.tokenProgramId,\n      },\n    );\n    const tokens = await (\n      tokensRepository ?? new TokensRepository({ endpoint: this.endpoint })\n    ).getTokensList();\n    const knownWallets: Wallet[] = [];\n    const unknownAccounts: [string, AccountInfo][] = [];\n    const [list, supportedTokens] = [accounts, tokens];\n\n    for (const item of list.value) {\n      const pubkey = item.pubkey;\n      const accountInfo = AccountInfo.decode(item.account.data)!;\n\n      const mintAddress = accountInfo.mint.toString();\n      // known token\n      const token = supportedTokens.find(\n        (supportedToken) => supportedToken.address === mintAddress,\n      );\n      if (token) {\n        knownWallets.push(\n          new Wallet({\n            pubkey: pubkey.toString(),\n            lamports: accountInfo.lamports,\n            token,\n          }),\n        );\n      }\n      // unknown token\n      else {\n        unknownAccounts.push([item.pubkey.toString(), accountInfo]);\n      }\n    }\n\n    const mintDatas = await this.getMultipleMintDatas({\n      mintAddresses: unknownAccounts.map((account) => account[1].mint.toString()),\n    });\n    if (Object.keys(mintDatas).length !== unknownAccounts.length) {\n      throw SolanaSDKError.unknown();\n    }\n\n    const wallets: Wallet[] = [];\n    for (const [index, item] of mintDatas.entries()) {\n      wallets.push(\n        new Wallet({\n          pubkey: unknownAccounts[index]![0],\n          lamports: unknownAccounts[index]![1].lamports,\n          token: Token.unsupported({\n            mint: unknownAccounts[index]![1].mint.toString(),\n            decimals: item?.decimals,\n            supply: item?.supply,\n          }),\n        }),\n      );\n    }\n    return knownWallets.concat(wallets);\n  }\n\n  // TODO: check\n  /// Returns all information associated with the account of provided Pubkey\n  /// - Parameters:\n  ///  - account: Pubkey of account to query, as base-58 encoded string\n  /// - Throws: APIClientError and SolanaError.couldNotRetrieveAccountInfo\n  /// - Returns The result will be an BufferInfo\n  /// - SeeAlso https://docs.solana.com/developing/clients/jsonrpc-api#getaccountinfo\n  async getAccountInfoThrowable<T>({\n    account,\n    decodedTo,\n  }: {\n    account: string;\n    decodedTo: { decode(data: Buffer): T };\n  }): Promise<BufferInfo<T>> {\n    let info: BufferInfo<T> | null = null;\n    try {\n      info = await this.getAccountInfo({\n        account,\n        decodedTo,\n      });\n    } catch {\n      //\n    }\n    if (!info) {\n      throw SolanaSDKError.couldNotRetrieveAccountInfo();\n    }\n    return info;\n  }\n}\n","import type { Network } from '@saberhq/solana-contrib';\nimport { TokenListProvider } from '@solana/spl-token-registry';\n\nimport { Token } from '../Models';\n\nexport class TokensListParser {\n  constructor() {}\n\n  async parse(network: Network): Promise<Token[]> {\n    const tokenList = await new TokenListProvider().resolve();\n\n    // map tags\n    const tokens = tokenList.getList().map((item) => new Token(item));\n\n    // TODO: Move outside parser\n    // renBTC for devnet\n    if (network === 'devnet') {\n      tokens.push(\n        new Token({\n          chainId: 101,\n          address: 'FsaLodPu4VmSwXGr3gWfwANe4vKf8XSZcCh1CEeJ3jpD',\n          symbol: 'renBTC',\n          name: 'renBTC',\n          decimals: 8,\n          logoURI:\n            'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5/logo.png',\n          extensions: {\n            website: 'https://renproject.io/',\n            serumV3Usdc: '74Ciu5yRzhe8TFTHvQuEVbFZJrbnCMRoohBK33NNiPtv',\n            coingeckoId: 'renbtc',\n          },\n        }),\n      );\n    }\n\n    return tokens;\n  }\n}\n","import { Cache } from 'new/sdk/Cache';\n\nimport type { Token } from '../Models';\n\nexport interface SolanaTokensRepositoryCache {\n  getTokens(): Token[] | undefined;\n  save(tokens: Token[]): void;\n}\n\nexport class InMemoryTokensRepositoryCache implements SolanaTokensRepositoryCache {\n  private _tokenCache = new Cache<string, Token[]>();\n  private _tokenCacheKey = 'TokenRepositoryTokensKey';\n\n  constructor() {}\n\n  getTokens(): Token[] | undefined {\n    return this._tokenCache.value(this._tokenCacheKey);\n  }\n\n  save(tokens: Token[]): void {\n    this._tokenCache.insert(tokens, this._tokenCacheKey);\n  }\n}\n","import type { APIEndpoint } from '../Models';\nimport { Token } from '../Models';\nimport type { SolanaTokensRepository } from './SolanaTokensRepository';\nimport { TokensListParser } from './TokensListParser';\nimport type { SolanaTokensRepositoryCache } from './TokensRepositoryCache';\nimport { InMemoryTokensRepositoryCache } from './TokensRepositoryCache';\n\nexport class TokensRepository implements SolanaTokensRepository {\n  private _cache: SolanaTokensRepositoryCache;\n\n  private _tokenListParser: TokensListParser;\n  private _endpoint: APIEndpoint;\n\n  constructor({\n    endpoint,\n    tokenListParser = new TokensListParser(),\n    cache = new InMemoryTokensRepositoryCache(),\n  }: {\n    endpoint: APIEndpoint;\n    tokenListParser?: TokensListParser;\n    cache?: SolanaTokensRepositoryCache;\n  }) {\n    this._endpoint = endpoint;\n    this._tokenListParser = tokenListParser;\n    this._cache = cache;\n  }\n\n  // MARK: - Public Methods\n\n  /// Returns all tokens\n  /// - Parameters:\n  ///  - useCache: wether to use cached value or not, default - true\n  /// - Throws: TokenRepositoryError\n  /// - Returns Set of tokens\n  ///\n  async getTokensList(useCache = true): Promise<Token[]> {\n    if (useCache) {\n      const tokens = this._cache.getTokens();\n      if (tokens) {\n        return tokens;\n      }\n    }\n    const tokenList = await this._tokenListParser.parse(this._endpoint.network);\n    this._cache.save(tokenList);\n    return tokenList;\n  }\n\n  async getTokenWithMint(mint?: string): Promise<Token> {\n    if (!mint) {\n      return Token.unsupported({});\n    }\n\n    const tokens = await this.getTokensList();\n\n    // Special case, we need take SOL not wSOL from repository.\n    if (mint === 'So11111111111111111111111111111111111111112') {\n      return (\n        tokens.find((t) => t.address === mint && t.symbol === 'SOL') ?? Token.unsupported({ mint })\n      );\n    } else {\n      return tokens.find((t) => t.address === mint) ?? Token.unsupported({ mint });\n    }\n  }\n}\n","import type { Wallet } from 'new/sdk/SolanaSDK';\n\nimport type { Info } from './Info';\n\n// A struct that contains all information about closing account.\nexport class CloseAccountInfo implements Info {\n  // The SOL amount of the account that will be returned.\n  reimbursedAmount?: number | null;\n  // The closed wallet\n  closedWallet?: Wallet | null;\n\n  constructor({\n    reimbursedAmount,\n    closedWallet,\n  }: {\n    reimbursedAmount?: number | null;\n    closedWallet?: Wallet | null;\n  }) {\n    this.reimbursedAmount = reimbursedAmount;\n    this.closedWallet = closedWallet;\n  }\n\n  // extension\n\n  get amount(): number {\n    return this.reimbursedAmount ?? 0;\n  }\n\n  get symbol(): string {\n    return 'SOL';\n  }\n}\n","import type { Wallet } from 'new/sdk/SolanaSDK';\n\nimport type { Info } from './Info';\n\n// A struct that contains all information about creating account.\nexport class CreateAccountInfo implements Info {\n  // The amount of fee in SOL.\n  fee?: number | null;\n  // The created wallet.\n  newWallet?: Wallet | null;\n\n  constructor({ fee, newWallet }: { fee?: number | null; newWallet?: Wallet | null }) {\n    this.fee = fee;\n    this.newWallet = newWallet;\n  }\n\n  static empty() {\n    return new CreateAccountInfo({ fee: null, newWallet: null });\n  }\n\n  // extension\n\n  get amount(): number {\n    return -(this.fee ?? 0);\n  }\n\n  get symbol(): string {\n    return 'SOL';\n  }\n}\n","import type { Wallet } from 'new/sdk/SolanaSDK';\n\nimport type { Info } from './Info';\n\n// A direction of swap on depends on account symbol view.\nenum Direction {\n  // The spending swap transaction\n  //\n  // [A] -> B\n  spend = 'spend',\n\n  // The receiving swap transaction\n  //\n  // A -> [B]\n  receive = 'receive',\n\n  // The transaction is intermediate between two tokens.\n  //\n  // A -> [B] -> C\n  transitive = 'transitive',\n}\n\n// A struct that contains all information about swapping.\nexport class SwapInfo implements Info {\n  // A source wallet\n  source?: Wallet | null;\n\n  // A swapping amount in source wallet\n  sourceAmount?: number | null;\n\n  // A destination wallet\n  destination?: Wallet | null;\n\n  // A receiving amount in destination wallet\n  destinationAmount?: number | null;\n\n  // A account symbol view.\n  //\n  // Depends on this value will define a direction of transaction\n  accountSymbol?: string | null;\n\n  constructor({\n    source,\n    sourceAmount,\n    destination,\n    destinationAmount,\n    accountSymbol,\n  }: {\n    source?: Wallet | null;\n    sourceAmount?: number | null;\n    destination?: Wallet | null;\n    destinationAmount?: number | null;\n    accountSymbol?: string | null;\n  }) {\n    this.source = source;\n    this.sourceAmount = sourceAmount;\n    this.destination = destination;\n    this.destinationAmount = destinationAmount;\n    this.accountSymbol = accountSymbol;\n  }\n\n  static empty(): SwapInfo {\n    return new SwapInfo({\n      source: null,\n      sourceAmount: null,\n      destination: null,\n      destinationAmount: null,\n      accountSymbol: null,\n    });\n  }\n\n  // Current direction of transaction.\n  //\n  // This value is calculated using account symbol view\n  get direction(): Direction {\n    if (this.accountSymbol === this.source?.token.symbol) {\n      return Direction.spend;\n    }\n    if (this.accountSymbol === this.destination?.token.symbol) {\n      return Direction.receive;\n    }\n    return Direction.transitive;\n  }\n\n  // extension\n\n  get amount(): number {\n    switch (this.direction) {\n      case Direction.spend:\n        return -(this.sourceAmount ?? 0);\n      case Direction.receive:\n      case Direction.transitive:\n        return this.destinationAmount ?? 0;\n    }\n  }\n\n  get symbol(): string | undefined {\n    switch (this.direction) {\n      case Direction.spend:\n        return this.source?.token.symbol;\n      case Direction.receive:\n      case Direction.transitive:\n        return this.destination?.token.symbol;\n    }\n  }\n}\n","import type { Wallet } from 'new/sdk/SolanaSDK';\n\nimport type { Info } from './Info';\n\n// The type of transfer in context of current account view.\nexport enum TransferType {\n  send = 'send',\n  receive = 'receive',\n}\n\n// A struct that contains all information about transfer.\nexport class TransferInfo implements Info {\n  // The source account address.\n  source?: Wallet | null;\n\n  // The destination account address.\n  destination?: Wallet | null;\n\n  authority?: string | null;\n\n  destinationAuthority?: string | null;\n\n  // The amount of transfer\n  rawAmount?: number | null;\n\n  // The current account address view.\n  //\n  // Depends on that will define it's a send or receive transaction.\n  account?: string | null;\n\n  constructor({\n    source,\n    destination,\n    authority,\n    destinationAuthority,\n    rawAmount,\n    account,\n  }: {\n    source?: Wallet | null;\n    destination?: Wallet | null;\n    authority?: string | null;\n    destinationAuthority?: string | null;\n    rawAmount?: number | null;\n    account?: string | null;\n  }) {\n    this.source = source;\n    this.destination = destination;\n    this.authority = authority;\n    this.destinationAuthority = destinationAuthority;\n    this.rawAmount = rawAmount;\n    this.account = account;\n  }\n\n  // A current transfer type that depends on account view.\n  get transferType(): TransferType | null {\n    if (this.source?.pubkey === this.account || this.authority === this.account) {\n      return TransferType.send;\n    }\n    return TransferType.receive;\n  }\n\n  // extension\n\n  get amount(): number {\n    let amount = this.rawAmount ?? 0;\n    if (this.transferType === TransferType.send) {\n      amount = -amount;\n    }\n    return amount;\n  }\n\n  get symbol(): string {\n    return this.source?.token.symbol ?? this.destination?.token.symbol ?? '';\n  }\n}\n","import type { FeeAmount } from 'new/sdk/SolanaSDK';\nimport { SolanaSDKError } from 'new/sdk/SolanaSDK';\n\nimport type { CloseAccountInfo, CreateAccountInfo, SwapInfo, TransferInfo } from './info';\n\nexport enum StatusType {\n  requesting = 'requesting',\n  processing = 'processing',\n  confirmed = 'confirmed',\n  error = 'error',\n}\n\n// The enum of possible status of transaction in blockchain\nexport class Status {\n  type: StatusType;\n  // @ts-ignore\n  private _percent?: number | null;\n  private _error?: string | null;\n\n  private constructor({\n    type,\n    percent,\n    error,\n  }: {\n    type: StatusType;\n    percent?: number | null;\n    error?: string | null;\n  }) {\n    this.type = type;\n    this._percent = percent;\n    this._error = error;\n  }\n\n  // The transaction is in requesting process. The transaction can be being prepared or submitted.\n  static requesting(): Status {\n    return new Status({ type: StatusType.requesting });\n  }\n\n  // The transaction is processed by blockchain.\n  static processing(percent: number): Status {\n    return new Status({ type: StatusType.processing, percent });\n  }\n\n  // The transaction has been done processed and is a part of blockchain\n  static confirmed(): Status {\n    return new Status({ type: StatusType.confirmed });\n  }\n\n  // The transaction has been done processed but finished with error.\n  static error(error?: string | null): Status {\n    return new Status({ type: StatusType.error, error });\n  }\n\n  // Convert the status as error.\n  get getError(): Error | null {\n    switch (this.type) {\n      case StatusType.error:\n        if (this._error) {\n          return SolanaSDKError.other(this._error);\n        }\n        return null;\n      default:\n        break;\n    }\n    return null;\n  }\n\n  // The raw string value\n  get rawValue(): string {\n    switch (this.type) {\n      case StatusType.requesting:\n        return 'requesting';\n      case StatusType.processing:\n        return 'processing';\n      case StatusType.confirmed:\n        return 'confirmed';\n      case StatusType.error:\n        return 'error';\n    }\n  }\n}\n\nexport type ParsedTransactionInfoType =\n  | CreateAccountInfo\n  | CloseAccountInfo\n  | TransferInfo\n  | SwapInfo;\n\n// A parsed transaction struct. Useful for display to regular users\nexport class ParsedTransaction {\n  // Current status of transaction.\n  status: Status;\n\n  // A transaction signature\n  signature?: string | null;\n\n  // A detailed information about this transaction.\n  //\n  // For example the information about create account transaction is a fee amount and new created wallet,\n  // transfer - amount of transferred lamport, source, destination address, etc.\n  info?: ParsedTransactionInfoType | null;\n\n  // The current amount of value in fiat.\n  amountInFiat?: number | null;\n\n  // The slot this transaction was processed in.\n  slot?: number | null;\n\n  // Estimated production time, as Unix timestamp (seconds since the Unix epoch) of when the transaction was processed.\n  // Nil if not available.\n  blockTime?: Date | null;\n\n  // The fee amount this transaction was charged.\n  fee?: FeeAmount | null;\n\n  // The blockhash of this block\n  blockhash?: string | null;\n\n  // The bool value that indicates the fee was covered by the p2p validator.\n  paidByP2POrg = false;\n\n  constructor({\n    status,\n    signature,\n    info,\n    amountInFiat = null,\n    slot,\n    blockTime,\n    fee,\n    blockhash,\n    paidByP2POrg = false,\n  }: {\n    status: Status;\n    signature?: string | null;\n    info?: ParsedTransactionInfoType | null;\n    amountInFiat?: number | null;\n    slot?: number | null;\n    blockTime?: Date | null;\n    fee?: FeeAmount | null;\n    blockhash?: string | null;\n    paidByP2POrg?: boolean;\n  }) {\n    this.status = status;\n    this.signature = signature;\n    this.info = info;\n    this.amountInFiat = amountInFiat;\n    this.slot = slot;\n    this.blockTime = blockTime;\n    this.fee = fee;\n    this.blockhash = blockhash;\n    this.paidByP2POrg = paidByP2POrg;\n  }\n\n  get amount(): number {\n    const info = this.info;\n    if (info) {\n      return info.amount ?? 0;\n    }\n    return 0;\n  }\n\n  get symbol(): string {\n    const info = this.info;\n    if (info) {\n      return info.symbol ?? '';\n    }\n    return '';\n  }\n\n  get isProcessing(): boolean {\n    switch (this.status.type) {\n      case StatusType.requesting:\n      case StatusType.processing:\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  get isFailure(): boolean {\n    switch (this.status.type) {\n      case StatusType.error:\n        return true;\n      default:\n        return false;\n    }\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\n\nimport { Cache } from 'new/sdk/Cache';\nimport type { Lamports, SolanaSDK, TransactionInfo } from 'new/sdk/SolanaSDK';\nimport { FeeAmount, SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\n\nimport type { FeeParseStrategy } from './FeeParseStrategy';\n\n/// A default implementation for parsing transaction fee.\nexport class DefaultFeeParseStrategy implements FeeParseStrategy {\n  apiClient: SolanaSDK;\n  cache: Cache<string, any>;\n\n  constructor({ apiClient, cache }: { apiClient: SolanaSDK; cache?: Cache<string, any> }) {\n    this.apiClient = apiClient;\n    this.cache = cache ?? new Cache();\n  }\n\n  async calculate({\n    transactionInfo,\n    feePayers,\n  }: {\n    transactionInfo: TransactionInfo;\n    feePayers: string[];\n  }): Promise<FeeAmount> {\n    const confirmedTransaction = transactionInfo.transaction;\n\n    // Prepare\n    const lamportsPerSignature: Lamports = await this._getLamportPerSignature();\n    const minRentExemption: Lamports = await this._getRentException();\n\n    // get creating and closing account instruction\n    const createTokenAccountInstructions = confirmedTransaction.message.instructions.filter(\n      (inst) =>\n        inst.programId.toString() === SolanaSDKPublicKey.tokenProgramId.toString() &&\n        inst.parsed?.type === 'create',\n    );\n    const createWSOLAccountInstructions = confirmedTransaction.message.instructions.filter(\n      (inst) =>\n        inst.programId.toString() === SolanaSDKPublicKey.programId.toString() &&\n        inst.parsed?.type === 'createAccount',\n    );\n    const closeAccountInstructions = confirmedTransaction.message.instructions.filter(\n      (inst) =>\n        inst.programId == SolanaSDKPublicKey.tokenProgramId && inst.parsed?.type === 'closeAccount',\n    );\n    const depositAccountsInstructions = closeAccountInstructions.filter(\n      (closeInstruction) =>\n        createWSOLAccountInstructions.some(\n          (inst) => inst.parsed?.info.newAccount === closeInstruction.parsed?.info.account,\n        ) ||\n        createTokenAccountInstructions.some(\n          (inst) => inst.parsed?.info.account === closeInstruction.parsed?.info.account,\n        ),\n    );\n\n    // get fee\n    const numberOfCreatedAccounts =\n      createTokenAccountInstructions.length +\n      createWSOLAccountInstructions.length -\n      depositAccountsInstructions.length;\n    const numberOfDepositAccounts = depositAccountsInstructions.length;\n\n    let transactionFee = lamportsPerSignature.muln(confirmedTransaction.signatures.length);\n    const accountCreationFee = minRentExemption.muln(numberOfCreatedAccounts);\n    const depositFee = minRentExemption.muln(numberOfDepositAccounts);\n\n    // check last compensation transaction\n    const firstPubkey = confirmedTransaction.message.accountKeys[0]?.pubkey.toString();\n    if (firstPubkey && feePayers.some((pubkey) => pubkey === firstPubkey)) {\n      // TODO: - Fix later\n      transactionFee = ZERO;\n      // let lastTransaction, innerInstruction, innerInstructionAmount;\n      // if (\n      //   // check last \"returning instruction\"\n      //   (lastTransaction = confirmedTransaction.message.instructions.at(-1)) &&\n      //   // returning transaction must have RelayProgram id\n      //   lastTransaction.programId.toString() ===\n      //     RelayProgram.id(this.apiClient.endpoint.network).toString() &&\n      //   // get inner transaction to get amount that have been returned\n      //   (innerInstruction = transactionInfo.meta?.innerInstructions?.find(\n      //     (innerInst) => innerInst.index === confirmedTransaction.message.instructions.length - 1,\n      //   )) &&\n      //   (innerInstructionAmount = innerInstruction.instructions[0]?.parsed?.info.lamports) &&\n      //   // got the amount, check if user had to pay the transaction fee (not account creation fee)\n      //   new u64(innerInstructionAmount).gt(accountCreationFee.add(depositFee))\n      // ) {\n      //   // do nothing\n      // } else {\n      //   // mark transaction as paid by P2p org\n      //   transactionFee = ZERO;\n      // }\n    }\n\n    return new FeeAmount({\n      transaction: transactionFee,\n      accountBalances: accountCreationFee,\n      deposit: depositFee,\n    });\n  }\n\n  private async _getRentException(): Promise<Lamports> {\n    const kRentExemption = 'rentExemption';\n\n    // Load from cache\n    let rentExemption: Lamports | undefined = this.cache.value(kRentExemption) as\n      | Lamports\n      | undefined;\n    if (rentExemption) {\n      return rentExemption;\n    }\n\n    // Load from network\n    rentExemption = await this.apiClient.getMinimumBalanceForRentExemption(65);\n\n    // Store in cache\n    this.cache.insert(rentExemption, kRentExemption);\n    return rentExemption;\n  }\n\n  private async _getLamportPerSignature(): Promise<Lamports> {\n    const kLamportsPerSignature = 'lamportsPerSignature';\n\n    // Load from cache\n    let lamportsPerSignature: Lamports | undefined = this.cache.value(kLamportsPerSignature) as\n      | Lamports\n      | undefined;\n    if (lamportsPerSignature) {\n      return lamportsPerSignature;\n    }\n\n    // Load from network\n    const fee = await this.apiClient.provider.connection.getRecentBlockhash(); // @ios: was getFees()\n\n    // Default value in case network in not available\n    lamportsPerSignature = fee.feeCalculator?.lamportsPerSignature\n      ? new u64(fee.feeCalculator.lamportsPerSignature)\n      : new u64(5000);\n\n    // Store in cache\n    this.cache.insert(lamportsPerSignature, kLamportsPerSignature);\n\n    return lamportsPerSignature;\n  }\n}\n","export class Decimals {\n  static SOL = 9;\n}\n","import { u64 } from '@solana/spl-token';\n\nimport type { Lamports, SolanaTokensRepository, TransactionInfo } from 'new/sdk/SolanaSDK';\nimport { convertToBalance, Wallet } from 'new/sdk/SolanaSDK';\nimport { Decimals } from 'new/sdk/SolanaSDK/extensions/DecimalsExtensions';\nimport { CloseAccountInfo } from 'new/sdk/TransactionParser';\n\nimport type { ParsedTransactionInfoType } from '../model/ParsedTransaction';\nimport type { Configuration } from '../TransactionParserService';\nimport type { TransactionParseStrategy } from './TransactionParseStrategy';\n\n/// A strategy for parsing close transactions.\nexport class CloseAccountParseStrategy implements TransactionParseStrategy {\n  private _tokensRepository: SolanaTokensRepository;\n\n  constructor({ tokensRepository }: { tokensRepository: SolanaTokensRepository }) {\n    this._tokensRepository = tokensRepository;\n  }\n\n  isHandlable(transactionInfo: TransactionInfo): boolean {\n    const instructions = transactionInfo.transaction.message.instructions;\n    switch (instructions.length) {\n      case 1:\n        return instructions[0]?.parsed?.type === 'closeAccount';\n      default:\n        return false;\n    }\n  }\n\n  async parse({\n    transactionInfo, // config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<ParsedTransactionInfoType | null> {\n    const instructions = transactionInfo.transaction.message.instructions;\n    const closedTokenPubkey = instructions[0]?.parsed?.info.account;\n    const preBalances = transactionInfo.meta?.preBalances;\n    const preTokenBalance = transactionInfo.meta?.preTokenBalances?.[0];\n\n    let reimbursedAmountLamports: Lamports | undefined;\n\n    if ((preBalances?.length ?? 0) > 1) {\n      reimbursedAmountLamports = new u64(preBalances![1]!);\n    }\n\n    const reimbursedAmount = reimbursedAmountLamports\n      ? convertToBalance(reimbursedAmountLamports, Decimals.SOL)\n      : null;\n    const token = await this._tokensRepository.getTokenWithMint(preTokenBalance?.mint);\n\n    return new CloseAccountInfo({\n      reimbursedAmount,\n      closedWallet: new Wallet({\n        pubkey: closedTokenPubkey,\n        lamports: null,\n        token,\n      }),\n    });\n  }\n}\n","import { u64 } from '@solana/spl-token';\n\nimport type { ParsedInstruction, SolanaTokensRepository, TransactionInfo } from 'new/sdk/SolanaSDK';\nimport { convertToBalance, Wallet } from 'new/sdk/SolanaSDK';\nimport { Decimals } from 'new/sdk/SolanaSDK/extensions/DecimalsExtensions';\nimport type { Configuration } from 'new/sdk/TransactionParser';\nimport { CreateAccountInfo } from 'new/sdk/TransactionParser';\n\nimport type { ParsedTransactionInfoType } from '../model/ParsedTransaction';\nimport type { TransactionParseStrategy } from './TransactionParseStrategy';\n\n/// The strategy for parsing creation account transactions.\nexport class CreationAccountParseStrategy implements TransactionParseStrategy {\n  private _tokensRepository: SolanaTokensRepository;\n\n  constructor({ tokensRepository }: { tokensRepository: SolanaTokensRepository }) {\n    this._tokensRepository = tokensRepository;\n  }\n\n  isHandlable(transactionInfo: TransactionInfo): boolean {\n    const instructions = transactionInfo.transaction.message.instructions;\n    switch (instructions.length) {\n      case 1:\n        return (\n          instructions[0]!.program === 'spl-associated-token-account' ||\n          instructions[0]!.parsed?.type === 'create'\n        );\n      case 2:\n        if (instructions[0]!.parsed?.type === 'create') {\n          return true;\n        } else if (\n          instructions[0]!.parsed?.type === 'createAccount' &&\n          instructions.at(-1)!.parsed?.type === 'initializeAccount'\n        ) {\n          return true;\n        }\n        return false;\n      default:\n        return false;\n    }\n  }\n\n  async parse({\n    transactionInfo, // config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<ParsedTransactionInfoType | null> {\n    const instructions = transactionInfo.transaction.message.instructions;\n\n    const program = this._extractProgram({ instructions, name: 'spl-associated-token-account' });\n    if (program) {\n      const token = await this._tokensRepository.getTokenWithMint(program.parsed?.info.mint);\n      return new CreateAccountInfo({\n        fee: null,\n        newWallet: new Wallet({\n          pubkey: program.parsed?.info.account,\n          token,\n        }),\n      });\n    } else {\n      const info = instructions[0]?.parsed?.info;\n      const initializeAccountInfo = instructions.at(-1)?.parsed?.info;\n      const fee = info?.lamports ? convertToBalance(new u64(info.lamports), Decimals.SOL) : null;\n\n      const token = await this._tokensRepository.getTokenWithMint(initializeAccountInfo?.mint);\n      return new CreateAccountInfo({\n        fee,\n        newWallet: new Wallet({\n          pubkey: info?.newAccount,\n          lamports: null,\n          token,\n        }),\n      });\n    }\n  }\n\n  private _extractProgram({\n    instructions,\n    name,\n  }: {\n    instructions: ParsedInstruction[];\n    name: string;\n  }): ParsedInstruction | undefined {\n    return instructions.find((inst) => inst.program === name);\n  }\n}\n","import { u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\n\nimport type {\n  InnerInstruction,\n  SolanaSDK,\n  SolanaTokensRepository,\n  Token,\n  TransactionInfo,\n} from 'new/sdk/SolanaSDK';\nimport {\n  AccountInfo,\n  convertToBalance,\n  instructionsData,\n  SolanaSDKPublicKey,\n  trySafe,\n  Wallet,\n} from 'new/sdk/SolanaSDK';\n\nimport { SwapInfo } from '../model/info/SwapInfo';\nimport type { ParsedTransactionInfoType } from '../model/ParsedTransaction';\nimport type { Configuration } from '../TransactionParserService';\nimport type { TransactionParseStrategy } from './TransactionParseStrategy';\n\n/// A strategy for orca swap transactions.\nexport class OrcaSwapParseStrategy implements TransactionParseStrategy {\n  /// The list of orca program signatures that will be parsed by this strategy\n  private _orcaProgramSignatures = [\n    SolanaSDKPublicKey.orcaSwapId(1).toString(),\n    SolanaSDKPublicKey.orcaSwapId(2).toString(),\n    '9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL' /* main deprecated */,\n    'SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8' /* main deprecated */,\n  ];\n\n  private _apiClient: SolanaSDK;\n  private _tokensRepository: SolanaTokensRepository;\n\n  constructor({\n    apiClient,\n    tokensRepository,\n  }: {\n    apiClient: SolanaSDK;\n    tokensRepository: SolanaTokensRepository;\n  }) {\n    this._apiClient = apiClient;\n    this._tokensRepository = tokensRepository;\n  }\n\n  isHandlable(transactionInfo: TransactionInfo): boolean {\n    return transactionInfo.transaction.message.instructions.some((inst) =>\n      this._orcaProgramSignatures.includes(inst.programId.toString()),\n    );\n  }\n\n  async parse({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<ParsedTransactionInfoType | null> {\n    const innerInstructions = transactionInfo.meta?.innerInstructions;\n\n    switch (true) {\n      case this._isLiquidityToPool(innerInstructions):\n        return null;\n      case this._isBurn(innerInstructions):\n        return null;\n      default:\n        return this._parse({ transactionInfo, config });\n    }\n  }\n\n  // TODO: looks like we need cancellation here\n  private async _parse({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<ParsedTransactionInfoType | null> {\n    // Filter swap instructions\n    const swapInstructions = instructionsData(transactionInfo).filter((data) =>\n      this._orcaProgramSignatures.includes(data.instruction.programId.toString()),\n    );\n\n    // A swap should have at lease one orca instruction.\n    if (swapInstructions.length === 0) {\n      return this._parseFailedTransaction({ transactionInfo, accountSymbol: config.symbolView });\n    }\n\n    // Get source and target\n    const source = swapInstructions[0]?.innerInstruction?.instructions[0];\n    const destination = swapInstructions.at(-1)?.innerInstruction?.instructions.at(-1);\n    if (!source || !destination) {\n      return this._parseFailedTransaction({ transactionInfo, accountSymbol: config.symbolView });\n    }\n\n    const sourceInfo = source.parsed?.info;\n    const destinationInfo = destination.parsed?.info;\n    if (!sourceInfo || !destinationInfo) {\n      return null;\n    }\n\n    // Get accounts info\n    const [sourceAccount, destinationAccount] = await Promise.all([\n      this._apiClient.getAccountInfoOr<AccountInfo | null>({\n        account: sourceInfo.source,\n        anotherAccount: sourceInfo.destination,\n        decodedTo: AccountInfo,\n      }),\n      this._apiClient.getAccountInfoOr<AccountInfo | null>({\n        account: destinationInfo.source,\n        anotherAccount: destinationInfo.destination,\n        decodedTo: AccountInfo,\n      }),\n    ]);\n\n    // Get tokens info\n    const [sourceToken, destinationToken]: [Token, Token] = await Promise.all([\n      this._tokensRepository.getTokenWithMint(sourceAccount?.data?.mint.toString()),\n      this._tokensRepository.getTokenWithMint(destinationAccount?.data?.mint.toString()),\n    ]);\n\n    const sourceWallet = new Wallet({\n      pubkey: trySafe(\n        () => (sourceInfo.source ? new PublicKey(sourceInfo.source).toString() : null),\n        null,\n      ),\n      lamports: sourceAccount?.data?.lamports,\n      token: sourceToken,\n    });\n\n    const destinationWallet = new Wallet({\n      pubkey: trySafe(\n        () =>\n          destinationInfo.destination\n            ? new PublicKey(destinationInfo.destination).toString()\n            : null,\n        null,\n      ),\n      lamports: destinationAccount?.data?.lamports,\n      token: destinationToken,\n    });\n\n    const sourceAmountLamports = new u64(sourceInfo.amount ?? 0);\n    const destinationAmountLamports = new u64(destinationInfo.amount ?? 0);\n\n    return new SwapInfo({\n      source: sourceWallet,\n      sourceAmount: convertToBalance(new u64(sourceAmountLamports), sourceWallet.token.decimals),\n      destination: destinationWallet,\n      destinationAmount: convertToBalance(\n        new u64(destinationAmountLamports),\n        destinationWallet.token.decimals,\n      ),\n      accountSymbol: config.symbolView,\n    });\n  }\n\n  private async _parseFailedTransaction({\n    transactionInfo,\n    accountSymbol,\n  }: {\n    transactionInfo: TransactionInfo;\n    accountSymbol?: string;\n  }): Promise<SwapInfo | null> {\n    const postTokenBalances = transactionInfo.meta?.postTokenBalances;\n    const approveInstruction = transactionInfo.transaction.message.instructions.find(\n      (inst) => inst?.parsed?.type === 'approve',\n    );\n    const sourceAmountString = approveInstruction?.parsed?.info.amount;\n    const sourceMint = postTokenBalances?.[0]?.mint;\n    const destinationMint = postTokenBalances?.at(-1)?.mint;\n    if (\n      !postTokenBalances ||\n      !approveInstruction ||\n      !sourceAmountString ||\n      !sourceMint ||\n      !destinationMint\n    ) {\n      return null;\n    }\n\n    const sourceToken = await this._tokensRepository.getTokenWithMint(sourceMint);\n    const destinationToken = await this._tokensRepository.getTokenWithMint(destinationMint);\n\n    const sourceWallet = new Wallet({\n      pubkey: approveInstruction.parsed?.info.source,\n      lamports: new u64(postTokenBalances[0]?.uiTokenAmount.amount ?? 0),\n      token: sourceToken,\n    });\n\n    const destinationWallet = new Wallet({\n      pubkey: destinationToken.symbol === 'SOL' ? approveInstruction.parsed?.info.owner : null,\n      lamports: new u64(postTokenBalances?.at(-1)?.uiTokenAmount.amount ?? 0),\n      token: destinationToken,\n    });\n\n    return new SwapInfo({\n      source: sourceWallet,\n      sourceAmount: convertToBalance(new u64(sourceAmountString), sourceWallet.token.decimals),\n      destination: destinationWallet,\n      destinationAmount: null,\n      accountSymbol,\n    });\n  }\n\n  private _isLiquidityToPool(innerInstructions?: InnerInstruction[] | null): boolean {\n    const instructions = innerInstructions?.[0]?.instructions;\n    if (!instructions) {\n      return false;\n    }\n    switch (instructions.length) {\n      case 3:\n        return (\n          instructions[0]!.parsed?.type === 'transfer' &&\n          instructions[1]!.parsed?.type === 'transfer' &&\n          instructions[2]!.parsed?.type === 'mintTo'\n        );\n      default:\n        return false;\n    }\n  }\n\n  /// Check the instruction is a burn\n  private _isBurn(innerInstructions?: InnerInstruction[] | null): boolean {\n    const instructions = innerInstructions?.[0]?.instructions;\n    if (!instructions) {\n      return false;\n    }\n    switch (instructions.length) {\n      case 3:\n        return (\n          instructions.length === 3 &&\n          instructions[0]!.parsed?.type === 'burn' &&\n          instructions[1]!.parsed?.type === 'transfer' &&\n          instructions[2]!.parsed?.type === 'transfer'\n        );\n      default:\n        return false;\n    }\n  }\n}\n","import { u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\nimport base58 from 'bs58';\n\nimport type { Lamports, SolanaTokensRepository, TransactionInfo } from 'new/sdk/SolanaSDK';\nimport { convertToBalance, SolanaSDKPublicKey, Token, trySafe, Wallet } from 'new/sdk/SolanaSDK';\nimport type { Configuration, ParsedTransactionInfoType } from 'new/sdk/TransactionParser';\nimport { SwapInfo } from 'new/sdk/TransactionParser';\n\nimport type { TransactionParseStrategy } from './TransactionParseStrategy';\n\nexport class P2POrcaSwapWrapperParseStrategy implements TransactionParseStrategy {\n  /// The list of orca program signatures that will be parsed by this strategy\n  private _orcaProgramSignatures = ['12YKFL4mnZz6CBEGePrf293mEzueQM3h8VLPUJsKpGs9'];\n\n  private _tokensRepository: SolanaTokensRepository;\n\n  constructor({ tokensRepository }: { tokensRepository: SolanaTokensRepository }) {\n    this._tokensRepository = tokensRepository;\n  }\n\n  isHandlable(transactionInfo: TransactionInfo): boolean {\n    return transactionInfo.transaction.message.instructions.some((inst) =>\n      this._orcaProgramSignatures.includes(inst.programId.toString()),\n    );\n  }\n\n  async parse({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<ParsedTransactionInfoType | null> {\n    return this._parse({ transactionInfo, config });\n  }\n\n  // TODO: looks like we need cancellation here\n  private async _parse({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<ParsedTransactionInfoType | null> {\n    // Filter P2P swap instructions\n    const swapInstructionIndex = transactionInfo.transaction.message.instructions.findLastIndex(\n      (i) => {\n        if (this._orcaProgramSignatures.includes(i.programId.toString())) {\n          const iData = i.data;\n          if (iData && base58.decode(iData)[0] === 4) {\n            return true;\n          }\n        }\n        return false;\n      },\n    );\n    if (!swapInstructionIndex) {\n      return null;\n    }\n\n    // First attempt of extraction\n    const swapInstruction = transactionInfo.transaction.message.instructions[swapInstructionIndex]!;\n    let sourceAddress = swapInstruction.accounts[3]?.toString();\n    if (!sourceAddress) {\n      return null;\n    }\n    const resSource = await this._parseToken({\n      transactionInfo,\n      address: sourceAddress,\n    });\n    if (!resSource) {\n      return null;\n    }\n    let { wallet: sourceWallet, amount: sourceChange } = resSource;\n    let destinationAddress = swapInstruction.accounts[5]?.toString();\n    if (!destinationAddress) {\n      return null;\n    }\n    const resDest = await this._parseToken({\n      transactionInfo,\n      address: destinationAddress,\n    });\n    if (!resDest) {\n      return null;\n    }\n    let { wallet: destinationWallet, amount: destinationChange } = resDest;\n\n    const totalInstructions = transactionInfo.transaction.message.instructions.length;\n\n    // Swap from native SOL\n    if (sourceChange === 0 && swapInstructionIndex + 1 < totalInstructions) {\n      const closeInstruction =\n        transactionInfo.transaction.message.instructions[swapInstructionIndex + 1];\n      if (closeInstruction?.programId.toString() === SolanaSDKPublicKey.tokenProgramId.toString()) {\n        if (closeInstruction.parsed?.type === 'closeAccount') {\n          const source = closeInstruction.parsed.info.destination;\n          if (!source) {\n            return null;\n          }\n\n          sourceAddress = source;\n          const resSourceNew = await this._parseToken({\n            transactionInfo,\n            address: sourceAddress,\n          });\n          if (!resSourceNew) {\n            return null;\n          }\n          const { wallet: newSourceWallet, amount: newSourceChange } = resSourceNew;\n\n          sourceWallet = newSourceWallet;\n          sourceChange = newSourceChange;\n        }\n      }\n    }\n\n    // Swap to native SOL\n    if (destinationChange === 0 && swapInstructionIndex + 1 < totalInstructions) {\n      const closeInstruction =\n        transactionInfo.transaction.message.instructions[swapInstructionIndex + 1];\n      if (closeInstruction?.programId.toString() === SolanaSDKPublicKey.tokenProgramId.toString()) {\n        if (closeInstruction.parsed?.type === 'closeAccount') {\n          const destination = closeInstruction.parsed.info.destination;\n          if (!destination) {\n            return null;\n          }\n\n          destinationAddress = destination;\n          const resDestNew = await this._parseToken({\n            transactionInfo,\n            address: destinationAddress,\n          });\n          if (!resDestNew) {\n            return null;\n          }\n          const { wallet: newDestinationWallet, amount: newDestinationChange } = resDest;\n\n          destinationWallet = newDestinationWallet;\n          destinationChange = newDestinationChange;\n        }\n      }\n    }\n\n    return new SwapInfo({\n      source: sourceWallet,\n      sourceAmount: sourceChange,\n      destination: destinationWallet,\n      destinationAmount: destinationChange,\n      accountSymbol: config.symbolView,\n    });\n  }\n\n  private async _parseToken({\n    transactionInfo,\n    address,\n  }: {\n    transactionInfo: TransactionInfo;\n    address: string;\n  }): Promise<{\n    wallet: Wallet;\n    amount: number;\n  } | null> {\n    const addressIndex = transactionInfo.transaction.message.accountKeys.findIndex(\n      (acc) => acc.pubkey.toString() === address,\n    );\n    if (!addressIndex) {\n      return null;\n    }\n\n    const mintAddress: string =\n      transactionInfo.meta?.postTokenBalances?.find(\n        (balance) => balance.accountIndex === addressIndex,\n      )?.mint ?? Token.nativeSolana.address;\n\n    let preWalletBalance: Lamports;\n\n    if (mintAddress === Token.nativeSolana.address) {\n      preWalletBalance = new u64(transactionInfo.meta?.preBalances[addressIndex] ?? 0);\n    } else {\n      preWalletBalance = new u64(\n        transactionInfo.meta?.preTokenBalances?.find(\n          (balance) => balance.accountIndex === addressIndex,\n        )?.uiTokenAmount.amount ?? 0,\n      );\n    }\n\n    let preBalance: number;\n    let postBalance: number;\n    if (mintAddress === Token.nativeSolana.address) {\n      preBalance = transactionInfo.meta?.preBalances[addressIndex]\n        ? convertToBalance(\n            new u64(transactionInfo.meta.preBalances[addressIndex]!),\n            Token.nativeSolana.decimals,\n          )\n        : 0;\n      postBalance = transactionInfo.meta?.postBalances[addressIndex]\n        ? convertToBalance(\n            new u64(transactionInfo.meta.postBalances[addressIndex]!),\n            Token.nativeSolana.decimals,\n          )\n        : 0;\n    } else {\n      preBalance =\n        transactionInfo.meta?.preTokenBalances?.find(\n          (balance) => balance.accountIndex === addressIndex,\n        )?.uiTokenAmount.uiAmount ?? 0;\n      postBalance =\n        transactionInfo.meta?.postTokenBalances?.find(\n          (balance) => balance.accountIndex === addressIndex,\n        )?.uiTokenAmount.uiAmount ?? 0;\n    }\n\n    const sourceToken: Token = await this._tokensRepository.getTokenWithMint(mintAddress);\n\n    const wallet = new Wallet({\n      pubkey: trySafe(() => (address ? new PublicKey(address).toString() : null), null),\n      lamports: preWalletBalance,\n      token: sourceToken,\n    });\n\n    const amount = Math.abs(postBalance - preBalance);\n\n    return { wallet, amount };\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\nimport { uniq } from 'ramda';\n\nimport type { Lamports, SolanaTokensRepository, TransactionInfo } from 'new/sdk/SolanaSDK';\nimport { convertToBalance, SolanaSDKPublicKey, Wallet } from 'new/sdk/SolanaSDK';\n\nimport { SwapInfo } from '../model/info/SwapInfo';\nimport type { ParsedTransactionInfoType } from '../model/ParsedTransaction';\nimport type { Configuration } from '../TransactionParserService';\nimport type { TransactionParseStrategy } from './TransactionParseStrategy';\n\nexport class SerumSwapParseStrategy implements TransactionParseStrategy {\n  private _tokensRepository: SolanaTokensRepository;\n\n  constructor({ tokensRepository }: { tokensRepository: SolanaTokensRepository }) {\n    this._tokensRepository = tokensRepository;\n  }\n\n  isHandlable(transactionInfo: TransactionInfo): boolean {\n    const instructions = transactionInfo.transaction.message.instructions;\n    return instructions.some(\n      // TODO: check type of programId, maybe we don't need toString\n      (inst) => inst.programId.toString() === SolanaSDKPublicKey.serumSwapPID.toString(),\n    );\n  }\n\n  async parse({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<ParsedTransactionInfoType | null> {\n    const instructions = transactionInfo.transaction.message.instructions;\n    const innerInstruction = transactionInfo.meta?.innerInstructions?.find((innerInst) =>\n      innerInst.instructions.some(\n        // TODO: check type of programId, maybe we don't need toString\n        (inst) => inst.programId.toString() === SolanaSDKPublicKey.serumSwapPID.toString(),\n      ),\n    );\n\n    const swapInstructionIndex = this._serumInstruction(transactionInfo)!;\n    const swapInstruction = instructions[swapInstructionIndex];\n    if (!swapInstruction) {\n      return null;\n    }\n    const preTokenBalances = transactionInfo.meta?.preTokenBalances;\n\n    // get all mints\n    let mints = preTokenBalances ? uniq(preTokenBalances.map((b) => b.mint)) : [];\n    // max: 3\n    if (mints.length < 2) {\n      return null;\n    }\n\n    // transitive swap: remove usdc or usdt if exists\n    if (mints.length === 3) {\n      mints = mints.filter((mint) => isUsdxMint(mint));\n    }\n\n    // define swap type\n    const isTransitiveSwap = !mints.some((mint) => isUsdxMint(mint));\n\n    // assert\n    const accounts = swapInstruction.accounts;\n    if (!accounts) {\n      return null;\n    }\n    if (isTransitiveSwap && accounts.length !== 27) {\n      return null;\n    }\n    if (!isTransitiveSwap && accounts.length !== 16) {\n      return null;\n    }\n\n    // get from and to address\n    let fromAddress: string;\n    let toAddress: string;\n\n    // TODO: check toString()\n    if (isTransitiveSwap) {\n      // transitive\n      fromAddress = accounts[6]!.toString();\n      toAddress = accounts[21]!.toString();\n    } else {\n      // direct\n      fromAddress = accounts[10]!.toBase58();\n      toAddress = accounts[12]!.toBase58();\n\n      if (isUsdxMint(mints.at(0)) === true && isUsdxMint(mints.at(-1)) === false) {\n        [fromAddress, toAddress] = [toAddress, fromAddress];\n      }\n    }\n\n    // amounts\n    let fromAmount: Lamports | undefined;\n    let toAmount: Lamports | undefined;\n\n    // from amount\n    const fromInstruction = innerInstruction?.instructions.find(\n      (inst) => inst.parsed?.type === 'transfer', // TODO: check that we need to add inst.parsed?.info.source === fromAddress\n    );\n    const fromAmountString = fromInstruction?.parsed?.info.amount;\n    if (fromAmountString) {\n      fromAmount = new u64(fromAmountString);\n    }\n\n    // to amount\n    const toInstruction = innerInstruction?.instructions.find(\n      (inst) => inst.parsed?.type === 'transfer', // TODO: check that we need to add inst.parsed?.info.destination === toAddress\n    );\n    const toAmountString = toInstruction?.parsed?.info.amount;\n    if (toAmountString) {\n      toAmount = new u64(toAmountString);\n    }\n\n    // if swap from native sol, detect if from or to address is a new account\n    const createAccountInstruction = instructions.find(\n      (inst) =>\n        inst.parsed?.type === 'createAccount' && inst.parsed?.info.newAccount === fromAddress,\n    );\n    const realSource = createAccountInstruction?.parsed?.info.source;\n    if (realSource) {\n      fromAddress = realSource;\n    }\n\n    const sourceToken = await this._tokensRepository.getTokenWithMint(mints[0]);\n    const destinationToken = await this._tokensRepository.getTokenWithMint(mints[1]);\n\n    const sourceWallet = new Wallet({\n      pubkey: fromAddress,\n      lamports: ZERO, // post token balance?\n      token: sourceToken,\n    });\n\n    const destinationWallet = new Wallet({\n      pubkey: toAddress,\n      lamports: ZERO, // post token balances\n      token: destinationToken,\n    });\n\n    return new SwapInfo({\n      source: sourceWallet,\n      sourceAmount: fromAmount ? convertToBalance(fromAmount, sourceToken.decimals) : null,\n      destination: destinationWallet,\n      destinationAmount: toAmount ? convertToBalance(toAmount, destinationToken.decimals) : null,\n      accountSymbol: config.symbolView,\n    });\n  }\n\n  private _serumInstruction(transactionInfo: TransactionInfo): number | null {\n    const instructions = transactionInfo.transaction.message.instructions;\n    // TODO: check type of programId, maybe we don't need toString\n    return instructions.findLastIndex(\n      (inst) => inst.programId.toString() === SolanaSDKPublicKey.serumSwapPID.toString(),\n    );\n  }\n}\n\nfunction isUsdxMint(pubkey?: string): boolean | null {\n  if (!pubkey) {\n    return null;\n  }\n\n  return (\n    pubkey === SolanaSDKPublicKey.usdcMint.toString() ||\n    pubkey === SolanaSDKPublicKey.usdtMint.toString()\n  );\n}\n","import { u64 } from '@solana/spl-token';\n\nimport type { SolanaSDK, SolanaTokensRepository, TransactionInfo } from 'new/sdk/SolanaSDK';\nimport { AccountInfo, convertToBalance, SolanaSDKPublicKey, Wallet } from 'new/sdk/SolanaSDK';\n\nimport { TransferInfo } from '../model/info/TransferInfo';\nimport type { ParsedTransactionInfoType } from '../model/ParsedTransaction';\nimport type { Configuration } from '../TransactionParserService';\nimport type { TransactionParseStrategy } from './TransactionParseStrategy';\n\nexport class TransferParseStrategy implements TransactionParseStrategy {\n  private _apiClient: SolanaSDK;\n  private _tokensRepository: SolanaTokensRepository;\n\n  constructor({\n    apiClient,\n    tokensRepository,\n  }: {\n    apiClient: SolanaSDK;\n    tokensRepository: SolanaTokensRepository;\n  }) {\n    this._apiClient = apiClient;\n    this._tokensRepository = tokensRepository;\n  }\n\n  isHandlable(transactionInfo: TransactionInfo): boolean {\n    const instructions = transactionInfo.transaction.message.instructions;\n    return (\n      (instructions.length === 1 || instructions.length === 4 || instructions.length === 2) &&\n      (instructions.at(-1)?.parsed?.type === 'transfer' ||\n        instructions.at(-1)?.parsed?.type === 'transferChecked')\n    );\n  }\n\n  async parse({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<ParsedTransactionInfoType | null> {\n    const instructions = transactionInfo.transaction.message.instructions;\n    if (instructions.at(-1)?.programId.toString() === SolanaSDKPublicKey.programId.toString()) {\n      // SOL to SOL\n      return this._parseSOLTransfer({ transactionInfo, config });\n    } else {\n      // SPL to SPL token\n      return this._parseSPLTransfer({ transactionInfo, config });\n    }\n  }\n\n  private _parseSOLTransfer({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): TransferInfo | null {\n    const instructions = transactionInfo.transaction.message.instructions;\n\n    // get pubkeys\n    const transferInstruction = instructions.at(-1);\n    const sourcePubkey = transferInstruction?.parsed?.info.source;\n    const destinationPubkey = transferInstruction?.parsed?.info.destination;\n\n    // get lamports\n    const lamports = new u64(\n      transferInstruction?.parsed?.info.lamports ??\n        transferInstruction?.parsed?.info.amount ??\n        transferInstruction?.parsed?.info.tokenAmount?.amount ??\n        '0',\n    );\n\n    const source = Wallet.nativeSolana({ pubkey: sourcePubkey, lamports: null });\n    const destination = Wallet.nativeSolana({ pubkey: destinationPubkey, lamports: null });\n\n    return new TransferInfo({\n      source,\n      destination,\n      authority: null,\n      destinationAuthority: null,\n      rawAmount: convertToBalance(lamports, source.token.decimals),\n      account: config.accountView,\n    });\n  }\n\n  private async _parseSPLTransfer({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<TransferInfo | null> {\n    const instructions = transactionInfo.transaction.message.instructions;\n    const postTokenBalances = transactionInfo.meta?.postTokenBalances ?? [];\n    const accountKeys = transactionInfo.transaction.message.accountKeys;\n\n    // get pubkeys\n    const transferInstruction = instructions.at(-1);\n    const authority = transferInstruction?.parsed?.info.authority;\n    const sourcePubkey = transferInstruction?.parsed?.info.source;\n    const destinationPubkey = transferInstruction?.parsed?.info.destination;\n\n    // get lamports\n    const lamports = new u64(\n      transferInstruction?.parsed?.info.lamports ??\n        transferInstruction?.parsed?.info.amount ??\n        transferInstruction?.parsed?.info.tokenAmount?.amount ??\n        '0',\n    );\n\n    let destinationAuthority: string | undefined;\n    const createATokenInstruction = instructions.find(\n      (inst) =>\n        inst.programId.toString() ===\n        SolanaSDKPublicKey.splAssociatedTokenAccountProgramId.toString(),\n    );\n    if (createATokenInstruction) {\n      // send to associated token\n      destinationAuthority = createATokenInstruction.parsed?.info.wallet;\n    } else {\n      const initializeAccountInstruction = instructions.find(\n        (inst) =>\n          inst.programId.toString() === SolanaSDKPublicKey.tokenProgramId.toString() &&\n          inst.parsed?.type === 'initializeAccount',\n      );\n      if (initializeAccountInstruction) {\n        // send to new token address (deprecated)\n        destinationAuthority = initializeAccountInstruction.parsed?.info.owner;\n      }\n    }\n\n    // Define token with mint\n    let transferInfo: TransferInfo;\n    const tokenBalance = postTokenBalances.find((b) => b.mint);\n    if (tokenBalance) {\n      // if the wallet that is opening is SOL, then modify myAccount\n      let myAccount = config.accountView;\n      if (\n        sourcePubkey !== myAccount &&\n        destinationPubkey !== myAccount &&\n        accountKeys.length >= 4\n      ) {\n        // send\n        if (myAccount === accountKeys[0]!.pubkey.toString()) {\n          myAccount = sourcePubkey;\n        }\n\n        if (myAccount === accountKeys[3]!.pubkey.toString()) {\n          myAccount = destinationPubkey;\n        }\n      }\n\n      const token = await this._tokensRepository.getTokenWithMint(tokenBalance.mint);\n      const source = new Wallet({ pubkey: sourcePubkey, lamports: null, token: token });\n      const destination = new Wallet({ pubkey: destinationPubkey, lamports: null, token: token });\n      transferInfo = new TransferInfo({\n        source: source,\n        destination: destination,\n        authority: authority,\n        destinationAuthority: destinationAuthority,\n        rawAmount: convertToBalance(lamports, source.token.decimals),\n        account: myAccount,\n      });\n    } else {\n      // Mint not found\n      const accountInfo = await this._apiClient.getAccountInfoOr<AccountInfo | null>({\n        account: sourcePubkey,\n        anotherAccount: destinationPubkey,\n        decodedTo: AccountInfo,\n      });\n      const token = await this._tokensRepository.getTokenWithMint(\n        accountInfo?.data?.mint.toString(),\n      );\n      const source = new Wallet({ pubkey: sourcePubkey, lamports: null, token: token });\n      const destination = new Wallet({ pubkey: destinationPubkey, lamports: null, token: token });\n\n      transferInfo = new TransferInfo({\n        source: source,\n        destination: destination,\n        authority: authority,\n        destinationAuthority: destinationAuthority,\n        rawAmount: convertToBalance(lamports, source.token.decimals),\n        account: config.accountView,\n      });\n    }\n\n    if (transferInfo.destinationAuthority) {\n      return transferInfo;\n    }\n    const account = transferInfo.destination?.pubkey;\n    if (!account) {\n      return transferInfo;\n    }\n\n    try {\n      const accountInfo = await this._apiClient.getAccountInfo({\n        account,\n        decodedTo: AccountInfo,\n      });\n      return new TransferInfo({\n        source: transferInfo.source,\n        destination: transferInfo.destination,\n        authority: transferInfo.authority,\n        destinationAuthority: accountInfo?.owner.toString(),\n        rawAmount: transferInfo.rawAmount,\n        account: config.accountView,\n      });\n    } catch {\n      return new TransferInfo({\n        source: transferInfo.source,\n        destination: transferInfo.destination,\n        authority: transferInfo.authority,\n        destinationAuthority: null,\n        rawAmount: transferInfo.rawAmount,\n        account: config.accountView,\n      });\n    }\n  }\n}\n","import type { FeeAmount, SolanaSDK, TransactionInfo } from 'new/sdk/SolanaSDK';\nimport { TokensRepository } from 'new/sdk/SolanaSDK';\n\nimport type { FeeParseStrategy } from './FeeParseStrategy';\nimport { DefaultFeeParseStrategy } from './FeeParseStrategy';\nimport type { ParsedTransactionInfoType } from './model/ParsedTransaction';\nimport { ParsedTransaction, Status } from './model/ParsedTransaction';\nimport type { Configuration, TransactionParserService } from './TransactionParserService';\nimport type { TransactionParseStrategy } from './TransactionParseStrategy';\nimport {\n  CloseAccountParseStrategy,\n  CreationAccountParseStrategy,\n  OrcaSwapParseStrategy,\n  P2POrcaSwapWrapperParseStrategy,\n  SerumSwapParseStrategy,\n  TransferParseStrategy,\n} from './TransactionParseStrategy';\n\n/// A default implementation of parser service.\nexport class TransactionParserServiceImpl implements TransactionParserService {\n  strategies: TransactionParseStrategy[];\n  feeParserStrategy: FeeParseStrategy;\n\n  constructor({\n    strategies,\n    feeParserStrategy,\n  }: {\n    strategies: TransactionParseStrategy[];\n    feeParserStrategy: FeeParseStrategy;\n  }) {\n    this.strategies = strategies;\n    this.feeParserStrategy = feeParserStrategy;\n  }\n\n  static default({ apiClient }: { apiClient: SolanaSDK }): TransactionParserServiceImpl {\n    const tokensRepository = new TokensRepository({ endpoint: apiClient.endpoint });\n\n    return new TransactionParserServiceImpl({\n      strategies: [\n        new OrcaSwapParseStrategy({ apiClient, tokensRepository }),\n        new P2POrcaSwapWrapperParseStrategy({ tokensRepository }),\n        new SerumSwapParseStrategy({ tokensRepository }),\n        new CreationAccountParseStrategy({ tokensRepository }),\n        new CloseAccountParseStrategy({ tokensRepository }),\n        new TransferParseStrategy({ apiClient, tokensRepository }),\n      ],\n      feeParserStrategy: new DefaultFeeParseStrategy({ apiClient }),\n    });\n  }\n\n  async parse({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<ParsedTransaction> {\n    let status = Status.confirmed();\n\n    if (transactionInfo.meta?.err) {\n      const errorMessage = transactionInfo.meta.logMessages\n        ?.find((log) => log.includes('Program log: Error:'))\n        ?.replace('Program log: Error: ', '');\n      status = Status.error(errorMessage);\n    }\n\n    const [info, fee] = await Promise.all([\n      this._parseTransaction({ transactionInfo, config }),\n      this._parseFee({ transactionInfo, config }),\n    ]);\n\n    return new ParsedTransaction({\n      status,\n      signature: transactionInfo.transaction.signatures[0], // TODO\n      info,\n      slot: transactionInfo.slot,\n      blockTime: transactionInfo.blockTime ? new Date(transactionInfo.blockTime * 1000) : null,\n      fee,\n      blockhash: transactionInfo.transaction.message.recentBlockhash,\n    });\n  }\n\n  /// Algorithm for choosing strategy\n  ///\n  /// The picking is depends on order of strategies. If strategy has been chosen, but it can't parse the transaction, the next strategy will try to parse.\n  private async _parseTransaction({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<ParsedTransactionInfoType | null> {\n    for (const strategy of this.strategies) {\n      if (strategy.isHandlable(transactionInfo)) {\n        const info = await strategy.parse({ transactionInfo, config });\n        if (!info) {\n          continue;\n        }\n        return info;\n      }\n    }\n\n    return null;\n  }\n\n  private _parseFee({\n    transactionInfo,\n    config,\n  }: {\n    transactionInfo: TransactionInfo;\n    config: Configuration;\n  }): Promise<FeeAmount> {\n    return this.feeParserStrategy.calculate({ transactionInfo, feePayers: config.feePayers });\n  }\n}\n","export const MOONPAY_SIGNER_URL = process.env.REACT_APP_MOONPAY_SIGNER_URL as string;\nexport const MOONPAY_API_KEY = process.env.REACT_APP_MOONPAY_API_KEY as string;\nexport const MOONPAY_API_URL = 'https://api.moonpay.com/v3/currencies/';\n\nexport const BASE_CURRENCY_SYMBOL = 'USD';\n","import type { Cluster } from '@solana/web3.js';\n\nimport { SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\nimport { BASE_CURRENCY_SYMBOL } from 'new/services/BuyService/constants';\nimport { Defaults } from 'new/services/Defaults';\n\nexport type FiatCurrencySymbol = 'USD';\nexport type CryptoCurrencySymbol = 'SOL' | 'USDC';\n\nexport type BuyCurrencyType = FiatCurrency | CryptoCurrency;\n\nexport class FiatCurrency {\n  private _symbol: FiatCurrencySymbol = BASE_CURRENCY_SYMBOL;\n\n  static isFiat(currency: BuyCurrencyType) {\n    return currency instanceof FiatCurrency;\n  }\n\n  static get usd() {\n    return new FiatCurrency();\n  }\n\n  get symbol() {\n    switch (this._symbol) {\n      case 'USD':\n        return 'USD';\n    }\n  }\n\n  get moonpayCode() {\n    switch (this._symbol) {\n      case 'USD':\n        return 'usd';\n    }\n  }\n}\n\nexport class CryptoCurrency {\n  private _symbol: CryptoCurrencySymbol;\n\n  static isCrypto(currency: BuyCurrencyType) {\n    return currency instanceof CryptoCurrency;\n  }\n\n  static get sol() {\n    return new CryptoCurrency('SOL');\n  }\n\n  static get usdc() {\n    return new CryptoCurrency('USDC');\n  }\n\n  constructor(symbol: CryptoCurrencySymbol) {\n    this._symbol = symbol;\n  }\n\n  get symbol() {\n    switch (this._symbol) {\n      case 'SOL':\n        return 'SOL';\n      case 'USDC':\n        return 'USDC';\n    }\n  }\n\n  get fullName() {\n    switch (this._symbol) {\n      case 'SOL':\n        return 'Solana';\n      case 'USDC':\n        return 'USD Coin';\n    }\n  }\n\n  get solanaCode() {\n    switch (this._symbol) {\n      case 'SOL':\n        return 'SOL';\n      case 'USDC':\n        return 'USDC';\n    }\n  }\n\n  get moonpayCode() {\n    switch (this._symbol) {\n      case 'SOL':\n        return 'sol';\n      case 'USDC':\n        return 'usdc_sol';\n    }\n  }\n\n  get mintAddress() {\n    const mintAddress =\n      CryptoCurrency.Addresses[Defaults.apiEndpoint.network as Cluster][this._symbol];\n    if (!mintAddress) {\n      throw new Error(\n        `Unhandeled mint address for ${Defaults.apiEndpoint.network} : ${this._symbol}`,\n      );\n    }\n    return mintAddress;\n  }\n\n  static Addresses = {\n    'mainnet-beta': {\n      SOL: SolanaSDKPublicKey.wrappedSOLMint.toBase58(),\n      USDC: SolanaSDKPublicKey.usdcMint.toBase58(),\n    },\n    testnet: {\n      SOL: SolanaSDKPublicKey.wrappedSOLMint.toBase58(),\n      USDC: 'CpMah17kQEL2wqyMKt3mZBdTnZbkbfx4nqmQMFDP5vwp',\n    },\n    devnet: {\n      SOL: SolanaSDKPublicKey.wrappedSOLMint.toBase58(),\n      USDC: '4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU',\n    },\n  };\n}\n\nexport class ExchangeInput {\n  amount: number;\n  currency: BuyCurrencyType;\n\n  static zeroInstance(currency: BuyCurrencyType) {\n    return new ExchangeInput(0, currency);\n  }\n\n  constructor(amount: number, currency: BuyCurrencyType) {\n    this.amount = amount;\n    this.currency = currency;\n  }\n\n  swap(output: ExchangeOutput) {\n    return {\n      input: new ExchangeInput(output.amount, output.currency),\n      output: new ExchangeOutput(\n        this.amount,\n        this.currency,\n        output.price,\n        output.processingFee,\n        output.networkFee,\n        output.purchaseCost,\n        output.total,\n      ),\n    };\n  }\n}\n\nexport class ExchangeOutput {\n  amount: number;\n  currency: BuyCurrencyType;\n\n  price: number;\n  processingFee: number;\n  networkFee: number;\n  purchaseCost: number;\n\n  total: number;\n\n  static zeroInstance(currency: BuyCurrencyType) {\n    return new ExchangeOutput(0, currency, 0, 0, 0, 0, 0);\n  }\n\n  constructor(\n    amount: number,\n    currency: BuyCurrencyType,\n    price: number,\n    processingFee: number,\n    networkFee: number,\n    purchaseCost: number,\n    total: number,\n  ) {\n    this.amount = amount;\n    this.currency = currency;\n    this.price = price;\n    this.processingFee = processingFee;\n    this.networkFee = networkFee;\n    this.purchaseCost = purchaseCost;\n    this.total = total;\n  }\n}\n","import { makeObservable, observable } from 'mobx';\n\nimport { Fiat } from 'new/app/models/Fiat';\nimport { APIEndpoint, SolanaSDKPublicKey } from 'new/sdk/SolanaSDK';\nimport { makeLocalStorage } from 'new/services/common/makeLocalStorage';\nimport type { CurrentPrice } from 'new/services/PriceAPIs/PricesService';\n\nexport enum Appearance {\n  system = 'system',\n  light = 'light',\n  dark = 'dark',\n}\n\ninterface DefaultsKeys {\n  apiEndpoint: APIEndpoint;\n\n  walletName: Record<string, string>;\n\n  appearance: Appearance;\n  slippage: number;\n  fiat: Fiat;\n  hiddenWalletPubkey: string[];\n  unhiddenWalletPubkey: string[];\n  hideZeroBalances: boolean;\n  p2pFeePayerPubkeys: string[];\n  prices: Record<string, CurrentPrice>;\n  payingTokenMint: string;\n\n  useFreeTransactions: boolean;\n}\n\nclass _Defaults implements DefaultsKeys {\n  apiEndpoint: APIEndpoint = APIEndpoint.definedEndpoints[0]!;\n\n  walletName: Record<string, string> = {};\n\n  appearance: Appearance = Appearance.system;\n  slippage = 0.01;\n  fiat: Fiat = Fiat.usd;\n  hiddenWalletPubkey: string[] = [];\n  unhiddenWalletPubkey: string[] = [];\n  hideZeroBalances = true;\n  p2pFeePayerPubkeys = [];\n  prices: Record<string, CurrentPrice> = {};\n  payingTokenMint: string = SolanaSDKPublicKey.wrappedSOLMint.toString();\n\n  useFreeTransactions = false;\n\n  constructor() {\n    makeObservable(this, {\n      apiEndpoint: observable,\n\n      walletName: observable,\n\n      appearance: observable,\n      slippage: observable,\n      fiat: observable,\n      hiddenWalletPubkey: observable,\n      unhiddenWalletPubkey: observable,\n      hideZeroBalances: observable,\n      p2pFeePayerPubkeys: observable,\n      prices: observable,\n      payingTokenMint: observable,\n\n      useFreeTransactions: observable,\n    });\n\n    makeLocalStorage(this, 'defaults');\n  }\n\n  fromJSON(json: DefaultsKeys): DefaultsKeys {\n    return {\n      ...json,\n      apiEndpoint: json.apiEndpoint ? new APIEndpoint(json.apiEndpoint) : this.apiEndpoint,\n      fiat: new Fiat(json.fiat?.type ?? this.fiat),\n    };\n  }\n}\n\nexport const Defaults = new _Defaults();\n","import { Features } from './features';\n\nexport type FeatureFlagsType = Record<Features, boolean>;\n\nexport const defaultFlags: FeatureFlagsType = {\n  [Features.LeftNavMenuProfile]: false,\n  [Features.ShowAllSettings]: false,\n  [Features.ShowDevnet]: false,\n};\n","// <FeatureName> = '<remote control feature key>'\nexport enum Features {\n  LeftNavMenuProfile = 'web_feature_LeftNavMenuProfile',\n  ShowAllSettings = 'web_feature_ShowAllSettings',\n  ShowDevnet = 'web_feature_ShowDevnet',\n}\n","import { action, makeObservable, observable, when } from 'mobx';\n\nimport { RemoteConfig } from 'new/services/RemoteConfig';\n\nimport { defaultFlags } from '../defaultFlags';\nimport type { Features } from '../features';\nimport type { FeatureFlagsProvider } from '../types';\n\nclass _RemoteFeatureFlagsProvider implements FeatureFlagsProvider {\n  readonly isOn = true;\n  isInitialized = false;\n  featureFlags = defaultFlags;\n\n  constructor() {\n    makeObservable(this, {\n      isInitialized: observable,\n      featureFlags: observable,\n    });\n\n    when(\n      () => RemoteConfig.isActivated,\n      action(() => {\n        this.featureFlags = RemoteConfig.featureFlags;\n        this.isInitialized = true;\n      }),\n    );\n  }\n\n  isEnabled(feature: Features): boolean {\n    return this.featureFlags[feature];\n  }\n}\n\nexport const RemoteFeatureFlagsProvider = new _RemoteFeatureFlagsProvider();\n","import { defaultFlags } from './defaultFlags';\nimport type { Features } from './features';\nimport { DebugFeatureFlagsProvider } from './providers/DebugFeatureFlagsProvider';\nimport { RemoteFeatureFlagsProvider } from './providers/RemoteFeatureFlagsProvider';\nimport type { FeatureFlagsProvider } from './types';\n\nclass _FeatureFlags {\n  private _primaryProvider: FeatureFlagsProvider;\n  private _secondaryProvider: FeatureFlagsProvider;\n\n  constructor(primaryProvider: FeatureFlagsProvider, secondaryProvider: FeatureFlagsProvider) {\n    this._primaryProvider = primaryProvider;\n    this._secondaryProvider = secondaryProvider;\n  }\n\n  get isInitialized(): boolean {\n    if (this._primaryProvider.isOn) {\n      return this._primaryProvider.isInitialized;\n    }\n\n    if (this._secondaryProvider.isOn) {\n      return this._secondaryProvider.isInitialized;\n    }\n\n    return false;\n  }\n\n  isEnabled(feature: Features): boolean {\n    if (this._primaryProvider.isOn) {\n      return this._primaryProvider.isEnabled(feature);\n    }\n\n    if (this._secondaryProvider.isOn) {\n      return this._secondaryProvider.isEnabled(feature);\n    }\n\n    return defaultFlags[feature];\n  }\n}\n\nexport const isEnabled = (feature: Features): boolean => {\n  return FeatureFlags.isEnabled(feature);\n};\n\nexport const FeatureFlags = new _FeatureFlags(\n  DebugFeatureFlagsProvider,\n  RemoteFeatureFlagsProvider,\n);\n","import { action, makeObservable, observable } from 'mobx';\n\nimport { makeLocalStorage } from 'new/services/common/makeLocalStorage';\n\nimport { defaultFlags } from '../defaultFlags';\nimport type { Features } from '../features';\nimport type { FeatureFlagsProvider } from '../types';\n\nconst DEBUG_FEATURE_FLAGS_KEY = 'feature_flags_debug';\n\ninterface Storage {\n  isManualFlagsOn: boolean;\n  featureFlags: Record<Features, boolean>;\n}\n\nclass _DebugFeatureFlagsProvider implements FeatureFlagsProvider {\n  isOn = false;\n  readonly isInitialized: boolean;\n  featureFlags = defaultFlags;\n\n  constructor() {\n    makeObservable(this, {\n      isOn: observable,\n      featureFlags: observable,\n\n      setIsOn: action,\n      setFeatureFlag: action,\n    });\n\n    makeLocalStorage<Storage>(this, DEBUG_FEATURE_FLAGS_KEY);\n\n    this.isInitialized = true;\n  }\n\n  isEnabled(feature: Features): boolean {\n    return this.featureFlags[feature];\n  }\n\n  setIsOn(value: boolean): void {\n    this.isOn = value;\n  }\n\n  setFeatureFlag(feature: Features, value: boolean): void {\n    this.featureFlags[feature] = value;\n  }\n\n  fromJSON(json: Storage): Storage {\n    return {\n      ...json,\n    };\n  }\n}\n\nexport const DebugFeatureFlagsProvider = new _DebugFeatureFlagsProvider();\n","import axios from 'axios';\nimport { last } from 'ramda';\nimport { injectable } from 'tsyringe';\n\nconst request = axios.create();\n\ntype Name = {\n  address?: string;\n  name?: string;\n  parent?: string;\n};\n\nexport type Owner = {\n  parent_name: string;\n  owner: string;\n  class: string;\n  name: string;\n};\n\ninterface NameServiceType {\n  getName(owner: string): Promise<string | null>;\n  getOwners(name: string): Promise<Owner[]>;\n  // getOwnerAddress(name: string): Promise<string | null>;\n}\n\n// TODO: application scope\n@injectable()\nexport class NameService implements NameServiceType {\n  private _endpoint = 'https://solana-fee-relayer.wallet.p2p.org/name_register';\n  private _cache: Record<string, string | null> = {};\n\n  constructor() {}\n  getName(owner: string): Promise<string | null> {\n    if (this._cache[owner]) {\n      return Promise.resolve(this._cache[owner] ?? null);\n    }\n\n    return this._getNames(owner).then((items) => {\n      const names = items.filter((item) => Boolean(item.name));\n      const name = last(names)?.name ?? null;\n      this._cache[owner] = name;\n\n      return name;\n    });\n  }\n\n  getOwners(name: string): Promise<Owner[]> {\n    return request\n      .get<Owner[]>(`${this._endpoint}/resolve/${name}`)\n      .then(({ data }) => data)\n      .then((result) => {\n        for (const record of result) {\n          const name = record.name;\n          if (name) {\n            this._cache[record.owner] = name;\n          }\n        }\n\n        return result;\n      });\n  }\n\n  // getOwnerAddress(name: string): Promise<string | null> {\n  //   return this._getOwner(name)\n  //     .then((item) => item?.owner ?? null)\n  //     .catch((err) => {\n  //       // TODO: catch only 404\n  //       console.error('TODO: catch only 404 - ', err);\n  //       return null;\n  //     });\n  // }\n\n  // isNameAvailable(name: string): Promise<string | null> {\n  //   return this.getOwnerAddress(name).then((address) => address ?? null);\n  // }\n\n  // private _getOwner(name: string): Promise<Owner | null> {\n  //   return request(`${this._endpoint}/${name}`).then(({ data }) => data);\n  // }\n\n  private _getNames(owner: string): Promise<Name[]> {\n    return request(`${this._endpoint}/lookup/${owner}`).then(({ data }) => data);\n  }\n}\n","import { makeObservable, observable, runInAction } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport type { RendererType } from 'new/ui/managers/NotificationManager';\n\nexport type ToastType = 'info' | 'warn' | 'error' | 'component';\n\nexport type ToastParams = {\n  type: string;\n  header?: string;\n  text?: string;\n  renderer?: RendererType;\n};\n\nexport type CurrentToastParams = { id: number; isHiding?: boolean } & ToastParams;\n\nconst LIMIT = 3;\nconst HIDE_TIMEOUT = 7000;\nconst HIDE_LEAVE_TIMEOUT = 5000;\nconst REMOVE_TIMEOUT = 400;\n\n@singleton()\nexport class NotificationService {\n  currentToasts: CurrentToastParams[] = [];\n\n  private _queue: ToastParams[] = [];\n\n  private _hideTimeouts: Set<number> = new Set();\n  private _removeTimeouts: Set<number> = new Set();\n  private _lastId = 0;\n\n  private _noHide = false;\n\n  constructor() {\n    makeObservable(this, {\n      currentToasts: observable,\n    });\n  }\n\n  private _getActiveToastsCount(): number {\n    return this.currentToasts.filter((toast) => !toast.isHiding).length;\n  }\n\n  private _addToast(toastParams: ToastParams): void {\n    if (this._getActiveToastsCount() >= LIMIT) {\n      this._queue = this._queue.concat(toastParams);\n      return;\n    }\n\n    this._showToast(toastParams);\n  }\n\n  private _setToastHideTimeout(id: number, timeout = HIDE_TIMEOUT): void {\n    const timeoutId = window.setTimeout(() => {\n      this._hideTimeouts.delete(timeoutId);\n      this.startToastsHiding(id);\n    }, timeout);\n\n    this._hideTimeouts.add(timeoutId);\n  }\n\n  private _removeToasts(ids: number[]): void {\n    runInAction(() => {\n      this.currentToasts = this.currentToasts.filter((toast) => !ids.includes(toast.id));\n    });\n  }\n\n  private _checkQueue(): void {\n    if (this._queue.length > 0 && this._getActiveToastsCount() < LIMIT) {\n      const [firstToast, ...other] = this._queue;\n\n      this._queue = other;\n\n      this._showToast(firstToast!);\n\n      this._checkQueue();\n    }\n  }\n\n  private _showToast({ type, header, text, renderer }: ToastParams): void {\n    this._lastId++;\n    const id = this._lastId;\n\n    runInAction(() => {\n      this.currentToasts = this.currentToasts.concat({\n        id,\n        type,\n        header,\n        text,\n        renderer,\n      });\n    });\n\n    if (!this._noHide) {\n      this._setToastHideTimeout(id);\n    }\n  }\n\n  startToastsHiding(ids: number | number[]): void {\n    let idsArray: number[];\n    if (!Array.isArray(ids)) {\n      idsArray = [ids];\n    } else {\n      idsArray = ids;\n    }\n\n    runInAction(() => {\n      this.currentToasts = this.currentToasts.map((toast) => {\n        if (idsArray.includes(toast.id)) {\n          return {\n            ...toast,\n            isHiding: true,\n          };\n        }\n\n        return toast;\n      });\n    });\n\n    this._checkQueue();\n\n    const timeoutId = window.setTimeout(() => {\n      this._removeTimeouts.delete(timeoutId);\n      this._removeToasts(idsArray);\n    }, REMOVE_TIMEOUT);\n\n    this._removeTimeouts.add(timeoutId);\n  }\n\n  eraseData(): void {\n    runInAction(() => {\n      this.currentToasts = [];\n    });\n    this._queue = [];\n\n    this._noHide = false;\n\n    // clean timeouts\n    for (const id of this._hideTimeouts) {\n      clearTimeout(id);\n    }\n\n    for (const id of this._removeTimeouts) {\n      clearTimeout(id);\n    }\n\n    this._hideTimeouts.clear();\n    this._removeTimeouts.clear();\n  }\n\n  disableDeferredHiding(): void {\n    this._noHide = true;\n\n    for (const id of this._hideTimeouts) {\n      clearTimeout(id);\n    }\n\n    this._hideTimeouts.clear();\n  }\n\n  enableDeferredHiding(): void {\n    this._noHide = false;\n\n    if (this.currentToasts.length === 0) {\n      return;\n    }\n\n    this.currentToasts.forEach(({ id }) => this._setToastHideTimeout(id, HIDE_LEAVE_TIMEOUT));\n  }\n\n  info(header: string, text?: string): void {\n    this._addToast({ type: 'info', header, text });\n  }\n\n  warn(header: string, text?: string): void {\n    this._addToast({ type: 'warn', header, text });\n  }\n\n  error(header: string, text?: string): void {\n    this._addToast({ type: 'error', header, text });\n  }\n\n  show(renderer: RendererType): void {\n    this._addToast({ type: 'component', renderer });\n  }\n}\n","import { singleton } from 'tsyringe';\n\nimport { APIClient, NetworkConfigsProvider, OrcaSwap } from 'new/sdk/OrcaSwap';\nimport { Defaults } from 'new/services/Defaults';\nimport { SolanaService } from 'new/services/SolanaService';\n\n@singleton()\nexport class OrcaSwapService extends OrcaSwap {\n  constructor(solanaClient: SolanaService) {\n    super({\n      apiClient: new APIClient(new NetworkConfigsProvider(Defaults.apiEndpoint.network)),\n      solanaClient,\n    });\n  }\n}\n","import type { Token } from 'new/sdk/SolanaSDK';\nimport { LogEvent, Logger } from 'new/sdk/SolanaSDK';\n\nexport abstract class PricesFetcher {\n  abstract readonly endpoint: string;\n  abstract getCurrentPrices({\n    coins,\n    fiat,\n  }: {\n    coins: Token[];\n    fiat: string;\n  }): Promise<Record<string, CurrentPrice | null>>;\n\n  send<T>({ path }: { path: string }): Promise<T> {\n    Logger.log(`${this.endpoint}${path}`, LogEvent.request, 'getPrices');\n    return fetch(`${this.endpoint}${path}`).then(async (response) => {\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n\n      Logger.log(await response.clone().json(), LogEvent.response, 'getPrices');\n\n      return response.json();\n    });\n  }\n}\n\ninterface Change24h {\n  value?: number;\n  percentage?: number;\n}\nexport interface CurrentPrice {\n  value?: number;\n  change24h?: Change24h;\n}\n","import { uniq } from 'ramda';\nimport { singleton } from 'tsyringe';\n\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport type { CurrentPrice } from 'new/services/PriceAPIs/PricesService';\nimport { PricesFetcher } from 'new/services/PriceAPIs/PricesService';\n\ntype CoinMarketData = {\n  id: string;\n  symbol: string;\n  name: string;\n  current_price: number;\n  price_change_24h: number;\n  price_change_percentage_24h: number;\n};\n\n// TODO: look to make it cooler https://github.com/p2p-org/key-app-kit-swift/tree/fb77faab1da1a21b52ad61c9e388535d15a39e98/Sources/SolanaPricesAPIs\n\n@singleton()\nexport class CoingeckoPricesFetcher extends PricesFetcher {\n  endpoint = 'https://api.coingecko.com/api/v3';\n\n  // TODO: check coingecko api ids limit\n  // TODO: check get request size limit\n  override async getCurrentPrices({\n    coins,\n    fiat,\n  }: {\n    coins: Token[];\n    fiat: string;\n  }): Promise<Record<string, CurrentPrice | null>> {\n    const param = uniq(\n      coins\n        .map((coin) => coin.extensions?.coingeckoId)\n        .filter((coingeckoId): coingeckoId is string => !!coingeckoId),\n    ).join(',');\n\n    const pricesResult = await this.send<CoinMarketData[]>({\n      path: `/coins/markets/?vs_currency=${fiat}&ids=${param}`,\n    });\n\n    return pricesResult.reduce((partialResult, data) => {\n      partialResult[data.symbol.toUpperCase()] = {\n        value: data.current_price,\n        change24h: {\n          value: data.price_change_24h,\n          percentage: data.price_change_percentage_24h,\n        },\n      };\n      return partialResult;\n    }, {} as Record<string, CurrentPrice | null>);\n  }\n}\n","import { runInAction } from 'mobx';\nimport { isEmpty } from 'ramda';\nimport { singleton } from 'tsyringe';\n\nimport { Defaults } from 'new/services/Defaults';\n\nimport type { CurrentPrice } from './PricesFetcher';\n\ninterface IPricesStorage {\n  retrivePrices(): Record<string, CurrentPrice>;\n  savePrices(prices: Record<string, CurrentPrice>): void;\n}\n\n@singleton()\nexport class PricesStorage implements IPricesStorage {\n  retrivePrices(): Record<string, CurrentPrice> {\n    let prices: Record<string, CurrentPrice> = {};\n    const data = Defaults.prices;\n    if (!isEmpty(data)) {\n      prices = data;\n    }\n    return prices;\n  }\n\n  savePrices(prices: Record<string, CurrentPrice>) {\n    runInAction(() => {\n      Defaults.prices = prices;\n    });\n  }\n}\n","import { action, computed, makeObservable } from 'mobx';\nimport { uniq } from 'ramda';\nimport { singleton } from 'tsyringe';\n\nimport { LoadableRelay, LoadableState } from 'new/app/models/LoadableRelay';\nimport { Token } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport type { CurrentPrice } from 'new/services/PriceAPIs/PricesService/PricesFetcher';\n\nimport { CoingeckoPricesFetcher } from '../Coingecko';\nimport { PricesStorage } from './PricesStorage';\n\nclass PricesLoadableRelay extends LoadableRelay<Record<string, CurrentPrice>> {\n  override map(\n    oldData: Record<string, CurrentPrice> | null,\n    newData: Record<string, CurrentPrice>,\n  ): Record<string, CurrentPrice> {\n    const data = oldData;\n    if (!data) {\n      return newData;\n    }\n\n    for (const key of Object.keys(newData)) {\n      data[key] = newData[key]!;\n    }\n    return data;\n  }\n}\n\nexport interface PricesServiceType {\n  // Observables\n  currentPrices: LoadableRelay<Record<string, CurrentPrice>>;\n\n  // Getters\n  getWatchList(): Set<Token>;\n  currentPrice(coinName: string): CurrentPrice | null;\n\n  // Actions\n  clearCurrentPrices(): void;\n  addToWatchList(tokens: Token[]): void;\n  fetchPrices(tokens: Token[]): void;\n  fetchAllTokensPriceInWatchList(): void;\n\n  startObserving(): void;\n  stopObserving(): void;\n}\n\n@singleton()\nexport class PricesService implements PricesServiceType {\n  // Constants\n\n  private _refreshInterval = 15 * 60 * 1000; // 15 minutes\n  private _timer?: NodeJS.Timeout;\n\n  // Properties\n  private _watchList: Set<Token> = new Set([Token.renBTC, Token.nativeSolana, Token.usdc]);\n  private readonly _currentPrices = new PricesLoadableRelay(Promise.resolve({}));\n\n  constructor(private _storage: PricesStorage, private _fetcher: CoingeckoPricesFetcher) {\n    // reload to get cached prices\n    this._currentPrices.reload();\n\n    // get current price\n    const initialValue = this._storage.retrivePrices();\n    this._currentPrices.accept(initialValue, LoadableState.loaded);\n\n    // change request\n    this._currentPrices.request = this._getCurrentPricesRequest();\n\n    makeObservable(this, {\n      currentPrices: computed,\n\n      currentPrice: action,\n      clearCurrentPrices: action,\n      addToWatchList: action,\n      fetchPrices: action,\n      fetchAllTokensPriceInWatchList: action,\n    });\n  }\n\n  // Helpers\n\n  private async _getCurrentPricesRequest(\n    tokens: Token[] | null = null,\n  ): Promise<Record<string, CurrentPrice>> {\n    let coins = tokens ?? Array.from(this._watchList);\n    coins = uniq(coins); // .filter((token) => !token.includes('-') && !token.includes('/'));\n\n    if (coins.length === 0) {\n      return {};\n    }\n\n    const newPrices = await this._fetcher.getCurrentPrices({\n      coins,\n      fiat: Defaults.fiat.code,\n    });\n    // newPrices['renBTC'] = newPrices['BTC'] ?? null;\n    const prices = this._currentPrices.value ? { ...this._currentPrices.value } : {};\n    for (const [key, value] of Object.entries(newPrices)) {\n      if (value) {\n        prices[key] = value;\n      }\n    }\n    this._storage.savePrices(prices);\n    return prices;\n  }\n\n  //\n\n  get currentPrices(): LoadableRelay<Record<string, CurrentPrice>> {\n    return this._currentPrices;\n  }\n\n  getWatchList(): Set<Token> {\n    return this._watchList;\n  }\n\n  currentPrice(coinName: string): CurrentPrice | null {\n    return this._currentPrices.value?.[coinName] ?? null;\n  }\n\n  clearCurrentPrices(): void {\n    this._currentPrices.flush();\n    this._storage.savePrices({});\n  }\n\n  addToWatchList(tokens: Token[]): void {\n    for (const token of tokens) {\n      this._watchList.add(token);\n    }\n  }\n\n  fetchPrices(tokens: Token[]): void {\n    if (!tokens.length) {\n      return;\n    }\n\n    this._currentPrices.request = this._getCurrentPricesRequest(tokens);\n    this._currentPrices.refresh();\n  }\n\n  fetchAllTokensPriceInWatchList(): void {\n    if (!this._watchList.size) {\n      return;\n    }\n\n    this.fetchPrices(Array.from(this._watchList));\n  }\n\n  startObserving(): void {\n    this.fetchAllTokensPriceInWatchList();\n    // TODO: use timeout\n    this._timer = setInterval(() => {\n      this.fetchAllTokensPriceInWatchList();\n    }, this._refreshInterval);\n  }\n\n  stopObserving(): void {\n    clearInterval(this._timer);\n  }\n}\n","import { singleton } from 'tsyringe';\n\nimport {\n  FeeRelayer,\n  FeeRelayerAPIClient,\n  FeeRelayerRelaySolanaClient,\n  StatsInfoDeviceType,\n} from 'new/sdk/FeeRelayer';\nimport { OrcaSwapService } from 'new/services/OrcaSwapService';\nimport { SolanaService } from 'new/services/SolanaService';\n\n@singleton()\nexport class RelayService extends FeeRelayer {\n  constructor(\n    orcaSwap: OrcaSwapService,\n    solanaAPIClient: SolanaService,\n    feeRelayerRelaySolanaClient: FeeRelayerRelaySolanaClient,\n  ) {\n    super({\n      orcaSwap,\n      owner: solanaAPIClient.provider.wallet.publicKey,\n      solanaApiClient: feeRelayerRelaySolanaClient,\n      feeRelayerAPIClient: new FeeRelayerAPIClient(),\n      deviceType: StatsInfoDeviceType.web,\n      buildNumber: '1', // TODO: pass build number from environment\n    });\n  }\n}\n","import type { FeatureFlagsType } from 'new/services/FeatureFlags/defaultFlags';\nimport { defaultFlags } from 'new/services/FeatureFlags/defaultFlags';\n\nexport enum ConfigKeys {\n  NetworkSettings = 'web_NetworkSettings',\n}\n\ntype DefaultConfigType = FeatureFlagsType | Record<ConfigKeys, string | number | boolean>;\n\nexport const defaultConfig: DefaultConfigType = {\n  [ConfigKeys.NetworkSettings]: '[]',\n\n  ...defaultFlags,\n};\n","import { FIREBASE_API_KEY, FIREBASE_APP_ID } from 'new/services/RemoteConfig/constants';\n\nexport const firebaseConfig = {\n  apiKey: FIREBASE_API_KEY,\n  authDomain: 'p2p-wallet.firebaseapp.com',\n  databaseURL: 'https://p2p-wallet.firebaseio.com',\n  projectId: 'p2p-wallet',\n  storageBucket: 'p2p-wallet.appspot.com',\n  messagingSenderId: '553127941597',\n  appId: FIREBASE_APP_ID,\n  measurementId: 'G-76SWMQ5LYY',\n};\n","export const FIREBASE_API_KEY = process.env.REACT_APP_FIREBASE_API_KEY as string;\nexport const FIREBASE_APP_ID = process.env.REACT_APP_FIREBASE_APP_ID as string;\n","import { initializeApp } from 'firebase/app';\nimport type { RemoteConfig as RemoteConfigType, Value } from 'firebase/remote-config';\nimport { activate, fetchConfig, getAll, getRemoteConfig } from 'firebase/remote-config';\nimport { action, makeObservable, observable } from 'mobx';\n\nimport type { FeatureFlagsType } from 'new/services/FeatureFlags/defaultFlags';\nimport { Features } from 'new/services/FeatureFlags/features';\nimport { ConfigKeys, defaultConfig } from 'new/services/RemoteConfig/defaultConfig';\nimport { firebaseConfig } from 'new/services/RemoteConfig/firebaseConfig';\n\ntype NetworkValue = { urlString: string; network: string; additionalQuery?: string };\n\nclass _RemoteConfig {\n  private readonly _remoteConfig: RemoteConfigType;\n\n  isActivated = false;\n\n  constructor() {\n    makeObservable(this, {\n      isActivated: observable,\n    });\n\n    const app = initializeApp(firebaseConfig);\n    this._remoteConfig = getRemoteConfig(app);\n\n    this._remoteConfig.defaultConfig = defaultConfig;\n\n    // @ts-ignore\n    if (__DEVELOPMENT__ || process.env.REACT_APP_STAGING) {\n      this._remoteConfig.settings.minimumFetchIntervalMillis = 10000; // default value is 12 hours\n      // setLogLevel(this._remoteConfig, 'debug');\n    }\n\n    void activate(this._remoteConfig)\n      .then(action(() => (this.isActivated = true)))\n      .then(() => void fetchConfig(this._remoteConfig));\n  }\n\n  private _getConfig(): Record<string, Value> {\n    return getAll(this._remoteConfig);\n  }\n\n  get definedEndpoints(): NetworkValue[] {\n    return JSON.parse(\n      this._getConfig()[ConfigKeys.NetworkSettings]?.asString() || '[]',\n    ) as NetworkValue[];\n  }\n\n  get featureFlags(): Record<Features, boolean> {\n    const values = this._getConfig();\n\n    return Object.values(Features).reduce<FeatureFlagsType>((acc, key) => {\n      acc[key as Features] = values[key]?.asBoolean() || false;\n      return acc;\n    }, {} as FeatureFlagsType);\n  }\n}\n\nexport const RemoteConfig = new _RemoteConfig();\n","import { singleton } from 'tsyringe';\n\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\n\n@singleton()\nexport class TokensRepository extends SolanaSDK.TokensRepository {\n  constructor() {\n    super({\n      endpoint: Defaults.apiEndpoint,\n      cache: new SolanaSDK.InMemoryTokensRepositoryCache(),\n    });\n  }\n}\n","import { NotifyToast } from 'new/ui/components/common/NotifyToast';\nimport type { TransferParams } from 'new/ui/components/common/NotifyToast/NotifyToast';\nimport type { RendererParams } from 'new/ui/managers/NotificationManager';\n\nexport const getTransferNotificationRenderer =\n  (params: TransferParams) =>\n  ({ onClose }: RendererParams) => {\n    return <NotifyToast type=\"transfer\" onClose={onClose} {...params} />;\n  };\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\nimport { action, computed, flow, makeObservable, observable, reaction } from 'mobx';\nimport { singleton } from 'tsyringe';\n\nimport { SDListViewModel } from 'new/core/viewmodels/SDListViewModel';\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport { convertToBalance, LogEvent, Logger, Wallet } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { NotificationService } from 'new/services/NotificationService';\nimport { PricesService } from 'new/services/PriceAPIs/PricesService';\nimport type { AccountsObservableEvent } from 'new/services/Socket';\nimport { AccountObservableService } from 'new/services/Socket';\nimport { SolanaService } from 'new/services/SolanaService';\nimport { getTransferNotificationRenderer } from 'new/ui/notifications/transferNotificationRenderer';\nimport { numberToString } from 'new/utils/NumberExtensions';\n\n@singleton()\nexport class WalletsRepository extends SDListViewModel<Wallet> {\n  // Properties\n\n  private _timer?: NodeJS.Timeout;\n\n  // Getters\n\n  get nativeWallet(): Wallet | null {\n    return this.data.find((wallet) => wallet.isNativeSOL) ?? null;\n  }\n\n  getWallets(): Wallet[] {\n    return this.data;\n  }\n\n  // Subjects\n\n  isHiddenWalletsShown = false;\n\n  // Initializer\n\n  constructor(\n    private _solanaService: SolanaService,\n    private _pricesService: PricesService,\n    private _socket: AccountObservableService,\n    private _notificationService: NotificationService,\n  ) {\n    super();\n    makeObservable(this, {\n      nativeWallet: computed,\n      isHiddenWalletsShown: observable,\n      createRequest: flow,\n      toggleIsHiddenWalletShown: action.bound,\n      toggleWalletVisibility: action.bound,\n    });\n  }\n\n  protected override setDefaults() {\n    // don't clean\n  }\n\n  protected onInitialize(): void {\n    this._bind();\n    this._startObserving();\n  }\n\n  protected override afterReactionsRemoved() {\n    // TODO: check it works\n    this._stopObserving();\n  }\n\n  // Binding\n  private _bind(): void {\n    // observe prices\n    this.addReaction(\n      reaction(\n        () => this._pricesService.currentPrices.state.type, // TODO: check\n        () => {\n          this._updatePrices();\n        },\n      ),\n    );\n\n    // observe hideZeroBalances settings\n    this.addReaction(\n      reaction(\n        () => Defaults.hideZeroBalances,\n        () => {\n          this._updateWalletsVisibility();\n        },\n      ),\n    );\n\n    // observe tokens' balance\n    // observe account notification\n    this.addReaction(\n      reaction(\n        () => this.getWallets(),\n        (wallets) => {\n          for (const wallet of wallets) {\n            if (wallet.pubkey) {\n              this._socket.subscribeAccountNotification(\n                wallet.pubkey,\n                this._handleAccountNotification.bind(this),\n              );\n            }\n          }\n        },\n      ),\n    );\n  }\n\n  // Observing\n\n  private _startObserving(): void {\n    this._timer = setTimeout(async () => {\n      try {\n        await this._getNewWallets();\n      } finally {\n        this._startObserving();\n      }\n    }, 10000);\n  }\n\n  private _stopObserving(): void {\n    clearInterval(this._timer);\n  }\n\n  // Methods\n\n  override createRequest = flow<Wallet[], []>(function* (\n    this: WalletsRepository,\n  ): Generator<Promise<Wallet[]>> {\n    return yield Promise.all([\n      // TODO: encapsulate address to service\n      this._solanaService.provider.connection.getBalance(\n        this._solanaService.provider.wallet.publicKey,\n        'recent',\n      ),\n      // TODO: encapsulate address to service\n      this._solanaService.getTokenWallets(this._solanaService.provider.wallet.publicKey.toString()),\n    ])\n      .then(([balance, wallets]) => {\n        let walletsNew = wallets;\n\n        const solWallet = Wallet.nativeSolana({\n          pubkey: this._solanaService.provider.wallet.publicKey.toString(),\n          lamports: new u64(balance),\n        });\n        walletsNew.unshift(solWallet);\n\n        // update visibility\n        walletsNew = this._mapVisibility(walletsNew);\n\n        // map prices\n        walletsNew = this._mapPrices(walletsNew);\n\n        // sort\n        walletsNew = walletsNew.sort(Wallet.defaultSorter);\n\n        return walletsNew;\n      })\n      .then((wallets) => {\n        const newTokens = wallets\n          .map((wallet) => wallet.token)\n          .filter((token) => !this._pricesService.getWatchList().has(token));\n\n        this._pricesService.addToWatchList(newTokens);\n        this._pricesService.fetchPrices(newTokens);\n\n        return wallets;\n      });\n  });\n\n  private _getNewWallets(): Promise<void> {\n    return this._solanaService\n      .getTokenWallets(this._solanaService.provider.wallet.publicKey.toString())\n      .then((wallets) => {\n        const data = this.data;\n        let newWallets = wallets\n          .filter((w1) => !data.some((wallet) => wallet.pubkey === w1.pubkey))\n          .filter((w1) => !w1.lamports?.eq(ZERO));\n\n        newWallets = this._mapPrices(newWallets);\n        newWallets = this._mapVisibility(newWallets);\n\n        let newData = data.concat(...newWallets);\n        newData = newData.sort(Wallet.defaultSorter);\n        return newData;\n      })\n      .then((data) => {\n        this.overrideData(data);\n      });\n  }\n\n  batchUpdate(cb: (wallets: Wallet[]) => Wallet[]): void {\n    const wallets = cb(this.getWallets());\n    this.overrideData(wallets);\n  }\n\n  // Getters\n\n  get hiddenWallets(): Wallet[] {\n    return this.data.filter((wallet) => wallet.isHidden);\n  }\n\n  // Actions\n\n  toggleIsHiddenWalletShown(): void {\n    this.isHiddenWalletsShown = !this.isHiddenWalletsShown;\n  }\n\n  toggleWalletVisibility(wallet: Wallet): void {\n    if (wallet.isHidden) {\n      this._unhideWallet(wallet);\n    } else {\n      this._hideWallet(wallet);\n    }\n  }\n\n  // Mappers\n\n  private _mapPrices(wallets: Wallet[]): Wallet[] {\n    const walletsNew = wallets;\n    for (const wallet of walletsNew) {\n      wallet.price = this._pricesService.currentPrice(wallet.token.symbol);\n    }\n\n    return walletsNew;\n  }\n\n  private _mapVisibility(wallets: Wallet[]): Wallet[] {\n    const walletsNew = wallets;\n    walletsNew.forEach((wallet) => {\n      // update visibility\n      wallet.updateVisibility();\n    });\n    return walletsNew;\n  }\n\n  // Helpers\n\n  private _updatePrices(): void {\n    if (this.state !== SDFetcherState.loaded) {\n      return;\n    }\n\n    let wallets = this._mapPrices(this.data);\n    wallets = wallets.sort(Wallet.defaultSorter);\n    this.overrideData(wallets);\n  }\n\n  private _updateWalletsVisibility(): void {\n    // TODO: check current state loaded\n    if (this.state !== SDFetcherState.loaded) {\n      return;\n    }\n\n    const wallets = this._mapVisibility(this.data);\n    this.overrideData(wallets);\n  }\n\n  private _hideWallet(wallet: Wallet): void {\n    Defaults.unhiddenWalletPubkey = Defaults.unhiddenWalletPubkey.filter(\n      (item) => item !== wallet.pubkey,\n    );\n    if (wallet.pubkey && Defaults.hiddenWalletPubkey.indexOf(wallet.pubkey) === -1) {\n      Defaults.hiddenWalletPubkey.push(wallet.pubkey);\n    }\n    this._updateVisibility(wallet);\n  }\n\n  private _unhideWallet(wallet: Wallet): void {\n    if (wallet.pubkey && Defaults.unhiddenWalletPubkey.indexOf(wallet.pubkey) === -1) {\n      Defaults.unhiddenWalletPubkey.push(wallet.pubkey);\n    }\n    Defaults.hiddenWalletPubkey = Defaults.hiddenWalletPubkey.filter(\n      (item) => item !== wallet.pubkey,\n    );\n    this._updateVisibility(wallet);\n  }\n\n  private _updateVisibility(wallet: Wallet): void {\n    this.updateItem(\n      (item) => item.pubkey === wallet.pubkey,\n      (item) => {\n        // TODO: check new reference\n        item.updateVisibility();\n        return item;\n      },\n    );\n  }\n\n  // Account notifications\n\n  private _handleAccountNotification(notification: AccountsObservableEvent): void {\n    // notify changes\n    const wallet = this.data.find((wallet) => wallet.pubkey === notification.pubkey);\n    const oldLamportsValue = wallet?.lamports;\n    const newLamportsValue = notification.lamports;\n\n    if (oldLamportsValue) {\n      if (oldLamportsValue.gt(newLamportsValue)) {\n        // sent\n        const lamports = oldLamportsValue.sub(newLamportsValue);\n\n        const text = numberToString(convertToBalance(lamports, wallet.token.decimals), {\n          maximumFractionDigits: wallet.token.decimals,\n        });\n\n        this._notificationService.show(\n          getTransferNotificationRenderer({\n            header: 'Sent',\n            text: `- ${text} ${wallet.token.symbol}`,\n            token: wallet.token,\n          }),\n        );\n\n        // TODO: WLNotification\n        Logger.log(\n          {\n            account: notification.pubkey,\n            lamports,\n          },\n          LogEvent.info,\n        );\n      } else if (oldLamportsValue.lt(newLamportsValue)) {\n        // received\n\n        const lamports = newLamportsValue.sub(oldLamportsValue);\n\n        const text = numberToString(convertToBalance(lamports, wallet.token.decimals), {\n          maximumFractionDigits: wallet.token.decimals,\n        });\n\n        this._notificationService.show(\n          getTransferNotificationRenderer({\n            header: 'Received',\n            text: `+ ${text} ${wallet.token.symbol}`,\n            token: wallet.token,\n          }),\n        );\n\n        // TODO: WLNotification\n        Logger.log(\n          {\n            account: notification.pubkey,\n            lamports,\n          },\n          LogEvent.info,\n        );\n      }\n    }\n\n    // update\n    this.updateItem(\n      (item) => item.pubkey === notification.pubkey,\n      (item) => {\n        // TODO: check new reference\n        item.lamports = notification.lamports;\n        return item;\n      },\n    );\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { u64 } from '@solana/spl-token';\nimport { Connection, PublicKey } from '@solana/web3.js';\nimport { computed, makeObservable } from 'mobx';\nimport { Lifecycle, scoped } from 'tsyringe';\n\nimport type { Lamports } from 'new/sdk/SolanaSDK';\nimport { AccountInfo } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\n\nexport interface AccountsObservableEvent {\n  pubkey: string;\n  lamports: Lamports;\n}\n\n@scoped(Lifecycle.ContainerScoped)\nexport class AccountObservableService {\n  private _connection: Connection;\n\n  private _accountSubscriptions: Record<string, number> = {};\n\n  get isConnected(): boolean {\n    // @ts-ignore\n    return this._connection._rpcWebSocketConnected;\n  }\n\n  constructor() {\n    this._connection = new Connection(Defaults.apiEndpoint.getURL(), {\n      wsEndpoint: Defaults.apiEndpoint.getSocketURL(),\n    });\n\n    makeObservable(this, {\n      isConnected: computed,\n    });\n  }\n\n  subscribeAccountNotification(\n    account: string,\n    cb: (notification: AccountsObservableEvent) => void,\n  ): number {\n    if (this._accountSubscriptions[account]) {\n      return this._accountSubscriptions[account]!;\n    }\n\n    const subscriptionId = this._connection.onAccountChange(\n      new PublicKey(account),\n      (accountInfo) => {\n        const pubkey = account;\n\n        // Native Account\n        if (!accountInfo.data.length) {\n          const lamports = new u64(accountInfo.lamports);\n          cb({ pubkey, lamports });\n        }\n        // Token Account\n        else {\n          const info = AccountInfo.decode(accountInfo.data);\n          const lamports = info?.lamports ?? ZERO; // TODO: check it works right\n          cb({ pubkey, lamports });\n        }\n      },\n    );\n\n    this._accountSubscriptions[account] = subscriptionId;\n\n    return subscriptionId;\n  }\n}\n","import { singleton } from 'tsyringe';\n\nimport { SolanaModel } from 'new/models/SolanaModel/SolanaModel';\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\n\n@singleton()\nexport class SolanaService extends SolanaSDK.SolanaSDK {\n  constructor(protected solanaModel: SolanaModel) {\n    super({\n      provider: solanaModel.provider,\n      endpoint: Defaults.apiEndpoint,\n    });\n  }\n}\n","import { ZERO } from '@orca-so/sdk';\nimport { PublicKey } from '@solana/web3.js';\nimport type { IReactionDisposer } from 'mobx';\nimport { action, computed, makeObservable, observable, reaction } from 'mobx';\nimport promiseRetry from 'promise-retry';\nimport { singleton } from 'tsyringe';\n\nimport { FeeTypeEnum } from 'new/app/models/PayingFee';\nimport { PendingTransaction, TransactionStatus } from 'new/app/models/PendingTransaction';\nimport {\n  getAssociatedTokenAddressSync,\n  SolanaSDKError,\n  SolanaSDKPublicKey,\n  toLamport,\n} from 'new/sdk/SolanaSDK';\nimport type { ParsedTransaction } from 'new/sdk/TransactionParser';\nimport { NotificationService } from 'new/services/NotificationService';\nimport { PricesService } from 'new/services/PriceAPIs/PricesService';\nimport { WalletsRepository } from 'new/services/Repositories';\nimport { AccountObservableService } from 'new/services/Socket';\nimport { SolanaService } from 'new/services/SolanaService';\nimport type { RawTransactionType, SendTransaction } from 'new/ui/modals/ProcessTransactionModal';\nimport * as ProcessTransaction from 'new/ui/modals/ProcessTransactionModal/ProcessTransaction.Models';\nimport type { Emitter } from 'new/utils/libs/nanoEvent';\nimport { createNanoEvent } from 'new/utils/libs/nanoEvent';\n\nexport type TransactionIndex = number;\n\nexport interface TransactionHandlerType {\n  sendTransaction(processingTransaction: RawTransactionType): TransactionIndex;\n  observeTransaction(\n    transactionIndex: TransactionIndex,\n    cb: (tx: PendingTransaction | null) => void,\n  ): IReactionDisposer;\n  readonly areSomeTransactionsInProgress: boolean;\n\n  observeProcessingTransactions(\n    account: string,\n    cb: (txs: ParsedTransaction[]) => void,\n  ): IReactionDisposer;\n  observeProcessingTransactionsAll(cb: (txs: ParsedTransaction[]) => void): IReactionDisposer;\n\n  getProcessingTransactions(account: string): ParsedTransaction[];\n  getProcessingTransaction(): ParsedTransaction[];\n\n  readonly onNewTransaction: Emitter<[{ trx: PendingTransaction; index: number }]>['on']; // TODO: observable\n}\n\n// @web: it must be same instance during all resolves\n@singleton()\nexport class TransactionHandler implements TransactionHandlerType {\n  transactions: PendingTransaction[] = [];\n  private _onNewTransactionEmitter =\n    createNanoEvent<[{ trx: PendingTransaction; index: number }]>(); // new EventEmitter<{ trx: PendingTransaction; index: number }>();\n  onNewTransaction: Emitter<[{ trx: PendingTransaction; index: number }]>['on'] =\n    this._onNewTransactionEmitter.on;\n\n  constructor(\n    private _apiClient: SolanaService,\n    private _walletsRepository: WalletsRepository,\n    private _pricesService: PricesService,\n    private _socket: AccountObservableService,\n    private _notificationService: NotificationService,\n  ) {\n    makeObservable(this, {\n      transactions: observable,\n\n      sendTransaction: action,\n      observeTransaction: action,\n\n      areSomeTransactionsInProgress: computed,\n\n      getProcessingTransactions: action,\n      getProcessingTransaction: action,\n      sendAndObserve: action,\n\n      _updateTransactionAtIndex: action,\n    });\n  }\n\n  sendTransaction(processingTransaction: RawTransactionType): TransactionIndex {\n    // get index to return\n    const txIndex = this.transactions.length;\n\n    // add to processing\n    const trx = new PendingTransaction({\n      transactionId: null,\n      sentAt: new Date(),\n      rawTransaction: processingTransaction,\n      status: TransactionStatus.sending(),\n    });\n\n    const value = [...this.transactions];\n    value.push(trx);\n\n    this.transactions = value;\n    this._onNewTransactionEmitter.emit({ trx, index: txIndex });\n\n    // process\n    void this.sendAndObserve({ index: txIndex, processingTransaction });\n\n    return txIndex;\n  }\n\n  observeTransaction(\n    transactionIndex: TransactionIndex,\n    cb: (tx: PendingTransaction | null) => void,\n  ): IReactionDisposer {\n    return reaction(\n      () => this.transactions,\n      (transactions) => cb(transactions[transactionIndex] ?? null),\n    );\n  }\n\n  get areSomeTransactionsInProgress(): boolean {\n    return this.transactions.some((tx) => tx.status.isProcessing);\n  }\n\n  observeProcessingTransactions(\n    account: string,\n    cb: (txs: ParsedTransaction[]) => void,\n  ): IReactionDisposer {\n    return reaction(\n      () => this.transactions && this.getProcessingTransactions(account),\n      (txs) => cb(txs),\n    );\n  }\n\n  observeProcessingTransactionsAll(cb: (txs: ParsedTransaction[]) => void): IReactionDisposer {\n    return reaction(\n      () => this.transactions && this.getProcessingTransaction(),\n      (txs) => cb(txs),\n    );\n  }\n\n  getProcessingTransactions(account: string): ParsedTransaction[] {\n    return this.transactions\n      .filter((pt) => {\n        const transaction = pt.rawTransaction;\n        switch (transaction.constructor) {\n          case ProcessTransaction.SendTransaction: {\n            if (\n              (transaction as ProcessTransaction.SendTransaction).sender.pubkey === account ||\n              (transaction as ProcessTransaction.SendTransaction).receiver.address === account ||\n              (transaction as ProcessTransaction.SendTransaction).authority === account\n            ) {\n              return true;\n            }\n            break;\n          }\n          case ProcessTransaction.SwapTransaction: {\n            if (\n              (transaction as ProcessTransaction.SwapTransaction).sourceWallet.pubkey === account ||\n              (transaction as ProcessTransaction.SwapTransaction).destinationWallet.pubkey ===\n                account ||\n              (transaction as ProcessTransaction.SwapTransaction).authority === account\n            ) {\n              return true;\n            }\n            break;\n          }\n          default:\n            break;\n        }\n        return false;\n      })\n      .map((pt) => {\n        return pt.parse({\n          pricesService: this._pricesService,\n          authority: this._walletsRepository.nativeWallet?.pubkey,\n        });\n      })\n      .filter((tx): tx is ParsedTransaction => Boolean(tx));\n  }\n\n  getProcessingTransaction(): ParsedTransaction[] {\n    return this.transactions\n      .map((pt) => {\n        return pt.parse({\n          pricesService: this._pricesService,\n          authority: this._walletsRepository.nativeWallet?.pubkey,\n        });\n      })\n      .filter((tx): tx is ParsedTransaction => Boolean(tx));\n  }\n\n  // Send and observe transaction\n  async sendAndObserve({\n    index,\n    processingTransaction,\n  }: {\n    index: TransactionIndex;\n    processingTransaction: RawTransactionType;\n  }): Promise<void> {\n    try {\n      const transactionId = await processingTransaction.createRequest();\n\n      // show notification\n      this._notificationService.info('Transaction has been sent');\n\n      // when sending renBTC via Bitcoin network transaction is already finished at this stage\n      if ((processingTransaction as SendTransaction).isRenBTCViaBitcoinNetwork) {\n        // update status\n        this._updateTransactionAtIndex(index, () => {\n          return new PendingTransaction({\n            transactionId,\n            sentAt: new Date(),\n            rawTransaction: processingTransaction,\n            status: TransactionStatus.finalized(),\n          });\n        });\n      } else {\n        // update status\n        this._updateTransactionAtIndex(index, () => {\n          return new PendingTransaction({\n            transactionId,\n            sentAt: new Date(),\n            rawTransaction: processingTransaction,\n            status: TransactionStatus.confirmed(0),\n          });\n        });\n\n        // observe confirmations\n        this._observe({ index, transactionId });\n      }\n    } catch (error) {\n      // update status\n      this._notificationService.error((error as Error).message);\n\n      // mark transaction as failured\n      this._updateTransactionAtIndex(index, (currentValue) => {\n        const info = currentValue;\n        info.status = TransactionStatus.error(error as Error);\n        return info;\n      });\n    }\n  }\n\n  // Observe confirmation statuses of given transaction\n  private _observe({\n    index,\n    transactionId,\n  }: {\n    index: TransactionIndex;\n    transactionId: string;\n  }): void {\n    void promiseRetry(\n      async (retry) => {\n        try {\n          const result = await this._apiClient.provider.connection.getSignatureStatus(\n            transactionId,\n          );\n          const status = result.value;\n          if (!status) {\n            throw SolanaSDKError.other('Invalid status');\n          }\n\n          let txStatus: TransactionStatus;\n          if (!status.confirmations || status.confirmationStatus === 'finalized') {\n            txStatus = TransactionStatus.finalized();\n          } else {\n            txStatus = TransactionStatus.confirmed(status.confirmations ?? 0);\n          }\n\n          this._updateTransactionAtIndex(index, (currentValue) => {\n            const value = currentValue;\n            value.status = txStatus;\n            value.slot = status.slot;\n            return value;\n          });\n\n          const confirmed = !status.confirmations || status.confirmationStatus === 'finalized';\n          if (confirmed) {\n            return null;\n          } else {\n            throw ProcessTransaction.ErrorType.notEnoughNumberOfConfirmations();\n          }\n        } catch (error) {\n          if (error instanceof ProcessTransaction.ErrorType.NotEnoughNumberOfConfirmationsError) {\n            console.error(error);\n            retry(error);\n            return;\n          }\n\n          this._updateTransactionAtIndex(index, (currentValue) => {\n            const value = currentValue;\n            value.status = TransactionStatus.finalized();\n            return value;\n          });\n        }\n      },\n      {\n        retries: 30,\n        minTimeout: 1_000,\n        maxTimeout: 2_000,\n        factor: 1,\n      },\n    );\n  }\n\n  // Update transaction\n  _updateTransactionAtIndex(\n    index: TransactionIndex,\n    update: (tx: PendingTransaction) => PendingTransaction,\n  ): boolean {\n    const value = [...this.transactions];\n\n    const currentValue = value[index];\n    if (currentValue) {\n      const newValue = update(currentValue);\n\n      // write to repository if the transaction is not yet written and there is at least 1 confirmation\n      const numberOfConfirmations = newValue.status.numberOfConfirmations;\n      if (!newValue.writtenToRepository && numberOfConfirmations && numberOfConfirmations > 0) {\n        // manually update balances if socket is not connected\n        this._updateRepository(newValue.rawTransaction);\n\n        // mark as written\n        newValue.writtenToRepository = true;\n      }\n\n      // update\n      value[index] = newValue;\n      this.transactions = value;\n      return true;\n    }\n\n    return false;\n  }\n\n  private _updateRepository(rawTransaction: RawTransactionType): void {\n    switch (rawTransaction.constructor) {\n      case ProcessTransaction.SendTransaction: {\n        if (this._socket.isConnected) {\n          return;\n        }\n\n        this._walletsRepository.batchUpdate((currentValue) => {\n          const wallets = currentValue;\n          let index;\n\n          // update sender\n          index = wallets.findIndex(\n            (wallet) =>\n              wallet.pubkey ===\n              (rawTransaction as ProcessTransaction.SendTransaction).sender.pubkey,\n          );\n          if (index) {\n            wallets[index]!.decreaseBalance(\n              (rawTransaction as ProcessTransaction.SendTransaction).amount,\n            );\n          }\n\n          // update receiver if user send to different wallet of THIS account\n          index = wallets.findIndex(\n            (wallet) =>\n              wallet.pubkey ===\n              (rawTransaction as ProcessTransaction.SendTransaction).receiver.address,\n          );\n          if (index) {\n            wallets[index]!.increaseBalance(\n              (rawTransaction as ProcessTransaction.SendTransaction).amount,\n            );\n          }\n\n          // update paying wallet\n          index = wallets.findIndex(\n            (wallet) =>\n              wallet.pubkey ===\n              (rawTransaction as ProcessTransaction.SendTransaction).payingFeeWallet?.pubkey,\n          );\n          if (index) {\n            const feeInToken = (rawTransaction as ProcessTransaction.SendTransaction).feeInToken;\n            if (feeInToken) {\n              wallets[index]!.decreaseBalance(feeInToken.total);\n            }\n          }\n\n          return wallets;\n        });\n        break;\n      }\n      case ProcessTransaction.CloseTransaction: {\n        if (this._socket.isConnected) {\n          return;\n        }\n\n        this._walletsRepository.batchUpdate((currentValue) => {\n          let wallets = currentValue;\n          let reimbursedAmount = (rawTransaction as ProcessTransaction.CloseTransaction)\n            .reimbursedAmount;\n\n          // remove closed wallet\n          const wallet = (rawTransaction as ProcessTransaction.CloseTransaction).closingWallet;\n          wallets = wallets.filter((item) => item.pubkey === wallet.pubkey);\n\n          // if closing non-native Solana wallet, then convert its balances and send it to native Solana wallet\n          if (wallet.token.symbol === 'SOL' && !wallet.token.isNative) {\n            reimbursedAmount = reimbursedAmount.add(wallet.lamports ?? ZERO);\n          }\n\n          // update native wallet\n          const index = wallets.findIndex((wallet) => wallet.isNativeSOL);\n          if (index !== -1) {\n            wallets[index]!.increaseBalance(reimbursedAmount);\n          }\n\n          return wallets;\n        });\n        break;\n      }\n      case ProcessTransaction.SwapTransaction: {\n        this._walletsRepository.batchUpdate((currentValue) => {\n          const wallets = currentValue;\n\n          // update source wallet if socket is not connected\n          if (!this._socket.isConnected) {\n            const index = wallets.findIndex(\n              (wallet) =>\n                wallet.pubkey ===\n                (rawTransaction as ProcessTransaction.SwapTransaction).sourceWallet.pubkey,\n            );\n            if (index !== -1) {\n              wallets[index]!.decreaseBalance(\n                toLamport(\n                  (rawTransaction as ProcessTransaction.SwapTransaction).amount,\n                  (rawTransaction as ProcessTransaction.SwapTransaction).sourceWallet.token\n                    .decimals,\n                ),\n              );\n            }\n          }\n\n          // update destination wallet if exists\n          const index = wallets.findIndex(\n            (wallet) =>\n              wallet.pubkey ===\n              (rawTransaction as ProcessTransaction.SwapTransaction).destinationWallet.pubkey,\n          );\n          if (index !== -1) {\n            // update only if socket is not connected\n            if (!this._socket.isConnected) {\n              wallets[index]!.increaseBalance(\n                toLamport(\n                  (rawTransaction as ProcessTransaction.SwapTransaction).estimatedAmount,\n                  (rawTransaction as ProcessTransaction.SwapTransaction).destinationWallet.token\n                    .decimals,\n                ),\n              );\n            }\n          } else {\n            // add destination wallet if not exists, event when socket is connected, because socket doesn't handle new wallet\n            let publicKey = null;\n            try {\n              const authority = (rawTransaction as ProcessTransaction.SwapTransaction).authority;\n              if (!authority) {\n                throw false;\n              }\n\n              publicKey = getAssociatedTokenAddressSync(\n                new PublicKey(\n                  (\n                    rawTransaction as ProcessTransaction.SwapTransaction\n                  ).destinationWallet.mintAddress,\n                ),\n                new PublicKey(authority),\n                false,\n                SolanaSDKPublicKey.splAssociatedTokenAccountProgramId,\n                SolanaSDKPublicKey.tokenProgramId,\n              );\n            } catch {\n              /// ignore\n            }\n            if (publicKey) {\n              const destinationWallet = (rawTransaction as ProcessTransaction.SwapTransaction)\n                .destinationWallet;\n              destinationWallet.pubkey = publicKey.toString();\n              destinationWallet.lamports = toLamport(\n                (rawTransaction as ProcessTransaction.SwapTransaction).estimatedAmount,\n                destinationWallet.token.decimals,\n              );\n              wallets.push(destinationWallet);\n            }\n          }\n\n          // update paying wallet\n          if (!this._socket.isConnected) {\n            for (const fee of (rawTransaction as ProcessTransaction.SwapTransaction).fees) {\n              switch (fee.type.type) {\n                case FeeTypeEnum.accountCreationFee:\n                case FeeTypeEnum.transactionFee: {\n                  const index = wallets.findIndex(\n                    (wallet) => wallet.mintAddress === fee.token.address,\n                  );\n                  if (index !== -1) {\n                    wallets[index]!.decreaseBalance(fee.lamports);\n                  }\n                  break;\n                }\n                case FeeTypeEnum.liquidityProviderFee:\n                case FeeTypeEnum.orderCreationFee:\n                case FeeTypeEnum.depositWillBeReturned:\n                  break;\n              }\n            }\n          }\n\n          return wallets;\n        });\n        break;\n      }\n      default:\n        break;\n    }\n  }\n}\n","export const createNanoEvent = () => ({\n  listeners: [],\n  emit(...args) {\n    const callbacks = this.listeners || [];\n    for (let i = 0, length = callbacks.length; i < length; i++) {\n      callbacks[i](...args);\n    }\n  },\n  on(cb) {\n    this.listeners?.push(cb) || (this.listeners = [cb]);\n    return () => {\n      this.listeners = this.listeners.filter((i) => cb !== i);\n    };\n  },\n});\n","import { autorun, set, toJS } from 'mobx';\n\nexport function makeLocalStorage<T>(_this: { fromJSON(json: T): T }, name: string) {\n  const storedJson = localStorage.getItem(name);\n  if (storedJson) {\n    const json = JSON.parse(storedJson);\n    set(_this, _this.fromJSON(json));\n  }\n  autorun(() => {\n    const value = toJS(_this);\n    localStorage.setItem(name, JSON.stringify(value));\n  });\n}\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nconst Address = styled.div`\n  flex-grow: 1;\n\n  color: ${theme.colors.textIcon.primary};\n\n  &.small {\n    font-weight: normal;\n    font-size: 14px;\n    line-height: 140%;\n    letter-spacing: 0.05em;\n  }\n\n  &.medium {\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 140%;\n    letter-spacing: 0.04em;\n  }\n\n  &.big {\n    font-weight: 600;\n    font-size: 18px;\n  }\n`;\n\nconst BlueText = styled.span`\n  color: ${theme.colors.textIcon.active};\n`;\n\ntype Props = {\n  address: string;\n  small?: boolean;\n  medium?: boolean;\n  big?: boolean;\n  gray?: boolean;\n  className?: string;\n};\n\n// TODO: trim middle symbols if don't fit width\nexport const AddressText: FC<Props> = ({\n  address,\n  small,\n  medium,\n  big,\n  gray = false,\n  className,\n}) => {\n  return (\n    <Address title={address} className={classNames(className, { gray, small, medium, big })}>\n      <BlueText>{address.slice(0, 4)}</BlueText>\n      {address.slice(4, -4)}\n      <BlueText>{address.slice(-4)}</BlueText>\n    </Address>\n  );\n};\n","export const sleep: (ms: number) => Promise<void> = (ms: number) =>\n  new Promise((resolve) => setTimeout(resolve, ms));\n\n// eslint-disable-next-line @typescript-eslint/no-magic-numbers\nexport const getAvatarSize = (isMobile: boolean) => (isMobile ? 32 : 44);\n","import { styled } from '@linaria/react';\nimport { theme, up } from '@p2p-wallet-web/ui';\n\nimport { TokenAvatar } from '../TokenAvatar';\n\nexport const TokenAvatarStyled = styled(TokenAvatar)``;\n\nexport const TokenInfo = styled.div`\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-rows: 22px 22px;\n  grid-template-columns: auto;\n`;\n\nexport const TokenName = styled.div`\n  flex: 1;\n\n  max-width: 300px;\n  overflow: hidden;\n\n  color: ${theme.colors.textIcon.primary};\n\n  font-weight: 700;\n  font-size: 14px;\n  line-height: 140%;\n\n  ${up.tablet} {\n    font-weight: 600;\n    font-size: 16px;\n  }\n\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`;\n\nexport const TokenBalance = styled.div`\n  color: ${theme.colors.textIcon.secondary};\n  font-weight: 500;\n  font-size: 13px;\n  line-height: 140%;\n\n  ${up.tablet} {\n    font-size: 14px;\n  }\n`;\n\nexport const TokenUSD = styled.div`\n  grid-row: 1 / -1;\n  align-self: center;\n  justify-self: flex-end;\n\n  color: #202020;\n  font-weight: 600;\n  font-size: 17px;\n  line-height: 140%;\n\n  ${up.tablet} {\n    font-size: 18px;\n  }\n`;\n\nexport const Content = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: center;\n  margin-left: 12px;\n\n  &.isMobilePopupChild {\n    ${TokenInfo} {\n      grid-template-rows: 20px 20px;\n    }\n\n    ${TokenName} {\n      font-weight: 500;\n    }\n\n    ${TokenBalance} {\n      font-size: 14px;\n    }\n\n    ${TokenUSD} {\n      font-size: 16px;\n    }\n  }\n\n  .isSelected & {\n    ${TokenName} {\n      font-weight: 700;\n    }\n\n    ${TokenUSD} {\n      font-weight: 700;\n    }\n  }\n`;\n","import type { FC } from 'react';\n\nimport { useIsMobile } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { numberToString } from 'new/utils/NumberExtensions';\nimport { getAvatarSize } from 'utils/common';\n\nimport { Content, TokenAvatarStyled, TokenBalance, TokenInfo, TokenName } from './styled';\n\ninterface Props {\n  token: Token;\n  isMobilePopupChild?: boolean;\n}\n\nexport const BaseTokenCellContent: FC<Props> = observer(({ token, isMobilePopupChild }) => {\n  const isMobile = useIsMobile();\n\n  const avatarSize = getAvatarSize(isMobile);\n\n  const renderTokenName = () => {\n    return <TokenName title={token.symbol}>{token.name}</TokenName>;\n  };\n\n  const elTokenBalance = (\n    <TokenBalance>\n      {numberToString(0, { maximumFractionDigits: 9 })} {token.symbol}\n    </TokenBalance>\n  );\n\n  return (\n    <>\n      <TokenAvatarStyled token={token} size={avatarSize} />\n      <Content className={classNames({ isMobilePopupChild })}>\n        <TokenInfo>\n          {renderTokenName()}\n          {elTokenBalance}\n        </TokenInfo>\n      </Content>\n    </>\n  );\n});\n","import type { FC } from 'react';\nimport Skeleton from 'react-loading-skeleton';\n\nimport { useIsMobile } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\nimport { numberToString } from 'new/utils/NumberExtensions';\nimport { getAvatarSize } from 'utils/common';\nimport { shortAddress } from 'utils/tokens';\n\nimport { Content, TokenAvatarStyled, TokenBalance, TokenInfo, TokenName, TokenUSD } from './styled';\n\ninterface Props {\n  wallet?: Wallet;\n  isPlaceholder?: boolean;\n  isMobilePopupChild?: boolean;\n}\n\nexport const BaseWalletCellContent: FC<Props> = observer(\n  ({ wallet, isPlaceholder, isMobilePopupChild }) => {\n    const isMobile = useIsMobile();\n\n    const avatarSize = getAvatarSize(isMobile);\n\n    if (isPlaceholder || !wallet) {\n      return (\n        <>\n          <Skeleton height={avatarSize} width={avatarSize} borderRadius={12} />\n          <Content className={classNames({ isMobilePopupChild })}>\n            <TokenInfo>\n              <TokenName>\n                <Skeleton width={100} height={16} />\n              </TokenName>\n              <TokenBalance>\n                <Skeleton width={100} height={14} />\n              </TokenBalance>\n              <TokenUSD>\n                <Skeleton width={50} height={14} />\n              </TokenUSD>\n            </TokenInfo>\n          </Content>\n        </>\n      );\n    }\n\n    const renderTokenName = () => {\n      let tokenName = wallet.token.name;\n      if (!tokenName) {\n        tokenName = shortAddress(wallet.mintAddress);\n      }\n\n      return <TokenName title={wallet.mintAddress}>{tokenName}</TokenName>;\n    };\n\n    const elTokenBalance = (\n      <TokenBalance>\n        {numberToString(wallet.amount, { maximumFractionDigits: 9 })} {wallet.token.symbol}\n      </TokenBalance>\n    );\n\n    const renderTokenUSD = () => {\n      if (wallet.amountInCurrentFiat) {\n        return (\n          <TokenUSD>\n            {Defaults.fiat.symbol}{' '}\n            {numberToString(wallet.amountInCurrentFiat, { maximumFractionDigits: 2 })}\n          </TokenUSD>\n        );\n      }\n\n      return null;\n    };\n\n    return (\n      <>\n        <TokenAvatarStyled token={wallet.token} size={avatarSize} />\n        <Content className={classNames({ isMobilePopupChild })}>\n          <TokenInfo>\n            {renderTokenName()}\n            {elTokenBalance}\n            {renderTokenUSD()}\n          </TokenInfo>\n        </Content>\n      </>\n    );\n  },\n);\n","import { action, flow, makeObservable, observable, reaction, when } from 'mobx';\nimport assert from 'ts-invariant';\nimport { injectable } from 'tsyringe';\n\nimport { SDListViewModel } from 'new/core/viewmodels/SDListViewModel';\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport { excludingSpecialTokens, Wallet } from 'new/sdk/SolanaSDK';\nimport { PricesService } from 'new/services/PriceAPIs/PricesService';\nimport { TokensRepository, WalletsRepository } from 'new/services/Repositories';\n\n@injectable()\nexport class ChooseWalletViewModel extends SDListViewModel<Wallet> {\n  selectedWallet: Wallet | null;\n  private _myWallets: Wallet[];\n  showOtherWallets: boolean | null;\n  keyword: string;\n  isOpen: boolean;\n  private _staticWallets: Wallet[] | null;\n\n  constructor(\n    private _walletsRepository: WalletsRepository,\n    private _tokensRepository: TokensRepository,\n    private _pricesService: PricesService,\n  ) {\n    super();\n\n    this.selectedWallet = null;\n    this._myWallets = [];\n    this.showOtherWallets = null;\n    this.keyword = '';\n    this.isOpen = false;\n    this._staticWallets = null;\n\n    makeObservable<ChooseWalletViewModel, '_myWallets' | '_staticWallets'>(this, {\n      selectedWallet: observable,\n      _myWallets: observable,\n      showOtherWallets: observable,\n      keyword: observable,\n      isOpen: observable,\n      _staticWallets: observable,\n\n      setCustomFilter: action,\n      setStaticWallets: action,\n      setShowOtherWallets: action,\n      setIsOpen: action,\n\n      createRequest: flow,\n      search: action,\n      selectWallet: action,\n    });\n  }\n\n  protected override setDefaults() {\n    this.selectedWallet = null;\n    this._myWallets = [];\n    this.showOtherWallets = null;\n    this.keyword = '';\n    this.isOpen = false;\n    this._staticWallets = null;\n  }\n\n  setCustomFilter(filter?: (wallet: Wallet) => boolean): void {\n    this.customFilter = filter;\n  }\n\n  setStaticWallets(wallets: Wallet[] | null): void {\n    this._staticWallets = wallets;\n  }\n\n  setShowOtherWallets(state: boolean): void {\n    this.showOtherWallets = state;\n  }\n\n  setIsOpen(state: boolean): void {\n    this.isOpen = state;\n  }\n\n  protected override onInitialize() {\n    this.addReaction(\n      when(\n        () => this._walletsRepository.state === SDFetcherState.loaded, // TODO: really wait until wallets load?\n        () => {\n          this._myWallets = this._staticWallets ?? this._walletsRepository.getWallets();\n          this.reload();\n        },\n      ),\n    );\n\n    this.addReaction(\n      reaction(\n        () => this._staticWallets, // TODO: maybe can do better\n        () => {\n          this._myWallets = this._staticWallets ?? this._walletsRepository.getWallets();\n          this.reload();\n        },\n      ),\n    );\n  }\n\n  protected override afterReactionsRemoved() {}\n\n  // Request\n\n  override createRequest = flow<Wallet[], []>(function* (\n    this: ChooseWalletViewModel,\n  ): Generator<Promise<Wallet[]>> {\n    assert(this.showOtherWallets !== null, 'Set showOtherWallets');\n\n    if (this.showOtherWallets) {\n      return yield this._tokensRepository\n        .getTokensList()\n        .then((tokens) => excludingSpecialTokens(tokens))\n        .then((tokens) =>\n          tokens\n            .filter((token) => token.symbol !== 'SOL')\n            .map(\n              (token) =>\n                new Wallet({\n                  pubkey: null,\n                  lamports: null,\n                  token,\n                }),\n            ),\n        )\n        .then((wallets) => {\n          return this._myWallets.concat(\n            wallets.filter(\n              (otherWallet) =>\n                !this._myWallets.some((wallet) => wallet.token.symbol === otherWallet.token.symbol),\n            ),\n          );\n        });\n    }\n    return yield Promise.resolve(this._myWallets);\n  });\n\n  override map(newData: Wallet[]): Wallet[] {\n    let data = super.map(newData);\n    const keyword = this.keyword;\n    if (keyword) {\n      data = data.filter((wallet) => hasKeyword(wallet, keyword));\n    }\n    return data;\n  }\n\n  // Actions\n\n  search(keyword: string): void {\n    if (this.keyword === keyword) {\n      return;\n    }\n    this.keyword = keyword;\n    this.reload();\n  }\n\n  selectWallet(wallet: Wallet | null) {\n    this.selectedWallet = wallet;\n    if (wallet) {\n      this._pricesService.addToWatchList([wallet.token]);\n      this._pricesService.fetchPrices([wallet.token]);\n    }\n  }\n}\n\nfunction hasKeyword(wallet: Wallet, keyword: string): boolean {\n  return (\n    wallet.token.symbol.toLowerCase().startsWith(keyword.toLowerCase()) ||\n    wallet.token.symbol.toLowerCase().includes(keyword.toLowerCase()) ||\n    wallet.token.name.toLowerCase().startsWith(keyword.toLowerCase()) ||\n    wallet.token.name.toLowerCase().includes(keyword.toLowerCase())\n  );\n}\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\nimport { borders, theme, up } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { BaseWalletCellContent } from 'new/ui/components/common/BaseWalletCellContent';\nimport { TokenAvatarStyled } from 'new/ui/components/common/BaseWalletCellContent/styled';\n\nconst wrapperCss = `\n  display: flex;\n  align-items: center;\n  padding: 12px 24px;\n\n  background: ${theme.colors.bg.primary};\n\n  ${up.tablet} {\n    padding: 12px 8px;\n\n    border: 1px solid transparent;\n    border-radius: 12px;\n    cursor: pointer;\n  }\n`;\n\nconst CheckIcon = styled(Icon)`\n  width: 16px;\n  height: 16px;\n  margin-left: 12px;\n\n  color: transparent;\n\n  ${up.tablet} {\n    width: 24px;\n    height: 24px;\n  }\n`;\n\nconst Wrapper = styled.div`\n  ${wrapperCss}\n\n  ${up.tablet} {\n    &:hover:enabled {\n      background: ${theme.colors.bg.activePrimary};\n      ${borders.linksRGBA}\n\n      ${TokenAvatarStyled} {\n        background: transparent;\n      }\n    }\n  }\n\n  &.isSelected {\n    ${CheckIcon} {\n      color: ${theme.colors.textIcon.active};\n    }\n  }\n`;\n\ninterface Props {\n  wallet?: Wallet;\n  isPlaceholder?: boolean;\n  isSelected?: boolean;\n  onWalletClick?: () => void;\n}\n\nexport const Cell: FC<Props> = ({ wallet, isPlaceholder, isSelected, onWalletClick }) => {\n  return (\n    <Wrapper onClick={onWalletClick} className={classNames({ isSelected })}>\n      <BaseWalletCellContent wallet={wallet} isPlaceholder={isPlaceholder} />\n      <CheckIcon name=\"check\" />\n    </Wrapper>\n  );\n};\n","import type { FC } from 'react';\n\nimport { observer } from 'mobx-react-lite';\n\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport { StaticSectionsCollectionView } from 'new/ui/components/common/StaticSectionsCollectionView';\n\nimport type { ChooseWalletViewModel } from '../ChooseWallet.ViewModel';\nimport { Cell } from './Cell';\n\ninterface Props {\n  viewModel: Readonly<ChooseWalletViewModel>;\n  onWalletClick: (wallet: Wallet) => void;\n}\n\nexport const CollectionView: FC<Props> = observer(({ viewModel, onWalletClick }) => {\n  return (\n    <StaticSectionsCollectionView<Wallet>\n      viewModel={viewModel}\n      renderPlaceholder={(key) => <Cell key={key} isPlaceholder />}\n      renderItem={(wallet: Wallet) => (\n        <Cell\n          key={wallet.mintAddress}\n          wallet={wallet}\n          isSelected={wallet.mintAddress === viewModel.selectedWallet?.mintAddress}\n          onWalletClick={() => onWalletClick(wallet)}\n        />\n      )}\n    />\n  );\n});\n","import type { FC } from 'react';\nimport { useCallback, useLayoutEffect, useRef } from 'react';\nimport * as React from 'react';\nimport { useEvent } from 'react-use';\n\nimport { styled } from '@linaria/react';\nimport { shadows, theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport { Icon } from 'components/ui';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport type { ChooseWalletViewModel } from 'new/ui/components/common/ChooseWallet/ChooseWallet.ViewModel';\nimport { CollectionView } from 'new/ui/components/common/ChooseWallet/CollectionView';\nimport { SearchInput } from 'new/ui/components/ui/SearchInput';\n\nconst ChevronIcon = styled(Icon)`\n  color: ${theme.colors.textIcon.secondary};\n`;\n\nconst SelectorWrapper = styled.div`\n  display: flex;\n  align-items: center;\n\n  cursor: pointer;\n\n  &.isOpen {\n    ${ChevronIcon} {\n      color: ${theme.colors.textIcon.active};\n    }\n  }\n`;\n\nconst ChevronWrapper = styled.div`\n  display: flex;\n  align-items: center;\n\n  width: 24px;\n  height: 24px;\n  margin-left: 4px;\n`;\n\nconst DropDownListContainer = styled.div`\n  position: absolute;\n  top: 100%;\n  right: 0;\n  left: 0;\n  z-index: 2;\n\n  margin-top: 8px;\n  padding: 8px 8px 0;\n  overflow: hidden;\n\n  background: #fff;\n  border-radius: 12px;\n  ${shadows.notification}\n`;\n\nconst DropDownHeader = styled.div`\n  padding-bottom: 8px;\n`;\n\nconst DropDownList = styled.div`\n  max-height: 400px;\n  padding-bottom: 8px;\n  overflow-y: auto;\n`;\n\ninterface Props {\n  viewModel: Readonly<ChooseWalletViewModel>;\n  selector: React.ReactNode;\n  selectedWallet: Wallet | null;\n  customFilter?: (wallet: Wallet) => boolean;\n  staticWallets?: Wallet[] | null;\n  showOtherWallets: boolean;\n  onWalletChange: (wallet: Wallet) => void;\n  className?: string;\n}\n\nexport const ChooseWallet: FC<Props> = observer(\n  ({\n    viewModel,\n    selector,\n    selectedWallet,\n    customFilter,\n    staticWallets = null,\n    showOtherWallets,\n    onWalletChange,\n    className,\n  }) => {\n    const selectorRef = useRef<HTMLDivElement>(null);\n    const dropdownRef = useRef<HTMLDivElement>(null);\n\n    useLayoutEffect(() => {\n      viewModel.selectWallet(selectedWallet);\n      viewModel.setCustomFilter(customFilter);\n      viewModel.setStaticWallets(staticWallets);\n      viewModel.setShowOtherWallets(showOtherWallets);\n      viewModel.reload();\n    }, [customFilter, selectedWallet, showOtherWallets, viewModel]);\n\n    const handleAwayClick = useCallback(\n      (e: MouseEvent) => {\n        if (\n          !selectorRef.current?.contains(e.target as HTMLDivElement) &&\n          !dropdownRef.current?.contains(e.target as HTMLDivElement)\n        ) {\n          viewModel.setIsOpen(false);\n        }\n      },\n      [viewModel],\n    );\n\n    useEvent('click', handleAwayClick);\n\n    const handleSelectorClick = () => {\n      viewModel.setIsOpen(!viewModel.isOpen);\n    };\n\n    const handleFilterChange = (value: string) => {\n      viewModel.search(value.trim());\n    };\n\n    const handleWalletClick = (wallet: Wallet) => {\n      onWalletChange(wallet);\n      viewModel.setIsOpen(false);\n    };\n\n    return (\n      <>\n        <SelectorWrapper\n          ref={selectorRef}\n          onClick={handleSelectorClick}\n          className={classNames(className, { isOpen: viewModel.isOpen })}\n        >\n          {selector}\n          <ChevronWrapper>\n            <ChevronIcon name=\"arrow-triangle\" />\n          </ChevronWrapper>\n        </SelectorWrapper>\n        {viewModel.isOpen ? (\n          <DropDownListContainer ref={dropdownRef}>\n            <DropDownHeader>\n              <SearchInput\n                placeholder=\"Search for token\"\n                initialValue={viewModel.keyword}\n                onChange={handleFilterChange}\n              />\n            </DropDownHeader>\n            <DropDownList>\n              <CollectionView viewModel={viewModel} onWalletClick={handleWalletClick} />\n            </DropDownList>\n          </DropDownListContainer>\n        ) : null}\n      </>\n    );\n  },\n);\n","import { Component, createRef } from 'react';\n\nimport { styled } from '@linaria/react';\nimport throttle from 'lodash.throttle';\nimport { omit } from 'ramda';\n\nconst Wrapper = styled.div``;\n\ntype Props = {\n  disabled: boolean;\n  onNeedLoadMore: () => Promise<never> | void;\n};\n\nexport class InfinityScrollHelper extends Component<Props> {\n  static defaultProps = {\n    disabled: false,\n  };\n\n  delayedCheck = 0;\n\n  wrapperRef = createRef<HTMLDivElement>();\n\n  checkLoadMore = throttle(async (): Promise<undefined> => {\n    const { disabled, onNeedLoadMore } = this.props;\n\n    if (disabled || !this.wrapperRef.current) {\n      return;\n    }\n\n    const wrapper = this.wrapperRef.current;\n    const { bottom } = wrapper.getBoundingClientRect();\n\n    if (window.innerHeight * 1.5 > bottom) {\n      await onNeedLoadMore();\n      void this.checkLoadMore();\n    }\n  }, 500);\n\n  override componentDidMount() {\n    window.addEventListener('scroll', this.checkLoadMore);\n    window.addEventListener('resize', this.checkLoadMore);\n\n    this.delayedCheck = window.setTimeout(() => {\n      void this.checkLoadMore();\n    }, 0);\n  }\n\n  override componentDidUpdate() {\n    void this.checkLoadMore();\n  }\n\n  override componentWillUnmount() {\n    clearTimeout(this.delayedCheck);\n    this.checkLoadMore.cancel();\n\n    window.removeEventListener('scroll', this.checkLoadMore);\n    window.removeEventListener('resize', this.checkLoadMore);\n  }\n\n  override render() {\n    return <Wrapper {...omit(['onNeedLoadMore', 'disabled'], this.props)} ref={this.wrapperRef} />;\n  }\n}\n","import type { FC } from 'react';\n\nimport { styled } from '@linaria/react';\n\nconst Wrapper = styled.div`\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n  position: relative;\n\n  width: 20px;\n  height: 20px;\n  margin: 0 auto;\n  overflow: hidden;\n\n  border-radius: 50%;\n\n  animation: spin 1s linear infinite;\n\n  &::after {\n    position: absolute;\n\n    top: 50%;\n    left: 50%;\n\n    width: 80%;\n    height: 80%;\n\n    background: #fff;\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n\n    content: '';\n  }\n`;\n\nconst Inner = styled.div`\n  position: absolute;\n\n  width: 100%;\n  height: 50%;\n  margin-top: 50%;\n\n  background: linear-gradient(90deg, #5987ff, #d3dffe);\n\n  &::before {\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    width: 100%;\n    height: 100%;\n    margin-top: -50%;\n\n    background: linear-gradient(90deg, #f9fafe, #d3dffe);\n\n    content: '';\n  }\n`;\n\ninterface Props {\n  size?: string;\n}\n\nexport const Loader: FC<Props> = ({ size, ...props }) => {\n  return (\n    <Wrapper style={{ width: size && `${size}px`, height: size && `${size}px` }} {...props}>\n      <Inner />\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\n\nimport { Icon } from 'components/ui';\nimport type { Token } from 'new/sdk/SolanaSDK';\nimport { TokenAvatar } from 'new/ui/components/common/TokenAvatar';\nimport type { RendererParams } from 'new/ui/managers/NotificationManager';\n\nconst ToastStyled = styled.div`\n  position: relative;\n\n  display: flex;\n  align-items: flex-start;\n  box-sizing: border-box;\n  width: 100%;\n  max-width: 100%;\n  min-height: 40px;\n  padding: 16px;\n\n  word-break: break-word;\n\n  background: ${theme.colors.bg.primary};\n  border-radius: 8px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\n  cursor: initial;\n\n  @media (min-width: 500px) {\n    width: 282px;\n  }\n`;\n\nconst ToastIconWrapper = styled.div`\n  padding: 10px;\n\n  border-radius: 12px;\n`;\n\nconst ToastIcon = styled(Icon)`\n  flex-shrink: 0;\n  width: 22px;\n  height: 22px;\n`;\n\nconst InfoIcon = styled(Icon)`\n  flex-shrink: 0;\n  width: 24px;\n  height: 22px;\n`;\n\nconst ToastWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  padding: 0 10px 0 16px;\n`;\n\nconst ToastHeader = styled.div`\n  display: inline-block;\n\n  font-weight: 600;\n  font-size: 16px;\n\n  &::first-letter {\n    text-transform: uppercase;\n  }\n`;\n\nconst ToastText = styled.div`\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n  padding-top: 5px;\n\n  color: #a3a5ba;\n  font-weight: 600;\n  font-size: 16px;\n\n  &.confirmed {\n    color: #4caf50;\n  }\n`;\n\nconst CloseButton = styled.button`\n  position: absolute;\n  top: 14px;\n  right: 14px;\n\n  flex-shrink: 0;\n  height: 14px;\n  margin: -10px -12px -10px 0;\n\n  color: #a3a5ba;\n\n  background-color: transparent;\n  border: 0;\n  outline: none;\n  cursor: pointer;\n\n  transition: color 0.15s;\n\n  appearance: none;\n\n  &:hover {\n    color: #000;\n  }\n`;\n\nconst CloseIcon = styled(Icon)`\n  width: 14px;\n  height: 14px;\n`;\n\nconst StatusIcon = styled(Icon)`\n  flex-shrink: 0;\n  width: 15px;\n  height: 15px;\n  margin-right: 8px;\n`;\n\nconst SwapAvatarsWrapper = styled.div`\n  position: relative;\n\n  width: 48px;\n  height: 48px;\n\n  & > :nth-child(1) {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  & > :nth-child(2) {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n  }\n`;\n\nconst ButtonWrapper = styled.div`\n  align-items: center;\n  margin-top: 8px;\n  padding-top: 12px;\n`;\n\nexport type TransferParams = {\n  header?: string;\n  text?: string;\n  status?:\n    | 'processing'\n    | 'success'\n    | 'error'\n    | 'warning'\n    | 'confirmingDeposit'\n    | 'confirmedDeposit';\n  token?: Token;\n  tokenB?: Token;\n  tokenBTC?: Token;\n  button?: React.ReactNode;\n};\n\ntype Props = RendererParams & TransferParams;\n\nexport const NotifyToast: FunctionComponent<Props> = ({\n  type,\n  header,\n  text,\n  status,\n  token,\n  tokenB,\n  tokenBTC,\n  onClose,\n  button,\n}) => {\n  let icon;\n  let statusIcon;\n\n  switch (type) {\n    case 'info':\n      icon = <ToastIcon name=\"success\" style={{ color: '#4caf50' }} />;\n      break;\n    case 'warn':\n      icon = <InfoIcon name=\"attention\" />;\n      break;\n    case 'error':\n      icon = <ToastIcon name=\"error\" style={{ color: '#ff5959' }} />;\n      break;\n    case 'transfer':\n    case 'transferChecked':\n      icon = <TokenAvatar token={token} size={44} />;\n      break;\n    case 'swap':\n      if (token && tokenB) {\n        icon = (\n          <SwapAvatarsWrapper>\n            <TokenAvatar token={token} size={32} />\n            <TokenAvatar token={tokenB} size={32} />\n          </SwapAvatarsWrapper>\n        );\n      }\n      break;\n    case 'mint':\n      icon = (\n        <ToastIconWrapper>\n          <ToastIcon name=\"warning\" style={{ color: theme.colors.system.warningMain }} />\n        </ToastIconWrapper>\n      );\n      break;\n    case 'confirmingDeposit':\n      if (tokenBTC) {\n        icon = <TokenAvatar token={tokenBTC} size={44} />;\n      }\n      break;\n    default:\n      icon = null;\n  }\n\n  switch (status) {\n    case 'processing':\n      statusIcon = <StatusIcon name=\"clock\" style={{ color: theme.colors.system.warningMain }} />;\n      break;\n    case 'success':\n      statusIcon = <StatusIcon name=\"success\" style={{ color: '#4caf50' }} />;\n      break;\n    case 'error':\n      statusIcon = <StatusIcon name=\"warning\" style={{ color: '#ff5959' }} />;\n      break;\n    case 'confirmingDeposit':\n      statusIcon = <StatusIcon name=\"clock\" style={{ color: theme.colors.bg.buttonDisabled }} />;\n      break;\n    case 'confirmedDeposit':\n      statusIcon = <StatusIcon name=\"clock\" />;\n      break;\n    default:\n      statusIcon = null;\n  }\n\n  return (\n    <ToastStyled>\n      {icon}\n      <ToastWrapper>\n        <ToastHeader>{header}</ToastHeader>\n        <ToastText className={classNames({ confirmed: status === 'confirmedDeposit' })}>\n          {status ? statusIcon : undefined}\n          {text}\n        </ToastText>\n        {button ? <ButtonWrapper>{button}</ButtonWrapper> : undefined}\n      </ToastWrapper>\n      {onClose ? (\n        <CloseButton type=\"button\" name=\"notify-toast__close\" onClick={onClose}>\n          <CloseIcon name=\"close\" />\n        </CloseButton>\n      ) : null}\n    </ToastStyled>\n  );\n};\n","import React, { useMemo } from 'react';\n\nimport { observer } from 'mobx-react-lite';\nimport { expr } from 'mobx-utils';\nimport { nanoid } from 'nanoid';\n\nimport type { SDListViewModelType } from 'new/core/viewmodels/SDListViewModel';\nimport { SDFetcherState } from 'new/core/viewmodels/SDViewModel';\nimport { InfinityScrollHelper } from 'new/ui/components/common/InfinityScrollHelper';\n\nimport { SDCollectionViewItem } from './models/SDCollectionViewItem';\n\ninterface Props<T> {\n  viewModel: Readonly<SDListViewModelType<T>>;\n  numberOfLoadingCells?: number;\n  renderPlaceholder: (key: string) => React.ReactNode;\n  renderItem: (item: T, index: number) => React.ReactNode;\n  renderEmpty?: (key: string) => React.ReactNode;\n  customFilter?: (item: T) => boolean;\n  transformer?: (items: T[]) => T[];\n  className?: string;\n}\n\nexport const StaticSectionsCollectionView = observer(\n  <T,>({\n    viewModel,\n    numberOfLoadingCells = 2,\n    renderPlaceholder,\n    renderItem,\n    renderEmpty,\n    customFilter,\n    transformer,\n    className,\n  }: Props<T>) => {\n    const items = useMemo(\n      () =>\n        expr(() => {\n          let _items = viewModel.data;\n\n          if (customFilter) {\n            _items = _items.filter(customFilter);\n          }\n\n          if (transformer) {\n            _items = transformer(_items);\n          }\n\n          const collectionViewItems = _items.map(\n            (item) => new SDCollectionViewItem({ value: item }),\n          );\n          switch (viewModel.state) {\n            case SDFetcherState.initializing:\n            case SDFetcherState.loading:\n              for (let i = 0; i < numberOfLoadingCells; i++) {\n                collectionViewItems.push(new SDCollectionViewItem({ placeholderIndex: nanoid() }));\n              }\n              break;\n            case SDFetcherState.loaded:\n              if (collectionViewItems.length === 0 && renderEmpty) {\n                collectionViewItems.push(new SDCollectionViewItem({ emptyCellIndex: nanoid() }));\n              }\n              break;\n            case SDFetcherState.error:\n              break;\n          }\n          return collectionViewItems;\n        }),\n      [customFilter, numberOfLoadingCells, renderEmpty, viewModel.data, viewModel.state],\n    );\n\n    if (items.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className={className}>\n        <InfinityScrollHelper\n          disabled={!viewModel.isFetchable}\n          onNeedLoadMore={() => viewModel.fetchNext()}\n        >\n          {items.map((item, index) => {\n            if (!item.isEmptyCell) {\n              if (item.isPlaceholder) {\n                return renderPlaceholder?.(item.placeholderIndex!);\n              }\n\n              return renderItem(item.value!, index);\n            }\n\n            if (item.isEmptyCell && renderEmpty) {\n              return renderEmpty(item.emptyCellIndex!);\n            }\n\n            return null;\n          })}\n        </InfinityScrollHelper>\n      </div>\n    );\n  },\n);\n","export class SDCollectionViewItem<T> {\n  value?: T;\n  placeholderIndex?: string;\n  emptyCellIndex?: string;\n\n  constructor({\n    value,\n    placeholderIndex,\n    emptyCellIndex,\n  }: {\n    value?: T;\n    placeholderIndex?: string;\n    emptyCellIndex?: string;\n  }) {\n    this.value = value;\n    this.placeholderIndex = placeholderIndex;\n    this.emptyCellIndex = emptyCellIndex;\n  }\n\n  get isPlaceholder(): boolean {\n    return Boolean(this.placeholderIndex);\n  }\n\n  get isEmptyCell(): boolean {\n    return Boolean(this.emptyCellIndex);\n  }\n}\n","import type { FC } from 'react';\nimport JazziconSolana, { jsNumberForAddress } from 'react-solana-jazzicon';\n\nimport { styled } from '@linaria/react';\n\nconst Wrapper = styled.div<{ size: Props['size'] }>`\n  width: ${({ size }) => (size ? `${size}px` : 'auto')};\n  height: ${({ size }) => (size ? `${size}px` : 'auto')};\n`;\n\nconst IconStyled = styled.div`\n  & div {\n    border-radius: 12px !important;\n  }\n`;\n\ninterface Props {\n  address: string;\n  size?: number;\n  className?: string;\n}\n\nexport const Jazzicon: FC<Props> = ({ address, size, className }) => {\n  return (\n    <Wrapper size={size} className={className}>\n      <IconStyled>\n        <JazziconSolana seed={jsNumberForAddress(address)} diameter={size} />\n      </IconStyled>\n    </Wrapper>\n  );\n};\n","import type { FC, HTMLAttributes } from 'react';\nimport { useLayoutEffect, useMemo, useState } from 'react';\n\nimport { styled } from '@linaria/react';\nimport classNames from 'classnames';\n\nimport { Avatar } from 'components/ui';\nimport type { Token } from 'new/sdk/SolanaSDK';\n\nimport wrappedImage from './images/wrapped.svg';\nimport { Jazzicon } from './Jazzicon';\n\nconst Wrapper = styled.div`\n  position: relative;\n\n  border-radius: 12px;\n\n  &.isNotExists {\n    background: #f6f6f8;\n  }\n`;\n\nconst WrappedBy = styled.div`\n  position: absolute;\n  right: 0;\n  bottom: 0;\n\n  width: 16px;\n  height: 16px;\n\n  background: #000;\n  border: 1px solid #464646;\n  border-radius: 4px;\n  filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.25));\n\n  &.isWrapped {\n    background-image: url(${wrappedImage});\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: 16px 16px;\n  }\n`;\n\ntype Props = {\n  size?: number;\n  token?: Token;\n};\n\n// TODO: sync ios\nexport const TokenAvatar: FC<Props & HTMLAttributes<HTMLDivElement>> = ({\n  token,\n  className,\n  ...props\n}) => {\n  const [isDead, setIsDead] = useState<boolean>(false);\n\n  useLayoutEffect(() => {\n    setIsDead(false);\n  }, [token?.logoURI]);\n\n  const isWrapped = useMemo(() => {\n    if (token) {\n      return Boolean(token.wrappedBy);\n    }\n\n    return false;\n  }, [token]);\n\n  const elAvatar = () => {\n    const commonAttr = {\n      onError: () => setIsDead(true),\n    };\n\n    if (token?.logoURI && !isDead) {\n      return <Avatar src={token.logoURI} {...props} {...commonAttr} />;\n    }\n\n    if (token && isDead) {\n      return <Jazzicon address={token.address} size={props.size} />;\n    }\n\n    if (token?.address) {\n      return <Jazzicon address={token.address} size={props.size} />;\n    }\n\n    return <Avatar src={token?.logoURI ?? undefined} {...props} {...commonAttr} />;\n  };\n\n  return (\n    <Wrapper className={classNames(className, { isNotExists: !token })}>\n      {elAvatar()}\n      {isWrapped ? (\n        <WrappedBy\n          className={classNames({\n            isWrapped,\n          })}\n        />\n      ) : undefined}\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { rgba } from 'polished';\n\nconst Wrapper = styled.button`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 56px;\n  padding: 0 15px;\n\n  color: ${theme.colors.textIcon.primary};\n  font-weight: bold;\n  font-size: 16px;\n  font-family: unset;\n  line-height: 140%;\n  letter-spacing: 0.04em;\n  white-space: initial;\n  text-decoration: none;\n\n  background: ${theme.colors.bg.primary};\n  border: 0;\n  border-radius: 12px;\n\n  outline: none;\n  cursor: pointer;\n\n  appearance: none;\n\n  &.primary {\n    color: ${theme.colors.textIcon.buttonPrimary};\n\n    background: ${theme.colors.bg.buttonPrimary};\n\n    &:hover {\n      background: #82a5ff;\n    }\n  }\n\n  &.secondary {\n    color: #fff;\n\n    background: #a3a5ba;\n  }\n\n  &.dark {\n    color: #fff;\n\n    background: #000;\n  }\n\n  &.light {\n    color: #5887ff;\n\n    background: #eff3ff;\n  }\n\n  &.gray {\n    color: #000;\n\n    background: #f3f3f3;\n  }\n\n  &.lightGray {\n    color: #a3a5ba;\n\n    background: #f6f6f8;\n  }\n\n  &.lightBlue {\n    color: #5887ff;\n\n    background: #f6f6f8;\n  }\n\n  &.hollow {\n    background: ${theme.colors.bg.primary};\n    border: 1px solid ${theme.colors.stroke.primary};\n  }\n\n  &.link {\n    height: auto;\n    padding: 0;\n\n    color: ${rgba('#000', 0.5)};\n    text-decoration: underline;\n\n    background: transparent;\n  }\n\n  &.error {\n    color: ${theme.colors.system.errorMain};\n\n    &:hover {\n      color: ${theme.colors.system.errorMain};\n    }\n  }\n\n  &.small {\n    height: 36px;\n\n    font-weight: 500;\n    font-size: 14px;\n    letter-spacing: 0.01em;\n\n    border-radius: 8px;\n  }\n\n  &.medium {\n    height: 46px;\n\n    font-weight: 500;\n    letter-spacing: 0.01em;\n\n    border-radius: 8px;\n  }\n\n  &.big {\n    height: 58px;\n  }\n\n  &.full {\n    width: 100%;\n  }\n\n  &:disabled {\n    color: ${theme.colors.textIcon.buttonPrimary};\n\n    background: ${theme.colors.bg.buttonDisabled};\n    cursor: not-allowed;\n\n    &:hover {\n      background: ${theme.colors.bg.buttonDisabled};\n    }\n  }\n`;\n\ninterface Props extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  primary?: boolean;\n  secondary?: boolean;\n  dark?: boolean;\n  light?: boolean;\n  gray?: boolean;\n  lightGray?: boolean;\n  lightBlue?: boolean;\n  hollow?: boolean;\n  link?: boolean;\n  error?: boolean;\n  small?: boolean;\n  medium?: boolean;\n  big?: boolean;\n  full?: boolean;\n}\n\nexport const Button: FunctionComponent<Props> = ({\n  type = 'button',\n  primary,\n  secondary,\n  dark,\n  light,\n  gray,\n  lightGray,\n  lightBlue,\n  link,\n  error,\n  hollow,\n  small,\n  medium,\n  big,\n  full,\n  children,\n  style,\n  className,\n  ...props\n}) => {\n  return (\n    <Wrapper\n      type={type}\n      {...props}\n      style={style}\n      className={classNames(className, {\n        primary,\n        secondary,\n        light,\n        dark,\n        gray,\n        lightGray,\n        lightBlue,\n        link,\n        error,\n        hollow,\n        small,\n        medium,\n        big,\n        full,\n      })}\n    >\n      {children}\n    </Wrapper>\n  );\n};\n","import type { FunctionComponent } from 'react';\nimport { forwardRef, useState } from 'react';\nimport * as React from 'react';\n\nimport { styled } from '@linaria/react';\nimport { theme } from '@p2p-wallet-web/ui';\nimport classNames from 'classnames';\nimport { useDebouncedCallback } from 'use-debounce';\n\nimport { Icon } from 'components/ui';\n\nconst SearchIconWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  margin-left: 16px;\n`;\n\nconst SearchIcon = styled(Icon)`\n  width: 24px;\n  height: 24px;\n\n  color: ${theme.colors.textIcon.secondary};\n`;\n\nconst Wrapper = styled.label`\n  display: flex;\n  flex: 1;\n  align-items: center;\n\n  min-width: 0;\n  height: 48px;\n  padding: 12px 0;\n\n  background: ${theme.colors.bg.primary};\n  border: 1px solid ${theme.colors.stroke.primary};\n  border-radius: 12px;\n  cursor: text;\n\n  &.isFocused {\n    border: 1px solid rgba(163, 165, 186, 0.5);\n\n    ${SearchIcon} {\n      color: #000;\n    }\n  }\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: center;\n\n  min-width: 0;\n`;\n\nconst InputElement = styled.input`\n  margin-left: 8px;\n  padding: 0;\n\n  font-weight: 500;\n  font-size: 16px;\n  font-family: inherit;\n  line-height: 140%;\n\n  background: transparent;\n  border: 0;\n\n  outline: none;\n\n  appearance: none;\n\n  &::placeholder {\n    color: ${theme.colors.textIcon.tertiary};\n  }\n`;\n\nconst SearchClearWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  margin: 0 7px;\n\n  background: #fff;\n  border-radius: 8px;\n  cursor: pointer;\n`;\n\nconst SearchClearIcon = styled(Icon)`\n  width: 13px;\n  height: 13px;\n\n  color: #a3a5ba;\n`;\n\ntype CustomProps = {\n  forwardedRef?: React.Ref<HTMLInputElement>;\n  initialValue?: string;\n  onChange?: (value: string) => void;\n};\n\ntype Props = Omit<React.InputHTMLAttributes<HTMLInputElement>, 'onChange'> & CustomProps;\n\nconst SearchInputOriginal: FunctionComponent<Props> = ({\n  forwardedRef,\n  initialValue = '',\n  onChange,\n  className,\n  ...props\n}) => {\n  const [isFocused, setIsFocused] = useState(false);\n  const [localValue, setLocalValue] = useState(initialValue);\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    setIsFocused(true);\n\n    if (props.onFocus) {\n      props.onFocus(e);\n    }\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    setIsFocused(false);\n\n    if (props.onBlur) {\n      props.onBlur(e);\n    }\n  };\n\n  const debouncedOnChange = useDebouncedCallback(\n    (value: string) => {\n      if (onChange) {\n        onChange(value);\n      }\n    },\n    300,\n    { trailing: true },\n  );\n\n  const handleChange = (e: React.FocusEvent<HTMLInputElement>) => {\n    setLocalValue(e.target.value);\n    debouncedOnChange(e.target.value);\n  };\n\n  const handleClear = () => {\n    debouncedOnChange.cancel();\n\n    setLocalValue('');\n\n    if (onChange) {\n      onChange('');\n    }\n  };\n\n  return (\n    <Wrapper className={classNames(className, { isFocused })}>\n      <SearchIconWrapper>\n        <SearchIcon name=\"search\" />\n      </SearchIconWrapper>\n      <Content>\n        <InputElement\n          ref={forwardedRef}\n          value={localValue}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          onChange={handleChange}\n          {...props}\n        />\n      </Content>\n      <SearchClearWrapper onClick={handleClear}>\n        <SearchClearIcon name=\"close\" />\n      </SearchClearWrapper>\n    </Wrapper>\n  );\n};\n\nexport const SearchInput = forwardRef<HTMLInputElement, Props>(\n  (props, ref: React.Ref<HTMLInputElement>) => (\n    <SearchInputOriginal {...props} forwardedRef={ref} />\n  ),\n);\n","import { u64 } from '@solana/spl-token';\n\nimport type { PayingFee } from 'new/app/models/PayingFee';\nimport { networkFeesAll } from 'new/app/models/PayingFee';\nimport type { Recipient } from 'new/scenes/Main/Send';\nimport type * as OrcaSwap from 'new/sdk/OrcaSwap';\nimport type { Wallet } from 'new/sdk/SolanaSDK';\nimport * as SolanaSDK from 'new/sdk/SolanaSDK';\nimport { convertToBalance, SolanaSDKError, toLamport } from 'new/sdk/SolanaSDK';\nimport type { SendServiceType } from 'new/services/SendService';\nimport type * as Send from 'new/services/SendService';\nimport type { SolanaService } from 'new/services/SolanaService';\nimport type { SwapServiceType } from 'new/services/Swap';\nimport { numberToString } from 'new/utils/NumberExtensions';\nimport { truncatingMiddle } from 'new/utils/StringExtensions';\n\nexport interface RawTransactionType {\n  createRequest(): Promise<string>;\n  readonly mainDescription: string;\n  readonly networkFees: { total: SolanaSDK.Lamports; token: SolanaSDK.Token } | null;\n\n  // extensions\n\n  readonly isSwap: boolean;\n  readonly payingWallet: Wallet | null;\n}\n\nclass RawTransactionBase {\n  get isSwap(): boolean {\n    return this instanceof SwapTransaction;\n  }\n\n  get payingWallet(): Wallet | null {\n    switch (this.constructor) {\n      case SwapTransaction:\n        return (this as unknown as SwapTransaction)._payingWallet;\n      case SendTransaction:\n        return (this as unknown as SendTransaction).payingFeeWallet;\n      default:\n        return null;\n    }\n  }\n\n  set payingWallet(wallet: Wallet | null) {\n    switch (this.constructor) {\n      case SwapTransaction:\n        (this as unknown as SwapTransaction)._payingWallet = wallet;\n        break;\n      case SendTransaction:\n        (this as unknown as SendTransaction).payingFeeWallet = wallet;\n        break;\n    }\n  }\n}\n\ntype MetaInfo = {\n  swapMAX: boolean;\n  swapUSD: number;\n};\n\nexport class SwapTransaction extends RawTransactionBase implements RawTransactionType {\n  swapService: SwapServiceType;\n  sourceWallet: Wallet;\n  destinationWallet: Wallet;\n  _payingWallet: Wallet | null;\n  authority: string | null;\n  poolsPair: OrcaSwap.PoolsPair;\n  amount: number;\n  estimatedAmount: number;\n  slippage: number;\n  fees: PayingFee[];\n  metaInfo: MetaInfo;\n\n  constructor({\n    swapService,\n    sourceWallet,\n    destinationWallet,\n    payingWallet = null,\n    authority = null,\n    poolsPair,\n    amount,\n    estimatedAmount,\n    slippage,\n    fees,\n    metaInfo,\n  }: {\n    swapService: SwapServiceType;\n    sourceWallet: Wallet;\n    destinationWallet: Wallet;\n    payingWallet?: Wallet | null;\n    authority?: string | null;\n    poolsPair: OrcaSwap.PoolsPair;\n    amount: number;\n    estimatedAmount: number;\n    slippage: number;\n    fees: PayingFee[];\n    metaInfo: MetaInfo;\n  }) {\n    super();\n\n    this.swapService = swapService;\n    this.sourceWallet = sourceWallet;\n    this.destinationWallet = destinationWallet;\n    this._payingWallet = payingWallet;\n    this.authority = authority;\n    this.poolsPair = poolsPair;\n    this.amount = amount;\n    this.estimatedAmount = estimatedAmount;\n    this.slippage = slippage;\n    this.fees = fees;\n    this.metaInfo = metaInfo;\n  }\n\n  get mainDescription(): string {\n    // @ios: was on ios\n    return `${numberToString(this.amount, { maximumFractionDigits: 9 })} ${\n      this.sourceWallet.token.symbol\n    } -> ${numberToString(this.amount, { maximumFractionDigits: 9 })} ${\n      this.destinationWallet.token.symbol\n    }`;\n    // @web: tried on web with web design\n    // return `${this.sourceWallet.token.symbol} -> ${this.destinationWallet.token.symbol}`;\n  }\n\n  createRequest(): Promise<string> {\n    // check if payingWallet has enough balance to cover fee\n    const fees = networkFeesAll(this.fees);\n    const payingWallet = this.payingWallet;\n    if (fees && payingWallet) {\n      const currrentAmount = payingWallet.lamports;\n      if (currrentAmount && fees.total.gt(currrentAmount)) {\n        throw SolanaSDKError.other(\n          `Your account does not have enough SOL to cover fee ${\n            payingWallet.token.symbol\n          }. Needs at least ${convertToBalance(fees.total, payingWallet.token.decimals)} ${\n            payingWallet.token.symbol\n          }. Please choose another token and try again!`,\n        );\n      }\n    }\n\n    return this.swapService\n      .swap({\n        sourceAddress: this.sourceWallet.pubkey!,\n        sourceTokenMint: this.sourceWallet.mintAddress,\n        destinationAddress: this.destinationWallet.pubkey,\n        destinationTokenMint: this.destinationWallet.mintAddress,\n        payingTokenAddress: this.payingWallet?.pubkey,\n        payingTokenMint: this.payingWallet?.mintAddress,\n        poolsPair: this.poolsPair,\n        amount: toLamport(this.amount, this.sourceWallet.token.decimals),\n        slippage: this.slippage,\n      })\n      .then((txIds) => txIds.at(-1) ?? '');\n  }\n\n  get networkFees(): { total: SolanaSDK.Lamports; token: SolanaSDK.Token } | null {\n    const networkFees = networkFeesAll(this.fees)?.total;\n    const payingFeeToken = this.payingWallet?.token;\n    if (!networkFees || !payingFeeToken) {\n      return null;\n    }\n    return {\n      total: networkFees,\n      token: payingFeeToken,\n    };\n  }\n}\n\nexport class CloseTransaction extends RawTransactionBase implements RawTransactionType {\n  solanaSDK: SolanaService;\n  closingWallet: Wallet;\n  reimbursedAmount: u64;\n\n  constructor({\n    solanaSDK,\n    closingWallet,\n    reimbursedAmount,\n  }: {\n    solanaSDK: SolanaService;\n    closingWallet: Wallet;\n    reimbursedAmount: u64;\n  }) {\n    super();\n\n    this.solanaSDK = solanaSDK;\n    this.closingWallet = closingWallet;\n    this.reimbursedAmount = reimbursedAmount;\n  }\n\n  get mainDescription(): string {\n    return `Close account ${this.closingWallet.token.symbol}`;\n  }\n\n  createRequest(): Promise<string> {\n    const pubkey = this.closingWallet.pubkey;\n    if (!pubkey) {\n      throw SolanaSDKError.unknown();\n    }\n    return this.solanaSDK.closeTokenAccount({\n      tokenPubkey: pubkey,\n    });\n  }\n\n  get networkFees(): { total: SolanaSDK.Lamports; token: SolanaSDK.Token } | null {\n    return { total: new u64(5000), token: SolanaSDK.Token.nativeSolana }; // TODO: Fix later\n  }\n}\n\nexport class SendTransaction extends RawTransactionBase implements RawTransactionType {\n  sendService: SendServiceType;\n  network: Send.Network;\n  sender: Wallet;\n  receiver: Recipient;\n  authority: string | null;\n  amount: SolanaSDK.Lamports;\n  payingFeeWallet: Wallet | null;\n  feeInSOL: u64;\n  feeInToken: SolanaSDK.FeeAmount | null;\n  isSimulation: boolean;\n  isRenBTCViaBitcoinNetwork: boolean;\n\n  constructor({\n    sendService,\n    network,\n    sender,\n    receiver,\n    authority,\n    amount,\n    payingFeeWallet,\n    feeInSOL,\n    feeInToken,\n    isSimulation,\n    isRenBTCViaBitcoinNetwork,\n  }: {\n    sendService: SendServiceType;\n    network: Send.Network;\n    sender: Wallet;\n    receiver: Recipient;\n    authority: string | null;\n    amount: SolanaSDK.Lamports;\n    payingFeeWallet: Wallet | null;\n    feeInSOL: u64;\n    feeInToken: SolanaSDK.FeeAmount | null;\n    isSimulation: boolean;\n    isRenBTCViaBitcoinNetwork: boolean;\n  }) {\n    super();\n\n    this.sendService = sendService;\n    this.network = network;\n    this.sender = sender;\n    this.receiver = receiver;\n    this.authority = authority;\n    this.amount = amount;\n    this.payingFeeWallet = payingFeeWallet;\n    this.feeInSOL = feeInSOL;\n    this.feeInToken = feeInToken;\n    this.isSimulation = isSimulation;\n    this.isRenBTCViaBitcoinNetwork = isRenBTCViaBitcoinNetwork;\n  }\n\n  get mainDescription(): string {\n    return `${numberToString(convertToBalance(this.amount, this.sender.token.decimals), {\n      maximumFractionDigits: 9,\n    })} ${this.sender.token.symbol} -> ${\n      this.receiver.name ?? truncatingMiddle(this.receiver.address, { numOfSymbolsRevealed: 4 })\n    }`;\n  }\n\n  createRequest(): Promise<string> {\n    return this.sendService.send({\n      wallet: this.sender,\n      receiver: this.receiver.address,\n      amount: convertToBalance(this.amount, this.sender.token.decimals),\n      network: this.network,\n      payingFeeWallet: this.payingFeeWallet,\n    });\n  }\n\n  get networkFees(): { total: SolanaSDK.Lamports; token: SolanaSDK.Token } | null {\n    const feeInToken = this.feeInToken;\n    const token = this.payingFeeWallet?.token;\n    if (!feeInToken || !token) {\n      return null;\n    }\n    return {\n      total: feeInToken.total,\n      token: token,\n    };\n  }\n}\n\n// Transaction status\n\nclass NotEnoughNumberOfConfirmationsError extends Error {}\n\nexport class ErrorType {\n  static NotEnoughNumberOfConfirmationsError = NotEnoughNumberOfConfirmationsError;\n\n  static notEnoughNumberOfConfirmations(): NotEnoughNumberOfConfirmationsError {\n    return new NotEnoughNumberOfConfirmationsError('notEnoughNumberOfConfirmations');\n  }\n}\n","export enum BrowserNames {\n  NONE,\n  CHROME,\n  FIREFOX,\n  SAFARI,\n  OPERA,\n  EDGE,\n}\n\nconst userAgent = navigator.userAgent;\nlet browserName: BrowserNames;\n\nif (userAgent.match(/chrome|chromium|crios/i)) {\n  browserName = BrowserNames.CHROME;\n} else if (userAgent.match(/firefox|fxios/i)) {\n  browserName = BrowserNames.FIREFOX;\n} else if (userAgent.match(/safari/i)) {\n  browserName = BrowserNames.SAFARI;\n} else if (userAgent.match(/opr\\//i)) {\n  browserName = BrowserNames.OPERA;\n} else if (userAgent.match(/edg/i)) {\n  browserName = BrowserNames.EDGE;\n} else {\n  browserName = BrowserNames.NONE;\n}\n\nexport { browserName };\n","import { browserName, BrowserNames } from 'new/utils/UserAgent';\n\nexport const isImageCopyAvailable = browserName !== BrowserNames.FIREFOX;\n\nexport const copyToClipboardString = async (\n  str: string,\n  callback?: () => void,\n  errorCallback?: (err: Error) => void,\n) => {\n  try {\n    await navigator.clipboard.writeText(str);\n    if (callback) {\n      callback();\n    }\n  } catch (error) {\n    if (errorCallback) {\n      errorCallback(error as Error);\n    }\n  }\n};\n\n// Promise is needed for Safari. But Chrome also can work with such flow\nexport const copyToClipboardImage = async (\n  qrElement: HTMLCanvasElement,\n  callback?: () => void,\n  errorCallback?: (err: Error) => void,\n) => {\n  try {\n    const data = [\n      new ClipboardItem({\n        'image/png': new Promise((resolve, reject) => {\n          qrElement.toBlob((blob: Blob | null) => {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject(`Can't copy to clipboard`);\n            }\n          });\n        }),\n      }),\n    ];\n    await navigator.clipboard.write(data);\n\n    if (callback) {\n      callback();\n    }\n  } catch (error) {\n    if (errorCallback) {\n      errorCallback(error as Error);\n    }\n  }\n};\n","import type { Token } from 'new/sdk/SolanaSDK';\nimport { Defaults } from 'new/services/Defaults';\n\nexport const maxSlippage = 0.5;\n\nexport function numberToString(\n  value: number,\n  {\n    maximumFractionDigits = 3,\n    showPlus = false,\n    showMinus = true,\n    groupingSeparator = ' ',\n    autoSetMaximumFractionDigits = false,\n  }: {\n    maximumFractionDigits?: number;\n    showPlus?: boolean;\n    showMinus?: boolean;\n    groupingSeparator?: string | null;\n    autoSetMaximumFractionDigits?: boolean;\n  },\n): string {\n  const options: Intl.NumberFormatOptions = {};\n\n  if (showPlus) {\n    // @ts-ignore\n    options.signDisplay = 'exceptZero';\n  }\n\n  if (!autoSetMaximumFractionDigits) {\n    options.maximumFractionDigits = maximumFractionDigits;\n  } else {\n    if (value > 1000) {\n      options.maximumFractionDigits = 2;\n    } else if (value > 100) {\n      options.maximumFractionDigits = 4;\n    } else {\n      options.maximumFractionDigits = 9;\n    }\n  }\n\n  const number = showMinus ? value : Math.abs(value);\n  let _value = number.toLocaleString('en-US', options);\n  if (typeof groupingSeparator === 'string') {\n    _value = _value.replace(/,/g, groupingSeparator);\n  }\n  return _value;\n}\n\n// TODO: rename\nexport const numberToFiatString = (value: number, maximumFractionDigits = 2) => {\n  return `${Defaults.fiat.symbol} ${numberToString(value, { maximumFractionDigits })}`;\n};\n\n// TODO: rename\nexport const numberToTokenString = (value: number, token: Token) => {\n  return `${numberToString(value, { maximumFractionDigits: token.decimals ?? 9 })} ${token.symbol}`;\n};\n\nexport function rounded(value: number, decimals?: number): number {\n  if (!decimals) {\n    return value;\n  }\n  const realAmount = numberToString(value, {\n    maximumFractionDigits: decimals,\n    groupingSeparator: '',\n  });\n  return Number(realAmount);\n}\n","import type { ParsedTransaction } from 'new/sdk/TransactionParser';\nimport {\n  CloseAccountInfo,\n  CreateAccountInfo,\n  SwapInfo,\n  TransferInfo,\n  TransferType,\n} from 'new/sdk/TransactionParser';\n\n// TODO: check it works\nexport function parsedTransactionLabel(transaction: ParsedTransaction): string {\n  switch (transaction.info?.constructor) {\n    case CreateAccountInfo:\n      return 'Create account';\n    case CloseAccountInfo:\n      return 'Close account';\n    case TransferInfo:\n      switch ((transaction.info as TransferInfo).transferType) {\n        case TransferType.send:\n          return 'Transfer';\n        case TransferType.receive:\n          return 'Receive';\n        default:\n          return 'Transfer';\n      }\n    case SwapInfo:\n      return 'Swap';\n  }\n\n  return 'Transaction';\n}\n\n// TODO: check it works\nexport function parsedTransactionIcon(transaction: ParsedTransaction): string {\n  switch (transaction.info?.constructor) {\n    case CreateAccountInfo:\n      return 'wallet'; // @ios: transactionCreateAccount\n    case CloseAccountInfo:\n      return 'bucket'; // @ios: transactionCloseAccount\n    case TransferInfo:\n      switch ((transaction.info as TransferInfo).transferType) {\n        case TransferType.send:\n          return 'top'; // @ios: transactionSend\n        case TransferType.receive:\n          return 'bottom'; // @ios: transactionReceive\n        default:\n          break;\n      }\n      break;\n    case SwapInfo:\n      // TODO: on web doesn't have this icon\n      return 'swap'; // @ios: transactionSwap\n    default:\n      break;\n  }\n\n  return 'db'; // @ios: transactionUndefined\n}\n","import type { Network } from '@saberhq/solana-contrib';\n\nconst nameServiceDomain = '.p2p.sol';\n\nexport function truncatingMiddle(\n  text: string,\n  {\n    numOfSymbolsRevealed = 4,\n    numOfSymbolsRevealedInSuffix,\n  }: { numOfSymbolsRevealed?: number; numOfSymbolsRevealedInSuffix?: number } = {},\n): string {\n  if (\n    text.length <=\n    numOfSymbolsRevealed + (numOfSymbolsRevealedInSuffix ?? numOfSymbolsRevealed)\n  ) {\n    return text;\n  }\n  return `${text.slice(0, numOfSymbolsRevealed)}...${text.slice(\n    -(numOfSymbolsRevealedInSuffix ?? numOfSymbolsRevealed),\n  )}`;\n}\n\nexport function withNameServiceDomain(text: string): string {\n  if (text.includes(nameServiceDomain)) {\n    return text;\n  }\n\n  return `${text}${nameServiceDomain}`;\n}\n\n// @web\nexport const getExplorerUrl = (\n  type = 'tx',\n  address: string,\n  cluster: Network = 'mainnet-beta',\n): string => {\n  const baseUrlWithAddress = `https://explorer.solana.com/${type}/${address}`;\n  switch (cluster) {\n    case 'devnet':\n    case 'testnet':\n      return `${baseUrlWithAddress}?cluster=${cluster}`;\n    default:\n      return baseUrlWithAddress;\n  }\n};\n\nexport const capitalizeFirstLetter = (str?: string): string | undefined => {\n  if (!str) {\n    return str;\n  }\n  return `${str[0]!.toUpperCase()}${str.slice(1)}`;\n};\n","import amplitude from 'amplitude-js';\nimport assert from 'ts-invariant';\n\nimport type { AmplitudeActions, TrackEventType } from './types';\n\nexport const initAmplitude = () => {\n  assert(\n    process.env.REACT_APP_AMPLITUDE_API_KEY,\n    \"REACT_APP_AMPLITUDE_API_KEY doesn't set in environment\",\n  );\n  amplitude.getInstance().init(process.env.REACT_APP_AMPLITUDE_API_KEY);\n};\n\nexport const trackEvent: TrackEventType = (event: string, data?: unknown) => {\n  amplitude.getInstance().logEvent(event, data);\n};\n\n// @FIXME replace old trackEvent with the universal one\nexport const trackEventUniversal = (action: AmplitudeActions) => {\n  amplitude.getInstance().logEvent(action.name, action.data);\n};\n","import type { Network } from '@saberhq/solana-contrib';\n\nconst SOLANA_BASE_URL = 'https://explorer.solana.com/';\n\nexport const getExplorerUrl = (\n  type = 'tx',\n  address: string,\n  cluster: Network = 'mainnet-beta',\n): string => {\n  const baseUrlWithAddress = `${SOLANA_BASE_URL}${type}/${address}`;\n  switch (cluster) {\n    case 'devnet':\n    case 'testnet':\n      return `${baseUrlWithAddress}?cluster=${cluster}`;\n    default:\n      return baseUrlWithAddress;\n  }\n};\n","import type { TokenAccount } from '@p2p-wallet-web/core';\n\nimport type { Markets } from 'app/contexts';\n\nexport function shortAddress(address: string) {\n  return `${address.slice(0, 4)}${address.slice(-4)}`;\n}\n\nexport function matchesFilter(str: string, filter: string) {\n  return str.toLowerCase().indexOf(filter.toLowerCase().trim()) >= 0;\n}\n\nexport const sortByRules =\n  (rates: Markets) => (a: TokenAccount | undefined, b: TokenAccount | undefined) => {\n    if (!a || !b) {\n      return !a ? 1 : -1;\n    }\n\n    if (a.balance?.token.isRawSOL || b.balance?.token.isRawSOL) {\n      return a.balance?.token.isRawSOL ? -1 : 1;\n    }\n\n    if (!a.balance || !b.balance) {\n      return !a.balance ? 1 : -1;\n    }\n\n    const aBalance = a.balance.asNumber;\n    const bBalance = b.balance.asNumber;\n\n    const aRateSymbol = a.balance.token.symbol.toUpperCase();\n    const bRateSymbol = b.balance.token.symbol.toUpperCase();\n\n    if (rates[aRateSymbol] && rates[bRateSymbol]) {\n      const aUSDBalance = aBalance * rates[aRateSymbol]!;\n      const bUSDBalance = bBalance * rates[bRateSymbol]!;\n\n      if (aUSDBalance !== bUSDBalance) {\n        return aUSDBalance > bUSDBalance ? -1 : 1;\n      }\n    }\n\n    if (rates[aRateSymbol] && !rates[bRateSymbol]) {\n      return -1;\n    }\n\n    if (!rates[aRateSymbol] && rates[bRateSymbol]) {\n      return 1;\n    }\n\n    if (aBalance !== bBalance) {\n      return aBalance > bBalance ? -1 : 1;\n    }\n\n    if (a.balance.token.symbol !== b.balance.token.symbol) {\n      return a.balance.token.symbol < b.balance.token.symbol ? -1 : 1;\n    }\n\n    if (!a.balance.token.mintAccount || !b.balance.token.mintAccount) {\n      return !a.balance.token.mintAccount ? 1 : -1;\n    }\n\n    return a.balance.token.address < b.balance.token.address ? -1 : 1;\n  };\n"],"names":["FEE_PAYER_PUBKEYS","Set","SYSTEM_PROGRAM_ID","PublicKey","USDC_MINT","USDT_MINT","DEFAULT_SEED_AND_MNEMONIC","seed","mnemonic","createExpiringValue","value","ms","expiry","Date","now","Number","MAX_SAFE_INTEGER","getStorageValue","key","strData","localStorage","getItem","data","JSON","parse","removeItem","useStorage","defaultValue","useState","_setValue","useEffect","_value","err","console","error","setValue","useCallback","nextValue","customMS","msTTL","expiringData","setItem","stringify","setStorageValue","n","STORAGE_KEYS","deriveEncryptionKey","password","salt","iterations","digest","Promise","resolve","reject","pbkdf2","nacl","unencryptedSeedAndMnemonic","decryptEncryptedTextAsync","t","encrypted","bs58","nonce","plaintext","Error","Buffer","from","toString","decryptSeedAndMnemonic","encryptedText","decrypted","generateEncryptedTextAsync","kdf","setUnencryptedSeedAndMnemonic","_unencryptedSeedAndMnemonic","getUnencryptedSeedAndMnemonic","useEncryptedSeedAndMnemonic","encryptedSeedAndMnemonic","_setEncryptedSeedAndMnemonic","setEncryptedSeedAndMnemonic","nextSeedAndMnemonic","isSaveUnencrypted","locked","NOOP_ASYNC","SetSeedAndMnemonicContext","createContext","unlockSeedAndMnemonic","GetSeedAndMnemonicContext","SeedProvider","children","useUnencryptedSeedAndMnemonic","Provider","useTryUnlockSeedAndMnemonic","ctx","useContext","seedAndMnemonic","_setSeedAndMnemonic","r","NETWORK_CONFIGS","endpoint","process","STATIC_TOKEN_LIST","StaticTokenListResolutionStrategy","PRIMARY_SYMBOLS","createContainer","network","useConnectionContext","chainId","networkToChainId","standardTokenMap","useMemo","tokenMap","filter","token","forEach","item","address","Token","RAW_SOL_MINT","RAW_SOL","chainIdToNetwork","ChainId","name","decimals","symbol","makeTokenMap","tokenNameMap","Object","values","reduce","acc","info","toUpperCase","tokens","newTokenMap","newTokens","primaryTokens","map","find","itemToken","Boolean","mint","TokensProvider","useTokensContext","useContainer","normalizeMint","equals","useTokens","mints","useSolana","normalizedMints","mintsToLoad","mintAccounts","useParsedAccountsData","MINT_PARSER","tokensFromMap","mintKey","zip","tokenFromMap","mintAccount","accountInfo","accountId","PDA","useTokenAccount","publicKeys","publicKey","useWallet","tokenAccountsData","useAccountsData","datum","i","owner","TOKEN_PROGRAM_ID","TOKEN_ACCOUNT_PARSER","tokenAccountKey","undefined","loading","balance","isInitialized","TokenAmount","lamports","parsed","amount","e","warn","useTokenAccounts","useTokenAccountAmount","tokenAccount","ATA","getATAAddress","precacheUserTokenAccounts","connection","loader","accountsCache","filters","programId","getTokenAccountsByOwner","accounts","unstable_batchedUpdates","prime","pubkey","account","set","getCacheKeyOfPublicKey","keys","ownerPublicKey","useSail","theKey","toBase58","userTokenAccountKeys","setUserTokenAccountKeys","updateUserTokenAccountKeys","then","prevKeys","uniqBy","a","TokenAccountsProvider","useTokenAccountsContext","SwapTransaction","source","sourceAmount","destination","destinationAmount","sources","isReceiver","this","includes","type","icon","OrcaSwapParser","instructions","some","inst","_supportedProgramId","innerInstructions","length","transactionInfo","postTokenBalances","meta","approveInstruction","transaction","message","sourceAmountString","destinationMint","at","NATIVE_MINT","uiTokenAmount","swapInstructions","instruction","index","innerInstruction","instructionsData","_parseFailedTransaction","sourceInstruction","destinationInstruction","sourceInfo","destinationInfo","closeInstruction","_isLiquidityToPool","_isBurn","_parse","SerumSwapParser","reverse","findIndex","_getSerumSwapInstructionIndex","preTokenBalances","swapInstructionIndex","innerInst","swapInstruction","uniq","_isUSDxMint","isTransitiveSwap","fromInstruction","fromAmountString","toInstruction","toAmountString","createAccountInstruction","newAccount","realSource","CreateAccountTransaction","fee","_sources","CreateAccountParser","program","getFirstProgram","TransferTransaction","wasPaidByP2POrg","TransferParser","accountKeys","transferInstruction","tokenAmount","result","payer","has","useParsedTransactionsData","onError","useTransactionsData","k","setParsed","prevParsed","nextParsed","transactionId","can","parser","raw","SailTransactionParseError","useTransaction","useParsedTransactionData","v","details","transactionDetails","titleCase","sentence","replace","Math","trunc","TypedArray","Reflect","getPrototypeOf","Int8Array","Array","String","C","defineProperty","prototype","writable","enumerable","configurable","TransactionErrorType","ERROR_TITLES","SailUnknownTXFailError","SailTransactionError","SailInsufficientSOLError","SailRefetchAfterTXError","SailRefetchSubscriptionsError","SailTransactionSignError","SailAccountsCacheRefetchError","SailTransactionsCacheRefetchError","SailAccountParseError","SailAccountLoadError","SailTransactionLoadError","SailGetMultipleAccountsError","SailGetMultipleTransactionsError","extractErrorMessage","errLike","SailError","sailErrorName","originalError","cause","_isSailError","stack","txs","tx","userMessage","msg","startsWith","NotConfirmed","Cancelled","NodeBehind","SignatureRequestDenied","InsufficientSOL","endsWith","BlockhashNotFound","tag","split","parts","debugStr","push","generateInspectLink","join","InsufficientSOLError","currentBalance","txSigs","commitment","usePubkey","getDatum","onCache","subscribe","fetchKeys","setData","fetchAndSetKeys","useDebouncedCallback","keysData","nextData","cacheState","keyIndex","catch","allKeysUnsubscribe","fn","id","cancel","prevValue","transactions","CacheUpdateEvent","isNew","CacheDeleteEvent","CacheClearEvent","AccountsEmitter","_emitter","Emitter","callback","on","removeListener","emit","fetchKeysUsingLoader","keysWithIndex","keysSpecified","args","loadMany","indexInfo","keyResult","invariant","nextIndex","getMultipleAccounts","onGetMultipleAccountsError","all","chunks","chunk","getMultipleAccountsInfo","array","el","flat","toBuffer","newState","Map","emitter","subscribedAccounts","useAccountsInternal","batchDurationMs","refreshIntervalMs","setState","prevState","clear","raiseCacheCleared","accountLoader","DataLoader","addr","raiseCacheUpdated","batchScheduleFn","setTimeout","cacheKeyFn","bind","refetch","load","refetchMany","getCached","get","keyStr","currentAmount","delete","refetchAllSubscriptions","keysToFetch","interval","setInterval","clearInterval","TransactionsEmitter","getMultipleTransactions","getParsedConfirmedTransactions","transactionsCache","subscribedTransactions","useTransactionsInternal","transactionLoader","DEBUG_MODE","REACT_APP_LOCAL_PUBKEY","LOCAL_PUBKEY","useHandleTXsInternal","onTxSend","txRefetchDelayMs","waitForConfirmation","handleTXs","options","success","pending","simulateTable","verifySigners","txTable","table","debug","generateUncheckedInspectLink","build","firstTX","provider","getAccountInfo","feePayer","wallet","nativeBalance","errors","signer","signAll","signers","signedTXs","fail","signedTX","broadcaster","broadcast","txEnvelope","txError","generateLogMessage","maybePending","p","flatMap","writableKeys","refetchAfterTX","wait","minTimeout","signature","refetchDelayMs","sailError","handleTX","txEnv","deserializeAccount","d","deserializeMint","defaultOnError","onSailError","SailProvider","size","apply","ceil","_","slice","NUMBER_FORMAT","decimalSeparator","groupSeparator","groupSize","other","format","uiAmount","parseAmountFromString","TokenAmountOriginal","breakpoints","up","small","tablet","desktop","useIsMobile","useMediaQuery","maxWidth","useIsTablet","minWidth","useIsDesktop","toRGB","hex","color","parseToRgb","red","green","blue","obj","path","o","shift","flattenObject","theme","prefix","pre","assign","generate","vars","variables","lightTheme","colors","bg","primary","secondary","tertiary","special","activePrimary","activeSecondary","buttonPrimary","buttonSecondary","buttonDisabled","app","pressed","stroke","primaryRGB","system","errorMain","successMain","warningMain","errorBg","successBg","warningBg","textIcon","links","linksRGB","active","card","darkTheme","zIndexes","step","bottom","middle","top","nav","modal","above","point","under","Intercom","update","useIntercom","location","useLocation","isMobile","hideDefaultLauncher","Toast","Wrapper","ToastContainer","ToastWrapper","addToast","params","instance","lastId","toastsRefs","hideTimeouts","clearingTimeouts","state","currentToasts","delayedQueue","heights","bottomOffsets","isHovered","onCloseClick","onMouseEnter","clearTimeout","onLeave","hideIds","timeoutId","window","onResize","header","text","show","renderer","componentDidMount","componentDidUpdate","prevLength","componentWillUnmount","getActiveToastsCount","toast","checkDelayedQueue","startToastsHiding","ids","isHiding","showToast","createRef","removeToasts","calcOffsets","newBottomOffsets","totalOffset","height","bottomOffset","checkHeights","newHeights","heightsUpdated","ref","foundToast","startToastHideTimeout","renderToasts","anchor","isRight","isOffsetCalculated","render","style","transform","className","classNames","isInvisible","isAppearing","onClose","onMouseLeave","defaultProps","renderToast","ToastStyled","ToastIconWrapper","ToastIcon","InfoIcon","ToastHeader","ToastText","CloseButton","CloseIcon","StatusIcon","SwapAvatarsWrapper","ButtonWrapper","NotifyToast","button","statusIcon","confirmed","status","onClick","request","axios","baseURL","MOONPAY_API_URL","baseParams","apiKey","MOONPAY_API_KEY","MoonpayProvider","injectable","_abortController","assert","MOONPAY_SIGNER_URL","baseCurrencyAmount","quoteCurrencyAmount","baseCurrencyCode","quoteCurrencyCode","abort","AbortController","fixed","regionalPricing","signal","response","mes","fiatCurrency","cryptoCurrency","BuyService","_provider","input","output","baseCurrencyAmountForRequest","FiatCurrency","currency","quoteCurrencyAmountForRequest","CryptoCurrency","moonpayCode","getByQuote","quoteCurrencyPrice","feeAmount","networkFeeAmount","totalAmount","ExchangeOutput","getPrice","exchangeRate","getAllCurrencies","currencies","minCryptoAmount","currencyItem","code","minBuyAmount","minFiatAmount","getMoonpayKeysAreSet","LocationService","singleton","_location","_history","_removeListener","makeObservable","observable","_assertHistory","listen","action","history","_listenHistory","pathTemplate","_assertLocation","match","matchPath","pathname","props","fromPage","go","BuyViewModel","_buyService","_solanaService","_locationService","_tokensRepository","isShowIframe","crypto","loadingState","_timer","ExchangeInput","LoadableState","areMoonpayConstantsSet","computed","cryptoCurrenciesForSelect","setAmount","setIsShowIframe","swap","_addReactions","_startUpdating","_stopUpdating","addReaction","reaction","_getSymbolFromParams","_setCryptoCurrency","fireImmediately","_update","_changeOutput","_setLoadingState","convert","getParams","getExchangeRate","getMinAmount","newMinFiatAmount","numberToString","max","maximumFractionDigits","runInAction","price","networkFee","processingFee","purchaseCost","total","SOL","USDC","getTokenWithMint","newAmount","ViewModel","CardOriginal","Card","forwardRef","forwardedRef","Header","Title","Action","Content","WidgetOriginal","title","Widget","TitleWrapper","BackLink","IconWrapper","IconStyled","WidgetPageOriginal","isTable","first","previous","notLast","to","WidgetPage","BottomWrapper","WidgetPageWithBottomOriginal","backTo","WidgetPageWithBottom","WidgetPageBuy","currencyCode","lockAmount","MoonpayIframeWidget","observer","viewModel","event","trackEvent","Last_Screen","useTrackEventOpen","urlWithParams","expr","walletAddress","pubkeyBase58","entries","encodeURIComponent","allow","frameBorder","width","src","MoonpayButton","disabled","full","numberToFiatString","ModalType","ModalService","modals","_modalIdCounter","_promises","openModal","closeModal","closeTopModal","modalType","modalId","promise","dialogInfo","last","ListMobileViewModel","_modalService","ListMobile","onCloseByWrapper","useViewModel","modalPromise","SHOW_MODAL_SELECT_LIST_MOBILE","items","closedByItem","Value","CaretIcon","Selector","ItemsMobileWrapper","DropDownList","Select","mobileListTitle","selectorRef","useRef","handleAwayClick","setIsOpen","handleSelectorClick","onToggle","Children","child","isValidElement","cloneElement","close","isOpen","isLoading","CheckIcon","SelectItem","onItemClick","isSelected","InfoWrapper","Line","Text","Item","Normal","CurrencySelect","useHistory","handleItemClick","nextCurrency","itemCurrency","AccordionDetails","Accordion","AccordionTitle","noContentPadding","accordion","list","rows","row","titleClassName","isArray","Details","titleBottomName","titleBottomValue","ArrowsIcon","ButtonStyled","AmountTypeButton","WrapperLabel","Prefix","Input","DECIMAL_ONLY","InputAmount","placeholder","useUpdateEffect","setLocalValue","val","localValue","isText","inputMode","autoComplete","autoCorrect","spellCheck","onChange","InputWrapper","Inputs","useLayoutEffect","isFiatInputCurrency","Defaults","buttonAmountFormatted","numberToTokenString","MoonpayWidget","NavButton","IconBlock","NavIcon","StoreIcon","Name","NavLinkMenu","Separator","LeftNavMenu","handleAppLinkClick","store","appStorePath","as","target","playStorePath","Avatar","Top","Username","Bottom","Address","CopiedText","CopyIcon","CopyWrapper","ProfileWidget","username","copied","navigator","setCopied","ColumnLeftSticky","ColumnLeft","HEADER_HEIGHT","isEnabled","Features","scrollElement","prevWidth","getScrollbarWidth","containerDiv","document","createElement","innerHTML","firstElementChild","body","append","offsetWidth","clientWidth","listeners","scrollbarWidth","innerWidth","useWidthWithoutScrollbar","currentRef","current","addEventListener","lastIndexOf","splice","removeEventListener","ScrollFix","MainScrollFix","Container","ColumnsWrapper","ColumnRightWrapper","ColumnRight","DesktopLayoutOrigin","isTablet","isDesktop","breadcrumb","DesktopLayout","React","ScrollFixContainer","MainContainer","LogoLink","LogoImg","BreadcrumbWrapper","BackIcon","LayoutViewModel","notificationService","SHOW_MODAL_ACTIONS_MOBILE","layoutViewModel","SHOW_MODAL_CHOOSE_BUY_TOKEN_MOBILE","MobileFooterTabs","showMessages","ActionWrapper","MobileHeader","ScrollFixStyled","MobileLayout","LayoutOriginal","mobileAction","Helmet","Layout","Buy","HomeViewModel","walletsRepository","nameService","isWalletReady","isBalanceLoading","changeUsername","nativeWallet","_getUsername","getName","dataObservable","SDFetcherState","partialResult","equityValue","amountInCurrentFiat","NavButtonIcon","NavButtons","WrapperCard","RocketImg","Description","ButtonsWrapper","NavButtonsStyled","NavButtonStyled","EmptyWalletView","handleButtonClick","route","BalanceWrapper","Strong","Balance","BalanceView","domain","WalletImg","Desktop","Mobile","NavButtonsMenuStyled","NavButtonsMenu","menuRef","onScroll","throttle","menuBottomEdge","setStuck","stuck","StaticSectionsCollectionViewStyled","SwipeActionButton","ActionsBehind","SwipeToRevealActions","handlers","useSwipeable","onSwipeStart","eventData","setIsScrolling","onSwiped","onSwiping","setIsExpanded","trackMouse","actions","isExpanded","MenuStyled","TokenMenu","isHidden","vertical","WrapperLink","TokenMenuStyled","BaseWalletCell","isPlaceholder","onToggleClick","shouldHasSwipe","SwipeOrFragment","HidedWalletCell","onShowClick","ChevronIcon","ChevronWrapper","HiddenWalletsSection","customFilter","isHiddenWalletsShown","renderPlaceholder","renderItem","handleShowClick","VisibleWalletCell","onHideClick","WalletsSection","handleHideClick","WalletsCollectionView","Home","UnauthorizedError","ParamsMissingError","InvalidEndpointError","UnknownError","OtherError","RenVMError","reason","lhs","rhs","Instance","isSameInstance","MintTransactionInput","txid","txindex","ghash","gpubkey","nhash","payload","phash","gHash","gPubkey","nHash","pHash","txIndex","toURLBase64","sendTo","paramsMissing","selector","version","v2","Network","chain","lightNode","gatewayRegistry","genesisHash","p2shPrefix","Outpoint","hash","ShardState","Type","pubKeyScript","Shard","pubKey","shard","Chain","burnFee","mintFee","Fees","BTCValue","gasCap","gasLimit","gasPrice","latestHeight","minimumAmount","V","BTC","T","State","ResponseQueryBlockState","mintTokenSymbol","btc","shards","ResponseQueryConfig","confirmations","maxConfirmations","registries","whitelist","ResponseQueryTxMint","txStatus","out","in","Direction","ResponseSubmitTxMint","chainName","direction","capitalizeFirstLetter","BurnDetails","confirmedSignature","recipient","u64","BurnAndRelease","rpcClient","burnTo","_rpcClient","_chain","_mintTokenSymbol","_version","_burnToChainName","submitBurn","burnDetails","signatureToData","nonceBuffer","_getNonceBuffer","BN","generateNHash","generatePHash","sHash","generateSHash","generateGHash","addressToBytes","mintTx","fromBuffer","Uint8Array","txHash","_selector","fromState","submitTx","toArrayLike","bech32","words","concat","base58","internalError","Session","createdAt","endAt","_generateNonce","floor","setHours","getHours","json","sessionDay","padStart","LockAndMint","destinationAddress","session","_destinationAddress","_session","getAssociatedTokenAddress","tokenGatewayContractHex","fromHex","selectPublicKey","gatewayAddress","createAddressArray","hash160","transactionHash","reverseHex","dataToAddress","buildCancellablePromise","capture","queryMint","revert","amountOut","submitMint","responseQueryMint","ValidationStatusType","BlockstreamInfoStatus","Transform","blockHash","IncomingTransaction","ValidationStatus","valid","invalid","ProcessingTx","isProcessing","receivedAt","oneVoteAt","twoVoteAt","threeVoteAt","confirmedAt","submittedAt","mintedAt","validationStatus","convertToBalance","vout","maxVote","minted","submitted","received","RenVMChainType","to32Bytes","bn","repeat","fixSignatureSimple","s","sBN","BigNumber","Ox","vFixed","gt","secp256k1n","switchV","signatureToBuffer","SECP256K1_INSTRUCTION_LAYOUT","BufferLayout","RenProgram","gatewayAccount","tokenMint","recipientTokenAccount","mintLogAccount","mintAuthority","TransactionInstruction","isSigner","isWritable","SolanaSDKPublicKey","ethAddress","rawAddress","recoveryId","ethAddressLength","substr","ETHEREUM_ADDRESS_BYTES","ethAddressOffset","SIGNATURE_OFFSETS_SERIALIZED_SIZE","signatureOffset","messageDataOffset","instructionData","span","encode","numSignatures","signatureInstructionIndex","ethAddressInstructionIndex","messageDataSize","messageInstructionIndex","fill","Secp256k1Program","burnLogAccountId","SolanaChain","gatewayRegistryData","client","apiClient","gatewayStateKey","selectors","gateways","resolveTokenGatewayContract","getSPLTokenPubkey","getAssociatedTokenAddressSync","toBytes","prepareTransaction","preparedTransaction","sendTransaction","fromBase64","valueIn","valueOut","_sig","sig","_siga","fixedSig","gatewayAccountId","renVMMessage","buildRenVMMessage","keccak256","mintInstruction","pseudoCancellable","decodedTo","GatewayStateDataLayout","gatewayState","SolanaSDKError","secpInstruction","createInstructionWithEthAddress2","renVMAuthority","amountNew","accountNew","burnCount","addn","burnCheckedInstruction","burnInstruction","MintInfo","bufferInfo","getSignaturesForAddress","signatures","SolanaError","isAlreadyInUseSolanaError","stateKey","gatewayRegistryStateKey","GatewayRegistryDataLayout","preencode","toArray","struct","bool","u8","u64borsh","vec","cancellableAxios","config","cancelToken","Cancellation","CancellablePromise","makeBody","method","jsonrpc","RpcClient","_emptyParams","log","timeout","SECONDS","URL","invalidEndpoint","Logger","LogEvent","url","statusCode","isValidStatus","unknown","urlString","isTestnet","fetch","plainToInstance","call","RPCMethod","mintParamsType","queryBlockState","blockState","mul","BurnAndReleasePersistentStore","userDefaultKeyForSubmitedBurnTransactions","_userDefaultKeyForSubmitedBurnTransactions","_getFromUserDefault","currentValue","detail","_saveToUserDefault","DestinationChain","Cache","burnAndRelease","BurnAndReleaseServiceImpl","chainProvider","destinationChain","persistentStore","_chainProvider","_destinationChain","_persistentStore","_cache","_reload","_releaseUnfinishedTxsFromPersistentStore","getTransactionFee","getAccount","_getBurnAndRelease","submitBurnTransaction","persistNonReleasedTransactions","_release","markAsReleased","save","nonReleasedTransactions","getNonReleasedTransactions","getBurnState","promiseRetry","retry","release","forever","maxTimeout","hasOwn","hasOwnProperty","isRetryError","cancellablePromiseRetry","operation","attempt","number","retried","errcode","LockAndMintServiceImpl","mintToken","refreshingRate","showLog","txSubmittedCallback","_mintToken","_refreshingRate","_showLog","_txSubmittedCallback","_gatewayAddressResponse","_lockAndMint","_tasks","delegate","_clean","isValid","_resume","saveSession","clearAll","markAllTransactionsAsNotProcessing","lockAndMintServiceUpdated","processingTransactions","task","lockAndMintServiceWillStartLoading","generateGatewayAddress","saveGatewayAddress","previousTask","submitIfNeededAndMintAllTransactionsInQueue","add","observingTask","_getIncommingTransactionsAndMint","lockAndMintServiceLoaded","lockAndMintServiceWithError","getIncomingTransactions","incommingTransactions","confirmedTxIds","date","blocktime","blockTime","toNumber","_tx","markAsConfirmed","markAsReceived","groupedTransactions","grouped","confirmedAndSubmittedTransactions","transactionsToBeProcessed","markAsProcessing","submitIfNeededAndMint","markAsInvalid","lockAndMint","getDepositState","submitMintTransaction","markAsSubmitted","getProcessingTransactionByTxid","isAlreadyMintedError","markAsMinted","MintToken","LockAndMintServicePersistentStore","userDefaultKeyForSession","userDefaultKeyForGatewayAddress","userDefaultKeyForProcessingTransactions","_userDefaultKeyForSession","_userDefaultKeyForGatewayAddress","_userDefaultKeyForProcessingTransactions","fromJSON","instanceToPlain","_save","eqn","_clearFromUserDefault","modify","saveProcessingTransactions","BurnAndReleasePersistentStoreService","mainnet","testnet","RpcClientOriginal","RenVMSolanaChainProvider","_apiClient","BurnAndReleaseService","bitcoin","isDev","localMnemonic","REACT_APP_APP_LOCAL_WALLET_MNEMONIC","getMintNotificationRenderer","LockAndMintServicePersistentStoreOriginal","LockAndMintService","_notificationService","txAmountStr","notifyTransactionIsWaitingForMint","MainViewModel","_solanaModel","_burnAndRelease","initialize","resume","end","Main","reload","pad","getFormattedHMS","milliseconds","seconds","minutes","hours","millisecondsToHMS","ReceiveBitcoinViewModel","_lockAndMintService","timer","secondsPassed","processingTxs","sessionEndDate","remainingTime","isFetchingFee","_bind","createSession","_updateSessionEndDate","millisecondsRemains","getTime","_checkSessionEnd","getFee","expireCurrentSession","TokenType","ReceiveViewModel","_walletsRepository","_solanaSDK","_receiveBitcoinViewModel","solanaToken","btcToken","tokenType","solana","switchTokenType","getWallets","isRenBTC","acceptConditionAndLoadAddress","SHOW_MODAL_RECEIVE_BITCOIN","LoaderBlock","UserNamedAddressWidgetViewModel","copyToClipboardString","qrElement","copyToClipboardImage","UsernameAddressWrapper","QRCodeWrapper","AddressWrapper","AddressTextStyled","UsernameAddressWidget","medium","hollow","isImageCopyAvailable","ExplorerA","ShareIcon","Inner","Loader","List","Row","MinimumTxAmount","Hint","minTransactionValue","Left","Right","open","right","hideRightIfOpen","AccordionTitleWrapper","AccordionTitlePrimary","AccordionTitleSecondary","AccordionTitleSecondaryValue","titleBottomNameEl","titleBottomValueEl","ListWrapper","valueClassName","Label","Status","Record","time","waitingForConfirmation","ZERO","Cell","processingTx","records","sort","rc1","rc2","sub","prepareRecords","accordionList","renderValue","record","month","year","day","hour","minute","prepareAccordionList","CollectionView","StaticSectionsCollectionView","RenBTCReceivingStatusesViewModel","inject","delay","SDListViewModel","RenBTCReceivingStatuses","ReceiveBitcoin","showReceivingStatuses","href","rel","TOKEN_TYPE_ITEMS","NetworkSelect","avatarSize","getAvatarSize","getToken","typeName","newTokenType","ReceiveSolanaViewModel","_nameService","ReceiveSolana","withNameServiceDomain","WhatTokensCanIReceiveLink","ReceiveToken","isTokenListAvailable","StaticSectionsCollectionVirtualizedView","numberOfLoadingCells","parentRef","_items","transformer","collectionViewItems","SDCollectionViewItem","placeholderIndex","nanoid","emptyCellIndex","renderEmpty","rowVirtualizer","useVirtual","paddingStart","paddingEnd","overscan","position","totalSize","virtualRow","left","start","RoundStopIcon","EmptyErrorOriginal","EmptyError","HintOrigin","Symbol","CellOrigin","borderRadius","renderName","StaticSectionsCollectionVirtualizedViewStyled","searchText","SupportedTokensViewModel","keyword","createRequest","flow","existingSymbols","getTokensList","excludingSpecialTokens","include","search","requestDisposable","newData","firstToken","secondToken","firstTokenPriority","getTokenPriority","secondTokenPriority","hasKeyword","toLowerCase","SupportedTokens","Receive","useRouteMatch","exact","FirstLineWrapper","SecondLineWrapper","FeeLabel","FeeValue","NetworkView","feeInfo","feeValueElement","CautionWrapper","NotificationWrapper","notificationEl","usageStatus","notification","maxUsage","getTokenByNetwork","payingWallet","SendIcon","ActionButton","isDisabled","toFixed","WalletIcon","TokenAvatarWrapper","TokenName","TokenWrapper","EmptyName","WalletSelectorContent","CurrencyMode","ChooseTokenAndAmountErrorType","ChooseTokenAndAmountError","loadingIsNotCompleted","destinationWalletIsMissing","invalidAmount","insufficientFunds","ChooseTokenAndAmountViewModel","SendViewModel","chooseWalletViewModel","sendViewModel","selectedNetwork","currencyMode","calculateAvailableAmount","toggleCurrencyMode","availableAmount","fiat","priceInCurrentFiat","TopWrapper","BalanceText","AllBalance","WalletBalanceIcon","Max","MainWrapper","ChooseTokenAndAmount","vm","balanceText","mode","equityValueLabel","equityValueSymbol","balanceClassName","isAmountEqualMaxBalance","string","groupingSeparator","selectedWallet","showOtherWallets","onWalletChange","SendServiceError","SendRelayMethodType","SendServiceRelayMethod","solanaAPIClient","feeRelayer","_solanaAPIClient","_feeRelayer","context","receiver","payingTokenMint","transactionFee","lamportsPerSignature","mintAddress","isAssociatedTokenUnregister","findSPLTokenDestinationAddress","isUnregisteredAsocciatedToken","_isFreeTransactionNotAvailableAndUserIsPayingWithSOL","expectedFee","SolanaSDK","accountBalances","minimumTokenAccountBalance","feeCalculator","calculateNeededTopUpAmount","payingFeeWallet","payingFeeTokenNew","_getPayingFeeToken","_prepareForSendingToSolanaNetworkViaRelayMethod","payingFeeToken","useFeeRelayer","topUpAndRelayTransaction","FeeRelayerConfiguration","operationType","StatsInfoOperationType","minRentExemption","toLamport","sender","feePayerAddress","isNativeSOL","prepareSendingNativeSOL","prepareSendingSPLTokens","fromPublicKey","transferChecked","addressString","invalidPayingFeeWallet","FeeRelayer","expectedTransactionFee","muln","isFreeTransactionFeeAvailable","SendRelayMethod","relay","SendService","_orcaSwap","_renVMBurnAndReleaseService","_feeRelayerRelaySolanaClient","relayMethod","_contextManager","_sendServiceRelayMethod","default","feeRelayerAPIClient","FeeRelayerAPIClient","FeeRelayerContextManager","checkAccountValidation","others","unit","getCurrentContext","getFeeViaRelayMethod","feeInSOL","gte","calculateFeeInPayingToken","orcaSwap","payingFeeTokenMint","lte","flag","invalidSourceWallet","sendToYourself","sendToSolanaBCViaRelayMethod","TooltipContent","FeeTransactionTooltip","handleChange","setLimit","limit","elContent","iconColor","withClose","TokenAvatarStyled","solPrice","feeAmountToString","payingWalletToString","titles","amountString","autoSetMaximumFractionDigits","LoadableStateType","FeeView","FeesView","receive","_feeString","transferFee","prices","_stringForTransactionFee","getPrices","feeHint","accountCreationFeeIsHidden","eq","accountCreationFee","lten","_stringForAccountCreationFee","otherFeesIsHidden","_otherFees","otherFees","feeAmountInSOL","_stringForOtherFees","payingFeeTokenIsHidden","totalFee","_stringForTotalFee","totalFeeHeader","feeInFiat","AttentionView","ErrorView","shouldHideErrorView","errorText","bitcoinAddress","RegExp","matches","regexes","regex","test","scoped","Lifecycle","SelectAddressViewModel","_pricesService","_sendService","chooseTokenAndAmountViewModel","choosePayingWalletViewModel","selectAddressViewModel","_walletsLoadPromise","LoadableRelay","FeeAmount","hasAvailableWalletToPayFee","getSelectedWallet","getFeeInCurrentFiat","getSelectableNetworks","chooseWallet","enterAmount","selectRecipient","selectNetwork","selectPayingWallet","openConfirmModal","getFees","getFeesInPayingToken","_bindFees","_feeAmountInSol","availableWallets","feeInSPL","getAvailableWalletsToPayFee","when","gtn","SHOW_MODAL_PROCESS_TRANSACTION","ProcessTransaction","sendService","authority","feeInToken","isSimulation","isRenBTCViaBitcoinNetwork","_isRecipientBTCAddress","currentPrice","symbols","dict","networks","getFreeTransactionFeeLimit","_send","clearRecipient","clearSearching","isTestNet","SHOW_MODAL_CONFIRM_SEND","RecipientIcon","ClearWrapper","ClearIcon","RecipientView","onClearClick","shouldShowDescriptionLabel","elIcon","isWarning","elTitle","gray","elDescription","RecipientCell","onRecipientClick","RecipientsCollectionView","SelectAddressErrorType","RecipientsListViewModel","_sendViewModel","_preSelectedNetwork","searchString","isSearchingByAddress","_findRecipientBy","_findRecipientsBy","getOwners","owners","hasNoFunds","_findAddressInBitcoinNetwork","_findAddressInSolanaNetwork","InputState","SelectAddressError","chooseTheRecipientToProceed","chooseTheTokenToPayFees","calculatingFees","pleaseChooseAnotherOne","insufficientFundsToCoverFees","yourAccountDoesNotHaveEnoughToCoverFeesNeedsAtLeast","neededAmount","yourAccountDoesNotHaveEnoughToCoverFees","recipientsListViewModel","preSelectedNetwork","inputState","searching","recipientSelected","sourceWallet","lt","SearchIcon","ToInput","AddressInputView","inputRef","isFocused","onFocus","setIsFocused","onBlur","CommonWrapper","RecipientsCollectionViewStyled","SelectAddress","useMount","isSearching","shouldHideNetwork","Send","SettingsViewModel","walletModel","locationService","setFiat","setAppearance","setHideZeroBalances","setUseFreeTransactions","Fiat","clearCurrentPrices","fetchAllTokensPriceInWatchList","appearance","ItemsWrapper","ItemTitle","ItemAction","LogoutWrapper","Logout","CurrencyItem","Capitalize","AccordionItem","MobileButtons","FIATS","Settings","handleNetworkClick","warning","alt","cursor","checked","SettingsNetworkViewModel","setAPIEndpoint","apiEndpoint","Radio","RadioButton","RadioButtonsWrapper","RadioButtonItem","SettingsNetwork","currentName","label","VerificationError","ActiveInputField","SwapRelayService","feeRelayerRelaySolanaClient","solanaApiClient","SwapFeeRelayer","SlippageTypeType","SwapError","SwapService","_relayService","_swapRelayService","_feeRelayerContextManager","sourceMint","getTradablePoolsPairs","fromMint","toMint","destinationToken","bestPoolsPair","inputAmount","slippage","_getNetworkFeesForSwappingViaRelayProgram","swapPools","networkFees","liquidityProviderFees","_getLiquidityProviderFees","poolsPair","fees","findPosibleDestinationMints","sourceAddress","sourceTokenMint","destinationTokenMint","payingTokenAddress","incompatiblePoolsPair","getTokenADecimals","_swapViaRelayProgram","allFees","getLiquidityProviderFee","PayingFee","FeeType","intermediaryTokenName","tokenBName","getTokenBDecimals","calculator","calculateSwappingNetworkFees","_isSwappingNatively","neededTopUpAmount","freeTransactionFeeLimit","isFree","numberOfFreeTransactionsLeft","currentUsage","alertTitle","alertDescription","payBy","TokenAccount","fromWalletPubkey","toWalletPubkey","prepareSwapTransaction","sourceToken","preparedTransactions","topUpAndRelayTransactions","additionalPaybackFee","_expectedTransactionFee","totalToken","totalDecimal","_totalToken","totalFees","curr","SlippageType","oneTenth","fiveTenth","one","five","custom","allCases","SwapSettingsViewModel","SwapViewModel","_swapViewModel","possibleSlippageTypes","slippageType","customSlippageIsOpened","feesContent","slippageSelected","customSlippageChanged","feePayingToken","_wallet","tokenLabelText","changeFeePayingToken","_setCustomSlippageIsOpened","selected","setSlippage","valueNew","swapService","chooseSourceWalletViewModel","chooseDestinationWalletViewModel","swapSettingsViewModel","isUsingAllBalance","destinationWallet","tradablePoolsPairs","estimatedAmount","activeInputField","none","minimumReceiveAmount","isSendingMaxAmount","isShowingShowDetailsButton","swapSourceAndDestination","useAllBalance","enterInputAmount","enterEstimatedAmount","walletDidSelect","setActiveInputField","_getPubkey","initialWallet","_networkFeesU64","_networkFees","rounded","getPoolPair","_feesRequest","solWallet","_verify","_swap","swapMAX","swapUSD","metaInfo","_inputAmount","sourceDecimals","destinationDecimals","minimumAmountOut","getMinimumAmountOut","_amount","bestEstimatedAmountU64","bestEstimatedAmount","poolsPairs","bestPools","pair","getOutputAmount","findBestPoolsPairForInputAmount","bestInputAmountU64","bestInputAmount","pow","subn","getInputAmount","findBestPoolsPairForEstimatedAmount","isSelectingSourceWallet","payingToken","swappingIsNotAvailable","sourceWalletIsEmpty","destinationWalletIsEmpty","canNotSwapToItSelf","tradablePoolsPairsNotLoaded","tradingPairNotSupported","inputAmountIsEmpty","inputAmountIsNotValid","estimatedAmountIsNotValid","bestPoolsPairsIsEmpty","isError","couldNotCalculatingFees","feesIsBeingCalculated","payingFeeWalletNotFound","nativeWalletNotFound","transactionFees","notEnoughSOLToCoverFees","feeTotal","totalLamport","feeTotalTokenSymbol","notEnoughBalanceToCoverFees","_isSlippageValid","slippageIsNotValid","maxSlippage","SHOW_MODAL_CONFIRM_SWAP","totalFeesSymbol","FeeTypeEnum","amountInFiat","feePayingTokenSymbol","ActionIcon","SettingsButton","useParams","generatePath","SelectorValue","LabelWrapper","selectedItem","isMobilePopupChild","PenIcon","SlippageView","handleShowSettings","DetailsView","RatesStackView","DetailFeesView","slippageView","feesView","Black","ReceiveAtLeastView","minReceiveAmount","formattedReceiveAmount","fiatPrice","receiveFiatPrice","formattedReceiveFiatAmount","SwitchWrapper","SwitchIcon","SwitchButton","AccountCreationFeeTooltip","classNameStatus","isErrorState","isSendingMax","maxButtonIsHidden","AccountCreationFeeTooltipStyled","WalletView","destinationMints","validMints","excludedSourceWalletPubkey","customFilterFactory","MainSwapView","Swap","GoBackButton","DescriptionList","DescriptionItem","DescriptionView","dangerouslySetInnerHTML","__html","Postfix","InputElement","SlippageInput","onChangeValue","changeValue","newValue","numberValue","setInputValue","onKeyPress","CustomButtonStyled","CustomButtonTitle","CustomSlippageButton","onValueChange","isCustomInputShown","editing","setIsCustomInputShown","slippageValue","SegmentedControl","selectedSegmentIndex","selectedSlippage","SlippageWrapper","SwapSettings","backToPath","SwapPage","mobileHeaderButton","askClipboardWritePermission","permissions","query","setToClipboard","blob","ToastManager","ClipboardItem","clipboard","write","HeaderWrapper","TokenAddress","ExpandWrapper","ExpandIcon","QRCopiedWrapper","QRCopied","DetailRow","FieldGroup","FieldTitle","FieldValue","ShareWrapper","Footer","QRAddressWidgetOrigin","solPublicKey","setIsImageCopyAvailable","handleCopyClick","setIsExpand","isExpand","setIsImageCopied","isImageCopied","isShowDetails","getExplorerUrl","lightGray","setIsShowDetails","QRAddressWidget","memo","EmptyImage","Empty","desc","EmptyTransactionsView","CollectionViewMappingStrategy","where","dictionary","groupBy","_dateFormatter","b","userInfo","dayjs","TitleDate","NSDNewDynamicSectionsCollectionView","sections","collectionViewSections","mapDataToSections","section","onNeedLoadMore","SolanaTransactionRepository","before","getParsedTransaction","getParsedTransactions","DefaultTransactionParser","p2pFeePayers","_p2pFeePayers","_parser","TransactionParserServiceImpl","signatureInfo","accountView","symbolView","feePayers","parsedTrx","ParsedTransaction","slot","blockhash","PriceUpdatingOutput","pricesService","_updatedTransactionWithPrice","ProcessingTransactionsOutput","accountFilter","transactionHandler","_repository","getProcessingTransactions","getProcessingTransaction","leftTime","rightTime","StatusType","unshift","PriceRefreshTrigger","cb","currentPrices","ProcessingTransactionRefreshTrigger","observeProcessingTransactionsAll","HistoryStreamSource","configuration","sequence","next","done","AccountStreamSource","transactionRepository","transactionParser","_account","_symbol","_latestFetchedSignature","_batchSize","_buffer","_isEmpty","_fillBuffer","transactionTime","timestampEnd","getSignatures","newSignatures","EmptyStreamSource","MultipleStreamSource","currentItem","mostFirst","trx","t1","t2","group","nextItems","newResults","cur","reset","HistoryViewModel","_transactionHandler","isPaginationEnabled","accountSymbol","_refreshTriggers","_source","_outputs","_errorRelay","_next","results","firstTrx","rawTime","timeEndFilter","getTransactions","parsedTransactions","trxInfo","res","setAccountSymbol","change","stateObservable","empty","trigger","register","refreshUI","_buildSource","cachedTransactionRepository","cachedTransactionParser","accountStreamSources","newItems","filteredNewData","SDStreamListViewModel","TopStack","TransactionTypeLabel","AmountInFiatLabel","TransactionImageViewStyled","BottomStack","TransactionCell","onTransactionClick","descriptionLabel","transactionTypeLabel","parsedTransactionLabel","isUndefinedTransaction","newWallet","closedWallet","TransferType","truncatingMiddle","imageView","fromOneToOne","oneImage","parsedTransactionIcon","statusImage","amountInFiatLabel","amountInFiatLabelTextColor","amountText","showMinus","amountInTokenLabel","showPlus","History","content","byData","Wrapped","ValueCurrency","ValueOriginal","isSticky","tokenBalance","fiatBalance","WalletActionTypeEnum","TokenInfo","TokenSymbol","Buttons","WrapperFixed","FixedInfoWrapper","TopWidget","widgetRef","handleScroll","setIsShowFixed","useEvent","renderButtons","shortAddress","isShowFixed","WalletActionType","send","WalletDetailViewModel","walletActions","wallets","w","_sendTokens","_swapTokens","SHOW_MODAL_TRANSACTION","WalletDetail","RootViewModel","startObserving","stopObserving","Root","rootViewModel","isAuth","connected","DebugFeatureFlagsManagerViewModel","isOn","featureFlags","DebugFeatureFlagsProvider","feature","FlagRow","readOnly","DebugFeatureFlagsManager","wrapperRef","setIsShown","handleKeyUp","shown","LocationManagerViewModel","setHistory","LocationManager","ModalManagerViewModel","ModalContainer","ModalWrapper","modalsMap","lazy","SHOW_MODAL_TRANSACTION_DETAILS","SHOW_MODAL_ERROR","ModalManager","handleWrapperClick","preparedModals","ModalComponent","fallback","onMouseDown","preset","NotificationManagerViewModel","_heights","_toastsRefs","_bottomOffsets","_checkHeights","_cleanRefs","eraseData","toastId","clientHeight","_calcOffsets","disableDeferredHiding","enableDeferredHiding","DefaultRenderer","NotificationManager","renderedToasts","hideId","WizardSteps","WalletsListViewModel","_connection","_requestConfig","derivationPathValue","derivableTokenAccountPublicKeys","_derivableAccountsNumber","idx","derivePublicKeyFromSeed","Wallet","getWatchList","addToWatchList","fetchPrices","Connection","_updatePrices","_mapPrices","overrideData","walletsNew","createList","CREATE_START","CREATE_CONFIRM_MNEMONIC","CREATE_SET_PASSWORD","restoreList","RESTORE_START","RESTORE_PASSWORD","RESTORE_ACCOUNTS","AuthViewModel","walletListsViewModel","_walletModel","authInfo","initialCreateMnemonic","initialRestoreMnemonic","defaultState","isRestore","isCreate","showBackButton","connecting","setCreateStart","setRestoreStart","previousStep","nextStep","setPassword","setDerivationPath","derivationPath","_fetchWallets","currentIdx","_getCurrent","_getList","FINAL","storageInfo","connectAdaptor","MnemonicAdapterName","adaptorName","mnemonicToSeed","indexOf","fetchWallets","bip39","MnemonicAdapter","DERIVATION_PATH","LoaderStyled","Logo","LoaderWide","Back","WalletTitle","BackStyled","TitleBold","AppImg","TabButton","Navigate","MenuContainer","ContentContainer","CommonLayout","elBanner","elNavigation","showNavigation","isActive","elHead","Button","Background","ButtonClose","OffPasswordModal","dark","Desc","SwitcherLabel","SwitcherText","Final","isShowModal","nextIsSave","setIsShowModal","setIsSave","WarningIcon","ErrorHint","noIcon","EyeWrapper","EyeIcon","REGEX_PASSWORD","PasswordInput","isShowPassword","setIsShowPassword","SubTitle","CreatePassword","CreatePasswordHint","RulesWrapper","StepsWrappers","Step","RulesList","Rule","RepeatPassword","Password","validatePassword","isMinLength","counter","isLowerCase","isUpperCase","isNumber","prev","orange","elRules","setPasswordRepeat","setHasPasswordRepeatError","hasPasswordRepeatError","PasteMnemonic","PasteMnemonicHint","MnemonicWrapper","MnemonicTextarea","ConfirmMnemonic","validateMnemonic","setHasError","isNextDisabled","userMnemonic","onInput","setUserMnemonic","hasError","CheckboxIcon","Checkbox","PleaseText","SecurityKey","SecurityKeyHint","CheckboxWrapper","Mnemonic","nextChecked","setChecked","SocialButton","ArrowIcon","Delimiter","DelimiterText","SecurityWrapper","RestoreOptions","handleConnectByClick","extensionName","nextMnemonic","leading","trailing","valueTrimmed","setMnemonic","Wizard","DerivableAccounts","Auth","widedesktop","mobileLandscape","mobile","useBreakpoint","breakpoint","mq","setIsBreak","DrawerBg","DrawerMenu","MenuLink","Drawer","onDrawerClose","ButtonLink","ButtonA","ButtonWeb","glow","ButtonIOS","GradientWrapper","FeaturesWrapper","FeaturesColumn","Feature","FeatureTitle","FeatureDescription","FooterWrapper","BackgroundBlack","DelimiterSection","Middle","MiddleContainer","LogoWrapper","LogoP2P","DelimiterLogo","HackathonWrapper","Curves","CarouselWrapper","Carousel","Selectors","Icon","SelectorName","SlideImage","TextWrapper","TextContent","Functions","handleClick","nextSlide","newSlides","slides","slide","setActiveSlide","setSlides","activeSlide","HamburgerIcon","onDrawerToggle","TitleGreen","Navigation","Nav","CarouselMobile","carouselRef","element","scrollListener","windowScroll","totalWidth","setScrollProgress","count","selectedDotValue","scrollProgress","behavior","ItemWrapper","ArrowIconWrapper","Dots","Dot","ITEMS","oneImg","twoImg","threeImg","fourImg","CarouselDesktop","handleSelectToken","setActiveIndex","level","renderItems","activeIndex","Bold","Under","TextTitle","TextTitleBold","TextBold","Window","YouCan","Landing","handleDrawerToggle","setIsDrawerOpen","ProtectedRoute","redirect","AuthRequiredRoute","onConnect","walletPublicKey","keyToDisplay","substring","onDisconnect","CoreProviders","networkConfigs","initialState","queryClient","QueryClient","Providers","appId","autoBoot","autoBootProps","QueryClientProvider","localizedFormat","App","Router","HashRouter","basename","component","AuthTrial","Jazzicon","jsNumberForAddress","diameter","WrappedBy","TokenAvatar","setIsDead","inputToken","commonAttr","foundToken","isWrapped","wrappedTags","isNotExists","iconsMap","arrow","appStore","arrowTriangle","caret","check","branch","checkmark","chevron1","chevron","chevronRounded","copy","cross","db","bucket","gear","googlePlay","more","arrowDown","arrowLeft","eyeHide","eye","external","sendMessage","searchOld","settings","sun","swapBordered","lock","logout","pen","plug","plus","qr","question","roundStop","questionCircle","walletOld","attention","clock","freeTx","kebab","oppositeArrows","storeIcon","arrowSwap","clockSend","successSend","errorSend","rocket","validProps","prop","isPropValid","viewBox","xlinkHref","light","lightBlue","link","big","Toggler","CheckboxHidden","Switch","MoreIcon","MoreIconWrapper","Menu","handleMenuClick","MenuItem","QuestionIcon","Anchor","LaagTooltip","useHover","hideOnScroll","onTouchStart","anchorProps","onTouchEnd","useLayer","placement","overflowContainer","possiblePlacements","snap","auto","arrowOffset","triggerOffset","onOutsideClick","renderLayer","elTooltipAnchor","elAnchor","elClose","isOver","backgroundColor","angle","initAmplitude","Sentry","dsn","integrations","environment","tracesSampleRate","require","ReactDOM","FiatType","usd","eur","cny","vnd","rub","gbp","notRequested","loaded","disposable","flush","refresh","accept","cancelRequest","_oldData","_token","liquidityProviderFee","orderCreationFee","depositWillBeReturned","networkFeesAll","depositFee","deposit","_fees","TransactionStatusType","TransactionStatus","numberOfConfirmed","_numberOfConfirmed","_error","sending","numberOfConfirmations","maxConfirmed","finalized","PendingTransaction","sentAt","writtenToRepository","rawTransaction","makeAutoObservable","constructor","TransferInfo","destinationAuthority","rawAmount","_authority","SwapInfo","SENTRY_DSN_ENDPOINT","SENTRY_ENVIRONMENT","SENTRY_TRACES_SAMPLE_RATE","SENTRY_RELEASE","ObservableReactionContainer","reactions","removeAllReactions","afterReactionsRemoved","disposer","pullAt","reactionDisposer","initGuard","onInitialize","onEnd","Model","initialData","offset","_isLastPageLoaded","fetchNext","updateItem","_newData","mappedData","customSorter","predicate","itemsChanged","SDViewModel","initializing","isFetchable","handleNewData","handleError","setDefaults","SDStreamViewModel","handleData","force","finally","GlobalContextService","isSSR","globalContext","objectsStored","isWindowDefined","global","STATIC_CONTEXT_ID","GLOBAL_CONTEXTS_ID","_instance","gcs","Find","PutInGlobal","FindInGlobal","isGlobalDefined","globalContextStore","Get","objectName","RemoveFromGlobal","_container","memoize","globalContainer","container","DependencyService","useValue","isFunction","registerSingleton","useClass","lifecycle","GetDebug","hasIn","isString","isRegistered","mountCountKey","reactInitKey","getMountCount","setMountCount","useFactory","instanceCachingFactory","_dependencyContainer","isEmpty","hasReactInitKey","setReactInitKey","mountCount","decrementMountCount","removeReactInitKey","SolanaModel","setUpConnection","setUpProvider","WalletAdaptorService","PhantomWalletAdapter","SolletWalletAdapter","SolletExtensionWalletAdapter","WalletModel","walletAdaptorService","_mnemonicAdapter","adaptors","selectedAdaptor","_adaptors","WalletAdapterNetwork","_restoreLocal","signAllTransactions","signTransaction","_previousAdaptorKey","disconnect","setupAdaptors","_getAdaptors","chosenAdaptor","adaptor","connect","_saveAdaptorName","autorun","createReactions","adapter","removeAllListeners","newAdaptors","setUpAdaptor","getAdaptors","getLocalSigner","localSinger","localAdaptor","_reloadableAdaptors","PhantomWalletName","property","descriptor","TypeError","_connecting","_readyState","WalletReadyState","_keypairDB","_extractableKeys","_encryptAlgo","_getKeyPair","rsaKeypair","chipherString","_privateStorageKey","subtle","decrypt","privateKey","keyPair","SolanaKeypair","secretKey","partialSign","_noKeypairError","_removeLocalAuthData","getKeyPairFromSeed","walletIndex","_saveCurrentSecretKey","_saveEncryptedMnemonicAndSeed","encrypt","ciphertext","cipherString","_mnemonicStorageKey","_getDB","STORE_NAME","KEYPAIR_KEY","getDB","keypair","generateKey","modulusLength","publicExponent","put","_generateEncryptedTextAsync","_deriveEncryptionKey","BaseMessageSignerWalletAdapter","mnemonicStrength","Deprecated","Bip44","Bip44Change","derivedPrivateKey","bip32","derivePath","ed25519","deriveSeed","openDB","upgrade","createObjectStore","snapshot","R","headerString","el1","el2","freeFee","descriptions","description","withFiat","formatAmount","formatTotalFees","DetailRatesView","fromRate","rate","sourceSymbol","destinationSymbol","formattedFiatPrice","toRate","BaseWrapper","WrapperFromOneToOne","WrapperIcon","TransactionIcon","StatusWrapper","TransactionImageView","_wrapped","getSignature","FeeRelayerError","_baseUrlString","Relay","requestType","_urlRequest","responseType","StatsInfoDeviceType","ErrorType","StatsInfo","deviceType","operation_type","device_type","FeeRelayerRequestType","_params","UsageStatus","maxAmount","amountUsed","forNextTransaction","FeeRelayerContext","minimumRelayAccountBalance","relayAccountStatus","toJSON","_owner","_feeRelayerAPIClient","_context","FeeRelayerContextManagerError","invalidContext","_loadNewContext","newContext","getMinimumBalanceForRentExemption","AccountInfo","getLamportsPerSignature","getFeePayerPubkey","getRelayAccountStatus","RelayProgram","user","requestFreeFeeLimits","asUsageStatus","RelayAccountStatusType","FeeLimitForAuthorityResponse","limits","processedFee","maxCount","useFreeFee","use_free_fee","max_amount","max_count","period","secs","nanos","processed_fee","total_amount","TopUpWithSwapParams","userSourceTokenAccountPubkey","sourceTokenMintPubkey","userAuthorityPubkey","topUpSwap","buildNumber","statsInfo","user_source_token_account_pubkey","source_token_mint_pubkey","user_authority_pubkey","top_up_swap","fee_amount","RelayTransactionParam","pubkeys","recentBlockhash","compileMessage","compiledInstruction","RequestAccountMeta","pubkeyIndex","isAccountSigner","isAccountWritable","RequestInstruction","programIndex","programIdIndex","idxString","findSignature","program_id","is_signer","is_writable","SwapData","Spl","SplTransitive","DirectSwapData","TransitiveSwapData","transitTokenMintPubkey","needsCreateTransitTokenAccount","transit_token_mint_pubkey","needs_create_transit_token_account","accountPubkey","authorityPubkey","transferAuthorityPubkey","sourcePubkey","destinationPubkey","poolTokenMintPubkey","poolFeeAccountPubkey","amountIn","account_pubkey","authority_pubkey","transfer_authority_pubkey","source_pubkey","destination_pubkey","pool_token_mint_pubkey","pool_fee_account_pubkey","amount_in","minimum_amount_out","SwapTransactionSignatures","userAuthoritySignature","transferAuthoritySignature","user_authority_signature","transfer_authority_signature","RelayAccountStatus","_balance","notYetCreated","created","FeeRelayerRelaySolanaClient","solanaModel","getRecentBlockhash","relayAccountAddress","SolanaSDKClass","DefaultFeeRelayerCalculator","_calculateMinTopUpAmount","ltn","clone","expectedTopUpNetworkFee","expectedTransactionNetworkFee","neededTopUpNetworkFee","neededTransactionNetworkFee","neededAmountWithoutCheckingRelayAccount","relayAccountBalance","transactionNetworkFee","tradableTopUpPoolsPair","topUpPools","getInputAmountSlippage","FeeRelayerConstants","topUpSlippage","_solanaApiClient","_deviceType","_buildNumber","expectedFees","_checkAndTopUp","relayTransaction","topUpAmount","needsCreateUserRelayAddress","_prepareForTopUp1","prepareResult","topUpParams","topUp","targetAmount","forceUsingTransitiveSwap","calculateExpectedFeeForTopUp","pools","directSwapPools","transitiveSwapPools","transitToken","TransitTokenAccountAnalysator","_prepareForTopUp","userAuthorityAddress","userRelayAddress","needsCreateUserRelayAccount","transitTokenAccountAddress","topUpTransaction","ownerSignature","topUpSignatures","swapData","userSourceTokenAccountAddress","sourceTokenMintAddress","associatedTokenAddress","SystemProgram","fromPubkey","toPubkey","_prepareSwapData","minAmountOut","userTransferAuthority","transferAuthorityAccount","swapNew","userAuthority","transitTokenAccount","transitTokenMint","Transaction","expectedFeeNew","calculateTransactionFee","transferAuthority","signedTransaction","newTransferAuthority","Account","pool","minAmountOutNew","getSwapData","firstPool","secondPool","firstPoolAmountIn","secondPoolAmountIn","secondPoolAmountOut","paybackFee","preparedTransactionNew","findProgramAddressSync","getUserRelayAddress","userTemporarilyWSOLAddress","getUserTemporaryWSOLAddress","_topUpWithSPLSwapDirectInstruction","userRelayAccount","userSourceTokenAccount","userTemporaryWsolAccount","swapProgramId","swapAccount","swapAuthority","swapSource","swapDestination","poolTokenMint","poolFeeAccount","_topUpWithSPLSwapTransitiveInstruction","userDestinationTokenAccount","swapFromProgramId","swapFromAccount","swapFromAuthority","swapFromSource","swapFromDestination","swapFromPoolTokenMint","swapFromPoolFeeAccount","swapToProgramId","swapToAccount","swapToAuthority","swapToSource","swapToDestination","swapToPoolTokenMint","swapToPoolFeeAccount","transitMinimumAmount","readonly","dataLayout","transitiveSwap","userAuthorityAddressPubkey","sourceAddressPubkey","destinationAddressPubkey","feePayerPubkey","swapFromTokenMint","_splSwapTransitiveInstruction","userTransitTokenAccount","getTransitTokenAccountAddress","DestinationAnalysator","userAccount","destinationOwner","needCreateDestination","getAssociatedSPLTokenAddress","needsCreateDestinationTokenAccount","getTransitTokenMintPubkey","interTokenName","getMint","DefaultSwapFeeRelayerCalculator","feeRelayerCalculator","_swapCalculator","_feeRelayerCalculator","_prepareForTopUpAndSwap","preparedParams","latestBlockhash","buildContext","feeRelayerContext","actionFeesAndPools","sourceAccount","env","SwapTransactionBuilder","swappingFee","tradablePoolsPair","topUpPreparedParam","userSource","associatedToken","checkTransitTokenAccount","checkSource","checkDestination","checkSwapData","buildSwapData","checkClosingAccount","checkSigners","additionalTransaction","makeTransaction","PreparedTransaction","sourceWSOLNewAccount","newAccountNew","destinationNewAccount","userDestinationTokenAccountAddress","newAccountPubkey","space","associatedAddress","createSwapInstruction","userTransferAuthorityPubkey","sourceTokenAddress","destinationTokenAddress","transitTokenAccountAddressNew","tokenAccountA","tokenAccountB","feeAccount","APIClient","configsProvider","configProvider","getData","getConfigs","OrcaInfoResponse","deprecated","programIds","NetworkConfigsProvider","cache","_urlString","OrcaSwapError","STABLE","CONSTANT_PRODUCT","OrcaSwapTokenName","tokenName","_tokenName","Pool","hostFeeAccount","curveType","programVersion","tokenABalance","tokenBBalance","isStable","reversedPool","create","tokenAName","estimatedOutputAmount","divn","TokenSwap","inputAmountLessFee","_getOutputAmount","poolInputAmount","amountInU64","poolOutputAmount","accountBalanceNotFound","estimatedAmountIsTooHigh","amp","ampDoesNotExistInPoolConfig","computeInputAmount","feeDenominator","div","feeNumerator","feeRatioNumerator","feeRatioDenominator","inputAmountLessFees","ceilingDivision","quotient","ownerTradeFeeDenominator","ownerTradeFeeNumerator","inputFees","solanaClient","fromTokenPubkey","toTokenPubkey","fromMintStr","toMintStr","fromTokenPubkeyNew","notFound","prepareCreatingWSOLAccountAndCloseWhenDone","sourceAccountInstructions","AccountInstructions","toTokenPubkeyNew","destinationAccountInstructions","cleanupInstructions","prepareForCreatingAssociatedTokenAccount","couldNotEstimatedMinimumOutAmount","tradingFee","_computeFee","baseAmount","ownerFee","computeOutputAmount","newPoolOutputAmount","dividend","divisor","remainder","mod","ONE","TokenEnum","ProgramIDS","serumTokenSwap","tokenSwapV2","tokenSwap","aquafarm","OrcaInfo","TokenValue","fetchPrice","poolToken","wrapper","InterTokenInfo","outputAmount","isStableSwap","constructExchange","intermediaryTokenAddress","invalidPool","intermediaryTokenAddressNotFound","pool0AccountInstructions","pool0AccountCreationFee","pool1AccountInstructions","pool1AccountCreationFee","estimatedAmountOfPool0","pool0","estimatedAmountOfPool1","pool1","inputAmountOfPool1","inputAmountOfPool0","inputAmountPool1","inputAmountPool0","outputAmountOfPool0","getIntermediaryToken","BalancesCache","balancesCache","PreparedSwapTransaction","routes","tokenNames","OrcaSwap","_solanaClient","_info","_balancesCache","getTokens","getPools","getProgramID","_findAllAvailableRoutes","swapInfo","tokenInfo","fromTokenName","_getTokenFromMint","_findRoutes","toTokenName","currentRoutes","inputAmount0","fee0","inputAmount1","fee1","calculateLiquidityProviderFees","myWalletsMints","minRentExempt","numberOfTransactions","myTokens","isIntermediaryTokenCreatedRequest","intermediaryToken","checkIfAssociatedTokenAccountExists","needsCreateIntermediaryToken","swapInfoMissing","fromDecimals","minRentExemptionRequest","_directSwap","resMinRentExemption","createIntermediaryTokenAndDestinationTokenAddressIfNeeded","wsolAccountInstructions","_transitiveSwap","isDestinationNew","prepareForSwapping","swapTransactions","invalidNumberOfTransactions","prepareAndSend","swapTransaction","txId","_retry","factor","SwapResponse","newWalletPubkey","serializeAndSend","pickBy","validRoutesNames","accountInstructions","additionalSigners","requestCreatingIntermediaryToken","intermediaryTokenMintStr","intermediaryTokenMint","destinationMintStr","unauthorized","initAccountInstructions","destAccountInstructions","fixedPool","temp","fixedTokenName","reversed","allPools","tab","getTokenABalance","tbb","getTokenBBalance","getTokenAccountBalance","pairs","j","tokenA","tokenB","_orderTokenPair","_getPairs","tokenX","tokenY","poolConfig","poolId","firstLegPoolId","intermediateTokenName","secondLegPoolId","_getRoutes","_getAllRoutes","localeCompare","round","SYSVAR_RENT_PUBKEY","ASSOCIATED_TOKEN_PROGRAM_ID","SYSVAR_INSTRUCTIONS_PUBKEY","usdcMint","usdtMint","SPLTokenDestinationAddress","allowOwnerOffCurve","associatedTokenProgramId","TokenOwnerOffCurveError","tags","trySafe","DefaultFeeCalculator","_lamportsPerSignature","_minRentExemption","createdAccount","readUIntBE","SYSTEM_INSTRUCTION_LAYOUTS","closingInstruction","lamportsPerSignatures","_transaction","numRequiredSignatures","getStackTrace","captureStackTrace","_apiMethod","line","fileAndLine","PATH","toLocaleString","APIKeysNames","API_KEYS","rpcpool","APIEndpoint","socketUrl","additionalQuery","_apiKeyName","apiKeyName","clusterApiUrl","endpoints","definedEndpoints","RemoteConfig","_defaultEndpoints","delegateOption","isNativeOption","isNativeRaw","delegatedAmount","closeAuthorityOption","closeAuthority","AccountLayout","EmptyInfo","_data","mintAuthorityOption","_mintAuthority","supply","freezeAuthorityOption","_freezeAuthority","MintLayout","freezeAuthority","OtherFee","TokenAccountBalance","uiAmountString","serializedTransaction","serialize","decodedTransaction","sign","InvalidRequestError","WrappingToken","logoURI","extensions","isNative","_isNative","sollet","wormhole","tokensEqual","coingeckoId","website","serumV3Usdc","defaultSolanaWalletUserInfo","_isHidden","getParsedUserInfo","diffInLamports","nativeSolana","isLiquidity","decode","anotherAccount","couldNotRetrieveAccountInfo","pubkeysNew","tokenAddress","partiallyConfirmed","getSignatureStatus","confirmationStatus","retries","mintAddresses","SPLToken","associatedTokenAccount","feeCalculatorNew","lps","calculateNetworkFee","maxAttemps","numberOfTries","signAndSerialize","sendEncodedTransaction","shouldRetry","simulateTransaction","serializeTransaction","restoredTransaction","serializeAndSendTraditional","getRecentBlockhashRequest","_feePayer","invalidRequest","_recentBlockhash","Keypair","closeAfterward","isAssociatedTokenAddressRegistered","feePayerNew","splDestination","toPublicKey","fromPublicKeyNew","ownerNew","associatedAccount","createATokenInstruction","sendInstruction","realDestination","getAccountInfoThrowable","toTokenMint","tokenPubkey","_tokenPubkey","tokensRepository","TokensRepository","knownWallets","unknownAccounts","supportedTokens","supportedToken","getMultipleMintDatas","mintDatas","unsupported","TokensListParser","TokenListProvider","tokenList","getList","InMemoryTokensRepositoryCache","_tokenCache","_tokenCacheKey","insert","tokenListParser","_tokenListParser","_endpoint","CloseAccountInfo","reimbursedAmount","CreateAccountInfo","spend","transitive","transferType","percent","_percent","requesting","processing","paidByP2POrg","DefaultFeeParseStrategy","confirmedTransaction","_getLamportPerSignature","_getRentException","createTokenAccountInstructions","createWSOLAccountInstructions","closeAccountInstructions","depositAccountsInstructions","numberOfCreatedAccounts","numberOfDepositAccounts","firstPubkey","kRentExemption","rentExemption","kLamportsPerSignature","Decimals","CloseAccountParseStrategy","closedTokenPubkey","preBalances","preTokenBalance","reimbursedAmountLamports","CreationAccountParseStrategy","_extractProgram","initializeAccountInfo","OrcaSwapParseStrategy","_orcaProgramSignatures","getAccountInfoOr","destinationAccount","sourceAmountLamports","destinationAmountLamports","P2POrcaSwapWrapperParseStrategy","findLastIndex","iData","_parseToken","resSource","sourceChange","resDest","destinationChange","totalInstructions","resSourceNew","newSourceWallet","newSourceChange","newDestinationWallet","newDestinationChange","addressIndex","accountIndex","preWalletBalance","preBalance","postBalance","postBalances","abs","SerumSwapParseStrategy","_serumInstruction","isUsdxMint","fromAddress","toAddress","fromAmount","toAmount","TransferParseStrategy","_parseSOLTransfer","_parseSPLTransfer","initializeAccountInstruction","myAccount","transferInfo","strategies","feeParserStrategy","errorMessage","logMessages","_parseTransaction","_parseFee","strategy","isHandlable","calculate","BASE_CURRENCY_SYMBOL","Addresses","devnet","Appearance","_Defaults","walletName","hiddenWalletPubkey","unhiddenWalletPubkey","hideZeroBalances","p2pFeePayerPubkeys","useFreeTransactions","makeLocalStorage","defaultFlags","RemoteFeatureFlagsProvider","_RemoteFeatureFlagsProvider","FeatureFlags","_FeatureFlags","primaryProvider","secondaryProvider","_primaryProvider","_secondaryProvider","_DebugFeatureFlagsProvider","setIsOn","setFeatureFlag","NameService","_getNames","names","NotificationService","_queue","_hideTimeouts","_removeTimeouts","_lastId","_noHide","toastParams","_getActiveToastsCount","_showToast","firstToast","_checkQueue","_setToastHideTimeout","idsArray","_removeToasts","_addToast","OrcaSwapService","PricesFetcher","ok","statusText","CoingeckoPricesFetcher","coins","param","coin","pricesResult","current_price","change24h","price_change_24h","percentage","price_change_percentage_24h","PricesStorage","PricesLoadableRelay","oldData","PricesService","_storage","_fetcher","_refreshInterval","_watchList","_currentPrices","initialValue","retrivePrices","_getCurrentPricesRequest","getCurrentPrices","newPrices","savePrices","coinName","RelayService","ConfigKeys","defaultConfig","NetworkSettings","firebaseConfig","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","measurementId","_RemoteConfig","_remoteConfig","isActivated","initializeApp","getRemoteConfig","minimumFetchIntervalMillis","activate","fetchConfig","getAll","_getConfig","asString","asBoolean","getTransferNotificationRenderer","WalletsRepository","_socket","getBalance","getTokenWallets","_mapVisibility","toggleIsHiddenWalletShown","toggleWalletVisibility","_startObserving","_stopObserving","_updateWalletsVisibility","subscribeAccountNotification","_handleAccountNotification","_getNewWallets","newWallets","w1","_unhideWallet","_hideWallet","updateVisibility","_updateVisibility","oldLamportsValue","newLamportsValue","AccountObservableService","_accountSubscriptions","wsEndpoint","isConnected","_rpcWebSocketConnected","subscriptionId","onAccountChange","SolanaService","TransactionHandler","_onNewTransactionEmitter","callbacks","onNewTransaction","observeTransaction","areSomeTransactionsInProgress","sendAndObserve","_updateTransactionAtIndex","processingTransaction","transactionIndex","pt","_observe","_updateRepository","batchUpdate","decreaseBalance","increaseBalance","closingWallet","_this","storedJson","toJS","BlueText","AddressText","TokenBalance","TokenUSD","BaseTokenCellContent","elTokenBalance","BaseWalletCellContent","ChooseWalletViewModel","_myWallets","_staticWallets","otherWallet","setCustomFilter","setStaticWallets","setShowOtherWallets","selectWallet","onWalletClick","SelectorWrapper","DropDownListContainer","DropDownHeader","ChooseWallet","staticWallets","dropdownRef","delayedCheck","checkLoadMore","omit","InfinityScrollHelper","isEmptyCell","SearchIconWrapper","SearchClearWrapper","SearchClearIcon","SearchInputOriginal","debouncedOnChange","SearchInput","RawTransactionBase","_payingWallet","SendTransaction","currrentAmount","txIds","CloseTransaction","solanaSDK","closeTokenAccount","numOfSymbolsRevealed","NotEnoughNumberOfConfirmationsError","BrowserNames","userAgent","CHROME","FIREFOX","SAFARI","OPERA","EDGE","NONE","str","errorCallback","writeText","toBlob","signDisplay","realAmount","nameServiceDomain","numOfSymbolsRevealedInSuffix","cluster","baseUrlWithAddress","amplitude","init","logEvent","SOLANA_BASE_URL"],"sourceRoot":""}